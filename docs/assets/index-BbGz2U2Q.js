(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Tc(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ct={},ri=[],os=()=>{},eb=()=>!1,ra=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Oc=e=>e.startsWith("onUpdate:"),qt=Object.assign,Dc=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},sb=Object.prototype.hasOwnProperty,wt=(e,t)=>sb.call(e,t),X=Array.isArray,oi=e=>oa(e)==="[object Map]",sg=e=>oa(e)==="[object Set]",ct=e=>typeof e=="function",Nt=e=>typeof e=="string",Os=e=>typeof e=="symbol",Pt=e=>e!==null&&typeof e=="object",ng=e=>(Pt(e)||ct(e))&&ct(e.then)&&ct(e.catch),ig=Object.prototype.toString,oa=e=>ig.call(e),nb=e=>oa(e).slice(8,-1),rg=e=>oa(e)==="[object Object]",Cc=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,er=Tc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aa=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},ib=/-(\w)/g,Zs=aa(e=>e.replace(ib,(t,s)=>s?s.toUpperCase():"")),rb=/\B([A-Z])/g,tn=aa(e=>e.replace(rb,"-$1").toLowerCase()),og=aa(e=>e.charAt(0).toUpperCase()+e.slice(1)),$a=aa(e=>e?`on${og(e)}`:""),qs=(e,t)=>!Object.is(e,t),To=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ol=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Dl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ob=e=>{const t=Nt(e)?Number(e):NaN;return isNaN(t)?e:t};let Au;const la=()=>Au||(Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ke(e){if(X(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Nt(n)?ub(n):ke(n);if(i)for(const r in i)t[r]=i[r]}return t}else if(Nt(e)||Pt(e))return e}const ab=/;(?![^(]*\))/g,lb=/:([^]+)/,cb=/\/\*[^]*?\*\//g;function ub(e){const t={};return e.replace(cb,"").split(ab).forEach(s=>{if(s){const n=s.split(lb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function tt(e){let t="";if(Nt(e))t=e;else if(X(e))for(let s=0;s<e.length;s++){const n=tt(e[s]);n&&(t+=n+" ")}else if(Pt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const db="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hb=Tc(db);function ag(e){return!!e||e===""}const lg=e=>!!(e&&e.__v_isRef===!0),P=e=>Nt(e)?e:e==null?"":X(e)||Pt(e)&&(e.toString===ig||!ct(e.toString))?lg(e)?P(e.value):JSON.stringify(e,cg,2):String(e),cg=(e,t)=>lg(t)?cg(e,t.value):oi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],r)=>(s[Fa(n,r)+" =>"]=i,s),{})}:sg(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Fa(s))}:Os(t)?Fa(t):Pt(t)&&!X(t)&&!rg(t)?String(t):t,Fa=(e,t="")=>{var s;return Os(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ge;class fb{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ge,!t&&ge&&(this.index=(ge.scopes||(ge.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ge;try{return ge=this,t()}finally{ge=s}}}on(){++this._on===1&&(this.prevScope=ge,ge=this)}off(){this._on>0&&--this._on===0&&(ge=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function gb(){return ge}let At;const Na=new WeakSet;class ug{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ge&&ge.active&&ge.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Na.has(this)&&(Na.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Iu(this),fg(this);const t=At,s=He;At=this,He=!0;try{return this.fn()}finally{gg(this),At=t,He=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ac(t);this.deps=this.depsTail=void 0,Iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Na.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cl(this)&&this.run()}get dirty(){return Cl(this)}}let dg=0,sr,nr;function hg(e,t=!1){if(e.flags|=8,t){e.next=nr,nr=e;return}e.next=sr,sr=e}function Mc(){dg++}function Ec(){if(--dg>0)return;if(nr){let t=nr;for(nr=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;sr;){let t=sr;for(sr=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function fg(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gg(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Ac(n),mb(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Cl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(mg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function mg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pr)||(e.globalVersion=pr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Cl(e))))return;e.flags|=2;const t=e.dep,s=At,n=He;At=e,He=!0;try{fg(e);const i=e.fn(e._value);(t.version===0||qs(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{At=s,He=n,gg(e),e.flags&=-3}}function Ac(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Ac(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function mb(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let He=!0;const pg=[];function xs(){pg.push(He),He=!1}function Ss(){const e=pg.pop();He=e===void 0?!0:e}function Iu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=At;At=void 0;try{t()}finally{At=s}}}let pr=0;class pb{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ic{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!He||At===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==At)s=this.activeLink=new pb(At,this),At.deps?(s.prevDep=At.depsTail,At.depsTail.nextDep=s,At.depsTail=s):At.deps=At.depsTail=s,yg(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=At.depsTail,s.nextDep=void 0,At.depsTail.nextDep=s,At.depsTail=s,At.deps===s&&(At.deps=n)}return s}trigger(t){this.version++,pr++,this.notify(t)}notify(t){Mc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ec()}}}function yg(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)yg(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ml=new WeakMap,xn=Symbol(""),El=Symbol(""),yr=Symbol("");function te(e,t,s){if(He&&At){let n=Ml.get(e);n||Ml.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new Ic),i.map=n,i.key=s),i.track()}}function _s(e,t,s,n,i,r){const o=Ml.get(e);if(!o){pr++;return}const a=l=>{l&&l.trigger()};if(Mc(),t==="clear")o.forEach(a);else{const l=X(e),c=l&&Cc(s);if(l&&s==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===yr||!Os(h)&&h>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(yr)),t){case"add":l?c&&a(o.get("length")):(a(o.get(xn)),oi(e)&&a(o.get(El)));break;case"delete":l||(a(o.get(xn)),oi(e)&&a(o.get(El)));break;case"set":oi(e)&&a(o.get(xn));break}}Ec()}function Fn(e){const t=_t(e);return t===e?t:(te(t,"iterate",yr),Fe(e)?t:t.map(Kt))}function ca(e){return te(e=_t(e),"iterate",yr),e}const yb={__proto__:null,[Symbol.iterator](){return ja(this,Symbol.iterator,Kt)},concat(...e){return Fn(this).concat(...e.map(t=>X(t)?Fn(t):t))},entries(){return ja(this,"entries",e=>(e[1]=Kt(e[1]),e))},every(e,t){return ds(this,"every",e,t,void 0,arguments)},filter(e,t){return ds(this,"filter",e,t,s=>s.map(Kt),arguments)},find(e,t){return ds(this,"find",e,t,Kt,arguments)},findIndex(e,t){return ds(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ds(this,"findLast",e,t,Kt,arguments)},findLastIndex(e,t){return ds(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ds(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ba(this,"includes",e)},indexOf(...e){return Ba(this,"indexOf",e)},join(e){return Fn(this).join(e)},lastIndexOf(...e){return Ba(this,"lastIndexOf",e)},map(e,t){return ds(this,"map",e,t,void 0,arguments)},pop(){return Pi(this,"pop")},push(...e){return Pi(this,"push",e)},reduce(e,...t){return Pu(this,"reduce",e,t)},reduceRight(e,...t){return Pu(this,"reduceRight",e,t)},shift(){return Pi(this,"shift")},some(e,t){return ds(this,"some",e,t,void 0,arguments)},splice(...e){return Pi(this,"splice",e)},toReversed(){return Fn(this).toReversed()},toSorted(e){return Fn(this).toSorted(e)},toSpliced(...e){return Fn(this).toSpliced(...e)},unshift(...e){return Pi(this,"unshift",e)},values(){return ja(this,"values",Kt)}};function ja(e,t,s){const n=ca(e),i=n[t]();return n!==e&&!Fe(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=s(r.value)),r}),i}const bb=Array.prototype;function ds(e,t,s,n,i,r){const o=ca(e),a=o!==e&&!Fe(e),l=o[t];if(l!==bb[t]){const d=l.apply(e,r);return a?Kt(d):d}let c=s;o!==e&&(a?c=function(d,h){return s.call(this,Kt(d),h,e)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,e)}));const u=l.call(o,c,n);return a&&i?i(u):u}function Pu(e,t,s,n){const i=ca(e);let r=s;return i!==e&&(Fe(e)?s.length>3&&(r=function(o,a,l){return s.call(this,o,a,l,e)}):r=function(o,a,l){return s.call(this,o,Kt(a),l,e)}),i[t](r,...n)}function Ba(e,t,s){const n=_t(e);te(n,"iterate",yr);const i=n[t](...s);return(i===-1||i===!1)&&Rc(s[0])?(s[0]=_t(s[0]),n[t](...s)):i}function Pi(e,t,s=[]){xs(),Mc();const n=_t(e)[t].apply(e,s);return Ec(),Ss(),n}const vb=Tc("__proto__,__v_isRef,__isVue"),bg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Os));function _b(e){Os(e)||(e=String(e));const t=_t(this);return te(t,"has",e),t.hasOwnProperty(e)}class vg{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?Eb:Sg:r?xg:wg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=X(t);if(!i){let l;if(o&&(l=yb[s]))return l;if(s==="hasOwnProperty")return _b}const a=Reflect.get(t,s,ne(t)?t:n);return(Os(s)?bg.has(s):vb(s))||(i||te(t,"get",s),r)?a:ne(a)?o&&Cc(s)?a:a.value:Pt(a)?i?kg(a):ai(a):a}}class _g extends vg{constructor(t=!1){super(!1,t)}set(t,s,n,i){let r=t[s];if(!this._isShallow){const l=Gs(r);if(!Fe(n)&&!Gs(n)&&(r=_t(r),n=_t(n)),!X(t)&&ne(r)&&!ne(n))return l?!1:(r.value=n,!0)}const o=X(t)&&Cc(s)?Number(s)<t.length:wt(t,s),a=Reflect.set(t,s,n,ne(t)?t:i);return t===_t(i)&&(o?qs(n,r)&&_s(t,"set",s,n):_s(t,"add",s,n)),a}deleteProperty(t,s){const n=wt(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&_s(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Os(s)||!bg.has(s))&&te(t,"has",s),n}ownKeys(t){return te(t,"iterate",X(t)?"length":xn),Reflect.ownKeys(t)}}class wb extends vg{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const xb=new _g,Sb=new wb,kb=new _g(!0);const Al=e=>e,Kr=e=>Reflect.getPrototypeOf(e);function Tb(e,t,s){return function(...n){const i=this.__v_raw,r=_t(i),o=oi(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...n),u=s?Al:t?Ro:Kt;return!t&&te(r,"iterate",l?El:xn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Zr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ob(e,t){const s={get(i){const r=this.__v_raw,o=_t(r),a=_t(i);e||(qs(i,a)&&te(o,"get",i),te(o,"get",a));const{has:l}=Kr(o),c=t?Al:e?Ro:Kt;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&te(_t(i),"iterate",xn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=_t(r),a=_t(i);return e||(qs(i,a)&&te(o,"has",i),te(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=_t(a),c=t?Al:e?Ro:Kt;return!e&&te(l,"iterate",xn),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return qt(s,e?{add:Zr("add"),set:Zr("set"),delete:Zr("delete"),clear:Zr("clear")}:{add(i){!t&&!Fe(i)&&!Gs(i)&&(i=_t(i));const r=_t(this);return Kr(r).has.call(r,i)||(r.add(i),_s(r,"add",i,i)),this},set(i,r){!t&&!Fe(r)&&!Gs(r)&&(r=_t(r));const o=_t(this),{has:a,get:l}=Kr(o);let c=a.call(o,i);c||(i=_t(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?qs(r,u)&&_s(o,"set",i,r):_s(o,"add",i,r),this},delete(i){const r=_t(this),{has:o,get:a}=Kr(r);let l=o.call(r,i);l||(i=_t(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&_s(r,"delete",i,void 0),c},clear(){const i=_t(this),r=i.size!==0,o=i.clear();return r&&_s(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Tb(i,e,t)}),s}function Pc(e,t){const s=Ob(e,t);return(n,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(wt(s,i)&&i in n?s:n,i,r)}const Db={get:Pc(!1,!1)},Cb={get:Pc(!1,!0)},Mb={get:Pc(!0,!1)};const wg=new WeakMap,xg=new WeakMap,Sg=new WeakMap,Eb=new WeakMap;function Ab(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ib(e){return e.__v_skip||!Object.isExtensible(e)?0:Ab(nb(e))}function ai(e){return Gs(e)?e:Lc(e,!1,xb,Db,wg)}function Pb(e){return Lc(e,!1,kb,Cb,xg)}function kg(e){return Lc(e,!0,Sb,Mb,Sg)}function Lc(e,t,s,n,i){if(!Pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ib(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?n:s);return i.set(e,a),a}function li(e){return Gs(e)?li(e.__v_raw):!!(e&&e.__v_isReactive)}function Gs(e){return!!(e&&e.__v_isReadonly)}function Fe(e){return!!(e&&e.__v_isShallow)}function Rc(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function Lb(e){return!wt(e,"__v_skip")&&Object.isExtensible(e)&&Ol(e,"__v_skip",!0),e}const Kt=e=>Pt(e)?ai(e):e,Ro=e=>Pt(e)?kg(e):e;function ne(e){return e?e.__v_isRef===!0:!1}function mt(e){return Rb(e,!1)}function Rb(e,t){return ne(e)?e:new $b(e,t)}class $b{constructor(t,s){this.dep=new Ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:_t(t),this._value=s?t:Kt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Fe(t)||Gs(t);t=n?t:_t(t),qs(t,s)&&(this._rawValue=t,this._value=n?t:Kt(t),this.dep.trigger())}}function bt(e){return ne(e)?e.value:e}const Fb={get:(e,t,s)=>t==="__v_raw"?e:bt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return ne(i)&&!ne(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Tg(e){return li(e)?e:new Proxy(e,Fb)}class Nb{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return hg(this,!0),!0}get value(){const t=this.dep.track();return mg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function jb(e,t,s=!1){let n,i;return ct(e)?n=e:(n=e.get,i=e.set),new Nb(n,i,s)}const Gr={},$o=new WeakMap;let gn;function Bb(e,t=!1,s=gn){if(s){let n=$o.get(s);n||$o.set(s,n=[]),n.push(e)}}function Wb(e,t,s=Ct){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=s,c=w=>i?w:Fe(w)||i===!1||i===0?ws(w,1):ws(w);let u,d,h,f,g=!1,m=!1;if(ne(e)?(d=()=>e.value,g=Fe(e)):li(e)?(d=()=>c(e),g=!0):X(e)?(m=!0,g=e.some(w=>li(w)||Fe(w)),d=()=>e.map(w=>{if(ne(w))return w.value;if(li(w))return c(w);if(ct(w))return l?l(w,2):w()})):ct(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){xs();try{h()}finally{Ss()}}const w=gn;gn=u;try{return l?l(e,3,[f]):e(f)}finally{gn=w}}:d=os,t&&i){const w=d,S=i===!0?1/0:i;d=()=>ws(w(),S)}const p=gb(),y=()=>{u.stop(),p&&p.active&&Dc(p.effects,u)};if(r&&t){const w=t;t=(...S)=>{w(...S),y()}}let b=m?new Array(e.length).fill(Gr):Gr;const v=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const S=u.run();if(i||g||(m?S.some((T,E)=>qs(T,b[E])):qs(S,b))){h&&h();const T=gn;gn=u;try{const E=[S,b===Gr?void 0:m&&b[0]===Gr?[]:b,f];b=S,l?l(t,3,E):t(...E)}finally{gn=T}}}else u.run()};return a&&a(v),u=new ug(d),u.scheduler=o?()=>o(v,!1):v,f=w=>Bb(w,!1,u),h=u.onStop=()=>{const w=$o.get(u);if(w){if(l)l(w,4);else for(const S of w)S();$o.delete(u)}},t?n?v(!0):b=u.run():o?o(v.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function ws(e,t=1/0,s){if(t<=0||!Pt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ne(e))ws(e.value,t,s);else if(X(e))for(let n=0;n<e.length;n++)ws(e[n],t,s);else if(sg(e)||oi(e))e.forEach(n=>{ws(n,t,s)});else if(rg(e)){for(const n in e)ws(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ws(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Er(e,t,s,n){try{return n?e(...n):e()}catch(i){ua(i,t,s)}}function qe(e,t,s,n){if(ct(e)){const i=Er(e,t,s,n);return i&&ng(i)&&i.catch(r=>{ua(r,t,s)}),i}if(X(e)){const i=[];for(let r=0;r<e.length;r++)i.push(qe(e[r],t,s,n));return i}}function ua(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ct;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(r){xs(),Er(r,null,10,[e,l,c]),Ss();return}}Ub(e,s,i,n,o)}function Ub(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const ae=[];let es=-1;const ci=[];let $s=null,Qn=0;const Og=Promise.resolve();let Fo=null;function zb(e){const t=Fo||Og;return e?t.then(this?e.bind(this):e):t}function Vb(e){let t=es+1,s=ae.length;for(;t<s;){const n=t+s>>>1,i=ae[n],r=br(i);r<e||r===e&&i.flags&2?t=n+1:s=n}return t}function $c(e){if(!(e.flags&1)){const t=br(e),s=ae[ae.length-1];!s||!(e.flags&2)&&t>=br(s)?ae.push(e):ae.splice(Vb(t),0,e),e.flags|=1,Dg()}}function Dg(){Fo||(Fo=Og.then(Mg))}function Hb(e){X(e)?ci.push(...e):$s&&e.id===-1?$s.splice(Qn+1,0,e):e.flags&1||(ci.push(e),e.flags|=1),Dg()}function Lu(e,t,s=es+1){for(;s<ae.length;s++){const n=ae[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ae.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Cg(e){if(ci.length){const t=[...new Set(ci)].sort((s,n)=>br(s)-br(n));if(ci.length=0,$s){$s.push(...t);return}for($s=t,Qn=0;Qn<$s.length;Qn++){const s=$s[Qn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}$s=null,Qn=0}}const br=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Mg(e){try{for(es=0;es<ae.length;es++){const t=ae[es];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Er(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;es<ae.length;es++){const t=ae[es];t&&(t.flags&=-2)}es=-1,ae.length=0,Cg(),Fo=null,(ae.length||ci.length)&&Mg()}}let se=null,Eg=null;function No(e){const t=se;return se=e,Eg=e&&e.type.__scopeId||null,t}function Il(e,t=se,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&zu(-1);const r=No(t);let o;try{o=e(...i)}finally{No(r),n._d&&zu(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Fc(e,t){if(se===null)return e;const s=ga(se),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Ct]=t[i];r&&(ct(r)&&(r={mounted:r,updated:r}),r.deep&&ws(o),n.push({dir:r,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function rn(e,t,s,n){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(xs(),qe(l,s,8,[e.el,a,e,t]),Ss())}}const qb=Symbol("_vte"),Jb=e=>e.__isTeleport,Nn=Symbol("_leaveCb"),Xr=Symbol("_enterCb");function Yb(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return cs(()=>{e.isMounted=!0}),en(()=>{e.isUnmounting=!0}),e}const Ee=[Function,Array],Kb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ee,onEnter:Ee,onAfterEnter:Ee,onEnterCancelled:Ee,onBeforeLeave:Ee,onLeave:Ee,onAfterLeave:Ee,onLeaveCancelled:Ee,onBeforeAppear:Ee,onAppear:Ee,onAfterAppear:Ee,onAppearCancelled:Ee};function Zb(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Pl(e,t,s,n,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:p,onAppear:y,onAfterAppear:b,onAppearCancelled:v}=t,w=String(e.key),S=Zb(s,e),T=(I,B)=>{I&&qe(I,n,9,B)},E=(I,B)=>{const L=B[1];T(I,B),X(I)?I.every(C=>C.length<=1)&&L():I.length<=1&&L()},R={mode:o,persisted:a,beforeEnter(I){let B=l;if(!s.isMounted)if(r)B=p||l;else return;I[Nn]&&I[Nn](!0);const L=S[w];L&&ti(e,L)&&L.el[Nn]&&L.el[Nn](),T(B,[I])},enter(I){let B=c,L=u,C=d;if(!s.isMounted)if(r)B=y||c,L=b||u,C=v||d;else return;let W=!1;const st=I[Xr]=nt=>{W||(W=!0,nt?T(C,[I]):T(L,[I]),R.delayedLeave&&R.delayedLeave(),I[Xr]=void 0)};B?E(B,[I,st]):st()},leave(I,B){const L=String(e.key);if(I[Xr]&&I[Xr](!0),s.isUnmounting)return B();T(h,[I]);let C=!1;const W=I[Nn]=st=>{C||(C=!0,B(),st?T(m,[I]):T(g,[I]),I[Nn]=void 0,S[L]===e&&delete S[L])};S[L]=e,f?E(f,[I,W]):W()},clone(I){return Pl(I,t,s,n)}};return R}function vr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ag(e,t=!1,s){let n=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===ft?(o.patchFlag&128&&i++,n=n.concat(Ag(o.children,t,a))):(t||o.type!==ls)&&n.push(a!=null?Tn(o,{key:a}):o)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Ig(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ir(e,t,s,n,i=!1){if(X(e)){e.forEach((g,m)=>ir(g,t&&(X(t)?t[m]:t),s,n,i));return}if(ui(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ir(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?ga(n.component):n.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Ct?a.refs={}:a.refs,d=a.setupState,h=_t(d),f=d===Ct?()=>!1:g=>wt(h,g);if(c!=null&&c!==l&&(Nt(c)?(u[c]=null,f(c)&&(d[c]=null)):ne(c)&&(c.value=null)),ct(l))Er(l,a,12,[o,u]);else{const g=Nt(l),m=ne(l);if(g||m){const p=()=>{if(e.f){const y=g?f(l)?d[l]:u[l]:l.value;i?X(y)&&Dc(y,r):X(y)?y.includes(r)||y.push(r):g?(u[l]=[r],f(l)&&(d[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else g?(u[l]=o,f(l)&&(d[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(p.id=-1,xe(p,s)):p()}}}la().requestIdleCallback;la().cancelIdleCallback;const ui=e=>!!e.type.__asyncLoader,Pg=e=>e.type.__isKeepAlive;function Gb(e,t){Lg(e,"a",t)}function Xb(e,t){Lg(e,"da",t)}function Lg(e,t,s=le){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(da(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Pg(i.parent.vnode)&&Qb(n,t,s,i),i=i.parent}}function Qb(e,t,s,n){const i=da(t,e,n,!0);$g(()=>{Dc(n[t],i)},s)}function da(e,t,s=le,n=!1){if(s){const i=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...o)=>{xs();const a=Ar(s),l=qe(t,s,e,o);return a(),Ss(),l});return n?i.unshift(r):i.push(r),r}}const Ds=e=>(t,s=le)=>{(!wr||e==="sp")&&da(e,(...n)=>t(...n),s)},tv=Ds("bm"),cs=Ds("m"),ev=Ds("bu"),Rg=Ds("u"),en=Ds("bum"),$g=Ds("um"),sv=Ds("sp"),nv=Ds("rtg"),iv=Ds("rtc");function rv(e,t=le){da("ec",e,t)}const ov=Symbol.for("v-ndc");function zt(e,t,s,n){let i;const r=s,o=X(e);if(o||Nt(e)){const a=o&&li(e);let l=!1,c=!1;a&&(l=!Fe(e),c=Gs(e),e=ca(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?Ro(Kt(e[u])):Kt(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Pt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}function av(e,t,s={},n,i){if(se.ce||se.parent&&ui(se.parent)&&se.parent.ce)return O(),Oe(ft,null,[ht("slot",s,n&&n())],64);let r=e[t];r&&r._c&&(r._d=!1),O();const o=r&&Fg(r(s)),a=s.key||o&&o.key,l=Oe(ft,{key:(a&&!Os(a)?a:`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function Fg(e){return e.some(t=>Bc(t)?!(t.type===ls||t.type===ft&&!Fg(t.children)):!0)?e:null}const Ll=e=>e?im(e)?ga(e):Ll(e.parent):null,rr=qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ll(e.parent),$root:e=>Ll(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>jg(e),$forceUpdate:e=>e.f||(e.f=()=>{$c(e.update)}),$nextTick:e=>e.n||(e.n=zb.bind(e.proxy)),$watch:e=>Mv.bind(e)}),Wa=(e,t)=>e!==Ct&&!e.__isScriptSetup&&wt(e,t),lv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return r[t]}else{if(Wa(n,t))return o[t]=1,n[t];if(i!==Ct&&wt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&wt(c,t))return o[t]=3,r[t];if(s!==Ct&&wt(s,t))return o[t]=4,s[t];Rl&&(o[t]=0)}}const u=rr[t];let d,h;if(u)return t==="$attrs"&&te(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Ct&&wt(s,t))return o[t]=4,s[t];if(h=l.config.globalProperties,wt(h,t))return h[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:r}=e;return Wa(i,t)?(i[t]=s,!0):n!==Ct&&wt(n,t)?(n[t]=s,!0):wt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!s[o]||e!==Ct&&wt(e,o)||Wa(t,o)||(a=r[0])&&wt(a,o)||wt(n,o)||wt(rr,o)||wt(i.config.globalProperties,o)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:wt(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ru(e){return X(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Rl=!0;function cv(e){const t=jg(e),s=e.proxy,n=e.ctx;Rl=!1,t.beforeCreate&&$u(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:g,activated:m,deactivated:p,beforeDestroy:y,beforeUnmount:b,destroyed:v,unmounted:w,render:S,renderTracked:T,renderTriggered:E,errorCaptured:R,serverPrefetch:I,expose:B,inheritAttrs:L,components:C,directives:W,filters:st}=t;if(c&&uv(c,n,null),o)for(const ut in o){const pt=o[ut];ct(pt)&&(n[ut]=pt.bind(s))}if(i){const ut=i.call(s,s);Pt(ut)&&(e.data=ai(ut))}if(Rl=!0,r)for(const ut in r){const pt=r[ut],Ce=ct(pt)?pt.bind(s,s):ct(pt.get)?pt.get.bind(s,s):os,je=!ct(pt)&&ct(pt.set)?pt.set.bind(s):os,Me=G({get:Ce,set:je});Object.defineProperty(n,ut,{enumerable:!0,configurable:!0,get:()=>Me.value,set:Yt=>Me.value=Yt})}if(a)for(const ut in a)Ng(a[ut],n,s,ut);if(l){const ut=ct(l)?l.call(s):l;Reflect.ownKeys(ut).forEach(pt=>{pv(pt,ut[pt])})}u&&$u(u,e,"c");function rt(ut,pt){X(pt)?pt.forEach(Ce=>ut(Ce.bind(s))):pt&&ut(pt.bind(s))}if(rt(tv,d),rt(cs,h),rt(ev,f),rt(Rg,g),rt(Gb,m),rt(Xb,p),rt(rv,R),rt(iv,T),rt(nv,E),rt(en,b),rt($g,w),rt(sv,I),X(B))if(B.length){const ut=e.exposed||(e.exposed={});B.forEach(pt=>{Object.defineProperty(ut,pt,{get:()=>s[pt],set:Ce=>s[pt]=Ce,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===os&&(e.render=S),L!=null&&(e.inheritAttrs=L),C&&(e.components=C),W&&(e.directives=W),I&&Ig(e)}function uv(e,t,s=os){X(e)&&(e=$l(e));for(const n in e){const i=e[n];let r;Pt(i)?"default"in i?r=Oo(i.from||n,i.default,!0):r=Oo(i.from||n):r=Oo(i),ne(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function $u(e,t,s){qe(X(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ng(e,t,s,n){let i=n.includes(".")?Xg(s,n):()=>s[n];if(Nt(e)){const r=t[e];ct(r)&&Ne(i,r)}else if(ct(e))Ne(i,e.bind(s));else if(Pt(e))if(X(e))e.forEach(r=>Ng(r,t,s,n));else{const r=ct(e.handler)?e.handler.bind(s):t[e.handler];ct(r)&&Ne(i,r,e)}}function jg(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>jo(l,c,o,!0)),jo(l,t,o)),Pt(t)&&r.set(t,l),l}function jo(e,t,s,n=!1){const{mixins:i,extends:r}=t;r&&jo(e,r,s,!0),i&&i.forEach(o=>jo(e,o,s,!0));for(const o in t)if(!(n&&o==="expose")){const a=dv[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const dv={data:Fu,props:Nu,emits:Nu,methods:qi,computed:qi,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:qi,directives:qi,watch:fv,provide:Fu,inject:hv};function Fu(e,t){return t?e?function(){return qt(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function hv(e,t){return qi($l(e),$l(t))}function $l(e){if(X(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function oe(e,t){return e?[...new Set([].concat(e,t))]:t}function qi(e,t){return e?qt(Object.create(null),e,t):t}function Nu(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:qt(Object.create(null),Ru(e),Ru(t??{})):t}function fv(e,t){if(!e)return t;if(!t)return e;const s=qt(Object.create(null),e);for(const n in t)s[n]=oe(e[n],t[n]);return s}function Bg(){return{app:null,config:{isNativeTag:eb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gv=0;function mv(e,t){return function(n,i=null){ct(n)||(n=qt({},n)),i!=null&&!Pt(i)&&(i=null);const r=Bg(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:gv++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Kv,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&ct(u.install)?(o.add(u),u.install(c,...d)):ct(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ht(n,i);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,ga(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(qe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=di;di=c;try{return u()}finally{di=d}}};return c}}let di=null;function pv(e,t){if(le){let s=le.provides;const n=le.parent&&le.parent.provides;n===s&&(s=le.provides=Object.create(n)),s[e]=t}}function Oo(e,t,s=!1){const n=nm();if(n||di){let i=di?di._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ct(t)?t.call(n&&n.proxy):t}}const Wg={},Ug=()=>Object.create(Wg),zg=e=>Object.getPrototypeOf(e)===Wg;function yv(e,t,s,n=!1){const i={},r=Ug();e.propsDefaults=Object.create(null),Vg(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);s?e.props=n?i:Pb(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function bv(e,t,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=_t(i),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ha(e.emitsOptions,h))continue;const f=t[h];if(l)if(wt(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const g=Zs(h);i[g]=Fl(l,a,g,f,e,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{Vg(e,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!wt(t,d)&&((u=tn(d))===d||!wt(t,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(i[d]=Fl(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!wt(t,d))&&(delete r[d],c=!0)}c&&_s(e.attrs,"set","")}function Vg(e,t,s,n){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(er(l))continue;const c=t[l];let u;i&&wt(i,u=Zs(l))?!r||!r.includes(u)?s[u]=c:(a||(a={}))[u]=c:ha(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=_t(s),c=a||Ct;for(let u=0;u<r.length;u++){const d=r[u];s[d]=Fl(i,l,d,c[d],e,!wt(c,d))}}return o}function Fl(e,t,s,n,i,r){const o=e[s];if(o!=null){const a=wt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ct(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Ar(i);n=c[s]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===tn(s))&&(n=!0))}return n}const vv=new WeakMap;function Hg(e,t,s=!1){const n=s?vv:t.propsCache,i=n.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!ct(e)){const u=d=>{l=!0;const[h,f]=Hg(d,t,!0);qt(o,h),f&&a.push(...f)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Pt(e)&&n.set(e,ri),ri;if(X(r))for(let u=0;u<r.length;u++){const d=Zs(r[u]);ju(d)&&(o[d]=Ct)}else if(r)for(const u in r){const d=Zs(u);if(ju(d)){const h=r[u],f=o[d]=X(h)||ct(h)?{type:h}:qt({},h),g=f.type;let m=!1,p=!0;if(X(g))for(let y=0;y<g.length;++y){const b=g[y],v=ct(b)&&b.name;if(v==="Boolean"){m=!0;break}else v==="String"&&(p=!1)}else m=ct(g)&&g.name==="Boolean";f[0]=m,f[1]=p,(m||wt(f,"default"))&&a.push(d)}}const c=[o,a];return Pt(e)&&n.set(e,c),c}function ju(e){return e[0]!=="$"&&!er(e)}const Nc=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",jc=e=>X(e)?e.map(rs):[rs(e)],_v=(e,t,s)=>{if(t._n)return t;const n=Il((...i)=>jc(t(...i)),s);return n._c=!1,n},qg=(e,t,s)=>{const n=e._ctx;for(const i in e){if(Nc(i))continue;const r=e[i];if(ct(r))t[i]=_v(i,r,n);else if(r!=null){const o=jc(r);t[i]=()=>o}}},Jg=(e,t)=>{const s=jc(t);e.slots.default=()=>s},Yg=(e,t,s)=>{for(const n in t)(s||!Nc(n))&&(e[n]=t[n])},wv=(e,t,s)=>{const n=e.slots=Ug();if(e.vnode.shapeFlag&32){const i=t.__;i&&Ol(n,"__",i,!0);const r=t._;r?(Yg(n,t,s),s&&Ol(n,"_",r,!0)):qg(t,n)}else t&&Jg(e,t)},xv=(e,t,s)=>{const{vnode:n,slots:i}=e;let r=!0,o=Ct;if(n.shapeFlag&32){const a=t._;a?s&&a===1?r=!1:Yg(i,t,s):(r=!t.$stable,qg(t,i)),o=t}else t&&(Jg(e,t),o={default:1});if(r)for(const a in i)!Nc(a)&&o[a]==null&&delete i[a]},xe=$v;function Sv(e){return kv(e)}function kv(e,t){const s=la();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=os,insertStaticContent:g}=e,m=(x,k,A,N=null,$=null,F=null,H=void 0,z=null,U=!!k.dynamicChildren)=>{if(x===k)return;x&&!ti(x,k)&&(N=Yr(x),Yt(x,$,F,!0),x=null),k.patchFlag===-2&&(U=!1,k.dynamicChildren=null);const{type:j,ref:Z,shapeFlag:q}=k;switch(j){case fa:p(x,k,A,N);break;case ls:y(x,k,A,N);break;case za:x==null&&b(k,A,N,H);break;case ft:C(x,k,A,N,$,F,H,z,U);break;default:q&1?S(x,k,A,N,$,F,H,z,U):q&6?W(x,k,A,N,$,F,H,z,U):(q&64||q&128)&&j.process(x,k,A,N,$,F,H,z,U,Ai)}Z!=null&&$?ir(Z,x&&x.ref,F,k||x,!k):Z==null&&x&&x.ref!=null&&ir(x.ref,null,F,x,!0)},p=(x,k,A,N)=>{if(x==null)n(k.el=a(k.children),A,N);else{const $=k.el=x.el;k.children!==x.children&&c($,k.children)}},y=(x,k,A,N)=>{x==null?n(k.el=l(k.children||""),A,N):k.el=x.el},b=(x,k,A,N)=>{[x.el,x.anchor]=g(x.children,k,A,N,x.el,x.anchor)},v=({el:x,anchor:k},A,N)=>{let $;for(;x&&x!==k;)$=h(x),n(x,A,N),x=$;n(k,A,N)},w=({el:x,anchor:k})=>{let A;for(;x&&x!==k;)A=h(x),i(x),x=A;i(k)},S=(x,k,A,N,$,F,H,z,U)=>{k.type==="svg"?H="svg":k.type==="math"&&(H="mathml"),x==null?T(k,A,N,$,F,H,z,U):I(x,k,$,F,H,z,U)},T=(x,k,A,N,$,F,H,z)=>{let U,j;const{props:Z,shapeFlag:q,transition:K,dirs:et}=x;if(U=x.el=o(x.type,F,Z&&Z.is,Z),q&8?u(U,x.children):q&16&&R(x.children,U,null,N,$,Ua(x,F),H,z),et&&rn(x,null,N,"created"),E(U,x,x.scopeId,H,N),Z){for(const Mt in Z)Mt!=="value"&&!er(Mt)&&r(U,Mt,null,Z[Mt],F,N);"value"in Z&&r(U,"value",null,Z.value,F),(j=Z.onVnodeBeforeMount)&&Ge(j,N,x)}et&&rn(x,null,N,"beforeMount");const gt=Tv($,K);gt&&K.beforeEnter(U),n(U,k,A),((j=Z&&Z.onVnodeMounted)||gt||et)&&xe(()=>{j&&Ge(j,N,x),gt&&K.enter(U),et&&rn(x,null,N,"mounted")},$)},E=(x,k,A,N,$)=>{if(A&&f(x,A),N)for(let F=0;F<N.length;F++)f(x,N[F]);if($){let F=$.subTree;if(k===F||tm(F.type)&&(F.ssContent===k||F.ssFallback===k)){const H=$.vnode;E(x,H,H.scopeId,H.slotScopeIds,$.parent)}}},R=(x,k,A,N,$,F,H,z,U=0)=>{for(let j=U;j<x.length;j++){const Z=x[j]=z?Fs(x[j]):rs(x[j]);m(null,Z,k,A,N,$,F,H,z)}},I=(x,k,A,N,$,F,H)=>{const z=k.el=x.el;let{patchFlag:U,dynamicChildren:j,dirs:Z}=k;U|=x.patchFlag&16;const q=x.props||Ct,K=k.props||Ct;let et;if(A&&on(A,!1),(et=K.onVnodeBeforeUpdate)&&Ge(et,A,k,x),Z&&rn(k,x,A,"beforeUpdate"),A&&on(A,!0),(q.innerHTML&&K.innerHTML==null||q.textContent&&K.textContent==null)&&u(z,""),j?B(x.dynamicChildren,j,z,A,N,Ua(k,$),F):H||pt(x,k,z,null,A,N,Ua(k,$),F,!1),U>0){if(U&16)L(z,q,K,A,$);else if(U&2&&q.class!==K.class&&r(z,"class",null,K.class,$),U&4&&r(z,"style",q.style,K.style,$),U&8){const gt=k.dynamicProps;for(let Mt=0;Mt<gt.length;Mt++){const kt=gt[Mt],de=q[kt],he=K[kt];(he!==de||kt==="value")&&r(z,kt,de,he,$,A)}}U&1&&x.children!==k.children&&u(z,k.children)}else!H&&j==null&&L(z,q,K,A,$);((et=K.onVnodeUpdated)||Z)&&xe(()=>{et&&Ge(et,A,k,x),Z&&rn(k,x,A,"updated")},N)},B=(x,k,A,N,$,F,H)=>{for(let z=0;z<k.length;z++){const U=x[z],j=k[z],Z=U.el&&(U.type===ft||!ti(U,j)||U.shapeFlag&198)?d(U.el):A;m(U,j,Z,null,N,$,F,H,!0)}},L=(x,k,A,N,$)=>{if(k!==A){if(k!==Ct)for(const F in k)!er(F)&&!(F in A)&&r(x,F,k[F],null,$,N);for(const F in A){if(er(F))continue;const H=A[F],z=k[F];H!==z&&F!=="value"&&r(x,F,z,H,$,N)}"value"in A&&r(x,"value",k.value,A.value,$)}},C=(x,k,A,N,$,F,H,z,U)=>{const j=k.el=x?x.el:a(""),Z=k.anchor=x?x.anchor:a("");let{patchFlag:q,dynamicChildren:K,slotScopeIds:et}=k;et&&(z=z?z.concat(et):et),x==null?(n(j,A,N),n(Z,A,N),R(k.children||[],A,Z,$,F,H,z,U)):q>0&&q&64&&K&&x.dynamicChildren?(B(x.dynamicChildren,K,A,$,F,H,z),(k.key!=null||$&&k===$.subTree)&&Kg(x,k,!0)):pt(x,k,A,Z,$,F,H,z,U)},W=(x,k,A,N,$,F,H,z,U)=>{k.slotScopeIds=z,x==null?k.shapeFlag&512?$.ctx.activate(k,A,N,H,U):st(k,A,N,$,F,H,U):nt(x,k,U)},st=(x,k,A,N,$,F,H)=>{const z=x.component=zv(x,N,$);if(Pg(x)&&(z.ctx.renderer=Ai),Vv(z,!1,H),z.asyncDep){if($&&$.registerDep(z,rt,H),!x.el){const U=z.subTree=ht(ls);y(null,U,k,A),x.placeholder=U.el}}else rt(z,x,k,A,$,F,H)},nt=(x,k,A)=>{const N=k.component=x.component;if(Lv(x,k,A))if(N.asyncDep&&!N.asyncResolved){ut(N,k,A);return}else N.next=k,N.update();else k.el=x.el,N.vnode=k},rt=(x,k,A,N,$,F,H)=>{const z=()=>{if(x.isMounted){let{next:q,bu:K,u:et,parent:gt,vnode:Mt}=x;{const Ke=Zg(x);if(Ke){q&&(q.el=Mt.el,ut(x,q,H)),Ke.asyncDep.then(()=>{x.isUnmounted||z()});return}}let kt=q,de;on(x,!1),q?(q.el=Mt.el,ut(x,q,H)):q=Mt,K&&To(K),(de=q.props&&q.props.onVnodeBeforeUpdate)&&Ge(de,gt,q,Mt),on(x,!0);const he=Wu(x),Ye=x.subTree;x.subTree=he,m(Ye,he,d(Ye.el),Yr(Ye),x,$,F),q.el=he.el,kt===null&&Rv(x,he.el),et&&xe(et,$),(de=q.props&&q.props.onVnodeUpdated)&&xe(()=>Ge(de,gt,q,Mt),$)}else{let q;const{el:K,props:et}=k,{bm:gt,m:Mt,parent:kt,root:de,type:he}=x,Ye=ui(k);on(x,!1),gt&&To(gt),!Ye&&(q=et&&et.onVnodeBeforeMount)&&Ge(q,kt,k),on(x,!0);{de.ce&&de.ce._def.shadowRoot!==!1&&de.ce._injectChildStyle(he);const Ke=x.subTree=Wu(x);m(null,Ke,A,N,x,$,F),k.el=Ke.el}if(Mt&&xe(Mt,$),!Ye&&(q=et&&et.onVnodeMounted)){const Ke=k;xe(()=>Ge(q,kt,Ke),$)}(k.shapeFlag&256||kt&&ui(kt.vnode)&&kt.vnode.shapeFlag&256)&&x.a&&xe(x.a,$),x.isMounted=!0,k=A=N=null}};x.scope.on();const U=x.effect=new ug(z);x.scope.off();const j=x.update=U.run.bind(U),Z=x.job=U.runIfDirty.bind(U);Z.i=x,Z.id=x.uid,U.scheduler=()=>$c(Z),on(x,!0),j()},ut=(x,k,A)=>{k.component=x;const N=x.vnode.props;x.vnode=k,x.next=null,bv(x,k.props,N,A),xv(x,k.children,A),xs(),Lu(x),Ss()},pt=(x,k,A,N,$,F,H,z,U=!1)=>{const j=x&&x.children,Z=x?x.shapeFlag:0,q=k.children,{patchFlag:K,shapeFlag:et}=k;if(K>0){if(K&128){je(j,q,A,N,$,F,H,z,U);return}else if(K&256){Ce(j,q,A,N,$,F,H,z,U);return}}et&8?(Z&16&&_e(j,$,F),q!==j&&u(A,q)):Z&16?et&16?je(j,q,A,N,$,F,H,z,U):_e(j,$,F,!0):(Z&8&&u(A,""),et&16&&R(q,A,N,$,F,H,z,U))},Ce=(x,k,A,N,$,F,H,z,U)=>{x=x||ri,k=k||ri;const j=x.length,Z=k.length,q=Math.min(j,Z);let K;for(K=0;K<q;K++){const et=k[K]=U?Fs(k[K]):rs(k[K]);m(x[K],et,A,null,$,F,H,z,U)}j>Z?_e(x,$,F,!0,!1,q):R(k,A,N,$,F,H,z,U,q)},je=(x,k,A,N,$,F,H,z,U)=>{let j=0;const Z=k.length;let q=x.length-1,K=Z-1;for(;j<=q&&j<=K;){const et=x[j],gt=k[j]=U?Fs(k[j]):rs(k[j]);if(ti(et,gt))m(et,gt,A,null,$,F,H,z,U);else break;j++}for(;j<=q&&j<=K;){const et=x[q],gt=k[K]=U?Fs(k[K]):rs(k[K]);if(ti(et,gt))m(et,gt,A,null,$,F,H,z,U);else break;q--,K--}if(j>q){if(j<=K){const et=K+1,gt=et<Z?k[et].el:N;for(;j<=K;)m(null,k[j]=U?Fs(k[j]):rs(k[j]),A,gt,$,F,H,z,U),j++}}else if(j>K)for(;j<=q;)Yt(x[j],$,F,!0),j++;else{const et=j,gt=j,Mt=new Map;for(j=gt;j<=K;j++){const we=k[j]=U?Fs(k[j]):rs(k[j]);we.key!=null&&Mt.set(we.key,j)}let kt,de=0;const he=K-gt+1;let Ye=!1,Ke=0;const Ii=new Array(he);for(j=0;j<he;j++)Ii[j]=0;for(j=et;j<=q;j++){const we=x[j];if(de>=he){Yt(we,$,F,!0);continue}let Ze;if(we.key!=null)Ze=Mt.get(we.key);else for(kt=gt;kt<=K;kt++)if(Ii[kt-gt]===0&&ti(we,k[kt])){Ze=kt;break}Ze===void 0?Yt(we,$,F,!0):(Ii[Ze-gt]=j+1,Ze>=Ke?Ke=Ze:Ye=!0,m(we,k[Ze],A,null,$,F,H,z,U),de++)}const Cu=Ye?Ov(Ii):ri;for(kt=Cu.length-1,j=he-1;j>=0;j--){const we=gt+j,Ze=k[we],Mu=k[we+1],Eu=we+1<Z?Mu.el||Mu.placeholder:N;Ii[j]===0?m(null,Ze,A,Eu,$,F,H,z,U):Ye&&(kt<0||j!==Cu[kt]?Me(Ze,A,Eu,2):kt--)}}},Me=(x,k,A,N,$=null)=>{const{el:F,type:H,transition:z,children:U,shapeFlag:j}=x;if(j&6){Me(x.component.subTree,k,A,N);return}if(j&128){x.suspense.move(k,A,N);return}if(j&64){H.move(x,k,A,Ai);return}if(H===ft){n(F,k,A);for(let q=0;q<U.length;q++)Me(U[q],k,A,N);n(x.anchor,k,A);return}if(H===za){v(x,k,A);return}if(N!==2&&j&1&&z)if(N===0)z.beforeEnter(F),n(F,k,A),xe(()=>z.enter(F),$);else{const{leave:q,delayLeave:K,afterLeave:et}=z,gt=()=>{x.ctx.isUnmounted?i(F):n(F,k,A)},Mt=()=>{q(F,()=>{gt(),et&&et()})};K?K(F,gt,Mt):Mt()}else n(F,k,A)},Yt=(x,k,A,N=!1,$=!1)=>{const{type:F,props:H,ref:z,children:U,dynamicChildren:j,shapeFlag:Z,patchFlag:q,dirs:K,cacheIndex:et}=x;if(q===-2&&($=!1),z!=null&&(xs(),ir(z,null,A,x,!0),Ss()),et!=null&&(k.renderCache[et]=void 0),Z&256){k.ctx.deactivate(x);return}const gt=Z&1&&K,Mt=!ui(x);let kt;if(Mt&&(kt=H&&H.onVnodeBeforeUnmount)&&Ge(kt,k,x),Z&6)nn(x.component,A,N);else{if(Z&128){x.suspense.unmount(A,N);return}gt&&rn(x,null,k,"beforeUnmount"),Z&64?x.type.remove(x,k,A,Ai,N):j&&!j.hasOnce&&(F!==ft||q>0&&q&64)?_e(j,k,A,!1,!0):(F===ft&&q&384||!$&&Z&16)&&_e(U,k,A),N&&Ms(x)}(Mt&&(kt=H&&H.onVnodeUnmounted)||gt)&&xe(()=>{kt&&Ge(kt,k,x),gt&&rn(x,null,k,"unmounted")},A)},Ms=x=>{const{type:k,el:A,anchor:N,transition:$}=x;if(k===ft){us(A,N);return}if(k===za){w(x);return}const F=()=>{i(A),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(x.shapeFlag&1&&$&&!$.persisted){const{leave:H,delayLeave:z}=$,U=()=>H(A,F);z?z(x.el,F,U):U()}else F()},us=(x,k)=>{let A;for(;x!==k;)A=h(x),i(x),x=A;i(k)},nn=(x,k,A)=>{const{bum:N,scope:$,job:F,subTree:H,um:z,m:U,a:j,parent:Z,slots:{__:q}}=x;Bu(U),Bu(j),N&&To(N),Z&&X(q)&&q.forEach(K=>{Z.renderCache[K]=void 0}),$.stop(),F&&(F.flags|=8,Yt(H,x,k,A)),z&&xe(z,k),xe(()=>{x.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},_e=(x,k,A,N=!1,$=!1,F=0)=>{for(let H=F;H<x.length;H++)Yt(x[H],k,A,N,$)},Yr=x=>{if(x.shapeFlag&6)return Yr(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const k=h(x.anchor||x.el),A=k&&k[qb];return A?h(A):k};let Ra=!1;const Du=(x,k,A)=>{x==null?k._vnode&&Yt(k._vnode,null,null,!0):m(k._vnode||null,x,k,null,null,null,A),k._vnode=x,Ra||(Ra=!0,Lu(),Cg(),Ra=!1)},Ai={p:m,um:Yt,m:Me,r:Ms,mt:st,mc:R,pc:pt,pbc:B,n:Yr,o:e};return{render:Du,hydrate:void 0,createApp:mv(Du)}}function Ua({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function on({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Tv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kg(e,t,s=!1){const n=e.children,i=t.children;if(X(n)&&X(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Fs(i[r]),a.el=o.el),!s&&a.patchFlag!==-2&&Kg(o,a)),a.type===fa&&(a.el=o.el),a.type===ls&&!a.el&&(a.el=o.el)}}function Ov(e){const t=e.slice(),s=[0];let n,i,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)a=r+o>>1,e[s[a]]<c?r=a+1:o=a;c<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=t[o];return s}function Zg(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Zg(t)}function Bu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Dv=Symbol.for("v-scx"),Cv=()=>Oo(Dv);function Ne(e,t,s){return Gg(e,t,s)}function Gg(e,t,s=Ct){const{immediate:n,deep:i,flush:r,once:o}=s,a=qt({},s),l=t&&n||!t&&r!=="post";let c;if(wr){if(r==="sync"){const f=Cv();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=os,f.resume=os,f.pause=os,f}}const u=le;a.call=(f,g,m)=>qe(f,u,g,m);let d=!1;r==="post"?a.scheduler=f=>{xe(f,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(f,g)=>{g?f():$c(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=Wb(e,t,a);return wr&&(c?c.push(h):l&&h()),h}function Mv(e,t,s){const n=this.proxy,i=Nt(e)?e.includes(".")?Xg(n,e):()=>n[e]:e.bind(n,n);let r;ct(t)?r=t:(r=t.handler,s=t);const o=Ar(this),a=Gg(i,r.bind(n),s);return o(),a}function Xg(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Ev=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Zs(t)}Modifiers`]||e[`${tn(t)}Modifiers`];function Av(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ct;let i=s;const r=t.startsWith("update:"),o=r&&Ev(n,t.slice(7));o&&(o.trim&&(i=s.map(u=>Nt(u)?u.trim():u)),o.number&&(i=s.map(Dl)));let a,l=n[a=$a(t)]||n[a=$a(Zs(t))];!l&&r&&(l=n[a=$a(tn(t))]),l&&qe(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,qe(c,e,6,i)}}function Qg(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!ct(e)){const l=c=>{const u=Qg(c,t,!0);u&&(a=!0,qt(o,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Pt(e)&&n.set(e,null),null):(X(r)?r.forEach(l=>o[l]=null):qt(o,r),Pt(e)&&n.set(e,o),o)}function ha(e,t){return!e||!ra(t)?!1:(t=t.slice(2).replace(/Once$/,""),wt(e,t[0].toLowerCase()+t.slice(1))||wt(e,tn(t))||wt(e,t))}function Wu(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:g,inheritAttrs:m}=e,p=No(e);let y,b;try{if(s.shapeFlag&4){const w=i||n,S=w;y=rs(c.call(S,w,u,d,f,h,g)),b=a}else{const w=t;y=rs(w.length>1?w(d,{attrs:a,slots:o,emit:l}):w(d,null)),b=t.props?a:Iv(a)}}catch(w){or.length=0,ua(w,e,1),y=ht(ls)}let v=y;if(b&&m!==!1){const w=Object.keys(b),{shapeFlag:S}=v;w.length&&S&7&&(r&&w.some(Oc)&&(b=Pv(b,r)),v=Tn(v,b,!1,!0))}return s.dirs&&(v=Tn(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&vr(v,s.transition),y=v,No(p),y}const Iv=e=>{let t;for(const s in e)(s==="class"||s==="style"||ra(s))&&((t||(t={}))[s]=e[s]);return t},Pv=(e,t)=>{const s={};for(const n in e)(!Oc(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Lv(e,t,s){const{props:n,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Uu(n,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!ha(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Uu(n,o,c):!0:!!o;return!1}function Uu(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r]&&!ha(s,r))return!0}return!1}function Rv({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const tm=e=>e.__isSuspense;function $v(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):Hb(e)}const ft=Symbol.for("v-fgt"),fa=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),za=Symbol.for("v-stc"),or=[];let Te=null;function O(e=!1){or.push(Te=e?null:[])}function Fv(){or.pop(),Te=or[or.length-1]||null}let _r=1;function zu(e,t=!1){_r+=e,e<0&&Te&&t&&(Te.hasOnce=!0)}function em(e){return e.dynamicChildren=_r>0?Te||ri:null,Fv(),_r>0&&Te&&Te.push(e),e}function M(e,t,s,n,i,r){return em(_(e,t,s,n,i,r,!0))}function Oe(e,t,s,n,i){return em(ht(e,t,s,n,i,!0))}function Bc(e){return e?e.__v_isVNode===!0:!1}function ti(e,t){return e.type===t.type&&e.key===t.key}const sm=({key:e})=>e??null,Do=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||ne(e)||ct(e)?{i:se,r:e,k:t,f:!!s}:e:null);function _(e,t=null,s=null,n=0,i=null,r=e===ft?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sm(t),ref:t&&Do(t),scopeId:Eg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:se};return a?(Wc(l,s),r&128&&e.normalize(l)):s&&(l.shapeFlag|=Nt(s)?8:16),_r>0&&!o&&Te&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Te.push(l),l}const ht=Nv;function Nv(e,t=null,s=null,n=0,i=null,r=!1){if((!e||e===ov)&&(e=ls),Bc(e)){const a=Tn(e,t,!0);return s&&Wc(a,s),_r>0&&!r&&Te&&(a.shapeFlag&6?Te[Te.indexOf(e)]=a:Te.push(a)),a.patchFlag=-2,a}if(Yv(e)&&(e=e.__vccOpts),t){t=jv(t);let{class:a,style:l}=t;a&&!Nt(a)&&(t.class=tt(a)),Pt(l)&&(Rc(l)&&!X(l)&&(l=qt({},l)),t.style=ke(l))}const o=Nt(e)?1:tm(e)?128:Jb(e)?64:Pt(e)?4:ct(e)?2:0;return _(e,t,s,n,i,o,r,!0)}function jv(e){return e?Rc(e)||zg(e)?qt({},e):e:null}function Tn(e,t,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Bv(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&sm(c),ref:t&&t.ref?s&&r?X(r)?r.concat(Do(t)):[r,Do(t)]:Do(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ft?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tn(e.ssContent),ssFallback:e.ssFallback&&Tn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&vr(u,l.clone(u)),u}function J(e=" ",t=0){return ht(fa,null,e,t)}function Y(e="",t=!1){return t?(O(),Oe(ls,null,e)):ht(ls,null,e)}function rs(e){return e==null||typeof e=="boolean"?ht(ls):X(e)?ht(ft,null,e.slice()):Bc(e)?Fs(e):ht(fa,null,String(e))}function Fs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Tn(e)}function Wc(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(X(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Wc(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!zg(t)?t._ctx=se:i===3&&se&&(se.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:se},s=32):(t=String(t),n&64?(s=16,t=[J(t)]):s=8);e.children=t,e.shapeFlag|=s}function Bv(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=tt([t.class,n.class]));else if(i==="style")t.style=ke([t.style,n.style]);else if(ra(i)){const r=t[i],o=n[i];o&&r!==o&&!(X(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=n[i])}return t}function Ge(e,t,s,n=null){qe(e,t,7,[s,n])}const Wv=Bg();let Uv=0;function zv(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Wv,r={uid:Uv++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hg(n,i),emitsOptions:Qg(n,i),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:n.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Av.bind(null,r),e.ce&&e.ce(r),r}let le=null;const nm=()=>le||se;let Bo,Nl;{const e=la(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Bo=t("__VUE_INSTANCE_SETTERS__",s=>le=s),Nl=t("__VUE_SSR_SETTERS__",s=>wr=s)}const Ar=e=>{const t=le;return Bo(e),e.scope.on(),()=>{e.scope.off(),Bo(t)}},Vu=()=>{le&&le.scope.off(),Bo(null)};function im(e){return e.vnode.shapeFlag&4}let wr=!1;function Vv(e,t=!1,s=!1){t&&Nl(t);const{props:n,children:i}=e.vnode,r=im(e);yv(e,n,r,t),wv(e,i,s||t);const o=r?Hv(e,t):void 0;return t&&Nl(!1),o}function Hv(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,lv);const{setup:n}=s;if(n){xs();const i=e.setupContext=n.length>1?Jv(e):null,r=Ar(e),o=Er(n,e,0,[e.props,i]),a=ng(o);if(Ss(),r(),(a||e.sp)&&!ui(e)&&Ig(e),a){if(o.then(Vu,Vu),t)return o.then(l=>{Hu(e,l)}).catch(l=>{ua(l,e,0)});e.asyncDep=o}else Hu(e,o)}else rm(e)}function Hu(e,t,s){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pt(t)&&(e.setupState=Tg(t)),rm(e)}function rm(e,t,s){const n=e.type;e.render||(e.render=n.render||os);{const i=Ar(e);xs();try{cv(e)}finally{Ss(),i()}}}const qv={get(e,t){return te(e,"get",""),e[t]}};function Jv(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,qv),slots:e.slots,emit:e.emit,expose:t}}function ga(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Tg(Lb(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in rr)return rr[s](e)},has(t,s){return s in t||s in rr}})):e.proxy}function Yv(e){return ct(e)&&"__vccOpts"in e}const G=(e,t)=>jb(e,t,wr),Kv="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jl;const qu=typeof window<"u"&&window.trustedTypes;if(qu)try{jl=qu.createPolicy("vue",{createHTML:e=>e})}catch{}const om=jl?e=>jl.createHTML(e):e=>e,Zv="http://www.w3.org/2000/svg",Gv="http://www.w3.org/1998/Math/MathML",ys=typeof document<"u"?document:null,Ju=ys&&ys.createElement("template"),Xv={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ys.createElementNS(Zv,e):t==="mathml"?ys.createElementNS(Gv,e):s?ys.createElement(e,{is:s}):ys.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ys.createTextNode(e),createComment:e=>ys.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ys.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,r){const o=s?s.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{Ju.innerHTML=om(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Ju.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Es="transition",Li="animation",mi=Symbol("_vtc"),am={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Qv=qt({},Kb,am),an=(e,t=[])=>{X(e)?e.forEach(s=>s(...t)):e&&e(...t)},Yu=e=>e?X(e)?e.some(t=>t.length>1):e.length>1:!1;function t0(e){const t={};for(const C in e)C in am||(t[C]=e[C]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=e,g=e0(i),m=g&&g[0],p=g&&g[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:v,onLeave:w,onLeaveCancelled:S,onBeforeAppear:T=y,onAppear:E=b,onAppearCancelled:R=v}=t,I=(C,W,st,nt)=>{C._enterCancelled=nt,Ps(C,W?u:a),Ps(C,W?c:o),st&&st()},B=(C,W)=>{C._isLeaving=!1,Ps(C,d),Ps(C,f),Ps(C,h),W&&W()},L=C=>(W,st)=>{const nt=C?E:b,rt=()=>I(W,C,st);an(nt,[W,rt]),Ku(()=>{Ps(W,C?l:r),Qe(W,C?u:a),Yu(nt)||Zu(W,n,m,rt)})};return qt(t,{onBeforeEnter(C){an(y,[C]),Qe(C,r),Qe(C,o)},onBeforeAppear(C){an(T,[C]),Qe(C,l),Qe(C,c)},onEnter:L(!1),onAppear:L(!0),onLeave(C,W){C._isLeaving=!0;const st=()=>B(C,W);Qe(C,d),C._enterCancelled?(Qe(C,h),Bl()):(Bl(),Qe(C,h)),Ku(()=>{C._isLeaving&&(Ps(C,d),Qe(C,f),Yu(w)||Zu(C,n,p,st))}),an(w,[C,st])},onEnterCancelled(C){I(C,!1,void 0,!0),an(v,[C])},onAppearCancelled(C){I(C,!0,void 0,!0),an(R,[C])},onLeaveCancelled(C){B(C),an(S,[C])}})}function e0(e){if(e==null)return null;if(Pt(e))return[Va(e.enter),Va(e.leave)];{const t=Va(e);return[t,t]}}function Va(e){return ob(e)}function Qe(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[mi]||(e[mi]=new Set)).add(t)}function Ps(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[mi];s&&(s.delete(t),s.size||(e[mi]=void 0))}function Ku(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let s0=0;function Zu(e,t,s,n){const i=e._endId=++s0,r=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:a,propCount:l}=lm(e,t);if(!o)return n();const c=o+"end";let u=0;const d=()=>{e.removeEventListener(c,h),r()},h=f=>{f.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,h)}function lm(e,t){const s=window.getComputedStyle(e),n=g=>(s[g]||"").split(", "),i=n(`${Es}Delay`),r=n(`${Es}Duration`),o=Gu(i,r),a=n(`${Li}Delay`),l=n(`${Li}Duration`),c=Gu(a,l);let u=null,d=0,h=0;t===Es?o>0&&(u=Es,d=o,h=r.length):t===Li?c>0&&(u=Li,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?Es:Li:null,h=u?u===Es?r.length:l.length:0);const f=u===Es&&/\b(transform|all)(,|$)/.test(n(`${Es}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Gu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Xu(s)+Xu(e[n])))}function Xu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Bl(){return document.body.offsetHeight}function n0(e,t,s){const n=e[mi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Wo=Symbol("_vod"),cm=Symbol("_vsh"),i0={beforeMount(e,{value:t},{transition:s}){e[Wo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Ri(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Ri(e,!0),n.enter(e)):n.leave(e,()=>{Ri(e,!1)}):Ri(e,t))},beforeUnmount(e,{value:t}){Ri(e,t)}};function Ri(e,t){e.style.display=t?e[Wo]:"none",e[cm]=!t}const r0=Symbol(""),o0=/(^|;)\s*display\s*:/;function a0(e,t,s){const n=e.style,i=Nt(s);let r=!1;if(s&&!i){if(t)if(Nt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Co(n,a,"")}else for(const o in t)s[o]==null&&Co(n,o,"");for(const o in s)o==="display"&&(r=!0),Co(n,o,s[o])}else if(i){if(t!==s){const o=n[r0];o&&(s+=";"+o),n.cssText=s,r=o0.test(s)}}else t&&e.removeAttribute("style");Wo in e&&(e[Wo]=r?n.display:"",e[cm]&&(n.display="none"))}const Qu=/\s*!important$/;function Co(e,t,s){if(X(s))s.forEach(n=>Co(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=l0(e,t);Qu.test(s)?e.setProperty(tn(n),s.replace(Qu,""),"important"):e[n]=s}}const td=["Webkit","Moz","ms"],Ha={};function l0(e,t){const s=Ha[t];if(s)return s;let n=Zs(t);if(n!=="filter"&&n in e)return Ha[t]=n;n=og(n);for(let i=0;i<td.length;i++){const r=td[i]+n;if(r in e)return Ha[t]=r}return t}const ed="http://www.w3.org/1999/xlink";function sd(e,t,s,n,i,r=hb(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ed,t.slice(6,t.length)):e.setAttributeNS(ed,t,s):s==null||r&&!ag(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Os(s)?String(s):s)}function nd(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?om(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=ag(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(i||t)}function ei(e,t,s,n){e.addEventListener(t,s,n)}function c0(e,t,s,n){e.removeEventListener(t,s,n)}const id=Symbol("_vei");function u0(e,t,s,n,i=null){const r=e[id]||(e[id]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=d0(t);if(n){const c=r[t]=g0(n,i);ei(e,a,c,l)}else o&&(c0(e,a,o,l),r[t]=void 0)}}const rd=/(?:Once|Passive|Capture)$/;function d0(e){let t;if(rd.test(e)){t={};let n;for(;n=e.match(rd);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tn(e.slice(2)),t]}let qa=0;const h0=Promise.resolve(),f0=()=>qa||(h0.then(()=>qa=0),qa=Date.now());function g0(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;qe(m0(n,s.value),t,5,[n])};return s.value=e,s.attached=f0(),s}function m0(e,t){if(X(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const od=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,p0=(e,t,s,n,i,r)=>{const o=i==="svg";t==="class"?n0(e,n,o):t==="style"?a0(e,s,n):ra(t)?Oc(t)||u0(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):y0(e,t,n,o))?(nd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sd(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(n))?nd(e,Zs(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),sd(e,t,n,o))};function y0(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&od(t)&&ct(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return od(t)&&Nt(s)?!1:t in e}const um=new WeakMap,dm=new WeakMap,Uo=Symbol("_moveCb"),ad=Symbol("_enterCb"),b0=e=>(delete e.props.mode,e),v0=b0({name:"TransitionGroup",props:qt({},Qv,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=nm(),n=Yb();let i,r;return Rg(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!k0(i[0].el,s.vnode.el,o)){i=[];return}i.forEach(w0),i.forEach(x0);const a=i.filter(S0);Bl(),a.forEach(l=>{const c=l.el,u=c.style;Qe(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Uo]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[Uo]=null,Ps(c,o))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const o=_t(e),a=t0(o);let l=o.tag||ft;if(i=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(i.push(u),vr(u,Pl(u,a,n,s)),um.set(u,u.el.getBoundingClientRect()))}r=t.default?Ag(t.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&vr(u,Pl(u,a,n,s))}return ht(l,null,r)}}}),_0=v0;function w0(e){const t=e.el;t[Uo]&&t[Uo](),t[ad]&&t[ad]()}function x0(e){dm.set(e,e.el.getBoundingClientRect())}function S0(e){const t=um.get(e),s=dm.get(e),n=t.left-s.left,i=t.top-s.top;if(n||i){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${n}px,${i}px)`,r.transitionDuration="0s",e}}function k0(e,t,s){const n=e.cloneNode(),i=e[mi];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(n);const{hasTransform:o}=lm(n);return r.removeChild(n),o}const ld=e=>{const t=e.props["onUpdate:modelValue"]||!1;return X(t)?s=>To(t,s):t};function T0(e){e.target.composing=!0}function cd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ja=Symbol("_assign"),hm={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[Ja]=ld(i);const r=n||i.props&&i.props.type==="number";ei(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;s&&(a=a.trim()),r&&(a=Dl(a)),e[Ja](a)}),s&&ei(e,"change",()=>{e.value=e.value.trim()}),t||(ei(e,"compositionstart",T0),ei(e,"compositionend",cd),ei(e,"change",cd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},o){if(e[Ja]=ld(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Dl(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},O0=["ctrl","shift","alt","meta"],D0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>O0.some(s=>e[`${s}Key`]&&!t.includes(s))},Ya=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=D0[t[o]];if(a&&a(i,t))return}return e(i,...r)})},C0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ud=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const r=tn(i.key);if(t.some(o=>o===r||C0[o]===r))return e(i)})},M0=qt({patchProp:p0},Xv);let dd;function E0(){return dd||(dd=Sv(M0))}const A0=(...e)=>{const t=E0().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=P0(n);if(!i)return;const r=t._component;!ct(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,I0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function I0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function P0(e){return Nt(e)?document.querySelector(e):e}class An extends Error{}class L0 extends An{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class R0 extends An{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class $0 extends An{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ii extends An{}class fm extends An{constructor(t){super(`Invalid unit ${t}`)}}class Qt extends An{}class As extends An{constructor(){super("Zone is an abstract class")}}const V="numeric",Je="short",De="long",zo={year:V,month:V,day:V},gm={year:V,month:Je,day:V},F0={year:V,month:Je,day:V,weekday:Je},mm={year:V,month:De,day:V},pm={year:V,month:De,day:V,weekday:De},ym={hour:V,minute:V},bm={hour:V,minute:V,second:V},vm={hour:V,minute:V,second:V,timeZoneName:Je},_m={hour:V,minute:V,second:V,timeZoneName:De},wm={hour:V,minute:V,hourCycle:"h23"},xm={hour:V,minute:V,second:V,hourCycle:"h23"},Sm={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:Je},km={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:De},Tm={year:V,month:V,day:V,hour:V,minute:V},Om={year:V,month:V,day:V,hour:V,minute:V,second:V},Dm={year:V,month:Je,day:V,hour:V,minute:V},Cm={year:V,month:Je,day:V,hour:V,minute:V,second:V},N0={year:V,month:Je,day:V,weekday:Je,hour:V,minute:V},Mm={year:V,month:De,day:V,hour:V,minute:V,timeZoneName:Je},Em={year:V,month:De,day:V,hour:V,minute:V,second:V,timeZoneName:Je},Am={year:V,month:De,day:V,weekday:De,hour:V,minute:V,timeZoneName:De},Im={year:V,month:De,day:V,weekday:De,hour:V,minute:V,second:V,timeZoneName:De};class Ir{get type(){throw new As}get name(){throw new As}get ianaName(){return this.name}get isUniversal(){throw new As}offsetName(t,s){throw new As}formatOffset(t,s){throw new As}offset(t){throw new As}equals(t){throw new As}get isValid(){throw new As}}let Ka=null;class ma extends Ir{static get instance(){return Ka===null&&(Ka=new ma),Ka}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return zm(t,s,n)}formatOffset(t,s){return ar(this.offset(t),s)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const Wl=new Map;function j0(e){let t=Wl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Wl.set(e,t)),t}const B0={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function W0(e,t){const s=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,i,r,o,a,l,c,u]=n;return[o,i,r,a,l,c,u]}function U0(e,t){const s=e.formatToParts(t),n=[];for(let i=0;i<s.length;i++){const{type:r,value:o}=s[i],a=B0[r];r==="era"?n[a]=o:Q(a)||(n[a]=parseInt(o,10))}return n}const Za=new Map;class ks extends Ir{static create(t){let s=Za.get(t);return s===void 0&&Za.set(t,s=new ks(t)),s}static resetCache(){Za.clear(),Wl.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=ks.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return zm(t,s,n,this.name)}formatOffset(t,s){return ar(this.offset(t),s)}offset(t){if(!this.valid)return NaN;const s=new Date(t);if(isNaN(s))return NaN;const n=j0(this.name);let[i,r,o,a,l,c,u]=n.formatToParts?U0(n,s):W0(n,s);a==="BC"&&(i=-Math.abs(i)+1);const h=ya({year:i,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+s;const g=f%1e3;return f-=g>=0?g:1e3+g,(h-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let hd={};function z0(e,t={}){const s=JSON.stringify([e,t]);let n=hd[s];return n||(n=new Intl.ListFormat(e,t),hd[s]=n),n}const Ul=new Map;function zl(e,t={}){const s=JSON.stringify([e,t]);let n=Ul.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(e,t),Ul.set(s,n)),n}const Vl=new Map;function V0(e,t={}){const s=JSON.stringify([e,t]);let n=Vl.get(s);return n===void 0&&(n=new Intl.NumberFormat(e,t),Vl.set(s,n)),n}const Hl=new Map;function H0(e,t={}){const{base:s,...n}=t,i=JSON.stringify([e,n]);let r=Hl.get(i);return r===void 0&&(r=new Intl.RelativeTimeFormat(e,t),Hl.set(i,r)),r}let Ji=null;function q0(){return Ji||(Ji=new Intl.DateTimeFormat().resolvedOptions().locale,Ji)}const ql=new Map;function Pm(e){let t=ql.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),ql.set(e,t)),t}const Jl=new Map;function J0(e){let t=Jl.get(e);if(!t){const s=new Intl.Locale(e);t="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in t||(t={...Lm,...t}),Jl.set(e,t)}return t}function Y0(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const s=e.indexOf("-u-");if(s===-1)return[e];{let n,i;try{n=zl(e).resolvedOptions(),i=e}catch{const l=e.substring(0,s);n=zl(l).resolvedOptions(),i=l}const{numberingSystem:r,calendar:o}=n;return[i,r,o]}}function K0(e,t,s){return(s||t)&&(e.includes("-u-")||(e+="-u"),s&&(e+=`-ca-${s}`),t&&(e+=`-nu-${t}`)),e}function Z0(e){const t=[];for(let s=1;s<=12;s++){const n=D.utc(2009,s,1);t.push(e(n))}return t}function G0(e){const t=[];for(let s=1;s<=7;s++){const n=D.utc(2016,11,13+s);t.push(e(n))}return t}function Qr(e,t,s,n){const i=e.listingMode();return i==="error"?null:i==="en"?s(t):n(t)}function X0(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||Pm(e.locale).numberingSystem==="latn"}class Q0{constructor(t,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:r,...o}=n;if(!s||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=V0(t,a)}}format(t){if(this.inf){const s=this.floor?Math.floor(t):t;return this.inf.format(s)}else{const s=this.floor?Math.floor(t):qc(t,3);return jt(s,this.padTo)}}}class t_{constructor(t,s,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&ks.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||i,this.dtf=zl(s,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class e_{constructor(t,s,n){this.opts={style:"long",...n},!s&&Wm()&&(this.rtf=H0(t,n))}format(t,s){return this.rtf?this.rtf.format(t,s):S_(s,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,s){return this.rtf?this.rtf.formatToParts(t,s):[]}}const Lm={firstDay:1,minimalDays:4,weekend:[6,7]};class xt{static fromOpts(t){return xt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,s,n,i,r=!1){const o=t||$t.defaultLocale,a=o||(r?"en-US":q0()),l=s||$t.defaultNumberingSystem,c=n||$t.defaultOutputCalendar,u=Kl(i)||$t.defaultWeekSettings;return new xt(a,l,c,u,o)}static resetCache(){Ji=null,Ul.clear(),Vl.clear(),Hl.clear(),ql.clear(),Jl.clear()}static fromObject({locale:t,numberingSystem:s,outputCalendar:n,weekSettings:i}={}){return xt.create(t,s,n,i)}constructor(t,s,n,i,r){const[o,a,l]=Y0(t);this.locale=o,this.numberingSystem=s||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=K0(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=X0(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&s?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:xt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Kl(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,s=!1){return Qr(this,t,qm,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");s&=!n;const i=s?{month:t,day:"numeric"}:{month:t},r=s?"format":"standalone";if(!this.monthsCache[r][t]){const o=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[r][t]=Z0(o)}return this.monthsCache[r][t]})}weekdays(t,s=!1){return Qr(this,t,Km,()=>{const n=s?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=s?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=G0(r=>this.extract(r,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return Qr(this,void 0,()=>Zm,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[D.utc(2016,11,13,9),D.utc(2016,11,13,19)].map(s=>this.extract(s,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Qr(this,t,Gm,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[D.utc(-40,1,1),D.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[t]})}extract(t,s,n){const i=this.dtFormatter(t,s),r=i.formatToParts(),o=r.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(t={}){return new Q0(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,s={}){return new t_(t,this.intl,s)}relFormatter(t={}){return new e_(this.intl,this.isEnglish(),t)}listFormatter(t={}){return z0(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Pm(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Um()?J0(this.locale):Lm}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Ga=null;class ce extends Ir{static get utcInstance(){return Ga===null&&(Ga=new ce(0)),Ga}static instance(t){return t===0?ce.utcInstance:new ce(t)}static parseSpecifier(t){if(t){const s=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new ce(ba(s[1],s[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ar(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ar(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,s){return ar(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class s_ extends Ir{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Bs(e,t){if(Q(e)||e===null)return t;if(e instanceof Ir)return e;if(l_(e)){const s=e.toLowerCase();return s==="default"?t:s==="local"||s==="system"?ma.instance:s==="utc"||s==="gmt"?ce.utcInstance:ce.parseSpecifier(s)||ks.create(e)}else return Js(e)?ce.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new s_(e)}const Uc={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},fd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},n_=Uc.hanidec.replace(/[\[|\]]/g,"").split("");function i_(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(e[s].search(Uc.hanidec)!==-1)t+=n_.indexOf(e[s]);else for(const i in fd){const[r,o]=fd[i];n>=r&&n<=o&&(t+=n-r)}}return parseInt(t,10)}else return t}const Yl=new Map;function r_(){Yl.clear()}function Be({numberingSystem:e},t=""){const s=e||"latn";let n=Yl.get(s);n===void 0&&(n=new Map,Yl.set(s,n));let i=n.get(t);return i===void 0&&(i=new RegExp(`${Uc[s]}${t}`),n.set(t,i)),i}let gd=()=>Date.now(),md="system",pd=null,yd=null,bd=null,vd=60,_d,wd=null;class $t{static get now(){return gd}static set now(t){gd=t}static set defaultZone(t){md=t}static get defaultZone(){return Bs(md,ma.instance)}static get defaultLocale(){return pd}static set defaultLocale(t){pd=t}static get defaultNumberingSystem(){return yd}static set defaultNumberingSystem(t){yd=t}static get defaultOutputCalendar(){return bd}static set defaultOutputCalendar(t){bd=t}static get defaultWeekSettings(){return wd}static set defaultWeekSettings(t){wd=Kl(t)}static get twoDigitCutoffYear(){return vd}static set twoDigitCutoffYear(t){vd=t%100}static get throwOnInvalid(){return _d}static set throwOnInvalid(t){_d=t}static resetCaches(){xt.resetCache(),ks.resetCache(),D.resetCache(),r_()}}class Ve{constructor(t,s){this.reason=t,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Rm=[0,31,59,90,120,151,181,212,243,273,304,334],$m=[0,31,60,91,121,152,182,213,244,274,305,335];function Le(e,t){return new Ve("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function zc(e,t,s){const n=new Date(Date.UTC(e,t-1,s));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function Fm(e,t,s){return s+(Pr(e)?$m:Rm)[t-1]}function Nm(e,t){const s=Pr(e)?$m:Rm,n=s.findIndex(r=>r<t),i=t-s[n];return{month:n+1,day:i}}function Vc(e,t){return(e-t+7)%7+1}function Vo(e,t=4,s=1){const{year:n,month:i,day:r}=e,o=Fm(n,i,r),a=Vc(zc(n,i,r),s);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=n-1,l=xr(c,t,s)):l>xr(n,t,s)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,...va(e)}}function xd(e,t=4,s=1){const{weekYear:n,weekNumber:i,weekday:r}=e,o=Vc(zc(n,1,t),s),a=hi(n);let l=i*7+r-o-7+t,c;l<1?(c=n-1,l+=hi(c)):l>a?(c=n+1,l-=hi(n)):c=n;const{month:u,day:d}=Nm(c,l);return{year:c,month:u,day:d,...va(e)}}function Xa(e){const{year:t,month:s,day:n}=e,i=Fm(t,s,n);return{year:t,ordinal:i,...va(e)}}function Sd(e){const{year:t,ordinal:s}=e,{month:n,day:i}=Nm(t,s);return{year:t,month:n,day:i,...va(e)}}function kd(e,t){if(!Q(e.localWeekday)||!Q(e.localWeekNumber)||!Q(e.localWeekYear)){if(!Q(e.weekday)||!Q(e.weekNumber)||!Q(e.weekYear))throw new ii("Cannot mix locale-based week fields with ISO-based week fields");return Q(e.localWeekday)||(e.weekday=e.localWeekday),Q(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Q(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function o_(e,t=4,s=1){const n=pa(e.weekYear),i=Re(e.weekNumber,1,xr(e.weekYear,t,s)),r=Re(e.weekday,1,7);return n?i?r?!1:Le("weekday",e.weekday):Le("week",e.weekNumber):Le("weekYear",e.weekYear)}function a_(e){const t=pa(e.year),s=Re(e.ordinal,1,hi(e.year));return t?s?!1:Le("ordinal",e.ordinal):Le("year",e.year)}function jm(e){const t=pa(e.year),s=Re(e.month,1,12),n=Re(e.day,1,Ho(e.year,e.month));return t?s?n?!1:Le("day",e.day):Le("month",e.month):Le("year",e.year)}function Bm(e){const{hour:t,minute:s,second:n,millisecond:i}=e,r=Re(t,0,23)||t===24&&s===0&&n===0&&i===0,o=Re(s,0,59),a=Re(n,0,59),l=Re(i,0,999);return r?o?a?l?!1:Le("millisecond",i):Le("second",n):Le("minute",s):Le("hour",t)}function Q(e){return typeof e>"u"}function Js(e){return typeof e=="number"}function pa(e){return typeof e=="number"&&e%1===0}function l_(e){return typeof e=="string"}function c_(e){return Object.prototype.toString.call(e)==="[object Date]"}function Wm(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Um(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function u_(e){return Array.isArray(e)?e:[e]}function Td(e,t,s){if(e.length!==0)return e.reduce((n,i)=>{const r=[t(i),i];return n&&s(n[0],r[0])===n[0]?n:r},null)[1]}function d_(e,t){return t.reduce((s,n)=>(s[n]=e[n],s),{})}function pi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kl(e){if(e==null)return null;if(typeof e!="object")throw new Qt("Week settings must be an object");if(!Re(e.firstDay,1,7)||!Re(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Re(t,1,7)))throw new Qt("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Re(e,t,s){return pa(e)&&e>=t&&e<=s}function h_(e,t){return e-t*Math.floor(e/t)}function jt(e,t=2){const s=e<0;let n;return s?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function Ns(e){if(!(Q(e)||e===null||e===""))return parseInt(e,10)}function ln(e){if(!(Q(e)||e===null||e===""))return parseFloat(e)}function Hc(e){if(!(Q(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function qc(e,t,s="round"){const n=10**t;switch(s){case"expand":return e>0?Math.ceil(e*n)/n:Math.floor(e*n)/n;case"trunc":return Math.trunc(e*n)/n;case"round":return Math.round(e*n)/n;case"floor":return Math.floor(e*n)/n;case"ceil":return Math.ceil(e*n)/n;default:throw new RangeError(`Value rounding ${s} is out of range`)}}function Pr(e){return e%4===0&&(e%100!==0||e%400===0)}function hi(e){return Pr(e)?366:365}function Ho(e,t){const s=h_(t-1,12)+1,n=e+(t-s)/12;return s===2?Pr(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function ya(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Od(e,t,s){return-Vc(zc(e,1,t),s)+t-1}function xr(e,t=4,s=1){const n=Od(e,t,s),i=Od(e+1,t,s);return(hi(e)-n+i)/7}function Zl(e){return e>99?e:e>$t.twoDigitCutoffYear?1900+e:2e3+e}function zm(e,t,s,n=null){const i=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(s,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function ba(e,t){let s=parseInt(e,10);Number.isNaN(s)&&(s=0);const n=parseInt(t,10)||0,i=s<0||Object.is(s,-0)?-n:n;return s*60+i}function Vm(e){const t=Number(e);if(typeof e=="boolean"||e===""||!Number.isFinite(t))throw new Qt(`Invalid unit value ${e}`);return t}function qo(e,t){const s={};for(const n in e)if(pi(e,n)){const i=e[n];if(i==null)continue;s[t(n)]=Vm(i)}return s}function ar(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${jt(s,2)}:${jt(n,2)}`;case"narrow":return`${i}${s}${n>0?`:${n}`:""}`;case"techie":return`${i}${jt(s,2)}${jt(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function va(e){return d_(e,["hour","minute","second","millisecond"])}const f_=["January","February","March","April","May","June","July","August","September","October","November","December"],Hm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g_=["J","F","M","A","M","J","J","A","S","O","N","D"];function qm(e){switch(e){case"narrow":return[...g_];case"short":return[...Hm];case"long":return[...f_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Jm=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ym=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],m_=["M","T","W","T","F","S","S"];function Km(e){switch(e){case"narrow":return[...m_];case"short":return[...Ym];case"long":return[...Jm];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Zm=["AM","PM"],p_=["Before Christ","Anno Domini"],y_=["BC","AD"],b_=["B","A"];function Gm(e){switch(e){case"narrow":return[...b_];case"short":return[...y_];case"long":return[...p_];default:return null}}function v_(e){return Zm[e.hour<12?0:1]}function __(e,t){return Km(t)[e.weekday-1]}function w_(e,t){return qm(t)[e.month-1]}function x_(e,t){return Gm(t)[e.year<0?0:1]}function S_(e,t,s="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(s==="auto"&&r){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${i[e][0]}`;case-1:return d?"yesterday":`last ${i[e][0]}`;case 0:return d?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],u=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Dd(e,t){let s="";for(const n of e)n.literal?s+=n.val:s+=t(n.val);return s}const k_={D:zo,DD:gm,DDD:mm,DDDD:pm,t:ym,tt:bm,ttt:vm,tttt:_m,T:wm,TT:xm,TTT:Sm,TTTT:km,f:Tm,ff:Dm,fff:Mm,ffff:Am,F:Om,FF:Cm,FFF:Em,FFFF:Im};class ee{static create(t,s={}){return new ee(t,s)}static parseFormat(t){let s=null,n="",i=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?((n.length>0||i)&&r.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),s=null,n="",i=!i):i||a===s?n+=a:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=a,s=a)}return n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(t){return k_[t]}constructor(t,s){this.opts=s,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...s}).format()}dtFormatter(t,s={}){return this.loc.dtFormatter(t,{...this.opts,...s})}formatDateTime(t,s){return this.dtFormatter(t,s).format()}formatDateTimeParts(t,s){return this.dtFormatter(t,s).formatToParts()}formatInterval(t,s){return this.dtFormatter(t.start,s).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,s){return this.dtFormatter(t,s).resolvedOptions()}num(t,s=0,n=void 0){if(this.opts.forceSimple)return jt(t,s);const i={...this.opts};return s>0&&(i.padTo=s),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,s){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(f,g)=>this.loc.extract(t,f,g),o=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>n?v_(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>n?w_(t,f):r(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>n?__(t,f):r(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const g=ee.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(t,g):f},d=f=>n?x_(t,f):r({era:f},"era"),h=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?r({day:"numeric"},"day"):this.num(t.day);case"dd":return i?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?r({month:"numeric"},"month"):this.num(t.month);case"MM":return i?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?r({year:"numeric"},"year"):this.num(t.year);case"yy":return i?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(f)}};return Dd(ee.parseFormat(s),h)}formatDurationFromString(t,s){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},r=(u,d)=>h=>{const f=i(h);if(f){const g=d.isNegativeDuration&&f!==d.largestUnit?n:1;let m;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?m="never":this.opts.signMode==="all"?m="always":m="auto",this.num(u.get(f)*g,h.length,m)}else return h},o=ee.parseFormat(s),a=o.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),l=t.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Dd(o,r(l,c))}}const Xm=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xi(...e){const t=e.reduce((s,n)=>s+n.source,"");return RegExp(`^${t}$`)}function Si(...e){return t=>e.reduce(([s,n,i],r)=>{const[o,a,l]=r(t,i);return[{...s,...o},a||n,l]},[{},null,1]).slice(0,2)}function ki(e,...t){if(e==null)return[null,null];for(const[s,n]of t){const i=s.exec(e);if(i)return n(i)}return[null,null]}function Qm(...e){return(t,s)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=Ns(t[s+i]);return[n,null,s+i]}}const tp=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,T_=`(?:${tp.source}?(?:\\[(${Xm.source})\\])?)?`,Jc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ep=RegExp(`${Jc.source}${T_}`),Yc=RegExp(`(?:[Tt]${ep.source})?`),O_=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,D_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,C_=/(\d{4})-?(\d{3})/,M_=Qm("weekYear","weekNumber","weekDay"),E_=Qm("year","ordinal"),A_=/(\d{4})-(\d\d)-(\d\d)/,sp=RegExp(`${Jc.source} ?(?:${tp.source}|(${Xm.source}))?`),I_=RegExp(`(?: ${sp.source})?`);function fi(e,t,s){const n=e[t];return Q(n)?s:Ns(n)}function P_(e,t){return[{year:fi(e,t),month:fi(e,t+1,1),day:fi(e,t+2,1)},null,t+3]}function Ti(e,t){return[{hours:fi(e,t,0),minutes:fi(e,t+1,0),seconds:fi(e,t+2,0),milliseconds:Hc(e[t+3])},null,t+4]}function Lr(e,t){const s=!e[t]&&!e[t+1],n=ba(e[t+1],e[t+2]),i=s?null:ce.instance(n);return[{},i,t+3]}function Rr(e,t){const s=e[t]?ks.create(e[t]):null;return[{},s,t+1]}const L_=RegExp(`^T?${Jc.source}$`),R_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function $_(e){const[t,s,n,i,r,o,a,l,c]=e,u=t[0]==="-",d=l&&l[0]==="-",h=(f,g=!1)=>f!==void 0&&(g||f&&u)?-f:f;return[{years:h(ln(s)),months:h(ln(n)),weeks:h(ln(i)),days:h(ln(r)),hours:h(ln(o)),minutes:h(ln(a)),seconds:h(ln(l),l==="-0"),milliseconds:h(Hc(c),d)}]}const F_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Kc(e,t,s,n,i,r,o){const a={year:t.length===2?Zl(Ns(t)):Ns(t),month:Hm.indexOf(s)+1,day:Ns(n),hour:Ns(i),minute:Ns(r)};return o&&(a.second=Ns(o)),e&&(a.weekday=e.length>3?Jm.indexOf(e)+1:Ym.indexOf(e)+1),a}const N_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function j_(e){const[,t,s,n,i,r,o,a,l,c,u,d]=e,h=Kc(t,i,n,s,r,o,a);let f;return l?f=F_[l]:c?f=0:f=ba(u,d),[h,new ce(f)]}function B_(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const W_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,U_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,z_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Cd(e){const[,t,s,n,i,r,o,a]=e;return[Kc(t,i,n,s,r,o,a),ce.utcInstance]}function V_(e){const[,t,s,n,i,r,o,a]=e;return[Kc(t,a,s,n,i,r,o),ce.utcInstance]}const H_=xi(O_,Yc),q_=xi(D_,Yc),J_=xi(C_,Yc),Y_=xi(ep),np=Si(P_,Ti,Lr,Rr),K_=Si(M_,Ti,Lr,Rr),Z_=Si(E_,Ti,Lr,Rr),G_=Si(Ti,Lr,Rr);function X_(e){return ki(e,[H_,np],[q_,K_],[J_,Z_],[Y_,G_])}function Q_(e){return ki(B_(e),[N_,j_])}function tw(e){return ki(e,[W_,Cd],[U_,Cd],[z_,V_])}function ew(e){return ki(e,[R_,$_])}const sw=Si(Ti);function nw(e){return ki(e,[L_,sw])}const iw=xi(A_,I_),rw=xi(sp),ow=Si(Ti,Lr,Rr);function aw(e){return ki(e,[iw,np],[rw,ow])}const Md="Invalid Duration",ip={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},lw={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...ip},Ae=146097/400,jn=146097/4800,cw={years:{quarters:4,months:12,weeks:Ae/7,days:Ae,hours:Ae*24,minutes:Ae*24*60,seconds:Ae*24*60*60,milliseconds:Ae*24*60*60*1e3},quarters:{months:3,weeks:Ae/28,days:Ae/4,hours:Ae*24/4,minutes:Ae*24*60/4,seconds:Ae*24*60*60/4,milliseconds:Ae*24*60*60*1e3/4},months:{weeks:jn/7,days:jn,hours:jn*24,minutes:jn*24*60,seconds:jn*24*60*60,milliseconds:jn*24*60*60*1e3},...ip},vn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],uw=vn.slice(0).reverse();function hs(e,t,s=!1){const n={values:s?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new yt(n)}function rp(e,t){let s=t.milliseconds??0;for(const n of uw.slice(1))t[n]&&(s+=t[n]*e[n].milliseconds);return s}function Ed(e,t){const s=rp(e,t)<0?-1:1;vn.reduceRight((n,i)=>{if(Q(t[i]))return n;if(n){const r=t[n]*s,o=e[i][n],a=Math.floor(r/o);t[i]+=a*s,t[n]-=a*o*s}return i},null),vn.reduce((n,i)=>{if(Q(t[i]))return n;if(n){const r=t[n]%1;t[n]-=r,t[i]+=r*e[n][i]}return i},null)}function Ad(e){const t={};for(const[s,n]of Object.entries(e))n!==0&&(t[s]=n);return t}class yt{constructor(t){const s=t.conversionAccuracy==="longterm"||!1;let n=s?cw:lw;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||xt.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,s){return yt.fromObject({milliseconds:t},s)}static fromObject(t,s={}){if(t==null||typeof t!="object")throw new Qt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new yt({values:qo(t,yt.normalizeUnit),loc:xt.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(t){if(Js(t))return yt.fromMillis(t);if(yt.isDuration(t))return t;if(typeof t=="object")return yt.fromObject(t);throw new Qt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,s){const[n]=ew(t);return n?yt.fromObject(n,s):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,s){const[n]=nw(t);return n?yt.fromObject(n,s):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,s=null){if(!t)throw new Qt("need to specify a reason the Duration is invalid");const n=t instanceof Ve?t:new Ve(t,s);if($t.throwOnInvalid)throw new $0(n);return new yt({invalid:n})}static normalizeUnit(t){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!s)throw new fm(t);return s}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?ee.create(this.loc,n).formatDurationFromString(this,t):Md}toHuman(t={}){if(!this.isValid)return Md;const s=t.showZeros!==!1,n=vn.map(i=>{const r=this.values[i];return Q(r)||r===0&&!s?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=qc(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},D.fromMillis(s,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?rp(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t),n={};for(const i of vn)(pi(s.values,i)||pi(this.values,i))&&(n[i]=s.get(i)+this.get(i));return hs(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t);return this.plus(s.negate())}mapUnits(t){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=Vm(t(this.values[n],n));return hs(this,{values:s},!0)}get(t){return this[yt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const s={...this.values,...qo(t,yt.normalizeUnit)};return hs(this,{values:s})}reconfigure({locale:t,numberingSystem:s,conversionAccuracy:n,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:s}),matrix:i,conversionAccuracy:n};return hs(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Ed(this.matrix,t),hs(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Ad(this.normalize().shiftToAll().toObject());return hs(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>yt.normalizeUnit(o));const s={},n={},i=this.toObject();let r;for(const o of vn)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in n)a+=this.matrix[c][o]*n[c],n[c]=0;Js(i[o])&&(a+=i[o]);const l=Math.trunc(a);s[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else Js(i[o])&&(n[o]=i[o]);for(const o in n)n[o]!==0&&(s[r]+=o===r?n[o]:n[o]/this.matrix[r][o]);return Ed(this.matrix,s),hs(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=this.values[s]===0?0:-this.values[s];return hs(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=Ad(this.values);return hs(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function s(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of vn)if(!s(this.values[n],t.values[n]))return!1;return!0}}const Bn="Invalid Interval";function dw(e,t){return!e||!e.isValid?Rt.invalid("missing or invalid start"):!t||!t.isValid?Rt.invalid("missing or invalid end"):t<e?Rt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Rt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,s=null){if(!t)throw new Qt("need to specify a reason the Interval is invalid");const n=t instanceof Ve?t:new Ve(t,s);if($t.throwOnInvalid)throw new R0(n);return new Rt({invalid:n})}static fromDateTimes(t,s){const n=$i(t),i=$i(s),r=dw(n,i);return r??new Rt({start:n,end:i})}static after(t,s){const n=yt.fromDurationLike(s),i=$i(t);return Rt.fromDateTimes(i,i.plus(n))}static before(t,s){const n=yt.fromDurationLike(s),i=$i(t);return Rt.fromDateTimes(i.minus(n),i)}static fromISO(t,s){const[n,i]=(t||"").split("/",2);if(n&&i){let r,o;try{r=D.fromISO(n,s),o=r.isValid}catch{o=!1}let a,l;try{a=D.fromISO(i,s),l=a.isValid}catch{l=!1}if(o&&l)return Rt.fromDateTimes(r,a);if(o){const c=yt.fromISO(i,s);if(c.isValid)return Rt.after(r,c)}else if(l){const c=yt.fromISO(n,s);if(c.isValid)return Rt.before(a,c)}}return Rt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(t,s);let i;return s?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,s),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:s}={}){return this.isValid?Rt.fromDateTimes(t||this.s,s||this.e):this}splitAt(...t){if(!this.isValid)return[];const s=t.map($i).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:i}=this,r=0;for(;i<this.e;){const o=s[r]||this.e,a=+o>+this.e?this.e:o;n.push(Rt.fromDateTimes(i,a)),i=a,r+=1}return n}splitBy(t){const s=yt.fromDurationLike(t);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,i=1,r;const o=[];for(;n<this.e;){const a=this.start.plus(s.mapUnits(l=>l*i));r=+a>+this.e?this.e:a,o.push(Rt.fromDateTimes(n,r)),n=r,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const s=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return s>=n?null:Rt.fromDateTimes(s,n)}union(t){if(!this.isValid)return this;const s=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Rt.fromDateTimes(s,n)}static merge(t){const[s,n]=t.sort((i,r)=>i.s-r.s).reduce(([i,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[i,r.union(o)]:[i.concat([r]),o]:[i,o],[[],null]);return n&&s.push(n),s}static xor(t){let s=null,n=0;const i=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?s=l.time:(s&&+s!=+l.time&&i.push(Rt.fromDateTimes(s,l.time)),s=null);return Rt.merge(i)}difference(...t){return Rt.xor([this].concat(t)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Bn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=zo,s={}){return this.isValid?ee.create(this.s.loc.clone(s),t).formatInterval(this):Bn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Bn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Bn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Bn}toFormat(t,{separator:s="  "}={}){return this.isValid?`${this.s.toFormat(t)}${s}${this.e.toFormat(t)}`:Bn}toDuration(t,s){return this.isValid?this.e.diff(this.s,t,s):yt.invalid(this.invalidReason)}mapEndpoints(t){return Rt.fromDateTimes(t(this.s),t(this.e))}}class to{static hasDST(t=$t.defaultZone){const s=D.now().setZone(t).set({month:12});return!t.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(t){return ks.isValidZone(t)}static normalizeZone(t){return Bs(t,$t.defaultZone)}static getStartOfWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||xt.create(s,n,r)).months(t)}static monthsFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||xt.create(s,n,r)).months(t,!0)}static weekdays(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return xt.create(t).meridiems()}static eras(t="short",{locale:s=null}={}){return xt.create(s,null,"gregory").eras(t)}static features(){return{relative:Wm(),localeWeek:Um()}}}function Id(e,t){const s=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(t)-s(e);return Math.floor(yt.fromMillis(n).as("days"))}function hw(e,t,s){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Id(l,c);return(u-u%7)/7}],["days",Id]],i={},r=e;let o,a;for(const[l,c]of n)s.indexOf(l)>=0&&(o=l,i[l]=c(e,t),a=r.plus(i),a>t?(i[l]--,e=r.plus(i),e>t&&(a=e,i[l]--,e=r.plus(i))):e=a);return[e,i,a,o]}function fw(e,t,s,n){let[i,r,o,a]=hw(e,t,s);const l=t-i,c=s.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(r[a]=(r[a]||0)+l/(o-i)));const u=yt.fromObject(r,n);return c.length>0?yt.fromMillis(l,n).shiftTo(...c).plus(u):u}const gw="missing Intl.DateTimeFormat.formatToParts support";function vt(e,t=s=>s){return{regex:e,deser:([s])=>t(i_(s))}}const mw="",op=`[ ${mw}]`,ap=new RegExp(op,"g");function pw(e){return e.replace(/\./g,"\\.?").replace(ap,op)}function Pd(e){return e.replace(/\./g,"").replace(ap," ").toLowerCase()}function We(e,t){return e===null?null:{regex:RegExp(e.map(pw).join("|")),deser:([s])=>e.findIndex(n=>Pd(s)===Pd(n))+t}}function Ld(e,t){return{regex:e,deser:([,s,n])=>ba(s,n),groups:t}}function eo(e){return{regex:e,deser:([t])=>t}}function yw(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function bw(e,t){const s=Be(t),n=Be(t,"{2}"),i=Be(t,"{3}"),r=Be(t,"{4}"),o=Be(t,"{6}"),a=Be(t,"{1,2}"),l=Be(t,"{1,3}"),c=Be(t,"{1,6}"),u=Be(t,"{1,9}"),d=Be(t,"{2,4}"),h=Be(t,"{4,6}"),f=p=>({regex:RegExp(yw(p.val)),deser:([y])=>y,literal:!0}),m=(p=>{if(e.literal)return f(p);switch(p.val){case"G":return We(t.eras("short"),0);case"GG":return We(t.eras("long"),0);case"y":return vt(c);case"yy":return vt(d,Zl);case"yyyy":return vt(r);case"yyyyy":return vt(h);case"yyyyyy":return vt(o);case"M":return vt(a);case"MM":return vt(n);case"MMM":return We(t.months("short",!0),1);case"MMMM":return We(t.months("long",!0),1);case"L":return vt(a);case"LL":return vt(n);case"LLL":return We(t.months("short",!1),1);case"LLLL":return We(t.months("long",!1),1);case"d":return vt(a);case"dd":return vt(n);case"o":return vt(l);case"ooo":return vt(i);case"HH":return vt(n);case"H":return vt(a);case"hh":return vt(n);case"h":return vt(a);case"mm":return vt(n);case"m":return vt(a);case"q":return vt(a);case"qq":return vt(n);case"s":return vt(a);case"ss":return vt(n);case"S":return vt(l);case"SSS":return vt(i);case"u":return eo(u);case"uu":return eo(a);case"uuu":return vt(s);case"a":return We(t.meridiems(),0);case"kkkk":return vt(r);case"kk":return vt(d,Zl);case"W":return vt(a);case"WW":return vt(n);case"E":case"c":return vt(s);case"EEE":return We(t.weekdays("short",!1),1);case"EEEE":return We(t.weekdays("long",!1),1);case"ccc":return We(t.weekdays("short",!0),1);case"cccc":return We(t.weekdays("long",!0),1);case"Z":case"ZZ":return Ld(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Ld(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return eo(/[a-z_+-/]{1,256}?/i);case" ":return eo(/[^\S\n\r]/);default:return f(p)}})(e)||{invalidReason:gw};return m.token=e,m}const vw={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function _w(e,t,s){const{type:n,value:i}=e;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const r=t[n];let o=n;n==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=s.hour12?"hour12":"hour24");let a=vw[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function ww(e){return[`^${e.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,e]}function xw(e,t,s){const n=e.match(t);if(n){const i={};let r=1;for(const o in s)if(pi(s,o)){const a=s[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(r,r+l))),r+=l}return[n,i]}else return[n,{}]}function Sw(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return Q(e.z)||(s=ks.create(e.z)),Q(e.Z)||(s||(s=new ce(e.Z)),n=e.Z),Q(e.q)||(e.M=(e.q-1)*3+1),Q(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Q(e.u)||(e.S=Hc(e.u)),[Object.keys(e).reduce((r,o)=>{const a=t(o);return a&&(r[a]=e[o]),r},{}),s,n]}let Qa=null;function kw(){return Qa||(Qa=D.fromMillis(1555555555555)),Qa}function Tw(e,t){if(e.literal)return e;const s=ee.macroTokenToFormatOpts(e.val),n=dp(s,t);return n==null||n.includes(void 0)?e:n}function lp(e,t){return Array.prototype.concat(...e.map(s=>Tw(s,t)))}class cp{constructor(t,s){if(this.locale=t,this.format=s,this.tokens=lp(ee.parseFormat(s),t),this.units=this.tokens.map(n=>bw(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=ww(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[s,n]=xw(t,this.regex,this.handlers),[i,r,o]=n?Sw(n):[null,null,void 0];if(pi(n,"a")&&pi(n,"H"))throw new ii("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:i,zone:r,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function up(e,t,s){return new cp(e,s).explainFromTokens(t)}function Ow(e,t,s){const{result:n,zone:i,specificOffset:r,invalidReason:o}=up(e,t,s);return[n,i,r,o]}function dp(e,t){if(!e)return null;const n=ee.create(t,e).dtFormatter(kw()),i=n.formatToParts(),r=n.resolvedOptions();return i.map(o=>_w(o,e,r))}const tl="Invalid DateTime",Rd=864e13;function Yi(e){return new Ve("unsupported zone",`the zone "${e.name}" is not supported`)}function el(e){return e.weekData===null&&(e.weekData=Vo(e.c)),e.weekData}function sl(e){return e.localWeekData===null&&(e.localWeekData=Vo(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function cn(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new D({...s,...t,old:s})}function hp(e,t,s){let n=e-t*60*1e3;const i=s.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const r=s.offset(n);return i===r?[n,i]:[e-Math.min(i,r)*60*1e3,Math.max(i,r)]}function so(e,t){e+=t*60*1e3;const s=new Date(e);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function Mo(e,t,s){return hp(ya(e),t,s)}function $d(e,t){const s=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:n,month:i,day:Math.min(e.c.day,Ho(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=yt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ya(r);let[l,c]=hp(a,s,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Wn(e,t,s,n,i,r){const{setZone:o,zone:a}=s;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=D.fromObject(e,{...s,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return D.invalid(new Ve("unparsable",`the input "${i}" can't be parsed as ${n}`))}function no(e,t,s=!0){return e.isValid?ee.create(xt.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(e,t):null}function nl(e,t,s){const n=e.c.year>9999||e.c.year<0;let i="";if(n&&e.c.year>=0&&(i+="+"),i+=jt(e.c.year,n?6:4),s==="year")return i;if(t){if(i+="-",i+=jt(e.c.month),s==="month")return i;i+="-"}else if(i+=jt(e.c.month),s==="month")return i;return i+=jt(e.c.day),i}function Fd(e,t,s,n,i,r,o){let a=!s||e.c.millisecond!==0||e.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=jt(e.c.hour),o==="hour")break;if(t){if(l+=":",l+=jt(e.c.minute),o==="minute")break;a&&(l+=":",l+=jt(e.c.second))}else{if(l+=jt(e.c.minute),o==="minute")break;a&&(l+=jt(e.c.second))}if(o==="second")break;a&&(!n||e.c.millisecond!==0)&&(l+=".",l+=jt(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&e.offset===0&&!r?l+="Z":e.o<0?(l+="-",l+=jt(Math.trunc(-e.o/60)),l+=":",l+=jt(Math.trunc(-e.o%60))):(l+="+",l+=jt(Math.trunc(e.o/60)),l+=":",l+=jt(Math.trunc(e.o%60)))),r&&(l+="["+e.zone.ianaName+"]"),l}const fp={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Dw={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Cw={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Eo=["year","month","day","hour","minute","second","millisecond"],Mw=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ew=["year","ordinal","hour","minute","second","millisecond"];function Ao(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new fm(e);return t}function Nd(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ao(e)}}function Aw(e){if(Ki===void 0&&(Ki=$t.now()),e.type!=="iana")return e.offset(Ki);const t=e.name;let s=Gl.get(t);return s===void 0&&(s=e.offset(Ki),Gl.set(t,s)),s}function jd(e,t){const s=Bs(t.zone,$t.defaultZone);if(!s.isValid)return D.invalid(Yi(s));const n=xt.fromObject(t);let i,r;if(Q(e.year))i=$t.now();else{for(const l of Eo)Q(e[l])&&(e[l]=fp[l]);const o=jm(e)||Bm(e);if(o)return D.invalid(o);const a=Aw(s);[i,r]=Mo(e,a,s)}return new D({ts:i,zone:s,loc:n,o:r})}function Bd(e,t,s){const n=Q(s.round)?!0:s.round,i=Q(s.rounding)?"trunc":s.rounding,r=(a,l)=>(a=qc(a,n||s.calendary?0:2,s.calendary?"round":i),t.loc.clone(s).relFormatter(s).format(a,l)),o=a=>s.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a);if(s.unit)return r(o(s.unit),s.unit);for(const a of s.units){const l=o(a);if(Math.abs(l)>=1)return r(l,a)}return r(e>t?-0:0,s.units[s.units.length-1])}function Wd(e){let t={},s;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],s=Array.from(e).slice(0,e.length-1)):s=Array.from(e),[t,s]}let Ki;const Gl=new Map;class D{constructor(t){const s=t.zone||$t.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Ve("invalid input"):null)||(s.isValid?null:Yi(s));this.ts=Q(t.ts)?$t.now():t.ts;let i=null,r=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(s))[i,r]=[t.old.c,t.old.o];else{const a=Js(t.o)&&!t.old?t.o:s.offset(this.ts);i=so(this.ts,a),n=Number.isNaN(i.year)?new Ve("invalid input"):null,i=n?null:i,r=n?null:a}this._zone=s,this.loc=t.loc||xt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=r,this.isLuxonDateTime=!0}static now(){return new D({})}static local(){const[t,s]=Wd(arguments),[n,i,r,o,a,l,c]=s;return jd({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,s]=Wd(arguments),[n,i,r,o,a,l,c]=s;return t.zone=ce.utcInstance,jd({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,s={}){const n=c_(t)?t.valueOf():NaN;if(Number.isNaN(n))return D.invalid("invalid input");const i=Bs(s.zone,$t.defaultZone);return i.isValid?new D({ts:n,zone:i,loc:xt.fromObject(s)}):D.invalid(Yi(i))}static fromMillis(t,s={}){if(Js(t))return t<-Rd||t>Rd?D.invalid("Timestamp out of range"):new D({ts:t,zone:Bs(s.zone,$t.defaultZone),loc:xt.fromObject(s)});throw new Qt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,s={}){if(Js(t))return new D({ts:t*1e3,zone:Bs(s.zone,$t.defaultZone),loc:xt.fromObject(s)});throw new Qt("fromSeconds requires a numerical input")}static fromObject(t,s={}){t=t||{};const n=Bs(s.zone,$t.defaultZone);if(!n.isValid)return D.invalid(Yi(n));const i=xt.fromObject(s),r=qo(t,Nd),{minDaysInFirstWeek:o,startOfWeek:a}=kd(r,i),l=$t.now(),c=Q(s.specificOffset)?n.offset(l):s.specificOffset,u=!Q(r.ordinal),d=!Q(r.year),h=!Q(r.month)||!Q(r.day),f=d||h,g=r.weekYear||r.weekNumber;if((f||u)&&g)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new ii("Can't mix ordinal dates with month/day");const m=g||r.weekday&&!f;let p,y,b=so(l,c);m?(p=Mw,y=Dw,b=Vo(b,o,a)):u?(p=Ew,y=Cw,b=Xa(b)):(p=Eo,y=fp);let v=!1;for(const B of p){const L=r[B];Q(L)?v?r[B]=y[B]:r[B]=b[B]:v=!0}const w=m?o_(r,o,a):u?a_(r):jm(r),S=w||Bm(r);if(S)return D.invalid(S);const T=m?xd(r,o,a):u?Sd(r):r,[E,R]=Mo(T,c,n),I=new D({ts:E,zone:n,o:R,loc:i});return r.weekday&&f&&t.weekday!==I.weekday?D.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${I.toISO()}`):I.isValid?I:D.invalid(I.invalid)}static fromISO(t,s={}){const[n,i]=X_(t);return Wn(n,i,s,"ISO 8601",t)}static fromRFC2822(t,s={}){const[n,i]=Q_(t);return Wn(n,i,s,"RFC 2822",t)}static fromHTTP(t,s={}){const[n,i]=tw(t);return Wn(n,i,s,"HTTP",s)}static fromFormat(t,s,n={}){if(Q(t)||Q(s))throw new Qt("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:r=null}=n,o=xt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=Ow(o,t,s);return u?D.invalid(u):Wn(a,l,n,`format ${s}`,t,c)}static fromString(t,s,n={}){return D.fromFormat(t,s,n)}static fromSQL(t,s={}){const[n,i]=aw(t);return Wn(n,i,s,"SQL",t)}static invalid(t,s=null){if(!t)throw new Qt("need to specify a reason the DateTime is invalid");const n=t instanceof Ve?t:new Ve(t,s);if($t.throwOnInvalid)throw new L0(n);return new D({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,s={}){const n=dp(t,xt.fromObject(s));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,s={}){return lp(ee.parseFormat(t),xt.fromObject(s)).map(i=>i.val).join("")}static resetCache(){Ki=void 0,Gl.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?el(this).weekYear:NaN}get weekNumber(){return this.isValid?el(this).weekNumber:NaN}get weekday(){return this.isValid?el(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?sl(this).weekday:NaN}get localWeekNumber(){return this.isValid?sl(this).weekNumber:NaN}get localWeekYear(){return this.isValid?sl(this).weekYear:NaN}get ordinal(){return this.isValid?Xa(this.c).ordinal:NaN}get monthShort(){return this.isValid?to.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?to.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?to.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?to.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,s=6e4,n=ya(this.c),i=this.zone.offset(n-t),r=this.zone.offset(n+t),o=this.zone.offset(n-i*s),a=this.zone.offset(n-r*s);if(o===a)return[this];const l=n-o*s,c=n-a*s,u=so(l,o),d=so(c,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[cn(this,{ts:l}),cn(this,{ts:c})]:[this]}get isInLeapYear(){return Pr(this.year)}get daysInMonth(){return Ho(this.year,this.month)}get daysInYear(){return this.isValid?hi(this.year):NaN}get weeksInWeekYear(){return this.isValid?xr(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?xr(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:s,numberingSystem:n,calendar:i}=ee.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:i}}toUTC(t=0,s={}){return this.setZone(ce.instance(t),s)}toLocal(){return this.setZone($t.defaultZone)}setZone(t,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(t=Bs(t,$t.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(s||n){const r=t.offset(this.ts),o=this.toObject();[i]=Mo(o,r,t)}return cn(this,{ts:i,zone:t})}else return D.invalid(Yi(t))}reconfigure({locale:t,numberingSystem:s,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:s,outputCalendar:n});return cn(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const s=qo(t,Nd),{minDaysInFirstWeek:n,startOfWeek:i}=kd(s,this.loc),r=!Q(s.weekYear)||!Q(s.weekNumber)||!Q(s.weekday),o=!Q(s.ordinal),a=!Q(s.year),l=!Q(s.month)||!Q(s.day),c=a||l,u=s.weekYear||s.weekNumber;if((c||o)&&u)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new ii("Can't mix ordinal dates with month/day");let d;r?d=xd({...Vo(this.c,n,i),...s},n,i):Q(s.ordinal)?(d={...this.toObject(),...s},Q(s.day)&&(d.day=Math.min(Ho(d.year,d.month),d.day))):d=Sd({...Xa(this.c),...s});const[h,f]=Mo(d,this.o,this.zone);return cn(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t);return cn(this,$d(this,s))}minus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t).negate();return cn(this,$d(this,s))}startOf(t,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},i=yt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(s){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(n.weekNumber=this.weekNumber-1),n.weekday=r}else n.weekday=1;if(i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t,s){return this.isValid?this.plus({[t]:1}).startOf(t,s).minus(1):this}toFormat(t,s={}){return this.isValid?ee.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,t):tl}toLocaleString(t=zo,s={}){return this.isValid?ee.create(this.loc.clone(s),t).formatDateTime(this):tl}toLocaleParts(t={}){return this.isValid?ee.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:r=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Ao(o);const a=t==="extended";let l=nl(this,a,o);return Eo.indexOf(o)>=3&&(l+="T"),l+=Fd(this,a,s,n,i,r,o),l}toISODate({format:t="extended",precision:s="day"}={}){return this.isValid?nl(this,t==="extended",Ao(s)):null}toISOWeekDate(){return no(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:r=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Ao(a),(i&&Eo.indexOf(a)>=3?"T":"")+Fd(this,o==="extended",s,t,n,r,a)):null}toRFC2822(){return no(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return no(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?nl(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(s||t)&&(n&&(i+=" "),s?i+="z":t&&(i+="ZZ")),no(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():tl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const s={...this.c};return t.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,s="milliseconds",n={}){if(!this.isValid||!t.isValid)return yt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=u_(s).map(yt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=fw(a,l,r,i);return o?c.negate():c}diffNow(t="milliseconds",s={}){return this.diff(D.now(),t,s)}until(t){return this.isValid?Rt.fromDateTimes(this,t):this}hasSame(t,s,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(s,n)<=i&&i<=r.endOf(s,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const s=t.base||D.fromObject({},{zone:this.zone}),n=t.padding?this<s?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(i=t.unit,r=void 0),Bd(s,this.plus(n),{...t,numeric:"always",units:i,unit:r})}toRelativeCalendar(t={}){return this.isValid?Bd(t.base||D.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(D.isDateTime))throw new Qt("min requires all arguments be DateTimes");return Td(t,s=>s.valueOf(),Math.min)}static max(...t){if(!t.every(D.isDateTime))throw new Qt("max requires all arguments be DateTimes");return Td(t,s=>s.valueOf(),Math.max)}static fromFormatExplain(t,s,n={}){const{locale:i=null,numberingSystem:r=null}=n,o=xt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0});return up(o,t,s)}static fromStringExplain(t,s,n={}){return D.fromFormatExplain(t,s,n)}static buildFormatParser(t,s={}){const{locale:n=null,numberingSystem:i=null}=s,r=xt.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new cp(r,t)}static fromFormatParser(t,s,n={}){if(Q(t)||Q(s))throw new Qt("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:r=null}=n,o=xt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0});if(!o.equals(s.locale))throw new Qt(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${s.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=s.explainFromTokens(t);return u?D.invalid(u):Wn(a,l,n,`format ${s.format}`,t,c)}static get DATE_SHORT(){return zo}static get DATE_MED(){return gm}static get DATE_MED_WITH_WEEKDAY(){return F0}static get DATE_FULL(){return mm}static get DATE_HUGE(){return pm}static get TIME_SIMPLE(){return ym}static get TIME_WITH_SECONDS(){return bm}static get TIME_WITH_SHORT_OFFSET(){return vm}static get TIME_WITH_LONG_OFFSET(){return _m}static get TIME_24_SIMPLE(){return wm}static get TIME_24_WITH_SECONDS(){return xm}static get TIME_24_WITH_SHORT_OFFSET(){return Sm}static get TIME_24_WITH_LONG_OFFSET(){return km}static get DATETIME_SHORT(){return Tm}static get DATETIME_SHORT_WITH_SECONDS(){return Om}static get DATETIME_MED(){return Dm}static get DATETIME_MED_WITH_SECONDS(){return Cm}static get DATETIME_MED_WITH_WEEKDAY(){return N0}static get DATETIME_FULL(){return Mm}static get DATETIME_FULL_WITH_SECONDS(){return Em}static get DATETIME_HUGE(){return Am}static get DATETIME_HUGE_WITH_SECONDS(){return Im}}function $i(e){if(D.isDateTime(e))return e;if(e&&e.valueOf&&Js(e.valueOf()))return D.fromJSDate(e);if(e&&typeof e=="object")return D.fromObject(e);throw new Qt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function In(e,{withMillis:t=!1}={}){const s=e instanceof Date?e:new Date(e);if(Number.isNaN(s.getTime()))throw new Error(`sydneyDayRangeUtcISO: invalid date (${String(e)})`);const n=D.fromJSDate(s,{zone:"Australia/Sydney"}).startOf("day"),i=n.plus({days:1}),r=t?{}:{suppressMilliseconds:!0};return{startUtcISO:n.toUTC().toISO(r),endUtcISO:i.toUTC().toISO(r)}}function Zc(e,t,{withMillis:s=!1}={}){const n=e instanceof Date?e:new Date(e),i=t instanceof Date?t:new Date(t),r=D.fromJSDate(n,{zone:"Australia/Sydney"}).startOf("day"),o=D.fromJSDate(i,{zone:"Australia/Sydney"}).startOf("day"),a=s?{}:{suppressMilliseconds:!0};return{startUtcISO:r.toUTC().toISO(a),endUtcISO:o.toUTC().toISO(a),startSydney:r,endSydney:o}}function Iw(e){return D.fromJSDate(On(e)).setZone("Australia/Sydney").toFormat("d LLL yyyy, h:mma").toLowerCase()}function gp(){return D.local().setZone("Australia/Sydney").startOf("day").toJSDate()}function at(e){return e instanceof Date?e:typeof e=="number"?new Date(e):typeof e=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(e)?D.fromISO(e):D.fromISO(e,{zone:"Australia/Sydney"})).toJSDate():null}function Pw(e){return D.fromJSDate(On(e)).setZone("Australia/Sydney").toFormat("cccc d LLLL yyyy")}function Sr(e){return D.fromJSDate(On(e)).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function ie(e){const t=D.fromJSDate(On(e)).setZone("Australia/Sydney").startOf("day"),s=t.plus({days:1});return{startOfDay:t.toJSDate(),endOfDay:s.toJSDate()}}function io(e,t){const s=D.fromJSDate(On(e)).setZone("Australia/Sydney"),n=D.fromJSDate(On(t)).setZone("Australia/Sydney");return s.hasSame(n,"day")}function lr(e){return Jo(e).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function Xl(e){const t=Jo(e).setZone("Australia/Sydney");return`${t.toFormat("d LLL")}, ${t.toFormat("h:mma").toLowerCase()}`}function mp(e,t,s){const n=Jo(e),i=t?Jo(t):D.fromJSDate(On(s)).setZone("Australia/Sydney").startOf("day").plus({days:1}),r=Math.max(0,i.toMillis()-n.toMillis());return Math.round(r/6e4)}function Jo(e){return e instanceof Date?D.fromJSDate(e):typeof e=="number"?D.fromMillis(e):typeof e=="string"?/Z|[+\-]\d{2}:?\d{2}$/.test(e)?D.fromISO(e):D.fromISO(e,{zone:"utc"}):D.invalid("Unknown input")}function js(e){const t=Math.round(e||0),s=Math.floor(t/60),n=t%60;return s>0&&n>0?`${s}h${n}m`:s>0?`${s}h`:`${n}m`}function Lw(e){const t=Math.max(0,Math.round(e||0)),s=Math.floor(t/60),n=t%60;return s>0?`${s}h ${n}m`:`${n}m`}function On(e){if(e instanceof Date)return e;if(typeof e=="number")return new Date(e);if(typeof e=="string"){const t=D.fromISO(e);return t.isValid?t.toJSDate():new Date(e)}return new Date(NaN)}const Lt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Rw={class:"date-header"},$w={class:"date-heading"},Fw={class:"date-nav"},Nw=["value"],jw={__name:"DateHeader",props:{selectedDate:{type:Date,default:()=>gp()}},emits:["update:selectedDate"],setup(e,{emit:t}){const s=e,n=t,i=G({get:()=>s.selectedDate,set:u=>n("update:selectedDate",u)}),r=G(()=>Pw(i.value)),o=G(()=>D.fromJSDate(i.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function a(){const u=D.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.minus({days:1}).startOf("day").toJSDate()}function l(){const u=D.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.plus({days:1}).startOf("day").toJSDate()}function c(u){const d=u.target.value;d&&(i.value=D.fromISO(d,{zone:"Australia/Sydney"}).startOf("day").toJSDate())}return(u,d)=>(O(),M("header",Rw,[_("h1",$w,P(r.value),1),_("div",Fw,[_("button",{class:"icon-btn",type:"button",onClick:a,"aria-label":"Previous day",title:"Previous day"},d[0]||(d[0]=[_("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{d:"M15 6l-6 6 6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_("input",{class:"date-input",type:"date",value:o.value,onInput:c},null,40,Nw),_("button",{class:"icon-btn",type:"button",onClick:l,"aria-label":"Next day",title:"Next day"},d[1]||(d[1]=[_("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{d:"M9 6l6 6-6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]))}},Bw=Lt(jw,[["__scopeId","data-v-f392a69f"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $r(e){return e+.5|0}const Us=(e,t,s)=>Math.max(Math.min(e,s),t);function Zi(e){return Us($r(e*2.55),0,255)}function Ys(e){return Us($r(e*255),0,255)}function vs(e){return Us($r(e/2.55)/100,0,1)}function Ud(e){return Us($r(e*100),0,100)}const Ie={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ql=[..."0123456789ABCDEF"],Ww=e=>Ql[e&15],Uw=e=>Ql[(e&240)>>4]+Ql[e&15],ro=e=>(e&240)>>4===(e&15),zw=e=>ro(e.r)&&ro(e.g)&&ro(e.b)&&ro(e.a);function Vw(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Ie[e[1]]*17,g:255&Ie[e[2]]*17,b:255&Ie[e[3]]*17,a:t===5?Ie[e[4]]*17:255}:(t===7||t===9)&&(s={r:Ie[e[1]]<<4|Ie[e[2]],g:Ie[e[3]]<<4|Ie[e[4]],b:Ie[e[5]]<<4|Ie[e[6]],a:t===9?Ie[e[7]]<<4|Ie[e[8]]:255})),s}const Hw=(e,t)=>e<255?t(e):"";function qw(e){var t=zw(e)?Ww:Uw;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Hw(e.a,t):void 0}const Jw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pp(e,t,s){const n=t*Math.min(s,1-s),i=(r,o=(r+e/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Yw(e,t,s){const n=(i,r=(i+e/60)%6)=>s-s*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Kw(e,t,s){const n=pp(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function Zw(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function Gc(e){const s=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(s,n,i),o=Math.min(s,n,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=Zw(s,n,i,u,r),l=l*60+.5),[l|0,c||0,a]}function Xc(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Ys)}function Qc(e,t,s){return Xc(pp,e,t,s)}function Gw(e,t,s){return Xc(Kw,e,t,s)}function Xw(e,t,s){return Xc(Yw,e,t,s)}function yp(e){return(e%360+360)%360}function Qw(e){const t=Jw.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?Zi(+t[5]):Ys(+t[5]));const i=yp(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=Gw(i,r,o):t[1]==="hsv"?n=Xw(i,r,o):n=Qc(i,r,o),{r:n[0],g:n[1],b:n[2],a:s}}function tx(e,t){var s=Gc(e);s[0]=yp(s[0]+t),s=Qc(s),e.r=s[0],e.g=s[1],e.b=s[2]}function ex(e){if(!e)return;const t=Gc(e),s=t[0],n=Ud(t[1]),i=Ud(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${vs(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const zd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sx(){const e={},t=Object.keys(Vd),s=Object.keys(zd);let n,i,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],i=0;i<s.length;i++)r=s[i],a=a.replace(r,zd[r]);r=parseInt(Vd[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let oo;function nx(e){oo||(oo=sx(),oo.transparent=[0,0,0,0]);const t=oo[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ix=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rx(e){const t=ix.exec(e);let s=255,n,i,r;if(t){if(t[7]!==n){const o=+t[7];s=t[8]?Zi(o):Us(o*255,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Zi(n):Us(n,0,255)),i=255&(t[4]?Zi(i):Us(i,0,255)),r=255&(t[6]?Zi(r):Us(r,0,255)),{r:n,g:i,b:r,a:s}}}function ox(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${vs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const il=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Un=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ax(e,t,s){const n=Un(vs(e.r)),i=Un(vs(e.g)),r=Un(vs(e.b));return{r:Ys(il(n+s*(Un(vs(t.r))-n))),g:Ys(il(i+s*(Un(vs(t.g))-i))),b:Ys(il(r+s*(Un(vs(t.b))-r))),a:e.a+s*(t.a-e.a)}}function ao(e,t,s){if(e){let n=Gc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=Qc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function bp(e,t){return e&&Object.assign(t||{},e)}function Hd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ys(e[3]))):(t=bp(e,{r:0,g:0,b:0,a:1}),t.a=Ys(t.a)),t}function lx(e){return e.charAt(0)==="r"?rx(e):Qw(e)}class kr{constructor(t){if(t instanceof kr)return t;const s=typeof t;let n;s==="object"?n=Hd(t):s==="string"&&(n=Vw(t)||nx(t)||lx(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=bp(this._rgb);return t&&(t.a=vs(t.a)),t}set rgb(t){this._rgb=Hd(t)}rgbString(){return this._valid?ox(this._rgb):void 0}hexString(){return this._valid?qw(this._rgb):void 0}hslString(){return this._valid?ex(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let r;const o=s===r?.5:s,a=2*o-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=ax(this._rgb,t._rgb,s)),this}clone(){return new kr(this.rgb)}alpha(t){return this._rgb.a=Ys(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=$r(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ao(this._rgb,2,t),this}darken(t){return ao(this._rgb,2,-t),this}saturate(t){return ao(this._rgb,1,t),this}desaturate(t){return ao(this._rgb,1,-t),this}rotate(t){return tx(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fs(){}const cx=(()=>{let e=0;return()=>e++})();function St(e){return e==null}function It(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function lt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Jt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Xe(e,t){return Jt(e)?e:t}function it(e,t){return typeof e>"u"?t:e}const ux=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,vp=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Dt(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function Tt(e,t,s,n){let i,r,o;if(It(e))for(r=e.length,i=0;i<r;i++)t.call(s,e[i],i);else if(lt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(s,e[o[i]],o[i])}function Yo(e,t){let s,n,i,r;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],r=t[s],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Ko(e){if(It(e))return e.map(Ko);if(lt(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=Ko(e[s[i]]);return t}return e}function _p(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function dx(e,t,s,n){if(!_p(e))return;const i=t[e],r=s[e];lt(i)&&lt(r)?Tr(i,r,n):t[e]=Ko(r)}function Tr(e,t,s){const n=It(t)?t:[t],i=n.length;if(!lt(e))return e;s=s||{};const r=s.merger||dx;let o;for(let a=0;a<i;++a){if(o=n[a],!lt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,s)}return e}function cr(e,t){return Tr(e,t,{merger:hx})}function hx(e,t,s){if(!_p(e))return;const n=t[e],i=s[e];lt(n)&&lt(i)?cr(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ko(i))}const qd={"":e=>e,x:e=>e.x,y:e=>e.y};function fx(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function gx(e){const t=fx(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function Dn(e,t){return(qd[t]||(qd[t]=gx(t)))(e)}function tu(e){return e.charAt(0).toUpperCase()+e.slice(1)}const be=e=>typeof e<"u",pe=e=>typeof e=="function",Jd=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function mx(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ot=Math.PI,Vt=2*Ot,px=Vt+Ot,Zo=Number.POSITIVE_INFINITY,eu=Ot/180,Zt=Ot/2,Pe=Ot/4,Go=Ot*2/3,wp=Math.log10,as=Math.sign;function ur(e,t,s){return Math.abs(e-t)<s}function Yd(e){const t=Math.round(e);e=ur(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(wp(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function yx(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,r)=>i-r).pop(),t}function bx(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Xs(e){return!bx(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function vx(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function _x(e,t,s){let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n][s],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ht(e){return e*(Ot/180)}function xp(e){return e*(180/Ot)}function Kd(e){if(!Jt(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function tc(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let r=Math.atan2(n,s);return r<-.5*Ot&&(r+=Vt),{angle:r,distance:i}}function yi(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wx(e,t){return(e-t+px)%Vt-Ot}function is(e){return(e%Vt+Vt)%Vt}function Xo(e,t,s,n){const i=is(e),r=is(t),o=is(s),a=is(r-i),l=is(o-i),c=is(i-r),u=is(i-o);return i===r||i===o||n&&r===o||a>l&&c<u}function $e(e,t,s){return Math.max(t,Math.min(s,e))}function xx(e){return $e(e,-32768,32767)}function zs(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function su(e,t,s){s=s||(o=>e[o]<t);let n=e.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,s(r)?i=r:n=r;return{lo:i,hi:n}}const _n=(e,t,s,n)=>su(e,s,n?i=>{const r=e[i][t];return r<s||r===s&&e[i+1][t]===s}:i=>e[i][t]<s),Sx=(e,t,s)=>su(e,s,n=>e[n][t]>=s);function kx(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const Sp=["push","pop","shift","splice","unshift"];function Tx(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Sp.forEach(s=>{const n="_onData"+tu(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function Zd(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(Sp.forEach(r=>{delete e[r]}),delete e._chartjs)}function kp(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Tp=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Op(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Tp.call(window,()=>{n=!1,e.apply(t,s)}))}}function Ox(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const Dp=e=>e==="start"?"left":e==="end"?"right":"center",Se=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,Dx=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function Cp(e,t,s){const n=t.length;let i=0,r=n;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(i=Math.min(_n(l,u,d).lo,s?n:_n(t,u,o.getPixelForValue(d)).lo),c){const m=l.slice(0,i+1).reverse().findIndex(p=>!St(p[a.axis]));i-=Math.max(0,m)}i=$e(i,0,n-1)}if(g){let m=Math.max(_n(l,o.axis,h,!0).hi+1,s?0:_n(t,u,o.getPixelForValue(h),!0).hi+1);if(c){const p=l.slice(m-1).findIndex(y=>!St(y[a.axis]));m+=Math.max(0,p)}r=$e(m,i,n)-i}else r=n-i}return{start:i,count:r}}function Mp(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),r}const lo=e=>e===0||e===1,Gd=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Vt/s)),Xd=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Vt/s)+1,dr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Zt)+1,easeOutSine:e=>Math.sin(e*Zt),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>lo(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>lo(e)?e:Gd(e,.075,.3),easeOutElastic:e=>lo(e)?e:Xd(e,.075,.3),easeInOutElastic(e){return lo(e)?e:e<.5?.5*Gd(e*2,.1125,.45):.5+.5*Xd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-dr.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?dr.easeInBounce(e*2)*.5:dr.easeOutBounce(e*2-1)*.5+.5};function nu(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qd(e){return nu(e)?e:new kr(e)}function rl(e){return nu(e)?e:new kr(e).saturate(.5).darken(.1).hexString()}const Cx=["x","y","borderWidth","radius","tension"],Mx=["color","borderColor","backgroundColor"];function Ex(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Mx},numbers:{type:"number",properties:Cx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ax(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const th=new Map;function Ix(e,t){t=t||{};const s=e+JSON.stringify(t);let n=th.get(s);return n||(n=new Intl.NumberFormat(e,t),th.set(s,n)),n}function iu(e,t,s){return Ix(t,s).format(e)}const Px={values(e){return It(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,r=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=Lx(e,s)}const o=wp(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),iu(e,n,l)}};function Lx(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var Ep={formatters:Px};function Rx(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ep.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Cn=Object.create(null),ec=Object.create(null);function hr(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const r=s[n];e=e[r]||(e[r]=Object.create(null))}return e}function ol(e,t,s){return typeof t=="string"?Tr(hr(e,t),s):Tr(hr(e,""),t)}class $x{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>rl(i.backgroundColor),this.hoverBorderColor=(n,i)=>rl(i.borderColor),this.hoverColor=(n,i)=>rl(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return ol(this,t,s)}get(t){return hr(this,t)}describe(t,s){return ol(ec,t,s)}override(t,s){return ol(Cn,t,s)}route(t,s,n,i){const r=hr(this,t),o=hr(this,n),a="_"+s;Object.defineProperties(r,{[a]:{value:r[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=o[i];return lt(l)?Object.assign({},c,l):it(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var Ft=new $x({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ex,Ax,Rx]);function Fx(e){return!e||St(e.size)||St(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function eh(e,t,s,n,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,s.push(i)),r>n&&(n=r),n}function un(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function sh(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sc(e,t,s,n){Ap(e,t,s,n,null)}function Ap(e,t,s,n,i){let r,o,a,l,c,u,d,h;const f=t.pointStyle,g=t.rotation,m=t.radius;let p=(g||0)*eu;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(p),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(s,n,i/2,m,0,0,Vt):e.arc(s,n,m,0,Vt),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(s+Math.sin(p)*u,n-Math.cos(p)*m),p+=Go,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*m),p+=Go,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(p+Pe)*l,d=Math.cos(p+Pe)*(i?i/2-c:l),a=Math.sin(p+Pe)*l,h=Math.sin(p+Pe)*(i?i/2-c:l),e.arc(s-d,n-a,c,p-Ot,p-Zt),e.arc(s+h,n-o,c,p-Zt,p),e.arc(s+d,n+a,c,p,p+Zt),e.arc(s-h,n+o,c,p+Zt,p+Ot),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(s-u,n-l,2*u,2*l);break}p+=Pe;case"rectRot":d=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+h,n-o),e.lineTo(s+d,n+a),e.lineTo(s-h,n+o),e.closePath();break;case"crossRot":p+=Pe;case"cross":d=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o);break;case"star":d=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o),p+=Pe,d=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o);break;case"line":o=i?i/2:Math.cos(p)*m,a=Math.sin(p)*m,e.moveTo(s-o,n-a),e.lineTo(s+o,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(p)*(i?i/2:m),n+Math.sin(p)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Or(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Fr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Nr(e){e.restore()}function Nx(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const r=(t.x+s.x)/2;e.lineTo(r,t.y),e.lineTo(r,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function jx(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Bx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),St(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Wx(e,t,s,n,i){if(i.strikethrough||i.underline){const r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function Ux(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function Qo(e,t,s,n,i,r={}){const o=It(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Bx(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Ux(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),St(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,s,n,r.maxWidth)),e.fillText(c,s,n,r.maxWidth),Wx(e,s,n,c,r),n+=Number(i.lineHeight);e.restore()}function Dr(e,t){const{x:s,y:n,w:i,h:r,radius:o}=t;e.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Ot,Ot,!0),e.lineTo(s,n+r-o.bottomLeft),e.arc(s+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,Ot,Zt,!0),e.lineTo(s+i-o.bottomRight,n+r),e.arc(s+i-o.bottomRight,n+r-o.bottomRight,o.bottomRight,Zt,0,!0),e.lineTo(s+i,n+o.topRight),e.arc(s+i-o.topRight,n+o.topRight,o.topRight,0,-Zt,!0),e.lineTo(s+o.topLeft,n)}const zx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hx(e,t){const s=(""+e).match(zx);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const qx=e=>+e||0;function Ip(e,t){const s={},n=lt(t),i=n?Object.keys(t):t,r=lt(e)?n?o=>it(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)s[o]=qx(r(o));return s}function Pp(e){return Ip(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Sn(e){return Ip(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ue(e){const t=Pp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Gt(e,t){e=e||{},t=t||Ft.font;let s=it(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=it(e.style,t.style);n&&!(""+n).match(Vx)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:it(e.family,t.family),lineHeight:Hx(it(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:it(e.weight,t.weight),string:""};return i.string=Fx(i),i}function co(e,t,s,n){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function Jx(e,t,s){const{min:n,max:i}=e,r=vp(t,(i-n)/2),o=(a,l)=>s&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(i,r)}}function Pn(e,t){return Object.assign(Object.create(e),t)}function ru(e,t=[""],s,n,i=()=>e[0]){const r=s||e;typeof n>"u"&&(n=Fp("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:a=>ru([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Rp(a,l,()=>eS(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return ih(a).includes(l)},ownKeys(a){return ih(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function bi(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Lp(e,n),setContext:r=>bi(e,r,s,n),override:r=>bi(e.override(r),t,s,n)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Rp(r,o,()=>Kx(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Lp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:pe(s)?s:()=>s,isIndexable:pe(n)?n:()=>n}}const Yx=(e,t)=>e?e+tu(t):t,ou=(e,t)=>lt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Rp(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function Kx(e,t,s){const{_proxy:n,_context:i,_subProxy:r,_descriptors:o}=e;let a=n[t];return pe(a)&&o.isScriptable(t)&&(a=Zx(t,a,e,s)),It(a)&&a.length&&(a=Gx(t,a,e,o.isIndexable)),ou(t,a)&&(a=bi(a,i,r&&r[t],o)),a}function Zx(e,t,s,n){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),ou(e,l)&&(l=au(i._scopes,i,e,l)),l}function Gx(e,t,s,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=s;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(lt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=au(c,i,e,u);t.push(bi(d,r,o&&o[e],a))}}return t}function $p(e,t,s){return pe(e)?e(t,s):e}const Xx=(e,t)=>e===!0?t:typeof e=="string"?Dn(t,e):void 0;function Qx(e,t,s,n,i){for(const r of t){const o=Xx(s,r);if(o){e.add(o);const a=$p(o._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function au(e,t,s,n){const i=t._rootScopes,r=$p(t._fallback,s,n),o=[...e,...i],a=new Set;a.add(n);let l=nh(a,o,s,r||s,n);return l===null||typeof r<"u"&&r!==s&&(l=nh(a,o,r,l,n),l===null)?!1:ru(Array.from(a),[""],i,r,()=>tS(t,s,n))}function nh(e,t,s,n,i){for(;s;)s=Qx(e,t,s,n,i);return s}function tS(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return It(i)&&lt(s)?s:i||{}}function eS(e,t,s,n){let i;for(const r of t)if(i=Fp(Yx(r,e),s),typeof i<"u")return ou(e,i)?au(s,n,e,i):i}function Fp(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function ih(e){let t=e._keys;return t||(t=e._keys=sS(e._scopes)),t}function sS(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}const nS=Number.EPSILON||1e-14,vi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Np=e=>e==="x"?"y":"x";function iS(e,t,s,n){const i=e.skip?t:e,r=t,o=s.skip?t:s,a=yi(r,i),l=yi(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=n*c,h=n*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+h*(o.x-i.x),y:r.y+h*(o.y-i.y)}}}function rS(e,t,s){const n=e.length;let i,r,o,a,l,c=vi(e,0);for(let u=0;u<n-1;++u)if(l=c,c=vi(e,u+1),!(!l||!c)){if(ur(t[u],0,nS)){s[u]=s[u+1]=0;continue}i=s[u]/t[u],r=s[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),s[u]=i*o*t[u],s[u+1]=r*o*t[u])}}function oS(e,t,s="x"){const n=Np(s),i=e.length;let r,o,a,l=vi(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=vi(e,c+1),!a)continue;const u=a[s],d=a[n];o&&(r=(u-o[s])/3,a[`cp1${s}`]=u-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[s]-u)/3,a[`cp2${s}`]=u+r,a[`cp2${n}`]=d+r*t[c])}}function aS(e,t="x"){const s=Np(t),n=e.length,i=Array(n).fill(0),r=Array(n);let o,a,l,c=vi(e,0);for(o=0;o<n;++o)if(a=l,l=c,c=vi(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[s]-l[s])/u:0}r[o]=a?c?as(i[o-1])!==as(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}rS(e,i,r),oS(e,r,t)}function uo(e,t,s){return Math.max(Math.min(e,s),t)}function lS(e,t){let s,n,i,r,o,a=Or(e[0],t);for(s=0,n=e.length;s<n;++s)o=r,r=a,a=s<n-1&&Or(e[s+1],t),r&&(i=e[s],o&&(i.cp1x=uo(i.cp1x,t.left,t.right),i.cp1y=uo(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=uo(i.cp2x,t.left,t.right),i.cp2y=uo(i.cp2y,t.top,t.bottom)))}function cS(e,t,s,n,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")aS(e,i);else{let c=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=iS(c,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&lS(e,s)}function lu(){return typeof window<"u"&&typeof document<"u"}function cu(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ta(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const _a=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function uS(e,t){return _a(e).getPropertyValue(t)}const dS=["top","right","bottom","left"];function kn(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const r=dS[i];n[r]=parseFloat(e[t+"-"+r+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const hS=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function fS(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:r}=n;let o=!1,a,l;if(hS(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function mn(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=_a(s),r=i.boxSizing==="border-box",o=kn(i,"padding"),a=kn(i,"border","width"),{x:l,y:c,box:u}=fS(e,s),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*s.width/n),y:Math.round((c-h)/g*s.height/n)}}function gS(e,t,s){let n,i;if(t===void 0||s===void 0){const r=e&&cu(e);if(!r)t=e.clientWidth,s=e.clientHeight;else{const o=r.getBoundingClientRect(),a=_a(r),l=kn(a,"border","width"),c=kn(a,"padding");t=o.width-c.width-l.width,s=o.height-c.height-l.height,n=ta(a.maxWidth,r,"clientWidth"),i=ta(a.maxHeight,r,"clientHeight")}}return{width:t,height:s,maxWidth:n||Zo,maxHeight:i||Zo}}const ho=e=>Math.round(e*10)/10;function mS(e,t,s,n){const i=_a(e),r=kn(i,"margin"),o=ta(i.maxWidth,e,"clientWidth")||Zo,a=ta(i.maxHeight,e,"clientHeight")||Zo,l=gS(e,t,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=kn(i,"border","width"),f=kn(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,n?c/n:u-r.height),c=ho(Math.min(c,o,l.maxWidth)),u=ho(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ho(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=ho(Math.floor(u*n))),{width:c,height:u}}function rh(e,t,s){const n=t||1,i=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=n,o.height=i,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const pS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lu()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function oh(e,t){const s=uS(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function pn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function yS(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function bS(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=pn(e,i,s),a=pn(i,r,s),l=pn(r,t,s),c=pn(o,a,s),u=pn(a,l,s);return pn(c,u,s)}const vS=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},_S=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function gi(e,t,s){return e?vS(t,s):_S()}function jp(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Bp(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wp(e){return e==="angle"?{between:Xo,compare:wx,normalize:is}:{between:zs,compare:(t,s)=>t-s,normalize:t=>t}}function ah({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function wS(e,t,s){const{property:n,start:i,end:r}=s,{between:o,normalize:a}=Wp(n),l=t.length;let{start:c,end:u,loop:d}=e,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(t[c%l][n]),i,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function Up(e,t,s){if(!s)return[e];const{property:n,start:i,end:r}=s,o=t.length,{compare:a,between:l,normalize:c}=Wp(n),{start:u,end:d,loop:h,style:f}=wS(e,t,s),g=[];let m=!1,p=null,y,b,v;const w=()=>l(i,v,y)&&a(i,v)!==0,S=()=>a(r,y)===0||l(r,v,y),T=()=>m||w(),E=()=>!m||S();for(let R=u,I=u;R<=d;++R)b=t[R%o],!b.skip&&(y=c(b[n]),y!==v&&(m=l(y,i,r),p===null&&T()&&(p=a(y,i)===0?R:I),p!==null&&E()&&(g.push(ah({start:p,end:R,loop:h,count:o,style:f})),p=null),I=R,v=y));return p!==null&&g.push(ah({start:p,end:d,loop:h,count:o,style:f})),g}function zp(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const r=Up(n[i],e.points,t);r.length&&s.push(...r)}return s}function xS(e,t,s,n){let i=0,r=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function SS(e,t,s,n){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%i,end:(l-1)%i,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:n}),r}function kS(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=xS(s,i,r,n);if(n===!0)return lh(e,[{start:o,end:a,loop:r}],s,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return lh(e,SS(s,o,l,c),s,t)}function lh(e,t,s,n){return!n||!n.setContext||!s?t:TS(e,t,s,n)}function TS(e,t,s,n){const i=e._chart.getContext(),r=ch(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=s.length,c=[];let u=r,d=t[0].start,h=d;function f(g,m,p,y){const b=a?-1:1;if(g!==m){for(g+=l;s[g%l].skip;)g-=b;for(;s[m%l].skip;)m+=b;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:p,style:y}),u=y,d=m%l)}}for(const g of t){d=a?d:g.start;let m=s[d%l],p;for(h=d+1;h<=g.end;h++){const y=s[h%l];p=ch(n.setContext(Pn(i,{type:"segment",p0:m,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),OS(p,u)&&f(d,h-1,g.loop,u),m=y,u=p}d<h-1&&f(d,h-1,g.loop,u)}return c}function ch(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function OS(e,t){if(!t)return!1;const s=[],n=function(i,r){return nu(r)?(s.includes(r)||s.push(r),s.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function fo(e,t,s){return e.options.clip?e[s]:t[s]}function DS(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:fo(s,t,"left"),right:fo(s,t,"right"),top:fo(n,t,"top"),bottom:fo(n,t,"bottom")}:t}function Vp(e,t){const s=t._clip;if(s.disabled)return!1;const n=DS(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class CS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const r=s.listeners[i],o=s.duration;r.forEach(a=>a({chart:t,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Tp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=r.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var gs=new CS;const uh="transparent",MS={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=Qd(e||uh),i=n.valid&&Qd(t||uh);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class ES{constructor(t,s,n,i){const r=s[n];i=co([t.to,i,r,t.from]);const o=co([t.from,r,i]);this._active=!0,this._fn=t.fn||MS[t.type||typeof o],this._easing=dr[t.easing]||dr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=co([t.to,s,i,t.from]),this._from=co([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=r;return}l=s/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class uu{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!lt(t))return;const s=Object.keys(Ft.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!lt(r))return;const o={};for(const a of s)o[a]=r[a];(It(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,s){const n=s.options,i=IS(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&AS(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,s){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(s),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const u=s[c];let d=r[c];const h=n.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=d=new ES(h,t,c,u),i.push(d)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return gs.add(this._chart,n),!0}}function AS(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const r=e[n[i]];r&&r.active()&&s.push(r.wait())}return Promise.all(s)}function IS(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function dh(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,r=s.max===void 0?t:0;return{start:n?r:i,end:n?i:r}}function PS(e,t,s){if(s===!1)return!1;const n=dh(e,s),i=dh(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function LS(e){let t,s,n,i;return lt(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function Hp(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=n.length;i<r;++i)s.push(n[i].index);return s}function hh(e,t,s,n={}){const i=e.keys,r=n.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===s){if(u=!0,n.all)continue;break}c=e.values[l],Jt(c)&&(r||t===0||as(t)===as(c))&&(t+=c)}return!u&&!n.all?0:t}function RS(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function al(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function $S(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function FS(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function NS(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function fh(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const r=e[i.index];if(s&&r>0||!s&&r<0)return i.index}return null}function gh(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,u=$S(r,o,n),d=t.length;let h;for(let f=0;f<d;++f){const g=t[f],{[l]:m,[c]:p}=g,y=g._stacks||(g._stacks={});h=y[c]=NS(i,u,m),h[a]=p,h._top=fh(h,o,!0,n.type),h._bottom=fh(h,o,!1,n.type);const b=h._visualValues||(h._visualValues={});b[a]=p}}function ll(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function jS(e,t){return Pn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function BS(e,t,s){return Pn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function Fi(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[n]===void 0||r[n][s]===void 0)return;delete r[n][s],r[n]._visualValues!==void 0&&r[n]._visualValues[s]!==void 0&&delete r[n]._visualValues[s]}}}const cl=e=>e==="reset"||e==="none",mh=(e,t)=>t?e:Object.assign({},e),WS=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Hp(s,!0),values:null};class jr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=al(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Fi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,r=s.xAxisID=it(n.xAxisID,ll(t,"x")),o=s.yAxisID=it(n.yAxisID,ll(t,"y")),a=s.rAxisID=it(n.rAxisID,ll(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,r,o,a),u=s.vAxisID=i(l,o,r,a);s.xScale=this.getScaleForId(r),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Zd(this._data,this),t._stacked&&Fi(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(lt(s)){const i=this._cachedMeta;this._data=RS(s,i)}else if(n!==s){if(n){Zd(n,this);const i=this._cachedMeta;Fi(i),i._parsed=[]}s&&Object.isExtensible(s)&&Tx(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=s._stacked;s._stacked=al(s.vScale,s),s.stack!==n.stack&&(i=!0,Fi(s),s.stack=n.stack),this._resyncElements(t),(i||r!==s._stacked)&&(gh(this,s._parsed),s._stacked=al(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,d,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{It(i[t])?h=this.parseArrayData(n,i,t,s):lt(i[t])?h=this.parseObjectData(n,i,t,s):h=this.parsePrimitiveData(n,i,t,s);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<s;++u)n._parsed[u+t]=d=h[u],l&&(f()&&(l=!1),c=d);n._sorted=l}o&&gh(this,h)}parsePrimitiveData(t,s,n,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let h,f,g;for(h=0,f=i;h<f;++h)g=h+n,d[h]={[a]:u||r.parse(c[g],g),[l]:o.parse(s[g],g)};return d}parseArrayData(t,s,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+n,d=s[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,s,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+n,f=s[h],c[u]={x:r.parse(Dn(f,a),h),y:o.parse(Dn(f,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,r=this._cachedMeta,o=s[t.axis],a={keys:Hp(i,!0),values:s._stacks[t.axis]._visualValues};return hh(a,o,r.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const r=n[s.axis];let o=r===null?NaN:r;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,o=hh(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),l=WS(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=FS(a);let h,f;function g(){f=i[h];const m=f[a.axis];return!Jt(f[t.axis])||u>m||d<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=s.length;i<r;++i)o=s[i][t.axis],Jt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=LS(it(this.options.clip,PS(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],r=s.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=BS(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=jS(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!s,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",r=this._cachedDataOpts,o=t+"-"+s,a=r[o],l=this.enableOptionSharing&&be(n);if(a)return mh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Ft.elements[t]),g=()=>this.getContext(n,i,s),m=c.resolveNamedOptions(h,f,g,d);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(mh(m,l))),m}_resolveAnimations(t,s,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${s}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,n,s))}const c=new uu(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||cl(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(s,r)||r!==i;return this.updateSharedOptions(r,s,n),{sharedOptions:r,includeOptions:o}}updateElement(t,s,n,i){cl(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!cl(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const r=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,r=s.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,s,n=!0){const i=this._cachedMeta,r=i.data,o=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=o;a--)c[a]=c[a-s]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(r,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&Fi(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function US(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,r=s.length;i<r;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=kp(n.sort((i,r)=>i-r))}return e._cache.$bar}function zS(e){const t=e.iScale,s=US(t,e.type);let n=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(be(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(i=0,r=s.length;i<r;++i)o=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return n}function VS(e,t,s,n){const i=s.barThickness;let r,o;return St(i)?(r=t.min*s.categoryPercentage,o=s.barPercentage):(r=i*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function HS(e,t,s,n){const i=t.pixels,r=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:s.barPercentage,start:c}}function qS(e,t,s,n){const i=s.parse(e[0],n),r=s.parse(e[1],n),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function qp(e,t,s,n){return It(e)?qS(e,t,s,n):t[s.axis]=s.parse(e,n),t}function ph(e,t,s,n){const i=e.iScale,r=e.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,d,h;for(c=s,u=s+n;c<u;++c)h=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(qp(h,d,r,c));return l}function ul(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function JS(e,t,s){return e!==0?as(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function YS(e){let t,s,n,i,r;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",r="start"):(i="start",r="end"),{start:s,end:n,reverse:t,top:i,bottom:r}}function KS(e,t,s,n){let i=t.borderSkipped;const r={};if(!i){e.borderSkipped=r;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=YS(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(r[yh(u,o,a,l)]=!0,i=c)),r[yh(i,o,a,l)]=!0,e.borderSkipped=r}function yh(e,t,s,n){return n?(e=ZS(e,t,s),e=bh(e,s,t)):e=bh(e,t,s),e}function ZS(e,t,s){return e===t?s:e===s?t:e}function bh(e,t,s){return e==="start"?t:e==="end"?s:e}function GS(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class XS extends jr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,s,n,i){return ph(t,s,n,i)}parseArrayData(t,s,n,i){return ph(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,g,m;for(h=n,f=n+i;h<f;++h)m=s[h],g={},g[r.axis]=r.parse(Dn(m,c),h),d.push(qp(Dn(m,u),g,o,h));return d}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const r=n._custom;r&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,r=this.getParsed(t),o=r._custom,a=ul(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i);for(let f=s;f<s+n;f++){const g=this.getParsed(f),m=r||St(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),y=(g._stacks||{})[a.axis],b={horizontal:c,base:m.base,enableBorderRadius:!y||ul(g._custom)||o===y._top||o===y._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};h&&(b.options=d||this.resolveDataElementOptions(f,t[f].active?"active":i));const v=b.options||t[f].options;KS(b,v,y,o),GS(b,v,u.ratio),this.updateElement(t[f],f,b,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const d=u._parsed.find(f=>f[n.axis]===l),h=d&&d[u.vScale.axis];if(St(h)||isNaN(h))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===s).shift()}_getAxis(){const t={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[it(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(t)}_getStackIndex(t,s,n){const i=this._getStacks(t,n),r=s!==void 0?i.indexOf(s):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let r,o;for(r=0,o=s.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||zS(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=ul(c);let d=l[s.axis],h=0,f=n?this.applyStack(s,l,n):d,g,m;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&as(d)!==as(c.barEnd)&&(h=0),h+=d);const p=!St(r)&&!u?r:h;let y=s.getPixelForValue(p);if(this.chart.getDataVisibility(t)?g=s.getPixelForValue(h+f):g=y,m=g-y,Math.abs(m)<o){m=JS(m,s,a)*o,d===a&&(y-=m/2);const b=s.getPixelForDecimal(0),v=s.getPixelForDecimal(1),w=Math.min(b,v),S=Math.max(b,v);y=Math.max(Math.min(y,S),w),g=y+m,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(g)-s.getValueForPixel(y))}if(y===s.getPixelForValue(a)){const b=as(m)*s.getLineWidthForValue(a)/2;y+=b,m-=b}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,r=i.skipNull,o=it(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(s.grouped){const u=r?this._getStackCount(t):s.stackCount,d=i.barThickness==="flex"?HS(t,s,i,u*c):VS(t,s,i,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(it(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+f;a=d.start+d.chunk*g+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[s.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}function QS(e,t,s){let n=1,i=1,r=0,o=0;if(t<Vt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(v,w,S)=>Xo(v,a,l,!0)?1:Math.max(w,w*s,S,S*s),g=(v,w,S)=>Xo(v,a,l,!0)?-1:Math.min(w,w*s,S,S*s),m=f(0,c,d),p=f(Zt,u,h),y=g(Ot,c,d),b=g(Ot+Zt,u,h);n=(m-y)/2,i=(p-b)/2,r=-(m+y)/2,o=-(p+b)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:o}}class tk extends jr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=l=>+n[l];if(lt(n[t])){const{key:l="value"}=this._parsing;r=c=>+Dn(n[c],l)}let o,a;for(o=t,a=t+s;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Ht(this.options.rotation-90)}_getCircumference(){return Ht(this.options.circumference)}_getRotationExtents(){let t=Vt,s=-Vt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),s=Math.max(s,r+o)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(ux(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:g,offsetY:m}=QS(d,u,l),p=(n.width-o)/h,y=(n.height-o)/f,b=Math.max(Math.min(p,y)/2,0),v=vp(this.options.radius,b),w=Math.max(v*l,0),S=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,i.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Vt)}updateElements(t,s,n,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=r&&c.animateScale,f=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(s,i);let y=this._getRotation(),b;for(b=0;b<s;++b)y+=this._circumference(b,r);for(b=s;b<s+n;++b){const v=this._circumference(b,r),w=t[b],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:g,innerRadius:f};p&&(S.options=m||this.resolveDataElementOptions(b,w.active?"active":i)),y+=v,this.updateElement(w,b,S,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?Vt*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=iu(s._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const r=this.resolveDataElementOptions(n);s=Math.max(s,r.offset||0,r.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(it(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class du extends jr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=s,o=this.chart._animationsDisabled;let{start:a,count:l}=Cp(s,i,o);this._drawStart=a,this._drawCount=l,Mp(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,i),h=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,p=Xs(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",b=s+n,v=t.length;let w=s>0&&this.getParsed(s-1);for(let S=0;S<v;++S){const T=t[S],E=y?T:{};if(S<s||S>=b){E.skip=!0;continue}const R=this.getParsed(S),I=St(R[f]),B=E[h]=o.getPixelForValue(R[h],S),L=E[f]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,R,l):R[f],S);E.skip=isNaN(B)||isNaN(L)||I,E.stop=S>0&&Math.abs(R[h]-w[h])>p,m&&(E.parsed=R,E.raw=c.data[S]),d&&(E.options=u||this.resolveDataElementOptions(S,T.active?"active":i)),y||this.updateElement(T,S,E,i),w=R}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class ek extends jr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=s,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:r,count:o}=Cp(s,n,i);if(this._drawStart=r,this._drawCount=o,Mp(s)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,s,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=o.axis,g=a.axis,{spanGaps:m,segment:p}=this.options,y=Xs(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||i==="none";let v=s>0&&this.getParsed(s-1);for(let w=s;w<s+n;++w){const S=t[w],T=this.getParsed(w),E=b?S:{},R=St(T[g]),I=E[f]=o.getPixelForValue(T[f],w),B=E[g]=r||R?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[g],w);E.skip=isNaN(I)||isNaN(B)||R,E.stop=w>0&&Math.abs(T[f]-v[f])>y,p&&(E.parsed=T,E.raw=c.data[w]),h&&(E.options=d||this.resolveDataElementOptions(w,S.active?"active":i)),b||this.updateElement(S,w,E,i),v=T}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const t=this._cachedMeta,s=t.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}}function dn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hu{static override(t){Object.assign(hu.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return dn()}parse(){return dn()}format(){return dn()}add(){return dn()}diff(){return dn()}startOf(){return dn()}endOf(){return dn()}}var Jp={_date:hu};function sk(e,t,s,n){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?Sx:_n;if(n){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const h=c(r,t,s-d),f=c(r,t,s+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(r,t,s);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=e,f=h.slice(0,u.lo+1).reverse().findIndex(m=>!St(m[d.axis]));u.lo-=Math.max(0,f);const g=h.slice(u.hi).findIndex(m=>!St(m[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function wa(e,t,s,n,i){const r=e.getSortedVisibleDatasetMetas(),o=s[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:h}=sk(r[a],t,o,i);for(let f=d;f<=h;++f){const g=u[f];g.skip||n(g,c,f)}}}function nk(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const r=t?Math.abs(n.x-i.x):0,o=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function dl(e,t,s,n,i){const r=[];return!i&&!e.isPointInArea(t)||wa(e,s,t,function(a,l,c){!i&&!Or(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function ik(e,t,s,n){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:d}=tc(o,{x:t.x,y:t.y});Xo(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return wa(e,s,t,r),i}function rk(e,t,s,n,i,r){let o=[];const a=nk(s);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(t.x,t.y,i);if(n&&!f)return;const g=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(g))&&!f)return;const p=a(t,g);p<l?(o=[{element:u,datasetIndex:d,index:h}],l=p):p===l&&o.push({element:u,datasetIndex:d,index:h})}return wa(e,s,t,c),o}function hl(e,t,s,n,i,r){return!r&&!e.isPointInArea(t)?[]:s==="r"&&!n?ik(e,t,s,i):rk(e,t,s,n,i,r)}function vh(e,t,s,n,i){const r=[],o=s==="x"?"inXRange":"inYRange";let a=!1;return wa(e,s,t,(l,c,u)=>{l[o]&&l[o](t[s],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:r}var ok={modes:{index(e,t,s,n){const i=mn(t,e),r=s.axis||"x",o=s.includeInvisible||!1,a=s.intersect?dl(e,i,r,n,o):hl(e,i,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,s,n){const i=mn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;let a=s.intersect?dl(e,i,r,n,o):hl(e,i,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,s,n){const i=mn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return dl(e,i,r,n,o)},nearest(e,t,s,n){const i=mn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return hl(e,i,r,s.intersect,n,o)},x(e,t,s,n){const i=mn(t,e);return vh(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=mn(t,e);return vh(e,i,"y",s.intersect,n)}}};const Yp=["left","top","right","bottom"];function Ni(e,t){return e.filter(s=>s.pos===t)}function _h(e,t){return e.filter(s=>Yp.indexOf(s.pos)===-1&&s.box.axis===t)}function ji(e,t){return e.sort((s,n)=>{const i=t?n:s,r=t?s:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function ak(e){const t=[];let s,n,i,r,o,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function lk(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:r}=s;if(!n||!Yp.includes(i))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function ck(e,t){const s=lk(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return s}function uk(e){const t=ak(e),s=ji(t.filter(c=>c.box.fullSize),!0),n=ji(Ni(t,"left"),!0),i=ji(Ni(t,"right")),r=ji(Ni(t,"top"),!0),o=ji(Ni(t,"bottom")),a=_h(t,"x"),l=_h(t,"y");return{fullSize:s,leftAndTop:n.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ni(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function wh(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function Kp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dk(e,t,s,n){const{pos:i,box:r}=s,o=e.maxPadding;if(!lt(i)){s.size&&(e[i]-=s.size);const d=n[s.stack]||{size:0,count:1};d.size=Math.max(d.size,s.horizontal?r.height:r.width),s.size=d.size/d.count,e[i]+=s.size}r.getPadding&&Kp(o,r.getPadding());const a=Math.max(0,t.outerWidth-wh(o,e,"left","right")),l=Math.max(0,t.outerHeight-wh(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function hk(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function fk(e,t){const s=t.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],s[o])}),r}return n(e?["left","right"]:["top","bottom"])}function Gi(e,t,s,n){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,fk(a.horizontal,t));const{same:d,other:h}=dk(t,s,a,n);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Gi(i,t,s,n)||u}function go(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function xh(e,t,s,n){const i=s.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,h=c.size||l.height;be(c.start)&&(o=c.start),l.fullSize?go(l,i.left,o,s.outerWidth-i.right-i.left,h):go(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,h=c.size||l.width;be(c.start)&&(r=c.start),l.fullSize?go(l,r,i.top,h,s.outerHeight-i.bottom-i.top):go(l,r,t.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var Vs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=ue(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(s-i.height,0),a=uk(e.boxes),l=a.vertical,c=a.horizontal;Tt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);Kp(h,ue(n));const f=Object.assign({maxPadding:h,w:r,h:o,x:i.left,y:i.top},i),g=ck(l.concat(c),d);Gi(a.fullSize,f,d,g),Gi(l,f,d,g),Gi(c,f,d,g)&&Gi(l,f,d,g),hk(f),xh(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,xh(a.rightAndBottom,f,d,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Tt(a.chartArea,m=>{const p=m.box;Object.assign(p,e.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Zp{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class gk extends Zp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Io="$chartjs",mk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Sh=e=>e===null||e==="";function pk(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[Io]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Sh(i)){const r=oh(e,"width");r!==void 0&&(e.width=r)}if(Sh(n))if(e.style.height==="")e.height=e.width/(t||2);else{const r=oh(e,"height");r!==void 0&&(e.height=r)}return e}const Gp=pS?{passive:!0}:!1;function yk(e,t,s){e&&e.addEventListener(t,s,Gp)}function bk(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Gp)}function vk(e,t){const s=mk[e.type]||e.type,{x:n,y:i}=mn(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function ea(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function _k(e,t,s){const n=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ea(a.addedNodes,n),o=o&&!ea(a.removedNodes,n);o&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function wk(e,t,s){const n=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ea(a.removedNodes,n),o=o&&!ea(a.addedNodes,n);o&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Cr=new Map;let kh=0;function Xp(){const e=window.devicePixelRatio;e!==kh&&(kh=e,Cr.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function xk(e,t){Cr.size||window.addEventListener("resize",Xp),Cr.set(e,t)}function Sk(e){Cr.delete(e),Cr.size||window.removeEventListener("resize",Xp)}function kk(e,t,s){const n=e.canvas,i=n&&cu(n);if(!i)return;const r=Op((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),xk(e,r),o}function fl(e,t,s){s&&s.disconnect(),t==="resize"&&Sk(e)}function Tk(e,t,s){const n=e.canvas,i=Op(r=>{e.ctx!==null&&s(vk(r,e))},e);return yk(n,t,i),i}class Ok extends Zp{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(pk(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[Io])return!1;const n=s[Io].initial;["height","width"].forEach(r=>{const o=n[r];St(o)?s.removeAttribute(r):s.setAttribute(r,o)});const i=n.style||{};return Object.keys(i).forEach(r=>{s.style[r]=i[r]}),s.width=s.width,delete s[Io],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),o={attach:_k,detach:wk,resize:kk}[s]||Tk;i[s]=o(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:fl,detach:fl,resize:fl}[s]||bk)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return mS(t,s,n,i)}isAttached(t){const s=t&&cu(t);return!!(s&&s.isConnected)}}function Dk(e){return!lu()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?gk:Ok}let ve=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return Xs(this.x)&&Xs(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}};function Ck(e,t){const s=e.options.ticks,n=Mk(e),i=Math.min(s.maxTicksLimit||n,n),r=s.major.enabled?Ak(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return Ik(t,c,r,o/i),c;const u=Ek(r,t,i);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(mo(t,c,u,St(f)?0:a-f,a),d=0,h=o-1;d<h;d++)mo(t,c,u,r[d],r[d+1]);return mo(t,c,u,l,St(f)?t.length:l+f),c}return mo(t,c,u),c}function Mk(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function Ek(e,t,s){const n=Pk(e),i=t.length/s;if(!n)return Math.max(i,1);const r=yx(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function Ak(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function Ik(e,t,s,n){let i=0,r=s[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=s[i*n])}function mo(e,t,s,n,i){const r=it(n,0),o=Math.min(it(i,e.length),e.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=r;u<0;)a++,u=Math.round(r+a*s);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*s))}function Pk(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const Lk=e=>e==="left"?"right":e==="right"?"left":e,Th=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Oh=(e,t)=>Math.min(t||e,e);function Dh(e,t){const s=[],n=e.length/t,i=e.length;let r=0;for(;r<i;r+=n)s.push(e[Math.floor(r)]);return s}function Rk(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function $k(e,t){Tt(e,s=>{const n=s.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete s.data[n[r]];n.splice(0,i)}})}function Bi(e){return e.drawTicks?e.tickLength:0}function Ch(e,t){if(!e.display)return 0;const s=Gt(e.font,t),n=ue(e.padding);return(It(e.text)?e.text.length:1)*s.lineHeight+n.height}function Fk(e,t){return Pn(e,{scale:t,type:"scale"})}function Nk(e,t,s){return Pn(e,{tick:s,index:t,type:"tick"})}function jk(e,t,s){let n=Dp(e);return(s&&t!=="right"||!s&&t==="right")&&(n=Lk(n)),n}function Bk(e,t,s,n){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,h,f,g;const m=o-i,p=a-r;if(e.isHorizontal()){if(f=Se(n,r,a),lt(s)){const y=Object.keys(s)[0],b=s[y];g=u[y].getPixelForValue(b)+m-t}else s==="center"?g=(c.bottom+c.top)/2+m-t:g=Th(e,s,t);h=a-r}else{if(lt(s)){const y=Object.keys(s)[0],b=s[y];f=u[y].getPixelForValue(b)-p+t}else s==="center"?f=(c.left+c.right)/2-p+t:f=Th(e,s,t);g=Se(n,o,i),d=s==="left"?-Zt:Zt}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}class Br extends ve{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=Xe(t,Number.POSITIVE_INFINITY),s=Xe(s,Number.NEGATIVE_INFINITY),n=Xe(n,Number.POSITIVE_INFINITY),i=Xe(i,Number.NEGATIVE_INFINITY),{min:Xe(t,n),max:Xe(s,i),minDefined:Jt(t),maxDefined:Jt(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,o.min)),r||(n=Math.max(n,o.max));return s=r&&s>n?n:s,n=i&&s>n?s:n,{min:Xe(s,Xe(n,s)),max:Xe(n,Xe(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jx(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Dh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ck(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Dt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Dt(s.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Oh(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,r=s.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!s.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=$e(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-Bi(t.grid)-s.padding-Ch(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=xp(Math.min(Math.asin($e((u.highest.height+6)/a,-1,1)),Math.asin($e(l/c,-1,1))-Math.asin($e(h/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ch(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=Bi(r)+l):(t.height=this.maxHeight,t.width=Bi(r)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=n.padding*2,g=Ht(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(a){const y=n.mirror?0:p*d.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=n.mirror?0:m*d.width+p*h.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,u,p,m)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*t.width,f=n*s.height):(h=n*t.height,f=i*s.width):r==="start"?f=s.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,f=s.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=s.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=s.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)St(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Dh(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(s/Oh(s,n));let c=0,u=0,d,h,f,g,m,p,y,b,v,w,S;for(d=0;d<s;d+=l){if(g=t[d].label,m=this._resolveTickFontOptions(d),i.font=p=m.string,y=r[p]=r[p]||{data:{},gc:[]},b=m.lineHeight,v=w=0,!St(g)&&!It(g))v=eh(i,y.data,y.gc,v,g),w=b;else if(It(g))for(h=0,f=g.length;h<f;++h)S=g[h],!St(S)&&!It(S)&&(v=eh(i,y.data,y.gc,v,S),w+=b);o.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}$k(r,s);const T=o.indexOf(c),E=a.indexOf(u),R=I=>({width:o[I]||0,height:a[I]||0});return{first:R(0),last:R(s-1),widest:R(T),highest:R(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return xx(this._alignToPixels?un(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=Nk(this.getContext(),t,n))}return this.$context||(this.$context=Fk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ht(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Bi(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,y=function(rt){return un(n,rt,m)};let b,v,w,S,T,E,R,I,B,L,C,W;if(o==="top")b=y(this.bottom),E=this.bottom-h,I=b-p,L=y(t.top)+p,W=t.bottom;else if(o==="bottom")b=y(this.top),L=t.top,W=y(t.bottom)-p,E=b+p,I=this.top+h;else if(o==="left")b=y(this.right),T=this.right-h,R=b-p,B=y(t.left)+p,C=t.right;else if(o==="right")b=y(this.left),B=t.left,C=y(t.right)-p,T=b+p,R=this.left+h;else if(s==="x"){if(o==="center")b=y((t.top+t.bottom)/2+.5);else if(lt(o)){const rt=Object.keys(o)[0],ut=o[rt];b=y(this.chart.scales[rt].getPixelForValue(ut))}L=t.top,W=t.bottom,E=b+p,I=E+h}else if(s==="y"){if(o==="center")b=y((t.left+t.right)/2);else if(lt(o)){const rt=Object.keys(o)[0],ut=o[rt];b=y(this.chart.scales[rt].getPixelForValue(ut))}T=b-p,R=T-h,B=t.left,C=t.right}const st=it(i.ticks.maxTicksLimit,d),nt=Math.max(1,Math.ceil(d/st));for(v=0;v<d;v+=nt){const rt=this.getContext(v),ut=r.setContext(rt),pt=a.setContext(rt),Ce=ut.lineWidth,je=ut.color,Me=pt.dash||[],Yt=pt.dashOffset,Ms=ut.tickWidth,us=ut.tickColor,nn=ut.tickBorderDash||[],_e=ut.tickBorderDashOffset;w=Rk(this,v,l),w!==void 0&&(S=un(n,w,Ce),c?T=R=B=C=S:E=I=L=W=S,f.push({tx1:T,ty1:E,tx2:R,ty2:I,x1:B,y1:L,x2:C,y2:W,width:Ce,color:je,borderDash:Me,borderDashOffset:Yt,tickWidth:Ms,tickColor:us,tickBorderDash:nn,tickBorderDashOffset:_e}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=Bi(n.grid),f=h+u,g=d?-u:f,m=-Ht(this.labelRotation),p=[];let y,b,v,w,S,T,E,R,I,B,L,C,W="middle";if(i==="top")T=this.bottom-g,E=this._getXAxisLabelAlignment();else if(i==="bottom")T=this.top+g,E=this._getXAxisLabelAlignment();else if(i==="left"){const nt=this._getYAxisLabelAlignment(h);E=nt.textAlign,S=nt.x}else if(i==="right"){const nt=this._getYAxisLabelAlignment(h);E=nt.textAlign,S=nt.x}else if(s==="x"){if(i==="center")T=(t.top+t.bottom)/2+f;else if(lt(i)){const nt=Object.keys(i)[0],rt=i[nt];T=this.chart.scales[nt].getPixelForValue(rt)+f}E=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")S=(t.left+t.right)/2-f;else if(lt(i)){const nt=Object.keys(i)[0],rt=i[nt];S=this.chart.scales[nt].getPixelForValue(rt)}E=this._getYAxisLabelAlignment(h).textAlign}s==="y"&&(l==="start"?W="top":l==="end"&&(W="bottom"));const st=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){v=a[y],w=v.label;const nt=r.setContext(this.getContext(y));R=this.getPixelForTick(y)+r.labelOffset,I=this._resolveTickFontOptions(y),B=I.lineHeight,L=It(w)?w.length:1;const rt=L/2,ut=nt.color,pt=nt.textStrokeColor,Ce=nt.textStrokeWidth;let je=E;o?(S=R,E==="inner"&&(y===b-1?je=this.options.reverse?"left":"right":y===0?je=this.options.reverse?"right":"left":je="center"),i==="top"?c==="near"||m!==0?C=-L*B+B/2:c==="center"?C=-st.highest.height/2-rt*B+B:C=-st.highest.height+B/2:c==="near"||m!==0?C=B/2:c==="center"?C=st.highest.height/2-rt*B:C=st.highest.height-L*B,d&&(C*=-1),m!==0&&!nt.showLabelBackdrop&&(S+=B/2*Math.sin(m))):(T=R,C=(1-L)*B/2);let Me;if(nt.showLabelBackdrop){const Yt=ue(nt.backdropPadding),Ms=st.heights[y],us=st.widths[y];let nn=C-Yt.top,_e=0-Yt.left;switch(W){case"middle":nn-=Ms/2;break;case"bottom":nn-=Ms;break}switch(E){case"center":_e-=us/2;break;case"right":_e-=us;break;case"inner":y===b-1?_e-=us:y>0&&(_e-=us/2);break}Me={left:_e,top:nn,width:us+Yt.width,height:Ms+Yt.height,color:nt.backdropColor}}p.push({label:w,font:I,textOffset:C,options:{rotation:m,color:ut,strokeColor:pt,strokeWidth:Ce,textAlign:je,textBaseline:W,translation:[S,T],backdrop:Me}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ht(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return s==="left"?i?(u=this.right+r,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+r,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:r,height:o}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(r=0,o=i.length;r<o;++r){const l=i[r];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=un(t,this.left,o)-o/2,u=un(t,this.right,a)+a/2,d=h=l):(d=un(t,this.top,o)-o/2,h=un(t,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.beginPath(),s.moveTo(c,d),s.lineTo(u,h),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Fr(n,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Qo(n,c,0,u,l,a)}i&&Nr(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const r=Gt(n.font),o=ue(n.padding),a=n.align;let l=r.lineHeight/2;s==="bottom"||s==="center"||lt(s)?(l+=o.bottom,It(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Bk(this,l,s,a);Qo(t,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:h,textAlign:jk(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=it(t.grid&&t.grid.z,-1),i=it(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Br.prototype.draw?[{z:s,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=s.length;r<o;++r){const a=s[r];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return Gt(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class po{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;zk(s)&&(n=this.register(s));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Wk(t,o,n),this.override&&Ft.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in Ft[i]&&(delete Ft[i][n],this.override&&delete Cn[n])}}function Wk(e,t,s){const n=Tr(Object.create(null),[s?Ft.get(s):{},Ft.get(t),e.defaults]);Ft.set(t,n),e.defaultRoutes&&Uk(t,e.defaultRoutes),e.descriptors&&Ft.describe(t,e.descriptors)}function Uk(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),r=[e].concat(n).join("."),o=t[s].split("."),a=o.pop(),l=o.join(".");Ft.route(r,i,l,a)})}function zk(e){return"id"in e&&"defaults"in e}class Vk{constructor(){this.controllers=new po(jr,"datasets",!0),this.elements=new po(ve,"elements"),this.plugins=new po(Object,"plugins"),this.scales=new po(Br,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):Tt(i,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,s,n){const i=tu(t);Dt(n["before"+i],[],n),s[t](n),Dt(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var ss=new Vk;class Hk{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,s,n);return s==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,s,n,i){i=i||{};for(const r of t){const o=r.plugin,a=o[n],l=[s,i,r.options];if(Dt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){St(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=it(n.options&&n.options.plugins,{}),r=qk(n);return i===!1&&!s?[]:Yk(t,r,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function qk(e){const t={},s=[],n=Object.keys(ss.plugins.items);for(let r=0;r<n.length;r++)s.push(ss.getPlugin(n[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];s.indexOf(o)===-1&&(s.push(o),t[o.id]=!0)}return{plugins:s,localIds:t}}function Jk(e,t){return!t&&e===!1?null:e===!0?{}:e}function Yk(e,{plugins:t,localIds:s},n,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=Jk(n[l],i);c!==null&&r.push({plugin:a,options:Kk(e.config,{plugin:a,local:s[l]},c,o)})}return r}function Kk(e,{plugin:t,local:s},n,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return s&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nc(e,t){const s=Ft.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function Zk(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function Gk(e,t){return e===t?"_index_":"_value_"}function Mh(e){if(e==="x"||e==="y"||e==="r")return e}function Xk(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ic(e,...t){if(Mh(e))return e;for(const s of t){const n=s.axis||Xk(s.position)||e.length>1&&Mh(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Eh(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function Qk(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Eh(e,"x",s[0])||Eh(e,"y",s[0])}return{}}function tT(e,t){const s=Cn[e.type]||{scales:{}},n=t.scales||{},i=nc(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!lt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ic(o,a,Qk(o,e),Ft.scales[a.type]),c=Gk(l,i),u=s.scales||{};r[o]=cr(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||nc(a,t),u=(Cn[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Zk(d,l),f=o[h+"AxisID"]||h;r[f]=r[f]||Object.create(null),cr(r[f],[{axis:h},n[f],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];cr(a,[Ft.scales[a.type],Ft.scale])}),r}function Qp(e){const t=e.options||(e.options={});t.plugins=it(t.plugins,{}),t.scales=tT(e,t)}function ty(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function eT(e){return e=e||{},e.data=ty(e.data),Qp(e),e}const Ah=new Map,ey=new Set;function yo(e,t){let s=Ah.get(e);return s||(s=t(),Ah.set(e,s),ey.add(s)),s}const Wi=(e,t,s)=>{const n=Dn(t,s);n!==void 0&&e.add(n)};class sT{constructor(t){this._config=eT(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ty(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Qp(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return yo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return yo(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return yo(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return yo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(s);if(a)return a;const l=new Set;s.forEach(u=>{t&&(l.add(t),u.forEach(d=>Wi(l,t,d))),u.forEach(d=>Wi(l,i,d)),u.forEach(d=>Wi(l,Cn[r]||{},d)),u.forEach(d=>Wi(l,Ft,d)),u.forEach(d=>Wi(l,ec,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ey.has(s)&&o.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,Cn[s]||{},Ft.datasets[s]||{},{type:s},Ft,ec]}resolveNamedOptions(t,s,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ih(this._resolverCache,t,i);let l=o;if(iT(o,s)){r.$shared=!1,n=pe(n)?n():n;const c=this.createResolver(t,n,a);l=bi(o,n,c)}for(const c of s)r[c]=l[c];return r}createResolver(t,s,n=[""],i){const{resolver:r}=Ih(this._resolverCache,t,n);return lt(s)?bi(r,s,void 0,i):r}}function Ih(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let r=n.get(i);return r||(r={resolver:ru(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,r)),r}const nT=e=>lt(e)&&Object.getOwnPropertyNames(e).some(t=>pe(e[t]));function iT(e,t){const{isScriptable:s,isIndexable:n}=Lp(e);for(const i of t){const r=s(i),o=n(i),a=(o||r)&&e[i];if(r&&(pe(a)||nT(a))||o&&It(a))return!0}return!1}var rT="4.5.0";const oT=["top","bottom","left","right","chartArea"];function Ph(e,t){return e==="top"||e==="bottom"||oT.indexOf(e)===-1&&t==="x"}function Lh(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Rh(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),Dt(s&&s.onComplete,[e],t)}function aT(e){const t=e.chart,s=t.options.animation;Dt(s&&s.onProgress,[e],t)}function sy(e){return lu()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Po={},$h=e=>{const t=sy(e);return Object.values(Po).filter(s=>s.canvas===t).pop()};function lT(e,t,s){const n=Object.keys(e);for(const i of n){const r=+i;if(r>=t){const o=e[i];delete e[i],(s>0||r>t)&&(e[r+s]=o)}}}function cT(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class ye{static defaults=Ft;static instances=Po;static overrides=Cn;static registry=ss;static version=rT;static getChart=$h;static register(...t){ss.add(...t),Fh()}static unregister(...t){ss.remove(...t),Fh()}constructor(t,s){const n=this.config=new sT(s),i=sy(t),r=$h(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Dk(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=cx(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ox(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Po[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",Rh),gs.listen(this,"progress",aT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:r}=this;return St(t)?s&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sh(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(t,s){gs.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,s,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,rh(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Dt(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Tt(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];s&&(r=r.concat(Object.keys(s).map(o=>{const a=s[o],l=ic(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Tt(r,o=>{const a=o.options,l=a.id,c=ic(l,a),u=it(a.type,o.dtype);(a.position===void 0||Ph(a.position,c)!==Ph(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in n&&n[l].type===u)d=n[l];else{const h=ss.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),Tt(i,(o,a)=>{o||delete n[a]}),Tt(n,o=>{Vs.configure(this,o,o.options),Vs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,r)=>i.index-r.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort(Lh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const r=s[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||nc(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=ss.getController(a),{datasetElementType:c,dataElementType:u}=Ft.datasets[a];Object.assign(l,{dataElementType:ss.getElement(u),datasetElementType:c&&ss.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||Tt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Lh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Tt(this.scales,t=>{Vs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Jd(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of s){const o=n==="_removeElements"?-r:r;lT(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=n(0);for(let r=1;r<s;r++)if(!Jd(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vs.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Tt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,pe(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),Rh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,r;for(i=0,r=s.length;i<r;++i){const o=s[i];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Vp(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Fr(s,i),t.controller.draw(),i&&Nr(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Or(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const r=ok.modes[s];return typeof r=="function"?r(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(r=>r&&r._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);be(s)?(r.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),gs.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),sh(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Po[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(r,o)=>{s.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Tt(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():o()}unbindEvents(){Tt(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},Tt(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let r,o,a,l;for(s==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Yo(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(s,t),a=n?t:r(t,s);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:r}=this,o=s,a=this._getActiveElements(t,i,n,o),l=mx(t),c=cT(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Dt(r.onHover,[t,a,this],this),l&&Dt(r.onClick,[t,a,this],this));const u=!Yo(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function Fh(){return Tt(ye.instances,e=>e._plugins.invalidate())}function ny(e,t,s=t){e.lineCap=it(s.borderCapStyle,t.borderCapStyle),e.setLineDash(it(s.borderDash,t.borderDash)),e.lineDashOffset=it(s.borderDashOffset,t.borderDashOffset),e.lineJoin=it(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=it(s.borderWidth,t.borderWidth),e.strokeStyle=it(s.borderColor,t.borderColor)}function uT(e,t,s){e.lineTo(s.x,s.y)}function dT(e){return e.stepped?Nx:e.tension||e.cubicInterpolationMode==="monotone"?jx:uT}function iy(e,t,s={}){const n=e.length,{start:i=0,end:r=n-1}=s,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function hT(e,t,s,n){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=iy(i,s,n),u=dT(r);let{move:d=!0,reverse:h}=n||{},f,g,m;for(f=0;f<=c;++f)g=i[(a+(h?c-f:f))%o],!g.skip&&(d?(e.moveTo(g.x,g.y),d=!1):u(e,m,g,h,r.stepped),m=g);return l&&(g=i[(a+(h?c:0))%o],u(e,m,g,h,r.stepped)),!!l}function fT(e,t,s,n){const i=t.points,{count:r,start:o,ilen:a}=iy(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,d=0,h,f,g,m,p,y;const b=w=>(o+(c?a-w:w))%r,v=()=>{m!==p&&(e.lineTo(u,p),e.lineTo(u,m),e.lineTo(u,y))};for(l&&(f=i[b(0)],e.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[b(h)],f.skip)continue;const w=f.x,S=f.y,T=w|0;T===g?(S<m?m=S:S>p&&(p=S),u=(d*u+w)/++d):(v(),e.lineTo(w,S),g=T,d=0,m=p=S),y=S}v()}function rc(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?fT:hT}function gT(e){return e.stepped?yS:e.tension||e.cubicInterpolationMode==="monotone"?bS:pn}function mT(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),ny(e,t.options),e.stroke(i)}function pT(e,t,s,n){const{segments:i,options:r}=t,o=rc(t);for(const a of i)ny(e,r,a.style),e.beginPath(),o(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const yT=typeof Path2D=="function";function bT(e,t,s,n){yT&&!t.options.segment?mT(e,t,s,n):pT(e,t,s,n)}class Oi extends ve{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;cS(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kS(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],r=this.points,o=zp(this,{property:s,start:i,end:i});if(!o.length)return;const a=[],l=gT(n);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=r[d],g=r[h];if(f===g){a.push(f);continue}const m=Math.abs((i-f[s])/(g[s]-f[s])),p=l(f,g,m,n.stepped);p[s]=t[s],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,s,n){return rc(this)(t,this,s,n)}path(t,s,n){const i=this.segments,r=rc(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)o&=r(t,this,a,{start:s,end:s+n-1});return!!o}draw(t,s,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),bT(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Nh(e,t,s,n){const i=e.options,{[s]:r}=e.getProps([s],n);return Math.abs(t-r)<i.radius+i.hitRadius}class xa extends ve{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(s-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,s){return Nh(this,t,"x",s)}inYRange(t,s){return Nh(this,t,"y",s)}getCenterPoint(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const n=s&&t.borderWidth||0;return(s+n)*2}draw(t,s){const n=this.options;this.skip||n.radius<.1||!Or(this,s,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,sc(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ry(e,t){const{x:s,y:n,base:i,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(s,i),l=Math.max(s,i),c=n-d,u=n+d):(d=r/2,a=s-d,l=s+d,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function Hs(e,t,s,n){return e?0:$e(t,s,n)}function vT(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,r=Pp(n);return{t:Hs(i.top,r.top,0,s),r:Hs(i.right,r.right,0,t),b:Hs(i.bottom,r.bottom,0,s),l:Hs(i.left,r.left,0,t)}}function _T(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,r=Sn(i),o=Math.min(t,s),a=e.borderSkipped,l=n||lt(i);return{topLeft:Hs(!l||a.top||a.left,r.topLeft,0,o),topRight:Hs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Hs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Hs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function wT(e){const t=ry(e),s=t.right-t.left,n=t.bottom-t.top,i=vT(e,s/2,n/2),r=_T(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function gl(e,t,s,n){const i=t===null,r=s===null,a=e&&!(i&&r)&&ry(e,n);return a&&(i||zs(t,a.left,a.right))&&(r||zs(s,a.top,a.bottom))}function xT(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function ST(e,t){e.rect(t.x,t.y,t.w,t.h)}function ml(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,r=(e.x+e.w!==s.x+s.w?t:0)-n,o=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+r,h:e.h+o,radius:e.radius}}class kT extends ve{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=wT(this),a=xT(o.radius)?Dr:ST;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,ml(o,s,r)),t.clip(),a(t,ml(r,-s,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,ml(r,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return gl(this,t,s,n)}inXRange(t,s){return gl(this,t,null,s)}inYRange(t,s){return gl(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(s+i)/2:s,y:r?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function TT(e,t,s){const n=e.segments,i=e.points,r=t.points,o=[];for(const a of n){let{start:l,end:c}=a;c=Sa(l,c,i);const u=oc(s,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=zp(t,u);for(const h of d){const f=oc(s,r[h.start],r[h.end],h.loop),g=Up(a,i,f);for(const m of g)o.push({source:m,target:h,start:{[s]:jh(u,f,"start",Math.max)},end:{[s]:jh(u,f,"end",Math.min)}})}}return o}function oc(e,t,s,n){if(n)return;let i=t[e],r=s[e];return e==="angle"&&(i=is(i),r=is(r)),{property:e,start:i,end:r}}function OT(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Sa(o,a,i);const l=i[o],c=i[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):s!==null&&(r.push({x:s,y:l.y}),r.push({x:s,y:c.y}))}),r}function Sa(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function jh(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function oy(e,t){let s=[],n=!1;return It(e)?(n=!0,s=e):s=OT(e,t),s.length?new Oi({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Bh(e){return e&&e.fill!==!1}function DT(e,t,s){let i=e[t].fill;const r=[t];let o;if(!s)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!Jt(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function CT(e,t,s){const n=IT(e);if(lt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Jt(i)&&Math.floor(i)===i?MT(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function MT(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function ET(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:lt(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function AT(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:lt(e)?n=e.value:n=t.getBaseValue(),n}function IT(e){const t=e.options,s=t.fill;let n=it(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function PT(e){const{scale:t,index:s,line:n}=e,i=[],r=n.segments,o=n.points,a=LT(t,s);a.push(oy({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)RT(i,o[u],a)}return new Oi({points:i,options:{}})}function LT(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===t)break;r.hidden||s.unshift(r.dataset)}return s}function RT(e,t,s){const n=[];for(let i=0;i<s.length;i++){const r=s[i],{first:o,last:a,point:l}=$T(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function $T(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],r=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][s],h=o[u.end][s];if(zs(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:n}}class ay{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:r,radius:o}=this;return s=s||{start:0,end:Vt},t.arc(i,r,o,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,r=t.angle;return{x:s+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function FT(e){const{chart:t,fill:s,line:n}=e;if(Jt(s))return NT(t,s);if(s==="stack")return PT(e);if(s==="shape")return!0;const i=jT(e);return i instanceof ay?i:oy(i,n)}function NT(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function jT(e){return(e.scale||{}).getPointPositionForValue?WT(e):BT(e)}function BT(e){const{scale:t={},fill:s}=e,n=ET(s,t);if(Jt(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function WT(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,r=n.reverse?t.max:t.min,o=AT(s,t,r),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,r);return new ay({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function pl(e,t,s){const n=FT(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},g=i.getDatasetMeta(r),m=Vp(i,g);n&&o.points.length&&(Fr(e,s),UT(e,{line:o,target:n,above:h,below:f,area:s,scale:a,axis:l,clip:m}),Nr(e))}function UT(e,t){const{line:s,target:n,above:i,below:r,area:o,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save();let u=r;r!==i&&(c==="x"?(Wh(e,n,o.top),yl(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Wh(e,n,o.bottom)):c==="y"&&(Uh(e,n,o.left),yl(e,{line:s,target:n,color:r,scale:a,property:c,clip:l}),e.restore(),e.save(),Uh(e,n,o.right),u=i)),yl(e,{line:s,target:n,color:u,scale:a,property:c,clip:l}),e.restore()}function Wh(e,t,s){const{segments:n,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[Sa(l,c,i)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,s),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Uh(e,t,s){const{segments:n,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[Sa(l,c,i)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(s,u.y),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(s,d.y)}e.lineTo(s,t.first().y),e.closePath(),e.clip()}function yl(e,t){const{line:s,target:n,property:i,color:r,scale:o,clip:a}=t,l=TT(s,n,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=r}={}}=c,g=n!==!0;e.save(),e.fillStyle=f,zT(e,o,a,g&&oc(i,d,h)),e.beginPath();const m=!!s.pathSegment(e,c);let p;if(g){m?e.closePath():zh(e,n,h,i);const y=!!n.pathSegment(e,u,{move:m,reverse:!0});p=m&&y,p||zh(e,n,d,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function zT(e,t,s,n){const i=t.chart.chartArea,{property:r,start:o,end:a}=n||{};if(r==="x"||r==="y"){let l,c,u,d;r==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),e.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),d=Math.min(d,s.bottom)),e.rect(l,c,u-l,d-c),e.clip()}}function zh(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var fu={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<n;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Oi&&(l={visible:e.isDatasetVisible(o),index:o,fill:CT(a,o,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<n;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=DT(i,o,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&pl(e.ctx,a,r))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;Bh(r)&&pl(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!Bh(n)||s.drawTime!=="beforeDatasetDraw"||pl(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Vh=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},VT=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Hh extends ve{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=Dt(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=Gt(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Vh(n,r);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,m)=>{const p=n+s/2+r.measureText(g.text).width;(m===0||c[c.length-1]+p+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:p,height:i},c[c.length-1]+=p+a}),d}_fitCols(t,s,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,h=0,f=0,g=0,m=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:b,itemHeight:v}=HT(n,s,r,p,i);y>0&&f+v+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,m++,h=f=0),l[y]={left:g,top:f,col:m,width:b,height:v},h=Math.max(h,b),f+=v+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:r}}=this,o=gi(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Se(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=Se(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Se(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=Se(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Fr(t,this),this._draw(),Nr(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=Ft.color,l=gi(t.rtl,this.left,this.width),c=Gt(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:p}=Vh(o,d),y=function(T,E,R){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const I=it(R.lineWidth,1);if(i.fillStyle=it(R.fillStyle,a),i.lineCap=it(R.lineCap,"butt"),i.lineDashOffset=it(R.lineDashOffset,0),i.lineJoin=it(R.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=it(R.strokeStyle,a),i.setLineDash(it(R.lineDash,[])),o.usePointStyle){const B={radius:m*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:I},L=l.xPlus(T,g/2),C=E+h;Ap(i,B,L,C,o.pointStyleWidth&&g)}else{const B=E+Math.max((d-m)/2,0),L=l.leftForLtr(T,g),C=Sn(R.borderRadius);i.beginPath(),Object.values(C).some(W=>W!==0)?Dr(i,{x:L,y:B,w:g,h:m,radius:C}):i.rect(L,B,g,m),i.fill(),I!==0&&i.stroke()}i.restore()},b=function(T,E,R){Qo(i,R.text,T,E+p/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:Se(r,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:Se(r,this.top+w+u,this.bottom-s[0].height),line:0},jp(this.ctx,t.textDirection);const S=p+u;this.legendItems.forEach((T,E)=>{i.strokeStyle=T.fontColor,i.fillStyle=T.fontColor;const R=i.measureText(T.text).width,I=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),B=g+h+R;let L=f.x,C=f.y;l.setWidth(this.width),v?E>0&&L+B+u>this.right&&(C=f.y+=S,f.line++,L=f.x=Se(r,this.left+u,this.right-n[f.line])):E>0&&C+S>this.bottom&&(L=f.x=L+s[f.line].width+u,f.line++,C=f.y=Se(r,this.top+w+u,this.bottom-s[f.line].height));const W=l.x(L);if(y(W,C,T),L=Dx(I,L+g+h,v?L+B:this.right,t.rtl),b(l.x(L),C,T),v)f.x+=B+u;else if(typeof T.text!="string"){const st=c.lineHeight;f.y+=ly(T,st)+u}else f.y+=S}),Bp(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=Gt(s.font),i=ue(s.padding);if(!s.display)return;const r=gi(t.rtl,this.left,this.width),o=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Se(t.align,d,this.right-h);else{const g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);u=c+Se(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=Se(a,d,d+h);o.textAlign=r.textAlign(Dp(a)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Qo(o,s.text,f,u,n)}_computeTitleHeight(){const t=this.options.title,s=Gt(t.font),n=ue(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,r;if(zs(t,this.left,this.right)&&zs(s,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],zs(t,i.left,i.left+i.width)&&zs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!YT(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=VT(i,n);i&&!r&&Dt(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Dt(s.onHover,[t,n,this],this)}else n&&Dt(s.onClick,[t,n,this],this)}}function HT(e,t,s,n,i){const r=qT(n,e,t,s),o=JT(i,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function qT(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+s.size/2+n.measureText(i).width}function JT(e,t,s){let n=e;return typeof t.text!="string"&&(n=ly(t,s)),n}function ly(e,t){const s=e.text?e.text.length:0;return t*s}function YT(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ka={id:"legend",_element:Hh,start(e,t,s){const n=e.legend=new Hh({ctx:e.ctx,options:s,chart:e});Vs.configure(e,n,s),Vs.addBox(e,n)},stop(e){Vs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;Vs.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=ue(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Xi={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,r=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=yi(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function ts(e,t){return t&&(It(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ms(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function KT(e,t){const{element:s,datasetIndex:n,index:i}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function qh(e,t){const s=e.chart.ctx,{body:n,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Gt(t.bodyFont),c=Gt(t.titleFont),u=Gt(t.footerFont),d=r.length,h=i.length,f=n.length,g=ue(t.padding);let m=g.height,p=0,y=n.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*w+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0;const v=function(w){p=Math.max(p,s.measureText(w).width+b)};return s.save(),s.font=c.string,Tt(e.title,v),s.font=l.string,Tt(e.beforeBody.concat(e.afterBody),v),b=t.displayColors?o+2+t.boxPadding:0,Tt(n,w=>{Tt(w.before,v),Tt(w.lines,v),Tt(w.after,v)}),b=0,s.font=u.string,Tt(e.footer,v),s.restore(),p+=g.width,{width:p,height:m}}function ZT(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function GT(e,t,s,n){const{x:i,width:r}=n,o=s.caretSize+s.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function XT(e,t,s,n){const{x:i,width:r}=s,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),GT(c,e,t,s)&&(c="center"),c}function Jh(e,t,s){const n=s.yAlign||t.yAlign||ZT(e,s);return{xAlign:s.xAlign||t.xAlign||XT(e,t,s,n),yAlign:n}}function QT(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function t1(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function Yh(e,t,s,n){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=s,c=i+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Sn(o);let g=QT(t,a);const m=t1(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(d,f)+i),{x:$e(g,0,n.width-t.width),y:$e(m,0,n.height-t.height)}}function bo(e,t,s){const n=ue(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Kh(e){return ts([],ms(e))}function e1(e,t,s){return Pn(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function Zh(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const cy={beforeTitle:fs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:fs,beforeBody:fs,beforeLabel:fs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return St(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:fs,afterBody:fs,beforeFooter:fs,footer:fs,afterFooter:fs};function fe(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?cy[t].call(s,n):i}let Gh=class extends ve{static positioners=Xi;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,r=new uu(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=e1(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=fe(n,"beforeTitle",this,t),r=fe(n,"title",this,t),o=fe(n,"afterTitle",this,t);let a=[];return a=ts(a,ms(i)),a=ts(a,ms(r)),a=ts(a,ms(o)),a}getBeforeBody(t,s){return Kh(fe(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return Tt(t,r=>{const o={before:[],lines:[],after:[]},a=Zh(n,r);ts(o.before,ms(fe(a,"beforeLabel",this,r))),ts(o.lines,fe(a,"label",this,r)),ts(o.after,ms(fe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,s){return Kh(fe(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=fe(n,"beforeFooter",this,t),r=fe(n,"footer",this,t),o=fe(n,"afterFooter",this,t);let a=[];return a=ts(a,ms(i)),a=ts(a,ms(r)),a=ts(a,ms(o)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(KT(this.chart,s[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,n))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,n))),Tt(a,u=>{const d=Zh(t.callbacks,u);i.push(fe(d,"labelColor",this,u)),r.push(fe(d,"labelPointStyle",this,u)),o.push(fe(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Xi[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=qh(this,n),c=Object.assign({},a,l),u=Jh(this.chart,n,c),d=Yh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const r=this.getCaretPosition(t,n,i);s.lineTo(r.x1,r.y1),s.lineTo(r.x2,r.y2),s.lineTo(r.x3,r.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Sn(a),{x:h,y:f}=t,{width:g,height:m}=s;let p,y,b,v,w,S;return r==="center"?(w=f+m/2,i==="left"?(p=h,y=p-o,v=w+o,S=w-o):(p=h+g,y=p+o,v=w-o,S=w+o),b=p):(i==="left"?y=h+Math.max(l,u)+o:i==="right"?y=h+g-Math.max(c,d)-o:y=this.caretX,r==="top"?(v=f,w=v-o,p=y-o,b=y+o):(v=f+m,w=v+o,p=y+o,b=y-o),S=v),{x1:p,x2:y,x3:b,y1:v,y2:w,y3:S}}drawTitle(t,s,n){const i=this.title,r=i.length;let o,a,l;if(r){const c=gi(n.rtl,this.x,this.width);for(t.x=bo(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",o=Gt(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,l=0;l<r;++l)s.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,u=Gt(r.bodyFont),d=bo(this,"left",r),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=s.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(h,c)+c/2,y=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,sc(t,m,p,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,sc(t,m,p,y)}else{t.lineWidth=lt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(h,c),p=i.leftForLtr(i.xPlus(h,1),c-2),y=Sn(o.borderRadius);Object.values(y).some(b=>b!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Dr(t,{x:m,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Dr(t,{x:p,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(p,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,d=Gt(n.bodyFont);let h=d.lineHeight,f=0;const g=gi(n.rtl,this.x,this.width),m=function(R){s.fillText(R,g.x(t.x+f),t.y+h/2),t.y+=h+r},p=g.textAlign(o);let y,b,v,w,S,T,E;for(s.textAlign=o,s.textBaseline="middle",s.font=d.string,t.x=bo(this,p,n),s.fillStyle=n.bodyColor,Tt(this.beforeBody,m),f=a&&p!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,T=i.length;w<T;++w){for(y=i[w],b=this.labelTextColors[w],s.fillStyle=b,Tt(y.before,m),v=y.lines,a&&v.length&&(this._drawColorBox(s,t,w,g,n),h=Math.max(d.lineHeight,l)),S=0,E=v.length;S<E;++S)m(v[S]),h=d.lineHeight;Tt(y.after,m)}f=0,h=d.lineHeight,Tt(this.afterBody,m),t.y-=r}drawFooter(t,s,n){const i=this.footer,r=i.length;let o,a;if(r){const l=gi(n.rtl,this.x,this.width);for(t.x=bo(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",o=Gt(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,a=0;a<r;++a)s.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=Sn(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+d,l),o==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-h,l),s.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+u-g),s.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+f,l+u),s.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+d),s.quadraticCurveTo(a,l,a+d,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const o=Xi[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=qh(this,t),l=Object.assign({},o,this._size),c=Jh(s,t,l),u=Yh(t,l,c,s);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ue(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,s),jp(t,s.textDirection),r.y+=o.top,this.drawTitle(r,t,s),this.drawBody(r,t,s),this.drawFooter(r,t,s),Bp(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Yo(n,i),o=this._positionChanged(i,s);(r||o)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,s,n),a=this._positionChanged(o,t),l=s||!Yo(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,s){const{caretX:n,caretY:i,options:r}=this,o=Xi[r.position].call(this,t,s);return o!==!1&&(n!==o.x||i!==o.y)}};var Wr={id:"tooltip",_element:Gh,positioners:Xi,afterInit(e,t,s){s&&(e.tooltip=new Gh({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function s1(e,t){const s=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,f=r||1,g=u-1,{min:m,max:p}=t,y=!St(o),b=!St(a),v=!St(c),w=(p-m)/(d+1);let S=Yd((p-m)/g/f)*f,T,E,R,I;if(S<1e-14&&!y&&!b)return[{value:m},{value:p}];I=Math.ceil(p/S)-Math.floor(m/S),I>g&&(S=Yd(I*S/g/f)*f),St(l)||(T=Math.pow(10,l),S=Math.ceil(S*T)/T),i==="ticks"?(E=Math.floor(m/S)*S,R=Math.ceil(p/S)*S):(E=m,R=p),y&&b&&r&&vx((a-o)/r,S/1e3)?(I=Math.round(Math.min((a-o)/S,u)),S=(a-o)/I,E=o,R=a):v?(E=y?o:E,R=b?a:R,I=c-1,S=(R-E)/I):(I=(R-E)/S,ur(I,Math.round(I),S/1e3)?I=Math.round(I):I=Math.ceil(I));const B=Math.max(Kd(S),Kd(E));T=Math.pow(10,St(l)?B:l),E=Math.round(E*T)/T,R=Math.round(R*T)/T;let L=0;for(y&&(h&&E!==o?(s.push({value:o}),E<o&&L++,ur(Math.round((E+L*S)*T)/T,o,Xh(o,w,e))&&L++):E<o&&L++);L<I;++L){const C=Math.round((E+L*S)*T)/T;if(b&&C>a)break;s.push({value:C})}return b&&h&&R!==a?s.length&&ur(s[s.length-1].value,a,Xh(a,w,e))?s[s.length-1].value=a:s.push({value:a}):(!b||R===a)&&s.push({value:R}),s}function Xh(e,t,{horizontal:s,minRotation:n}){const i=Ht(n),r=(s?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class n1 extends Br{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return St(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=s?i:l,a=l=>r=n?r:l;if(t){const l=as(i),c=as(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},r=this._range||this,o=s1(i,r);return t.bounds==="ticks"&&_x(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return iu(t,this.chart.options.locale,this.options.ticks.format)}}class Ur extends n1{static id="linear";static defaults={ticks:{callback:Ep.formatters.numeric}};determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=Jt(t)?t:0,this.max=Jt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=Ht(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ta={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},me=Object.keys(Ta);function Qh(e,t){return e-t}function tf(e,t){if(St(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),Jt(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(i&&(o=i==="week"&&(Xs(r)||r===!0)?s.startOf(o,"isoWeek",r):s.startOf(o,i)),+o)}function ef(e,t,s,n){const i=me.length;for(let r=me.indexOf(e);r<i-1;++r){const o=Ta[me[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-t)/(a*o.size))<=n)return me[r]}return me[i-1]}function i1(e,t,s,n,i){for(let r=me.length-1;r>=me.indexOf(s);r--){const o=me[r];if(Ta[o].common&&e._adapter.diff(i,n,o)>=t-1)return o}return me[s?me.indexOf(s):0]}function r1(e){for(let t=me.indexOf(e)+1,s=me.length;t<s;++t)if(Ta[me[t]].common)return me[t]}function sf(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=su(s,t),r=s[n]>=t?s[n]:s[i];e[r]=!0}}function o1(e,t,s,n){const i=e._adapter,r=+i.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function nf(e,t,s){const n=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,n.push({value:a,major:!1});return r===0||!s?n:o1(e,n,i,s)}class Mn extends Br{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new Jp._date(t.adapters.date);i.init(s),cr(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:tf(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Jt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),r=Jt(r)&&!isNaN(r)?r:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=kx(i,r,o);return this._unit=s.unit||(n.autoSkip?ef(s.minUnit,this.min,this.max,this._getLabelCapacity(r)):i1(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:r1(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),nf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=$e(s,0,o),n=$e(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||ef(r.minUnit,s,n,this._getLabelCapacity(s)),a=it(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Xs(l)||l===!0,u={};let d=s,h,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(n,s,o)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<n;h=+t.add(h,a,o),f++)sf(u,h,g);return(h===n||i.bounds==="ticks"||f===1)&&sf(u,h,g),Object.keys(u).sort(Qh).map(m=>+m)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,r=this._unit,o=s||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,s,n,i){const r=this.options,o=r.ticks.callback;if(o)return Dt(o,[t,s,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=n[s],f=c&&d&&h&&h.major;return this._adapter.format(t,i||(f?d:u))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=Ht(this.isHorizontal()?s.maxRotation:s.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,r=this._tickFormatFunction(t,0,nf(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(tf(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return kp(t.sort(Qh))}}function vo(e,t,s){let n=0,i=e.length-1,r,o,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=_n(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=_n(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class t2 extends Mn{static id="timeseries";static defaults=Mn.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=vo(s,this.min),this._tableRange=vo(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(vo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return vo(this._table,n*this._tableRange+this._minPos,!0)}}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const a1={datetime:D.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:D.TIME_WITH_SECONDS,minute:D.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Jp._date.override({_id:"luxon",_create:function(e){return D.fromMillis(e,this.options)},init(e){this.options.locale||(this.options.locale=e.locale)},formats:function(){return a1},parse:function(e,t){const s=this.options,n=typeof e;return e===null||n==="undefined"?null:(n==="number"?e=this._create(e):n==="string"?typeof t=="string"?e=D.fromFormat(e,t,s):e=D.fromISO(e,s):e instanceof Date?e=D.fromJSDate(e,s):n==="object"&&!(e instanceof D)&&(e=D.fromObject(e,s)),e.isValid?e.valueOf():null)},format:function(e,t){const s=this._create(e);return typeof t=="string"?s.toFormat(t):s.toLocaleString(t)},add:function(e,t,s){const n={};return n[s]=t,this._create(e).plus(n).valueOf()},diff:function(e,t,s){return this._create(e).diff(this._create(t)).as(s).valueOf()},startOf:function(e,t,s){if(t==="isoWeek"){s=Math.trunc(Math.min(Math.max(0,s),6));const n=this._create(e);return n.minus({days:(n.weekday-s+7)%7}).startOf("day").valueOf()}return t?this._create(e).startOf(t).valueOf():e},endOf:function(e,t){return this._create(e).endOf(t).valueOf()}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const rf={modes:{point(e,t){return Lo(e,t,{intersect:!0})},nearest(e,t,s){return u1(e,t,s)},x(e,t,s){return Lo(e,t,{intersect:s.intersect,axis:"x"})},y(e,t,s){return Lo(e,t,{intersect:s.intersect,axis:"y"})}}};function gu(e,t,s){return(rf.modes[s.mode]||rf.modes.nearest)(e,t,s)}function l1(e,t,s){return s!=="x"&&s!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,s,!0)}function c1(e,t,s){return s==="x"?{x:e.x,y:t.y}:s==="y"?{x:t.x,y:e.y}:t}function Lo(e,t,s){return e.filter(n=>s.intersect?n.inRange(t.x,t.y):l1(n,t,s.axis))}function u1(e,t,s){let n=Number.POSITIVE_INFINITY;return Lo(e,t,s).reduce((i,r)=>{const o=r.getCenterPoint(),a=c1(t,o,s.axis),l=yi(t,a);return l<n?(i=[r],n=l):l===n&&i.push(r),i},[]).sort((i,r)=>i._index-r._index).slice(0,1)}function Ln(e,t,s){const n=Math.cos(s),i=Math.sin(s),r=t.x,o=t.y;return{x:r+n*(e.x-r)-i*(e.y-o),y:o+i*(e.x-r)+n*(e.y-o)}}const d1=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,wn=.001,Oa=(e,t,s)=>Math.min(s,Math.max(t,e)),uy=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function h1(e,t,s){for(const n of Object.keys(e))e[n]=Oa(e[n],t,s);return e}function f1(e,t,s,n){return!e||!t||s<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(s+n,2)}function dy(e,{x:t,y:s,x2:n,y2:i},r,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=e.x>=t-l-wn&&e.x<=n+l+wn,u=e.y>=s-l-wn&&e.y<=i+l+wn;return r==="x"?c:(r==="y"||c)&&u}function hy(e,{rect:t,center:s},n,{rotation:i,borderWidth:r,hitTolerance:o}){const a=Ln(e,s,Ht(-i));return dy(a,t,n,{borderWidth:r,hitTolerance:o})}function Rn(e,t){const{centerX:s,centerY:n}=e.getProps(["centerX","centerY"],t);return{x:s,y:n}}function g1(e,t,s,n=!0){const i=s.split(".");let r=0;for(const o of t.split(".")){const a=i[r++];if(parseInt(o,10)<parseInt(a,10))break;if(d1(a,o)){if(n)throw new Error(`${e} v${s} is not supported. v${t} or newer is required.`);return!1}}return!0}const fy=e=>typeof e=="string"&&e.endsWith("%"),gy=e=>parseFloat(e)/100,my=e=>Oa(gy(e),0,1),Ui=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),m1={box:e=>Ui(e.centerX,e.centerY),doughnutLabel:e=>Ui(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>Ui(e.centerX,e.centerY),line:e=>Ui(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>Ui(e.centerX,e.centerY)};function mu(e,t){return t==="start"?0:t==="end"?e:fy(t)?my(t)*e:e/2}function Qs(e,t,s=!0){return typeof t=="number"?t:fy(t)?(s?my(t):gy(t))*e:e}function p1(e,t){const{x:s,width:n}=e,i=t.textAlign;return i==="center"?s+n/2:i==="end"||i==="right"?s+n:s}function py(e,t,{borderWidth:s,position:n,xAdjust:i,yAdjust:r},o){const a=lt(o),l=t.width+(a?o.width:0)+s,c=t.height+(a?o.height:0)+s,u=pu(n),d=of(e.x,l,i,u.x),h=of(e.y,c,r,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function pu(e,t="center"){return lt(e)?{x:it(e.x,t),y:it(e.y,t)}:(e=it(e,t),{x:e,y:e})}const yy=(e,t)=>e&&e.autoFit&&t<1;function by(e,t){const s=e.font,n=It(s)?s:[s];return yy(e,t)?n.map(function(i){const r=Gt(i);return r.size=Math.floor(i.size*t),r.lineHeight=i.lineHeight,Gt(r)}):n.map(i=>Gt(i))}function vy(e){return e&&(be(e.xValue)||be(e.yValue))}function of(e,t,s=0,n){return e-mu(t,n)+s}function Di(e,t,s){const n=s.init;if(n){if(n===!0)return wy(t,s)}else return;return y1(e,t,s)}function _y(e,t,s){let n=!1;return t.forEach(i=>{pe(e[i])?(n=!0,s[i]=e[i]):be(s[i])&&delete s[i]}),n}function wy(e,t){const s=t.type||"line";return m1[s](e)}function y1(e,t,s){const n=Dt(s.init,[{chart:e,properties:t,options:s}]);if(n===!0)return wy(t,s);if(lt(n))return n}const bl=new Map,b1=e=>isNaN(e)||e<=0,v1=e=>e.reduce(function(t,s){return t+=s.string,t},"");function Da(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Ca(e,{x:t,y:s},n){n&&(e.translate(t,s),e.rotate(Ht(n)),e.translate(-t,-s))}function Ts(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Ci(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function Ma(e,t){const s=t.content;if(Da(s))return{width:Qs(s.width,t.width),height:Qs(s.height,t.height)};const n=by(t),i=t.textStrokeWidth,r=It(s)?s:[s],o=r.join()+v1(n)+i+(e._measureText?"-spriting":"");return bl.has(o)||bl.set(o,S1(e,r,n,i)),bl.get(o)}function xy(e,t,s){const{x:n,y:i,width:r,height:o}=t;e.save(),Ci(e,s);const a=Ts(e,s);e.fillStyle=s.backgroundColor,e.beginPath(),Dr(e,{x:n,y:i,w:r,h:o,radius:h1(Sn(s.borderRadius),0,Math.min(r,o)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}function Sy(e,t,s,n){const i=s.content;if(Da(i)){e.save(),e.globalAlpha=O1(s.opacity,i.style.opacity),e.drawImage(i,t.x,t.y,t.width,t.height),e.restore();return}const r=It(i)?i:[i],o=by(s,n),a=s.color,l=It(a)?a:[a],c=p1(t,s),u=t.y+s.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=s.textAlign,_1(e,s)&&k1(e,{x:c,y:u},r,o),T1(e,{x:c,y:u},r,{fonts:o,colors:l}),e.restore()}function _1(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function w1(e,t,s,n){const{radius:i,options:r}=t,o=r.pointStyle,a=r.rotation;let l=(a||0)*eu;if(Da(o)){e.save(),e.translate(s,n),e.rotate(l),e.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),e.restore();return}b1(i)||x1(e,{x:s,y:n,radius:i,rotation:a,style:o,rad:l})}function x1(e,{x:t,y:s,radius:n,rotation:i,style:r,rad:o}){let a,l,c,u;switch(e.beginPath(),r){default:e.arc(t,s,n,0,Vt),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(o)*n,s-Math.cos(o)*n),o+=Go,e.lineTo(t+Math.sin(o)*n,s-Math.cos(o)*n),o+=Go,e.lineTo(t+Math.sin(o)*n,s-Math.cos(o)*n),e.closePath();break;case"rectRounded":u=n*.516,c=n-u,a=Math.cos(o+Pe)*c,l=Math.sin(o+Pe)*c,e.arc(t-a,s-l,u,o-Ot,o-Zt),e.arc(t+l,s-a,u,o-Zt,o),e.arc(t+a,s+l,u,o,o+Zt),e.arc(t-l,s+a,u,o+Zt,o+Ot),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*n,e.rect(t-c,s-c,2*c,2*c);break}o+=Pe;case"rectRot":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+l,s-a),e.lineTo(t+a,s+l),e.lineTo(t-l,s+a),e.closePath();break;case"crossRot":o+=Pe;case"cross":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"star":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a),o+=Pe,a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"line":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l);break;case"dash":e.moveTo(t,s),e.lineTo(t+Math.cos(o)*n,s+Math.sin(o)*n);break}e.fill()}function S1(e,t,s,n){e.save();const i=t.length;let r=0,o=n;for(let a=0;a<i;a++){const l=s[Math.min(a,s.length-1)];e.font=l.string;const c=t[a];r=Math.max(r,e.measureText(c).width+n),o+=l.lineHeight}return e.restore(),{width:r,height:o}}function k1(e,{x:t,y:s},n,i){e.beginPath();let r=0;n.forEach(function(o,a){const l=i[Math.min(a,i.length-1)],c=l.lineHeight;e.font=l.string,e.strokeText(o,t,s+c/2+r),r+=c}),e.stroke()}function T1(e,{x:t,y:s},n,{fonts:i,colors:r}){let o=0;n.forEach(function(a,l){const c=r[Math.min(l,r.length-1)],u=i[Math.min(l,i.length-1)],d=u.lineHeight;e.beginPath(),e.font=u.string,e.fillStyle=c,e.fillText(a,t,s+d/2+o),o+=d,e.fill()})}function O1(e,t){const s=Xs(e)?e:t;return Xs(s)?Oa(s,0,1):1}const ky=["left","bottom","top","right"];function D1(e,t){const{pointX:s,pointY:n,options:i}=t,r=i.callout,o=r&&r.display&&I1(t,r);if(!o||L1(t,r,o))return;if(e.save(),e.beginPath(),!Ts(e,r))return e.restore();const{separatorStart:l,separatorEnd:c}=C1(t,o),{sideStart:u,sideEnd:d}=E1(t,o,l);(r.margin>0||i.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(c.x,c.y)),e.moveTo(u.x,u.y),e.lineTo(d.x,d.y);const h=Ln({x:s,y:n},t.getCenterPoint(),Ht(-t.rotation));e.lineTo(h.x,h.y),e.stroke(),e.restore()}function C1(e,t){const{x:s,y:n,x2:i,y2:r}=e,o=M1(e,t);let a,l;return t==="left"||t==="right"?(a={x:s+o,y:n},l={x:a.x,y:r}):(a={x:s,y:n+o},l={x:i,y:a.y}),{separatorStart:a,separatorEnd:l}}function M1(e,t){const{width:s,height:n,options:i}=e,r=i.callout.margin+i.borderWidth/2;return t==="right"?s+r:t==="bottom"?n+r:-r}function E1(e,t,s){const{y:n,width:i,height:r,options:o}=e,a=o.callout.start,l=A1(t,o.callout);let c,u;return t==="left"||t==="right"?(c={x:s.x,y:n+Qs(r,a)},u={x:c.x+l,y:c.y}):(c={x:s.x+Qs(i,a),y:s.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function A1(e,t){const s=t.side;return e==="left"||e==="top"?-s:s}function I1(e,t){const s=t.position;return ky.includes(s)?s:P1(e,t)}function P1(e,t){const{x:s,y:n,x2:i,y2:r,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=e,f={x:u,y:d},g=t.start,m=Qs(o,g),p=Qs(a,g),y=[s,s+m,s+m,i],b=[n+p,r,n,r],v=[];for(let w=0;w<4;w++){const S=Ln({x:y[w],y:b[w]},f,Ht(h));v.push({position:ky[w],distance:yi(S,{x:l,y:c})})}return v.sort((w,S)=>w.distance-S.distance)[0].position}function L1(e,t,s){const{pointX:n,pointY:i}=e,r=t.margin;let o=n,a=i;return s==="left"?o+=r:s==="right"?o-=r:s==="top"?a+=r:s==="bottom"&&(a-=r),e.inRange(o,a)}const af={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function _i(e,t,s){return t=typeof t=="number"?t:e.parse(t),Jt(t)?e.getPixelForValue(t):s}function En(e,t,s){const n=t[s];if(n||s==="scaleID")return n;const i=s.charAt(0),r=Object.values(e).filter(o=>o.axis&&o.axis===i);return r.length?r[0].id:i}function Ty(e,t){if(e){const s=e.options.reverse,n=_i(e,t.min,s?t.end:t.start),i=_i(e,t.max,s?t.start:t.end);return{start:n,end:i}}}function Oy(e,t){const{chartArea:s,scales:n}=e,i=n[En(n,t,"xScaleID")],r=n[En(n,t,"yScaleID")];let o=s.width/2,a=s.height/2;return i&&(o=_i(i,t.xValue,i.left+i.width/2)),r&&(a=_i(r,t.yValue,r.top+r.height/2)),{x:o,y:a}}function yu(e,t){const s=e.scales,n=s[En(s,t,"xScaleID")],i=s[En(s,t,"yScaleID")];if(!n&&!i)return{};let{left:r,right:o}=n||e.chartArea,{top:a,bottom:l}=i||e.chartArea;const c=lf(n,{min:t.xMin,max:t.xMax,start:r,end:o});r=c.start,o=c.end;const u=lf(i,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:r,y:a,x2:o,y2:l,width:o-r,height:l-a,centerX:r+(o-r)/2,centerY:a+(l-a)/2}}function Dy(e,t){if(!vy(t)){const s=yu(e,t);let n=t.radius;(!n||isNaN(n))&&(n=Math.min(s.width,s.height)/2,t.radius=n);const i=n*2,r=s.centerX+t.xAdjust,o=s.centerY+t.yAdjust;return{x:r-n,y:o-n,x2:r+n,y2:o+n,centerX:r,centerY:o,width:i,height:i,radius:n}}return $1(e,t)}function R1(e,t){const{scales:s,chartArea:n}=e,i=s[t.scaleID],r={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return i?F1(i,r,t):N1(s,r,t),r}function Cy(e,t){const s=yu(e,t);return s.initProperties=Di(e,s,t),s.elements=[{type:"label",optionScope:"label",properties:W1(e,s,t),initProperties:s.initProperties}],s}function $1(e,t){const s=Oy(e,t),n=t.radius*2;return{x:s.x-t.radius+t.xAdjust,y:s.y-t.radius+t.yAdjust,x2:s.x+t.radius+t.xAdjust,y2:s.y+t.radius+t.yAdjust,centerX:s.x+t.xAdjust,centerY:s.y+t.yAdjust,radius:t.radius,width:n,height:n}}function lf(e,t){const s=Ty(e,t)||t;return{start:Math.min(s.start,s.end),end:Math.max(s.start,s.end)}}function F1(e,t,s){const n=_i(e,s.value,NaN),i=_i(e,s.endValue,n);e.isHorizontal()?(t.x=n,t.x2=i):(t.y=n,t.y2=i)}function N1(e,t,s){for(const n of Object.keys(af)){const i=e[En(e,s,n)];if(i){const{min:r,max:o,start:a,end:l,startProp:c,endProp:u}=af[n],d=Ty(i,{min:s[r],max:s[o],start:i[a],end:i[l]});t[c]=d.start,t[u]=d.end}}}function j1({properties:e,options:t},s,n,i){const{x:r,x2:o,width:a}=e;return My({start:r,end:o,borderWidth:t.borderWidth},{position:n.x,padding:{start:i.left,end:i.right},adjust:t.label.xAdjust,size:s.width})}function B1({properties:e,options:t},s,n,i){const{y:r,y2:o,height:a}=e;return My({start:r,end:o,borderWidth:t.borderWidth},{position:n.y,padding:{start:i.top,end:i.bottom},adjust:t.label.yAdjust,size:s.height})}function My(e,t){const{start:s,end:n,borderWidth:i}=e,{position:r,padding:{start:o,end:a},adjust:l}=t,c=n-i-s-o-a-t.size;return s+i/2+l+mu(c,r)}function W1(e,t,s){const n=s.label;n.backgroundColor="transparent",n.callout.display=!1;const i=pu(n.position),r=ue(n.padding),o=Ma(e.ctx,n),a=j1({properties:t,options:s},o,i,r),l=B1({properties:t,options:s},o,i,r),c=o.width+r.width,u=o.height+r.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:n.rotation}}const ac=["enter","leave"],bu=ac.concat("click");function U1(e,t,s){t.listened=_y(s,bu,t.listeners),t.moveListened=!1,ac.forEach(n=>{pe(s[n])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(n=>{!t.listened&&pe(n.click)&&(t.listened=!0),t.moveListened||ac.forEach(i=>{pe(n[i])&&(t.listened=!0,t.moveListened=!0)})})}function z1(e,t,s){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return V1(e,t,s);case"click":return H1(e,t,s)}}function V1(e,t,s){if(!e.moveListened)return;let n;t.type==="mousemove"?n=gu(e.visibleElements,t,s.interaction):n=[];const i=e.hovered;e.hovered=n;const r={state:e,event:t};let o=cf(r,"leave",i,n);return cf(r,"enter",n,i)||o}function cf({state:e,event:t},s,n,i){let r;for(const o of n)i.indexOf(o)<0&&(r=Ey(o.options[s]||e.listeners[s],o,t)||r);return r}function H1(e,t,s){const n=e.listeners,i=gu(e.visibleElements,t,s.interaction);let r;for(const o of i)r=Ey(o.options.click||n.click,o,t)||r;return r}function Ey(e,t,s){return Dt(e,[t.$context,s])===!0}const sa=["afterDraw","beforeDraw"];function q1(e,t,s){const n=t.visibleElements;t.hooked=_y(s,sa,t.hooks),t.hooked||n.forEach(i=>{t.hooked||sa.forEach(r=>{pe(i.options[r])&&(t.hooked=!0)})})}function uf(e,t,s){if(e.hooked){const n=t.options[s]||e.hooks[s];return Dt(n,[t.$context])}}function J1(e,t,s){const n=X1(e.scales,t,s);let i=df(t,n,"min","suggestedMin");i=df(t,n,"max","suggestedMax")||i,i&&pe(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function Y1(e,t){for(const s of e)Z1(s,t)}function df(e,t,s,n){if(Jt(t[s])&&!K1(e.options,s,n)){const i=e[s]!==t[s];return e[s]=t[s],i}}function K1(e,t,s){return be(e[t])||be(e[s])}function Z1(e,t){for(const s of["scaleID","xScaleID","yScaleID"]){const n=En(t,e,s);n&&!t[n]&&G1(e,s)&&console.warn(`No scale found with id '${n}' for annotation '${e.id}'`)}}function G1(e,t){if(t==="scaleID")return!0;const s=t.charAt(0);for(const n of["Min","Max","Value"])if(be(e[s+n]))return!0;return!1}function X1(e,t,s){const n=t.axis,i=t.id,r=n+"ScaleID",o={min:it(t.min,Number.NEGATIVE_INFINITY),max:it(t.max,Number.POSITIVE_INFINITY)};for(const a of s)a.scaleID===i?hf(a,t,["value","endValue"],o):En(e,a,r)===i&&hf(a,t,[n+"Min",n+"Max",n+"Value"],o);return o}function hf(e,t,s,n){for(const i of s){const r=e[i];if(be(r)){const o=t.parse(r);n.min=Math.min(n.min,o),n.max=Math.max(n.max,o)}}}class Mi extends ve{inRange(t,s,n,i){const{x:r,y:o}=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation));return dy({x:r,y:o},this.getProps(["x","y","x2","y2"],i),n,this.options)}getCenterPoint(t){return Rn(this,t)}draw(t){t.save(),Ca(t,this.getCenterPoint(),this.options.rotation),xy(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Cy(t,s)}}Mi.id="boxAnnotation";Mi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Mi.defaultRoutes={borderColor:"color",backgroundColor:"color"};Mi.descriptors={label:{_fallback:!0}};class Ea extends ve{inRange(t,s,n,i){return hy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options;!s.display||!s.content||(iO(t,this),t.save(),Ca(t,this.getCenterPoint(),this.rotation),Sy(t,this,s,this._fitRatio),t.restore())}resolveElementProperties(t,s){const n=Q1(t,s);if(!n)return{};const{controllerMeta:i,point:r,radius:o}=eO(t,s,n);let a=Ma(t.ctx,s);const l=sO(a,o);yy(s,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=s,h=py(r,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Di(t,h,s),...h,...i,rotation:s.rotation,_fitRatio:l}}}Ea.id="doughnutLabelAnnotation";Ea.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Ea.defaultRoutes={};function Q1(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(s,n){const i=n.controller;return i instanceof tk&&tO(e,t,n.data)&&(!s||i.innerRadius<s.controller.innerRadius)&&i.options.circumference>=90?n:s},void 0)}function tO(e,t,s){if(!t.autoHide)return!0;for(let n=0;n<s.length;n++)if(!s[n].hidden&&e.getDataVisibility(n))return!0}function eO({chartArea:e},t,s){const{left:n,top:i,right:r,bottom:o}=e,{innerRadius:a,offsetX:l,offsetY:c}=s.controller,u=(n+r)/2+l,d=(i+o)/2+c,h={left:Math.max(u-a,n),right:Math.min(u+a,r),top:Math.max(d-a,i),bottom:Math.min(d+a,o)},f={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},g=t.spacing+t.borderWidth/2,m=a-g,p=f.y>d,y=p?i+g:o-g,b=nO(y,u,d,m);return{controllerMeta:{_centerX:u,_centerY:d,_radius:m,_counterclockwise:p,...b},point:f,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function sO({width:e,height:t},s){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return s*2/n}function nO(e,t,s,n){const i=Math.pow(s-e,2),r=Math.pow(n,2),o=t*-2,a=Math.pow(t,2)+i-r,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Vt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:tc({x:t,y:s},{x:c,y:e}).angle,_endAngle:tc({x:t,y:s},{x:u,y:e}).angle}}function iO(e,t){const{_centerX:s,_centerY:n,_radius:i,_startAngle:r,_endAngle:o,_counterclockwise:a,options:l}=t;e.save();const c=Ts(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(s,n,i,r,o,a),e.closePath(),e.fill(),c&&e.stroke(),e.restore()}class zr extends ve{inRange(t,s,n,i){return hy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options,n=!be(this._visible)||this._visible;!s.display||!s.content||!n||(t.save(),Ca(t,this.getCenterPoint(),this.rotation),D1(t,this),xy(t,this,s),Sy(t,rO(this),s),t.restore())}resolveElementProperties(t,s){let n;if(vy(s))n=Oy(t,s);else{const{centerX:a,centerY:l}=yu(t,s);n={x:a,y:l}}const i=ue(s.padding),r=Ma(t.ctx,s),o=py(n,r,s,i);return{initProperties:Di(t,o,s),pointX:n.x,pointY:n.y,...o,rotation:s.rotation}}}zr.id="labelAnnotation";zr.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};zr.defaultRoutes={borderColor:"color"};function rO({x:e,y:t,width:s,height:n,options:i}){const r=i.borderWidth/2,o=ue(i.padding);return{x:e+o.left+r,y:t+o.top+r,width:s-o.left-o.right-i.borderWidth,height:n-o.top-o.bottom-i.borderWidth}}const vu=(e,t,s)=>({x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}),lc=(e,t,s)=>vu(t,s,Math.abs((e-t.y)/(s.y-t.y))).x,ff=(e,t,s)=>vu(t,s,Math.abs((e-t.x)/(s.x-t.x))).y,Qi=e=>e*e,oO=(e,t,{x:s,y:n,x2:i,y2:r},o)=>o==="y"?{start:Math.min(n,r),end:Math.max(n,r),value:t}:{start:Math.min(s,i),end:Math.max(s,i),value:e},gf=(e,t,s,n)=>(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*s,cc=(e,t,s,n)=>({x:gf(e.x,t.x,s.x,n),y:gf(e.y,t.y,s.y,n)}),mf=(e,t,s,n)=>2*(1-n)*(t-e)+2*n*(s-t),pf=(e,t,s,n)=>-Math.atan2(mf(e.x,t.x,s.x,n),mf(e.y,t.y,s.y,n))+.5*Ot;class Vr extends ve{inRange(t,s,n,i){const r=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const o={mouseX:t,mouseY:s},{path:a,ctx:l}=this;if(a){Ts(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=t*u.currentDevicePixelRatio,h=s*u.currentDevicePixelRatio,f=l.isPointInStroke(a,d,h)||uc(this,o,i);return l.restore(),f}const c=Qi(r);return uO(this,o,c,i)||uc(this,o,i)}return aO(this,{mouseX:t,mouseY:s},n,{hitSize:r,useFinalPosition:i})}getCenterPoint(t){return Rn(this,t)}draw(t){const{x:s,y:n,x2:i,y2:r,cp:o,options:a}=this;if(t.save(),!Ts(t,a))return t.restore();Ci(t,a);const l=Math.sqrt(Math.pow(i-s,2)+Math.pow(r-n,2));if(a.curve&&o)return bO(t,this,o,l),t.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ay(this),f=Math.atan2(r-n,i-s);t.translate(s,n),t.rotate(f),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-h,0),t.shadowColor=a.borderShadowColor,t.stroke(),dc(t,0,d,c),dc(t,l,-h,u),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){const n=R1(t,s),{x:i,y:r,x2:o,y2:a}=n,l=lO(n,t.chartArea),c=l?cO({x:i,y:r},{x:o,y:a},t.chartArea):{x:i,y:r,x2:o,y2:a,width:Math.abs(o-i),height:Math.abs(a-r)};if(c.centerX=(o+i)/2,c.centerY=(a+r)/2,c.initProperties=Di(t,c,s),s.curve){const d={x:c.x,y:c.y},h={x:c.x2,y:c.y2};c.cp=yO(c,s,yi(d,h))}const u=dO(t,c,s.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Vr.id="lineAnnotation";const yf={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Vr.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},yf),fill:!1,length:12,start:Object.assign({},yf),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},zr.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Vr.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Vr.defaultRoutes={borderColor:"color"};function aO(e,{mouseX:t,mouseY:s},n,{hitSize:i,useFinalPosition:r}){const o=oO(t,s,e.getProps(["x","y","x2","y2"],r),n);return uy(o,i)||uc(e,{mouseX:t,mouseY:s},r,n)}function lO({x:e,y:t,x2:s,y2:n},{top:i,right:r,bottom:o,left:a}){return!(e<a&&s<a||e>r&&s>r||t<i&&n<i||t>o&&n>o)}function bf({x:e,y:t},s,{top:n,right:i,bottom:r,left:o}){return e<o&&(t=ff(o,{x:e,y:t},s),e=o),e>i&&(t=ff(i,{x:e,y:t},s),e=i),t<n&&(e=lc(n,{x:e,y:t},s),t=n),t>r&&(e=lc(r,{x:e,y:t},s),t=r),{x:e,y:t}}function cO(e,t,s){const{x:n,y:i}=bf(e,t,s),{x:r,y:o}=bf(t,e,s);return{x:n,y:i,x2:r,y2:o,width:Math.abs(r-n),height:Math.abs(o-i)}}function uO(e,{mouseX:t,mouseY:s},n=wn,i){const{x:r,y:o,x2:a,y2:l}=e.getProps(["x","y","x2","y2"],i),c=a-r,u=l-o,d=Qi(c)+Qi(u),h=d===0?-1:((t-r)*c+(s-o)*u)/d;let f,g;return h<0?(f=r,g=o):h>1?(f=a,g=l):(f=r+h*c,g=o+h*u),Qi(t-f)+Qi(s-g)<=n}function uc(e,{mouseX:t,mouseY:s},n,i){const r=e.label;return r.options.display&&r.inRange(t,s,i,n)}function dO(e,t,s){const n=s.borderWidth,i=ue(s.padding),r=Ma(e.ctx,s),o=r.width+i.width+n,a=r.height+i.height+n;return fO(t,s,{width:o,height:a,padding:i},e.chartArea)}function hO(e){const{x:t,y:s,x2:n,y2:i}=e,r=Math.atan2(i-s,n-t);return r>Ot/2?r-Ot:r<Ot/-2?r+Ot:r}function fO(e,t,s,n){const{width:i,height:r,padding:o}=s,{xAdjust:a,yAdjust:l}=t,c={x:e.x,y:e.y},u={x:e.x2,y:e.y2},d=t.rotation==="auto"?hO(e):Ht(t.rotation),h=gO(i,r,d),f=mO(e,t,{labelSize:h,padding:o},n),g=e.cp?cc(c,e.cp,u,f):vu(c,u,f),m={size:h.w,min:n.left,max:n.right,padding:o.left},p={size:h.h,min:n.top,max:n.bottom,padding:o.top},y=_f(g.x,m)+a,b=_f(g.y,p)+l;return{x:y-i/2,y:b-r/2,x2:y+i/2,y2:b+r/2,centerX:y,centerY:b,pointX:g.x,pointY:g.y,width:i,height:r,rotation:xp(d)}}function gO(e,t,s){const n=Math.cos(s),i=Math.sin(s);return{w:Math.abs(e*n)+Math.abs(t*i),h:Math.abs(e*i)+Math.abs(t*n)}}function mO(e,t,s,n){let i;const r=pO(e,n);return t.position==="start"?i=vf({w:e.x2-e.x,h:e.y2-e.y},s,t,r):t.position==="end"?i=1-vf({w:e.x-e.x2,h:e.y-e.y2},s,t,r):i=mu(1,t.position),i}function vf(e,t,s,n){const{labelSize:i,padding:r}=t,o=e.w*n.dx,a=e.h*n.dy,l=o>0&&(i.w/2+r.left-n.x)/o,c=a>0&&(i.h/2+r.top-n.y)/a;return Oa(Math.max(l,c),0,.25)}function pO(e,t){const{x:s,x2:n,y:i,y2:r}=e,o=Math.min(i,r)-t.top,a=Math.min(s,n)-t.left,l=t.bottom-Math.max(i,r),c=t.right-Math.max(s,n);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function _f(e,t){const{size:s,min:n,max:i,padding:r}=t,o=s/2;return s>i-n?(i+n)/2:(n>=e-r-o&&(e=n+r+o),i<=e+r+o&&(e=i-r-o),e)}function Ay(e){const t=e.options,s=t.arrowHeads&&t.arrowHeads.start,n=t.arrowHeads&&t.arrowHeads.end;return{startOpts:s,endOpts:n,startAdjust:wf(e,s),endAdjust:wf(e,n)}}function wf(e,t){if(!t||!t.display)return 0;const{length:s,width:n}=t,i=e.options.borderWidth/2,r={x:s,y:n+i};return Math.abs(lc(0,r,{x:0,y:i}))}function dc(e,t,s,n){if(!n||!n.display)return;const{length:i,width:r,fill:o,backgroundColor:a,borderColor:l}=n,c=Math.abs(t-i)+s;e.beginPath(),Ci(e,n),Ts(e,n),e.moveTo(c,-r),e.lineTo(t+s,0),e.lineTo(c,r),o===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=n.borderShadowColor,e.stroke()}function yO(e,t,s){const{x:n,y:i,x2:r,y2:o,centerX:a,centerY:l}=e,c=Math.atan2(o-i,r-n),u=pu(t.controlPoint,0),d={x:a+Qs(s,u.x,!1),y:l+Qs(s,u.y,!1)};return Ln(d,{x:a,y:l},c)}function xf(e,{x:t,y:s},{angle:n,adjust:i},r){!r||!r.display||(e.save(),e.translate(t,s),e.rotate(n),dc(e,0,-i,r),e.restore())}function bO(e,t,s,n){const{x:i,y:r,x2:o,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ay(t),f={x:i,y:r},g={x:o,y:a},m=pf(f,s,g,0),p=pf(f,s,g,1)-Ot,y=cc(f,s,g,d/n),b=cc(f,s,g,1-h/n),v=new Path2D;e.beginPath(),v.moveTo(y.x,y.y),v.quadraticCurveTo(s.x,s.y,b.x,b.y),e.shadowColor=l.borderShadowColor,e.stroke(v),t.path=v,t.ctx=e,xf(e,y,{angle:m,adjust:d},c),xf(e,b,{angle:p,adjust:h},u)}class Hr extends ve{inRange(t,s,n,i){const r=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return vO({x:t,y:s},this.getProps(["width","height","centerX","centerY"],i),r,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],i),d=n==="y"?{start:l,end:u}:{start:a,end:c},h=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-r));return h[n]>=d.start-o-wn&&h[n]<=d.end+o+wn}getCenterPoint(t){return Rn(this,t)}draw(t){const{width:s,height:n,centerX:i,centerY:r,options:o}=this;t.save(),Ca(t,this.getCenterPoint(),o.rotation),Ci(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;const a=Ts(t,o);t.ellipse(i,r,n/2,s/2,Ot/2,0,2*Ot),t.fill(),a&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Cy(t,s)}}Hr.id="ellipseAnnotation";Hr.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Mi.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Hr.defaultRoutes={borderColor:"color",backgroundColor:"color"};Hr.descriptors={label:{_fallback:!0}};function vO(e,t,s,n){const{width:i,height:r,centerX:o,centerY:a}=t,l=i/2,c=r/2;if(l<=0||c<=0)return!1;const u=Ht(s||0),d=Math.cos(u),h=Math.sin(u),f=Math.pow(d*(e.x-o)+h*(e.y-a),2),g=Math.pow(h*(e.x-o)-d*(e.y-a),2);return f/Math.pow(l+n,2)+g/Math.pow(c+n,2)<=1.0001}class Aa extends ve{inRange(t,s,n,i){const{x:r,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?f1({x:t,y:s},this.getCenterPoint(i),c/2,u):uy(n==="y"?{start:o,end:l,value:s}:{start:r,end:a,value:t},u)}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options,n=s.borderWidth;if(s.radius<.1)return;t.save(),t.fillStyle=s.backgroundColor,Ci(t,s);const i=Ts(t,s);w1(t,this,this.centerX,this.centerY),i&&!Da(s.pointStyle)&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore(),s.borderWidth=n}resolveElementProperties(t,s){const n=Dy(t,s);return n.initProperties=Di(t,n,s),n}}Aa.id="pointAnnotation";Aa.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Aa.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Ia extends ve{inRange(t,s,n,i){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&wO(this.elements,t,s,i);const r=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation)),o=this.elements.map(c=>n==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return r[n]>=a&&r[n]<=l}getCenterPoint(t){return Rn(this,t)}draw(t){const{elements:s,options:n}=this;t.save(),t.beginPath(),t.fillStyle=n.backgroundColor,Ci(t,n);const i=Ts(t,n);let r=!0;for(const o of s)r?(t.moveTo(o.x,o.y),r=!1):t.lineTo(o.x,o.y);t.closePath(),t.fill(),i&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,s){const n=Dy(t,s),{sides:i,rotation:r}=s,o=[],a=2*Ot/i;let l=r*eu;for(let c=0;c<i;c++,l+=a){const u=_O(n,s,l);u.initProperties=Di(t,n,s),o.push(u)}return n.elements=o,n}}Ia.id="polygonAnnotation";Ia.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ia.defaultRoutes={borderColor:"color",backgroundColor:"color"};function _O({centerX:e,centerY:t},{radius:s,borderWidth:n,hitTolerance:i},r){const o=(n+i)/2,a=Math.sin(r),l=Math.cos(r),c={x:e+a*s,y:t-l*s};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:e+a*(s+o),bY:t-l*(s+o)}}}function wO(e,t,s,n){let i=!1,r=e[e.length-1].getProps(["bX","bY"],n);for(const o of e){const a=o.getProps(["bX","bY"],n);a.bY>s!=r.bY>s&&t<(r.bX-a.bX)*(s-a.bY)/(r.bY-a.bY)+a.bX&&(i=!i),r=a}return i}const Ks={box:Mi,doughnutLabel:Ea,ellipse:Hr,label:zr,line:Vr,point:Aa,polygon:Ia};Object.keys(Ks).forEach(e=>{Ft.describe(`elements.${Ks[e].id}`,{_fallback:"plugins.annotation.common"})});const xO={update:Object.assign},SO=bu.concat(sa),Sf=(e,t)=>lt(t)?fc(e,t):e,hc=e=>e==="color"||e==="font";function _u(e="line"){return Ks[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function kO(e,t,s,n){const i=OO(e,s.animations,n),r=t.annotations,o=MO(t.elements,r);for(let a=0;a<r.length;a++){const l=r[a],c=Iy(o,a,l.type),u=l.setContext(CO(e,c,o,l)),d=c.resolveElementProperties(e,u);d.skip=TO(d),"elements"in d&&(DO(c,d.elements,u,i),delete d.elements),be(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=Py(u),i.update(c,d)}}function TO(e){return isNaN(e.x)||isNaN(e.y)}function OO(e,t,s){return s==="reset"||s==="none"||s==="resize"?xO:new uu(e,t)}function DO(e,t,s,n){const i=e.elements||(e.elements=[]);i.length=t.length;for(let r=0;r<t.length;r++){const o=t[r],a=o.properties,l=Iy(i,r,o.type,o.initProperties),c=s[o.optionScope].override(o);a.options=Py(c),n.update(l,a)}}function Iy(e,t,s,n){const i=Ks[_u(s)];let r=e[t];return(!r||!(r instanceof i))&&(r=e[t]=new i,Object.assign(r,n)),r}function Py(e){const t=Ks[_u(e.type)],s={};s.id=e.id,s.type=e.type,s.drawTime=e.drawTime,Object.assign(s,fc(e,t.defaults),fc(e,t.defaultRoutes));for(const n of SO)s[n]=e[n];return s}function fc(e,t){const s={};for(const n of Object.keys(t)){const i=t[n],r=e[n];hc(n)&&It(r)?s[n]=r.map(o=>Sf(o,i)):s[n]=Sf(r,i)}return s}function CO(e,t,s,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return s.filter(i=>i&&i.options)},id:n.id,type:"annotation"}))}function MO(e,t){const s=t.length,n=e.length;if(n<s){const i=s-n;e.splice(n,0,...new Array(i))}else n>s&&e.splice(s,n-s);return e}var EO="3.1.0";const Ls=new Map,kf=e=>e.type!=="doughnutLabel",AO=bu.concat(sa);var Pa={id:"annotation",version:EO,beforeRegister(){g1("chart.js","4.0",ye.version)},afterRegister(){ye.register(Ks)},afterUnregister(){ye.unregister(Ks)},beforeInit(e){Ls.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,s){const n=Ls.get(e),i=n.annotations=[];let r=s.annotations;lt(r)?Object.keys(r).forEach(o=>{const a=r[o];lt(a)&&(a.id=o,i.push(a))}):It(r)&&i.push(...r),Y1(i.filter(kf),e.scales)},afterDataLimits(e,t){const s=Ls.get(e);J1(e,t.scale,s.annotations.filter(kf).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(e,t,s){const n=Ls.get(e);U1(e,n,s),kO(e,n,s,t.mode),n.visibleElements=n.elements.filter(i=>!i.skip&&i.options.display),q1(e,n,s)},beforeDatasetsDraw(e,t,s){zi(e,"beforeDatasetsDraw",s.clip)},afterDatasetsDraw(e,t,s){zi(e,"afterDatasetsDraw",s.clip)},beforeDatasetDraw(e,t,s){zi(e,t.index,s.clip)},beforeDraw(e,t,s){zi(e,"beforeDraw",s.clip)},afterDraw(e,t,s){zi(e,"afterDraw",s.clip)},beforeEvent(e,t,s){const n=Ls.get(e);z1(n,t.event,s)&&(t.changed=!0)},afterDestroy(e){Ls.delete(e)},getAnnotations(e){const t=Ls.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,s){return gu(e,t,s)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!AO.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Ks[_u(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:hc,_fallback:!0},_indexable:hc}},additionalOptionScopes:[""]};function zi(e,t,s){const{ctx:n,chartArea:i}=e,r=Ls.get(e);s&&Fr(n,i);const o=IO(r.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)PO(n,i,r,a);s&&Nr(n)}function IO(e,t){const s=[];for(const n of e)if(n.options.drawTime===t&&s.push({element:n,main:!0}),n.elements&&n.elements.length)for(const i of n.elements)i.options.display&&i.options.drawTime===t&&s.push({element:i});return s}function PO(e,t,s,n){const i=n.element;n.main?(uf(s,i,"beforeDraw"),i.draw(e,t),uf(s,i,"afterDraw")):i.draw(e,t)}const LO={class:"chartContainer"},RO={__name:"BgChart",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){ye.register(du,Oi,xa,Ur,Mn,Wr,ka,fu,Pa);const t=e,s=mt(null);let n=null,i=null;const r=G(()=>{if(!t.selectedDate)return[];const{startOfDay:f,endOfDay:g}=ie(t.selectedDate);return t.glucoseReadings.filter(m=>{const p=typeof m.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(m.timestamp)?D.fromISO(m.timestamp):D.fromISO(m.timestamp,{zone:"Australia/Sydney"})).toJSDate():m.timestamp instanceof Date?m.timestamp:new Date(Number(m.timestamp));return p>=f&&p<g}).map(m=>({x:typeof m.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(m.timestamp)?D.fromISO(m.timestamp):D.fromISO(m.timestamp,{zone:"Australia/Sydney"})).toMillis():m.timestamp instanceof Date?m.timestamp.getTime():Number(m.timestamp),y:Number(m.value)})).sort((m,p)=>m.x-p.x)});function o(f){return{label:"BG (mmol/L)",data:f,pointRadius:0,pointHoverRadius:6,borderColor:"rgba(80, 80, 80, 0.9)",borderWidth:3,tension:.15,fill:!1}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bg"}}))}function l(f){if(!n)return;const g=f?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=g,n.update("none"))}function c(f){if(!f.length)return{min:4,max:10};const g=f.map(y=>y.y),m=Math.floor(Math.min(...g)),p=Math.ceil(Math.max(...g));return{min:Math.min(4,m),max:Math.max(10,p)}}function u(f,g){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,p,y)=>{const b=y.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(b.length){const{datasetIndex:v,index:w}=b[0],S=y.data.datasets[v].data[w].x;y.options.plugins.annotation.annotations.dynamicLine.value=S,y.update("none");const T=y.canvas.getBoundingClientRect(),R=(m?.native?.clientX??m.clientX)-T.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:S,px:R,source:"bg"}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>D.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:f?.min,max:f?.max},y:{min:g.min,max:g.max,grid:{color:"#888",lineWidth:1},ticks:{stepSize:2},title:{display:!0,text:"mmol/L"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{inRangeBand:{type:"box",yMin:4,yMax:6,backgroundColor:"rgba(100, 149, 237, 0.5)",borderWidth:0},dynamicLine:{type:"line",scaleID:"x",value:i,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function d(){if(!s.value)return;const f=s.value.getContext("2d"),g=r.value,m=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=m+864e5,y=c(g);n=new ye(f,{type:"line",data:{datasets:[o(g)]},options:u({min:m,max:p},y)})}function h(){if(!n)return;const f=r.value,g=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=c(f);n.data.datasets=[o(f)],n.options.scales.x.min=g,n.options.scales.x.max=m,n.options.scales.y.min=p.min,n.options.scales.y.max=p.max,n.update("none")}return cs(()=>{d(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),en(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),Ne([()=>t.selectedDate,r],h),(f,g)=>(O(),M("div",LO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Blood glucose chart"},null,512)]))}},$O={__name:"NotesChart",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},noteIconUrl:{type:String,default:"/note-icon.png"}},setup(e){ye.register(ek,xa,Ur,Mn,Wr);const t=e,s=mt(null);let n=null;const i=G(()=>{if(!t.selectedDate)return[];const{startOfDay:c,endOfDay:u}=ie(t.selectedDate);return(t.notes||[]).map(d=>({ts:d.timestamp instanceof Date?d.timestamp:typeof d.timestamp=="string"?D.fromISO(d.timestamp).toJSDate():new Date(Number(d.timestamp)),text:d.text??""})).filter(d=>d.ts>=c&&d.ts<u).sort((d,h)=>d.ts-h.ts).map(d=>({x:d.ts.getTime(),y:.5,_note:{text:d.text,timestamp:d.ts}}))});function r(c){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!0},events:["mousemove","mouseout","click","touchstart","touchmove"],onHover:(u,d,h)=>{if(!d.length){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"note"}}));return}const{datasetIndex:f,index:g}=d[0],m=h.data.datasets[f].data[g],p=m.x,y=h.canvas.getBoundingClientRect(),v=(u?.native?.clientX??u.clientX)-y.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:p,px:v,source:"note",note:m._note}}))},plugins:{legend:{display:!1},tooltip:{enabled:!1}},layout:{padding:{top:2,bottom:2}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},adapters:{date:{zone:"Australia/Sydney"}},grid:{display:!1},ticks:{display:!1},min:c?.min,max:c?.max},y:{min:0,max:1,grid:{display:!1},ticks:{display:!1},beginAtZero:!0}}}}function o(c){return{type:"scatter",data:c,pointRadius:10,pointHoverRadius:12,pointHitRadius:18,pointBackgroundColor:"#f59e0b",pointBorderColor:"#f59e0b",borderWidth:0,pointStyle:"triangle"}}function a(){if(!s.value)return;const c=s.value.getContext("2d"),u=i.value,d=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),h=d+864e5;n=new ye(c,{type:"scatter",data:{datasets:[o(u)]},options:r({min:d,max:h})})}function l(){if(!n)return;const c=i.value,u=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),d=u+864e5;n.data.datasets=[o(c)],n.options.scales.x.min=u,n.options.scales.x.max=d,n.update("none")}return cs(()=>{a()}),en(()=>{n?.destroy(),n=null}),Ne([()=>t.selectedDate,i],l),(c,u)=>(O(),M("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Notes lane"},null,512))}},FO=Lt($O,[["__scopeId","data-v-458e363e"]]),NO={class:"chartContainer"},jO={__name:"BasalChart",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){ye.register(du,Oi,xa,Ur,Mn,Wr,ka,fu,Pa);const t=e,s=mt(null);let n=null;const i=G(()=>{if(!t.selectedDate)return[];const{startOfDay:h,endOfDay:f}=ie(t.selectedDate),g=t.basalEntries.filter(p=>{const y=p.startTime instanceof Date?p.startTime:at(p.startTime),b=p.endTime?p.endTime instanceof Date?p.endTime:at(p.endTime):null;return y<f&&(!b||b>h)}).sort((p,y)=>{const b=(p.startTime instanceof Date?p.startTime:at(p.startTime)).getTime(),v=(y.startTime instanceof Date?y.startTime:at(y.startTime)).getTime();return b-v}),m=[];for(const p of g){const y=p.startTime instanceof Date?p.startTime:at(p.startTime),b=p.endTime?p.endTime instanceof Date?p.endTime:at(p.endTime):null,v=y<h?h:y,w=b?b>f?f:b:f,S=Number(p.rate??0);m.push({x:v.getTime(),y:S,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:S}),m.push({x:w.getTime(),y:S,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:S})}return m});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal"}}))}function o(h){if(!n)return;const f=h?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(m=>m.y));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (U/hr)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,m,p)=>{const y=p.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:b,index:v}=y[0],w=p.data.datasets[b].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const S=p.canvas.getBoundingClientRect(),E=(g?.native?.clientX??g.clientX)-S.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:E,source:"basal"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>D.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Basal Rate"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,g=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=a(f);n=new ye(h,{type:"line",data:{datasets:[l(f)]},options:c({min:g,max:m},p)})}function d(){if(!n)return;const h=i.value,f=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=f+864e5,m=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=g,n.options.scales.y.min=m.min,n.options.scales.y.max=m.max,n.update("none")}return cs(()=>{u(),window.addEventListener("chart-hover",o),s.value?.addEventListener("mouseleave",r)}),en(()=>{window.removeEventListener("chart-hover",o),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),Ne([()=>t.selectedDate,i],d),(h,f)=>(O(),M("div",NO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Basal rate chart"},null,512)]))}},BO={class:"chartContainer"},WO={__name:"BolusChart",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){ye.register(XS,kT,Ur,Mn,Wr,ka,Pa);const t=e,s=mt(null);let n=null;function i(g,m){return getComputedStyle(document.documentElement).getPropertyValue(g).trim()||m}const r=G(()=>{if(!t.selectedDate)return[];const{startOfDay:g,endOfDay:m}=ie(t.selectedDate);return(t.boluses||[]).map(p=>({ts:p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),amt:Number(p.amount??0),type:p.type??p.bolusType??null})).filter(p=>p.ts>=g&&p.ts<m&&p.amt>0).sort((p,y)=>p.ts-y.ts).map(p=>({x:p.ts.getTime(),y:p.amt,type:p.type??p.bolusType??null}))});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bolus",bolus:null}}))}function a(g){if(!n)return;const m=g?.detail?.x??null,p=n.options?.plugins?.annotation?.annotations;p?.dynamicLine!=null&&(p.dynamicLine.value=m,n.update("none"))}function l(g){if(!g.length)return{min:0,max:1};const m=Math.max(0,...g.map(y=>y.y));return{min:0,max:Math.max(1,Math.ceil(m+.2))}}function c(g,m,p="#000000"){const y=getComputedStyle(document.documentElement).getPropertyValue(g).trim()||p,b=y.length===4?"#"+[...y.slice(1)].map(E=>E+E).join(""):y,v=parseInt(b.slice(1),16),w=v>>16&255,S=v>>8&255,T=v&255;return`rgba(${w}, ${S}, ${T}, ${m})`}function u(g){return console.log("[createDataset] types:",g.map((m,p)=>({i:p,type:m.type??m.t,raw:m}))),i("--color-bolus","#ef4444"),{label:"Bolus (U)",data:g,type:"bar",borderWidth:0,borderRadius:2,barPercentage:.95,categoryPercentage:1,barThickness:10,backgroundColor:m=>{const p=m.raw?.type;return p==="meal"?c("--color-bolus-meal",.7,"#16a34a"):p==="correction"?c("--color-bolus-correction",.7,"#f97316"):p==="Control-IQ"?c("--color-bolus-controliq",.7,"#6b7280"):c("--color-bolus",.7,"#2563eb")}}}function d(g,m){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(p,y,b)=>{const v=b.getElementsAtEventForMode(p,"nearest",{intersect:!1},!1);if(v.length){const{datasetIndex:w,index:S}=v[0],T=b.data.datasets[w].data[S],E=T.x,R=typeof T.y=="number"?T.y:Number(T.amt??0);b.options.plugins.annotation.annotations.dynamicLine.value=E,b.update("none");const I=b.canvas.getBoundingClientRect(),L=(p?.native?.clientX??p.clientX)-I.left,C=T.type??null;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:E,px:L,source:"bolus",bolus:{amount:R,type:C}}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:p=>D.fromMillis(Number(p)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:g?.min,max:g?.max},y:{min:m.min,max:m.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:1},title:{display:!0,text:"Bolus (U)"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:p=>p.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function h(){if(!s.value)return;const g=s.value.getContext("2d"),m=r.value,p=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),y=p+864e5,b=l(m);n=new ye(g,{type:"bar",data:{datasets:[u(m)]},options:d({min:p,max:y},b)})}function f(){if(!n)return;const g=r.value,m=D.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=m+864e5,y=l(g);n.data.datasets=[u(g)],n.options.scales.x.min=m,n.options.scales.x.max=p,n.options.scales.y.min=y.min,n.options.scales.y.max=y.max,n.update("none")}return cs(()=>{h(),window.addEventListener("chart-hover",a),s.value?.addEventListener("mouseleave",o)}),en(()=>{window.removeEventListener("chart-hover",a),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),Ne([()=>t.selectedDate,()=>t.boluses],f),(g,m)=>(O(),M("div",BO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Bolus chart"},null,512)]))}},UO={class:"chartContainer"},zO={__name:"HourlyBasalChart",props:{hourlyTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){ye.register(du,Oi,xa,Ur,Mn,Wr,ka,fu,Pa);const t=e,s=mt(null);let n=null;const i=G(()=>{if(!t.selectedDate||!Array.isArray(t.hourlyTotals))return[];const h=t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate),f=D.fromJSDate(h).setZone("Australia/Sydney").startOf("day"),g=[];for(let m=0;m<24;m++){const p=Number(t.hourlyTotals[m]??0),y=f.plus({hours:m}).toMillis(),b=f.plus({hours:m+1}).toMillis();g.push({x:y,y:p,_segStart:y,_segEnd:b,_val:p}),g.push({x:b,y:p,_segStart:y,_segEnd:b,_val:p})}return g});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal-hourly"}}))}function o(h){if(!n)return;const f=h?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(m=>Number(m.y)||0));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (units/hour bucket)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,m,p)=>{const y=p.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:b,index:v}=y[0],w=p.data.datasets[b].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const S=p.canvas.getBoundingClientRect(),E=(g?.native?.clientX??g.clientX)-S.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:E,source:"basal-hourly"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>D.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Units / Hour"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,g=D.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=a(f);n=new ye(h,{type:"line",data:{datasets:[l(f)]},options:c({min:g,max:m},p)})}function d(){if(!n)return;const h=i.value,f=D.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),g=f+864e5,m=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=g,n.options.scales.y.min=m.min,n.options.scales.y.max=m.max,n.update("none")}return cs(()=>{u(),window.addEventListener("chart-hover",o),s.value?.addEventListener("mouseleave",r)}),en(()=>{window.removeEventListener("chart-hover",o),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),Ne([()=>t.selectedDate,i],d),(h,f)=>(O(),M("div",UO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Hourly basal (totals) chart"},null,512)]))}},VO=Lt(zO,[["__scopeId","data-v-a3f397d7"]]),HO=["role","tabindex"],qO={class:"log-title"},JO={class:"log-details"},YO={key:0},KO={key:1},ZO={key:2},GO={key:3},XO={key:4},QO={key:5},tD={__name:"FoodLogRow",props:{log:{type:Object,required:!0},asButton:{type:Boolean,default:!0}},setup(e){const t=e,s=G(()=>t.log.timestamp instanceof Date?t.log.timestamp:at(t.log.timestamp));return(n,i)=>(O(),M("div",{class:"food-row clickable-row",role:e.asButton?"button":void 0,tabindex:e.asButton?0:void 0},[_("div",qO,[_("strong",null,P(bt(Sr)(s.value)),1),J(": "+P(e.log.foodName||"Food"),1)]),_("div",JO,[e.log.quantity!=null?(O(),M("span",YO," Grams (or mLs): "+P(e.log.quantity),1)):Y("",!0),e.log.netCarbs!=null?(O(),M("span",KO," Net Carbs: "+P(e.log.netCarbs)+"g",1)):Y("",!0),e.log.totalCarbs!=null?(O(),M("span",ZO," Total Carbs: "+P(e.log.totalCarbs)+"g",1)):Y("",!0),e.log.fat!=null?(O(),M("span",GO," Fat: "+P(e.log.fat)+"g",1)):Y("",!0),e.log.fibre!=null?(O(),M("span",XO," Fibre: "+P(e.log.fibre)+"g",1)):Y("",!0),e.log.calories!=null?(O(),M("span",QO," Calories: "+P(e.log.calories),1)):Y("",!0)])],8,HO))}},wu=Lt(tD,[["__scopeId","data-v-2c52b607"]]),eD={class:"bolus-row",role:"button",tabindex:"0"},sD={class:"line"},nD={class:"time"},iD={class:"amount-pill"},rD={class:"meta"},oD={key:1},aD={key:2},lD={key:3},cD={__name:"BolusRow",props:{dose:{type:Object,required:!0}},setup(e){const t=e,s=G(()=>{const i=t.dose?.timestamp;return i instanceof Date?i:at(i)}),n=G(()=>{const i=Number(t.dose?.amount??0);return isFinite(i)?i.toFixed(2):"0.00"});return(i,r)=>(O(),M("div",eD,[_("div",sD,[_("strong",nD,P(bt(Sr)(s.value)),1),_("span",iD,[J(P(n.value)+"U ",1),r[0]||(r[0]=_("span",{class:"icon","aria-hidden":"true"},"",-1))])]),_("div",rD,[e.dose?.type?(O(),M("span",{key:0,class:tt(["badge",{"badge-meal":e.dose.type==="meal","badge-correction":e.dose.type==="correction","badge-controliq":e.dose.type==="Control-IQ","badge-other":e.dose.type!=="meal"&&e.dose.type!=="correction"}])},P(e.dose.type),3)):Y("",!0),e.dose?.carbRatioUsed?(O(),M("span",oD,"Ratio: 1:"+P(e.dose.carbRatioUsed),1)):Y("",!0),e.dose?.duration?(O(),M("span",aD,"Duration: "+P(e.dose.duration)+"s",1)):Y("",!0),e.dose?.notes?(O(),M("span",lD," "+P(e.dose.notes),1)):Y("",!0)])]))}},Ly=Lt(cD,[["__scopeId","data-v-780e029d"]]),uD={class:"note-body"},dD={key:0,class:"note-title"},hD={class:"note-line"},fD={key:0},gD={key:1},mD=["innerHTML"],pD={key:0,class:"note-tags"},yD={__name:"NoteRow",props:{note:{type:Object,required:!0}},setup(e){const t=e,s=G(()=>t.note.timestamp instanceof Date?t.note.timestamp:at(t.note.timestamp));return(n,i)=>(O(),M("div",{class:"note-row",role:"button",tabindex:"0",onClick:i[0]||(i[0]=(...r)=>n.onClick&&n.onClick(...r))},[_("div",uD,[e.note.title?(O(),M("div",dD,[_("strong",null,P(e.note.title),1)])):Y("",!0),_("div",hD,[e.note.noteNumber?(O(),M("strong",fD,"#"+P(e.note.noteNumber),1)):Y("",!0),e.note.noteNumber?(O(),M("span",gD,"  ")):Y("",!0),_("strong",null,P(bt(Sr)(s.value)),1),i[1]||(i[1]=J(": ",-1)),_("span",{class:"note-text",innerHTML:(e.note.text||"").replace(/\n/g,"<br>")},null,8,mD)])]),e.note.tags?.length?(O(),M("div",pD,[(O(!0),M(ft,null,zt(e.note.tags,r=>(O(),M("span",{key:r,class:"note-tag"},"#"+P(r),1))),128))])):Y("",!0)]))}},Ry=Lt(yD,[["__scopeId","data-v-0cda799b"]]);function bD(e){const t=Math.floor(e),s=Math.round((e-t)*60);return`${t} min ${s.toString().padStart(2,"0")} sec/km`}function vD(e){return`${e.toFixed(1)} km/h`}function _D(e){return`${(e/1e3).toFixed(2)} km`}const wD={class:"log-title"},xD={class:"time"},SD={class:"log-details"},kD={key:0},TD={key:1},OD={key:2},DD={key:3},CD={key:4},MD={key:5},ED={key:6},AD={key:7},ID={key:8},PD={__name:"WorkoutRow",props:{workout:{type:Object,required:!0}},emits:["workout-click"],setup(e,{emit:t}){const s=e,n=t;function i(){n("workout-click",s.workout)}function r(a){return Math.round(Number(a??0)/60)}function o(a){return Math.round(Number(a??0))}return(a,l)=>(O(),M("div",{class:"log-block",role:"button",tabindex:"0",onClick:i},[_("div",wD,[_("strong",null,P(e.workout.name??e.workout.type??"Workout"),1),_("span",xD,"  "+P(bt(lr)(e.workout.start)),1)]),_("div",SD,[e.workout.duration!=null?(O(),M("span",kD,[l[0]||(l[0]=_("strong",null,"Duration:",-1)),J(" "+P(r(e.workout.duration))+" min",1)])):Y("",!0),e.workout.averageHeartRate!=null?(O(),M("span",TD,[l[1]||(l[1]=_("strong",null,"Avg HR:",-1)),J(" "+P(o(e.workout.averageHeartRate))+" bpm",1)])):Y("",!0),e.workout.maxHeartRate!=null?(O(),M("span",OD,[l[2]||(l[2]=_("strong",null,"Max HR:",-1)),J(" "+P(o(e.workout.maxHeartRate))+" bpm",1)])):Y("",!0),e.workout.activeCalories!=null?(O(),M("span",DD,[l[3]||(l[3]=_("strong",null,"Calories:",-1)),J(" "+P(o(e.workout.activeCalories)),1)])):Y("",!0),_("span",null,[l[4]||(l[4]=_("strong",null,"Start:",-1)),J(" "+P(bt(lr)(e.workout.start)),1)]),_("span",null,[l[5]||(l[5]=_("strong",null,"End:",-1)),J(" "+P(e.workout.endTime?bt(lr)(e.workout.endTime):""),1)]),e.workout.elapsedTime!=null?(O(),M("span",CD,[l[6]||(l[6]=_("strong",null,"Elapsed:",-1)),J(" "+P(r(e.workout.elapsedTime))+" min",1)])):Y("",!0),e.workout.distance!=null?(O(),M("span",MD,[l[7]||(l[7]=_("strong",null,"Distance:",-1)),J(" "+P(bt(_D)(e.workout.distance)),1)])):Y("",!0),e.workout.kmPerHour!=null?(O(),M("span",ED,[l[8]||(l[8]=_("strong",null,"Speed:",-1)),J(" "+P(bt(vD)(e.workout.kmPerHour)),1)])):Y("",!0),e.workout.minutesPerKm!=null?(O(),M("span",AD,[l[9]||(l[9]=_("strong",null,"Pace:",-1)),J(" "+P(bt(bD)(e.workout.minutesPerKm)),1)])):Y("",!0),e.workout.notes?(O(),M("span",ID,[l[10]||(l[10]=_("strong",null,"Notes:",-1)),J(" "+P(e.workout.notes),1)])):Y("",!0)])]))}},$y=Lt(PD,[["__scopeId","data-v-2e8e572c"]]);function Cs(e,t="any"){window.dispatchEvent(new CustomEvent("jump-to-time",{detail:{at:e,source:t}})),console.log("[jumpToTime] dispatched",{at:e,source:t})}const LD={class:"combined-list"},RD={key:0,class:"empty"},$D={key:1,class:"stack"},FD=["onClick"],ND={class:"type-badge","aria-hidden":"true"},jD={class:"content"},BD={__name:"CombinedTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]},boluses:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},workouts:{type:Array,default:()=>[]}},setup(e){const t=e,s={food:{icon:"",cssVar:"--color-food"},bolus:{icon:"",cssVar:"--color-bolus"},note:{icon:"",cssVar:"--color-note"},workout:{icon:"",cssVar:"--color-workout"}};function n(o){return s[o]?.icon??""}function i(o){return`var(${s[o]?.cssVar||"--color-border"})`}const r=G(()=>{const{startOfDay:o,endOfDay:a}=ie(t.selectedDate),l=t.foodLogs.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:at(h.timestamp);return f>=o&&f<a?{type:"food",ts:f,payload:h}:null}).filter(Boolean),c=t.boluses.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:at(h.timestamp);return f>=o&&f<a?{type:"bolus",ts:f,payload:h}:null}).filter(Boolean),u=t.notes.map(h=>{const f=h.timestamp??h.startTime,g=f instanceof Date?f:at(f);return g>=o&&g<a?{type:"note",ts:g,payload:{...h,timestamp:g}}:null}).filter(Boolean),d=t.workouts.map(h=>{const f=h.start instanceof Date?h.start:at(h.start);return f>=o&&f<a?{type:"workout",ts:f,payload:h}:null}).filter(Boolean);return[...l,...c,...u,...d].sort((h,f)=>h.ts-f.ts)});return(o,a)=>(O(),M("div",LD,[r.value.length===0?(O(),M("div",RD,"No activity for this day.")):(O(),M("div",$D,[(O(!0),M(ft,null,zt(r.value,(l,c)=>(O(),M("div",{key:l.type+"-"+l.ts.getTime()+"-"+c,class:"feed-item clickable-row",style:ke({"--accent":i(l.type)}),onClick:u=>bt(Cs)(l.ts,"combined")},[_("div",ND,P(n(l.type)),1),_("div",jD,[l.type==="food"?(O(),Oe(wu,{key:0,log:l.payload},null,8,["log"])):l.type==="bolus"?(O(),Oe(Ly,{key:1,dose:l.payload},null,8,["dose"])):l.type==="note"?(O(),Oe(Ry,{key:2,note:l.payload},null,8,["note"])):l.type==="workout"?(O(),Oe($y,{key:3,workout:l.payload},null,8,["workout"])):Y("",!0)])],12,FD))),128))]))]))}},WD=Lt(BD,[["__scopeId","data-v-a9480cf9"]]),UD={class:"htp-root",tabindex:"0","aria-haspopup":"true","aria-expanded":"false"},zD={class:"htp-box",role:"tooltip"},VD={class:"htp-fallback"},HD={__name:"HelpTooltip",props:{Message:{type:String,default:""}},setup(e){return(t,s)=>(O(),M("span",UD,[s[0]||(s[0]=J(" ? ",-1)),_("span",zD,[av(t.$slots,"default",{},()=>[_("span",VD,P(e.Message),1)])])]))}},qD=Lt(HD,[["__scopeId","data-v-65e5884a"]]),JD="modulepreload",YD=function(e){return"/"+e},Tf={},qr=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(s.map(u=>{if(u=YD(u),u in Tf)return;Tf[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":JD,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((g,m)=>{f.addEventListener("load",g),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},KD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>qr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class xu extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class ZD extends xu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Of extends xu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Df extends xu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gc||(gc={}));var GD=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class XD{constructor(t,{headers:s={},customFetch:n,region:i=gc.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=KD(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return GD(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(m=>{throw new ZD(m)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Of(d);if(!d.ok)throw new Df(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Df||i instanceof Of?i.context:void 0}}})}}function QD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var Ut={},zn={},Vn={},Hn={},qn={},Jn={},eC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wi=eC();const sC=wi.fetch,Fy=wi.fetch.bind(wi),Ny=wi.Headers,nC=wi.Request,iC=wi.Response,Ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ny,Request:nC,Response:iC,default:Fy,fetch:sC},Symbol.toStringTag,{value:"Module"})),rC=tC(Ei);var _o={},Cf;function jy(){if(Cf)return _o;Cf=1,Object.defineProperty(_o,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return _o.default=e,_o}var Mf;function By(){if(Mf)return Jn;Mf=1;var e=Jn&&Jn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Jn,"__esModule",{value:!0});const t=e(rC),s=e(jy());class n{constructor(r){this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=r.headers,this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=r.shouldThrowOnError,this.signal=r.signal,this.isMaybeSingle=r.isMaybeSingle,r.fetch?this.fetch=r.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,o){return this.headers=Object.assign({},this.headers),this.headers[r]=o,this}then(r,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,g=null,m=null,p=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=S:g=JSON.parse(S))}const v=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const v=await c.text();try{f=JSON.parse(v),Array.isArray(f)&&c.status===404&&(g=[],f=null,p=200,y="OK")}catch{c.status===404&&v===""?(p=204,y="No Content"):f={message:v}}if(f&&this.isMaybeSingle&&(!((h=f?.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,p=200,y="OK"),f&&this.shouldThrowOnError)throw new s.default(f)}return{error:f,data:g,count:m,status:p,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(r,o)}returns(){return this}overrideTypes(){return this}}return Jn.default=n,Jn}var Ef;function Wy(){if(Ef)return qn;Ef=1;var e=qn&&qn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qn,"__esModule",{value:!0});const t=e(By());class s extends t.default{select(i){let r=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:r=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:o=r}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,r,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:r=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,r?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return qn.default=s,qn}var Af;function Su(){if(Af)return Hn;Af=1;var e=Hn&&Hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hn,"__esModule",{value:!0});const t=e(Wy());class s extends t.default{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}in(i,r){const o=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${r}`),this}match(i){return Object.entries(i).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(i,r,o){return this.url.searchParams.append(i,`not.${r}.${o}`),this}or(i,{foreignTable:r,referencedTable:o=r}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,r,o){return this.url.searchParams.append(i,`${r}.${o}`),this}}return Hn.default=s,Hn}var If;function Uy(){if(If)return Vn;If=1;var e=Vn&&Vn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vn,"__esModule",{value:!0});const t=e(Su());class s{constructor(i,{headers:r={},schema:o,fetch:a}){this.url=i,this.headers=r,this.schema=o,this.fetch=a}select(i,{head:r=!1,count:o}={}){const a=r?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:r,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:r,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:r}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const r="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Vn.default=s,Vn}var Vi={},Hi={},Pf;function oC(){return Pf||(Pf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.version=void 0,Hi.version="0.0.0-automated"),Hi}var Lf;function aC(){if(Lf)return Vi;Lf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.DEFAULT_HEADERS=void 0;const e=oC();return Vi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Vi}var Rf;function lC(){if(Rf)return zn;Rf=1;var e=zn&&zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zn,"__esModule",{value:!0});const t=e(Uy()),s=e(Su()),n=aC();class i{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{h.searchParams.append(m,p)})):(d="POST",f=a);const g=Object.assign({},this.headers);return u&&(g.Prefer=`count=${u}`),new s.default({method:d,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return zn.default=i,zn}var $f;function cC(){if($f)return Ut;$f=1;var e=Ut&&Ut.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const t=e(lC());Ut.PostgrestClient=t.default;const s=e(Uy());Ut.PostgrestQueryBuilder=s.default;const n=e(Su());Ut.PostgrestFilterBuilder=n.default;const i=e(Wy());Ut.PostgrestTransformBuilder=i.default;const r=e(By());Ut.PostgrestBuilder=r.default;const o=e(jy());return Ut.PostgrestError=o.default,Ut.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:r.default,PostgrestError:o.default},Ut}var uC=cC();const dC=QD(uC),{PostgrestClient:hC,PostgrestQueryBuilder:e2,PostgrestFilterBuilder:s2,PostgrestTransformBuilder:n2,PostgrestBuilder:i2,PostgrestError:r2}=dC;class fC{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const n=this.getWebSocketConstructor();return new n(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const gC="2.15.1",mC=`realtime-js/${gC}`,pC="1.0.0",mc=1e4,yC=1e3,bC=100;var fr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fr||(fr={}));var Bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bt||(Bt={}));var ze;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ze||(ze={}));var pc;(function(e){e.websocket="websocket"})(pc||(pc={}));var bn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(bn||(bn={}));class vC{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),r=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+i));o=o+i;const l=n.decode(t.slice(o,o+r));o=o+r;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class zy{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Ff=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((r,o)=>(r[o]=_C(o,e,t,i),r),{})},_C=(e,t,s,n)=>{const i=t.find(a=>a.name===e),r=i?.type,o=s[e];return r&&!n.includes(r)?Vy(r,o):yc(o)},Vy=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return kC(t,s)}switch(e){case Et.bool:return wC(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return xC(t);case Et.json:case Et.jsonb:return SC(t);case Et.timestamp:return TC(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return yc(t);default:return yc(t)}},yc=e=>e,wC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},SC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kC=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let r;const o=e.slice(1,s);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>Vy(t,a))}return e},TC=e=>typeof e=="string"?e.replace(" ","T"):e,Hy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class vl{constructor(t,s,n={},i=mc){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nf||(Nf={}));class gr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gr.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=gr.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=gr.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const r=this.cloneDeep(t),o=this.transformState(s),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=r[c];if(d){const h=u.map(p=>p.presence_ref),f=d.map(p=>p.presence_ref),g=u.filter(p=>f.indexOf(p.presence_ref)<0),m=d.filter(p=>h.indexOf(p.presence_ref)<0);g.length>0&&(a[c]=g),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:r,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jf||(jf={}));var mr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mr||(mr={}));var bs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bs||(bs={}));class ku{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new vl(this,ze.join,this.params,this.timeout),this.rejoinTimer=new zy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ze.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new gr(this),this.broadcastEndpointURL=Hy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[mr.PRESENCE]&&this.bindings[mr.PRESENCE].length>0,u={},d={broadcast:r,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(bs.CHANNEL_ERROR,h)),this._onClose(()=>t?.(bs.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){t?.(bs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,m=(f=g?.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<m;y++){const b=g[y],{filter:{event:v,schema:w,table:S,filter:T}}=b,E=h&&h[y];if(E&&E.event===v&&E.schema===w&&E.table===S&&E.filter===T)p.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=Bt.errored,t?.(bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(bs.SUBSCRIBED);return}}).receive("error",h=>{this.state=Bt.errored,t?.(bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===Bt.joined&&t===mr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:r,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ze.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new vl(this,ze.leave,{},t),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,s,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(r),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vl(this,t,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bC){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,r;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ze;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(m=f.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var g,m,p,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,S=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((m=s.ids)===null||m===void 0?void 0:m.includes(w))&&(S==="*"||S?.toLocaleLowerCase()===((p=s.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(b=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((v=s?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:p,commit_timestamp:y,type:b,errors:v}=g;h=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(h,n)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),r={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&ku.isEqual(i.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ze.close,{},t)}_onError(t){this._on(ze.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Ff(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Ff(t.columns,t.old_record)),s}}const Bf=()=>{},wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OC=[1e3,2e3,5e3,1e4],DC=1e4,CC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MC{constructor(t,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bf,this.ref=0,this.reconnectTimer=null,this.logger=Bf,this.conn=null,this.sendBuffer=[],this.serializer=new vC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...o)=>qr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ei);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...o)=>r(...o)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${pc.websocket}`,this.httpEndpoint=Hy(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fC.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pC}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fr.connecting:return bn.Connecting;case fr.open:return bn.Open;case fr.closing:return bn.Closing;default:return bn.Closed}}isConnected(){return this.connectionState()===bn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new ku(`realtime:${t}`,s,this);return this.channels.push(r),r}}push(t){const{topic:s,event:n,payload:i,ref:r}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yC,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:r,ref:o}=s,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),r),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,r,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ze.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([CC],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:mC};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ze.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new zy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,n,i,r,o,a,l,c;if(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:mc,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:wo.HEARTBEAT_INTERVAL,this.worker=(r=t?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t?.reconnectAfterMs)!==null&&a!==void 0?a:u=>OC[u-1]||DC,this.encode=(l=t?.encode)!==null&&l!==void 0?l:(u,d)=>d(JSON.stringify(u)),this.decode=(c=t?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Tu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class EC extends Tu{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bc extends Tu{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var AC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const qy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>qr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},IC=()=>AC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qr(()=>Promise.resolve().then(()=>Ei),void 0)).Response:Response}),vc=e=>{if(Array.isArray(e))return e.map(s=>vc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=vc(n)}),t},PC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var $n=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const _l=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LC=(e,t,s)=>$n(void 0,void 0,void 0,function*(){const n=yield IC();e instanceof n&&!s?.noResolveJson?e.json().then(i=>{const r=e.status||500,o=i?.statusCode||r+"";t(new EC(_l(i),r,o))}).catch(i=>{t(new bc(_l(i),i))}):t(new bc(_l(e),e))}),RC=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(PC(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s))};function Jr(e,t,s,n,i,r){return $n(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(s,RC(t,n,i,r)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>LC(l,a,n))})})}function na(e,t,s,n){return $n(this,void 0,void 0,function*(){return Jr(e,"GET",t,s,n)})}function ns(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Jr(e,"POST",t,n,i,s)})}function _c(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Jr(e,"PUT",t,n,i,s)})}function $C(e,t,s,n){return $n(this,void 0,void 0,function*(){return Jr(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Jy(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Jr(e,"DELETE",t,n,i,s)})}var re=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const FC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NC{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=qy(i)}uploadOrUpdate(t,s,n,i){return re(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},Wf),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(t=="PUT"?_c:ns)(this.fetch,`${this.url}/object/${u}`,r,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}upload(t,s,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return re(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Wf.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield _c(this.fetch,a.toString(),l,{headers:u});return{data:{path:r,fullPath:d.Key},error:null}}catch(l){if(Wt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s?.upsert&&(i["x-upsert"]="true");const r=yield ns(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new Tu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}update(t,s,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return re(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}copy(t,s,n){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield ns(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield ns(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return re(this,void 0,void 0,function*(){try{const i=yield ns(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),r=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}download(t,s){return re(this,void 0,void 0,function*(){const i=typeof s?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(s?.transform||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield na(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wt(a))return{data:null,error:a};throw a}})}info(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield na(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:vc(n),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}exists(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield $C(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Wt(n)&&n instanceof bc){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],r=s?.download?`download=${s.download===!0?"":s.download}`:"";r!==""&&i.push(r);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return re(this,void 0,void 0,function*(){try{return{data:yield Jy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}list(t,s,n){return re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},FC),s),{prefix:t||""});return{data:yield ns(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}listV2(t,s){return re(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ns(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const jC="2.11.0",BC={"X-Client-Info":`storage-js/${jC}`};var Yn=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class WC{constructor(t,s={},n,i){const r=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href,this.headers=Object.assign(Object.assign({},BC),s),this.fetch=qy(n)}listBuckets(){return Yn(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Wt(t))return{data:null,error:t};throw t}})}getBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield na(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Yn(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Yn(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield Jy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}}class UC extends WC{constructor(t,s={},n,i){super(t,s,n,i)}from(t){return new NC(this.url,this.headers,t,this.fetch)}}const zC="2.55.0";let tr="";typeof Deno<"u"?tr="deno":typeof document<"u"?tr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tr="react-native":tr="node";const VC={"X-Client-Info":`supabase-js-${tr}/${zC}`},HC={headers:VC},qC={schema:"public"},JC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YC={};var KC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const ZC=e=>{let t;return e?t=e:typeof fetch>"u"?t=Fy:t=fetch,(...s)=>t(...s)},GC=()=>typeof Headers>"u"?Ny:Headers,XC=(e,t,s)=>{const n=ZC(s),i=GC();return(r,o)=>KC(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(o?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:c}))})};var QC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function tM(e){return e.endsWith("/")?e:e+"/"}function eM(e,t){var s,n;const{db:i,auth:r,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>QC(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Yy="2.71.1",si=30*1e3,wc=3,wl=wc*si,sM="http://localhost:9999",nM="supabase.auth.token",iM={"X-Client-Info":`gotrue-js/${Yy}`},xc="X-Supabase-Api-Version",Ky={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oM=600*1e3;class Ou extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class aM extends Ou{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function lM(e){return ot(e)&&e.name==="AuthApiError"}class Zy extends Ou{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class sn extends Ou{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class Rs extends sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cM(e){return ot(e)&&e.name==="AuthSessionMissingError"}class xo extends sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class So extends sn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ko extends sn{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uM(e){return ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class Uf extends sn{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sc extends sn{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function xl(e){return ot(e)&&e.name==="AuthRetryableFetchError"}class zf extends sn{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class kc extends sn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vf=` 	
\r=`.split(""),dM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vf.length;t+=1)e[Vf[t].charCodeAt(0)]=-2;for(let t=0;t<ia.length;t+=1)e[ia[t].charCodeAt(0)]=t;return e})();function Hf(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ia[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ia[n]),t.queuedBits-=6}}function Gy(e,t,s){const n=dM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qf(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{gM(o,n,s)};for(let o=0;o<e.length;o+=1)Gy(e.charCodeAt(o),i,r);return t.join("")}function hM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fM(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}hM(n,t)}}function gM(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function mM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Gy(e.charCodeAt(i),s,n);return new Uint8Array(t)}function pM(e){const t=[];return fM(e,s=>t.push(s)),new Uint8Array(t)}function yM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Hf(i,s,n)),Hf(null,s,n),t.join("")}function bM(e){return Math.round(Date.now()/1e3)+e}function vM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ue=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},Xy=()=>{if(!Ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function _M(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const Qy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>qr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},wM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ni=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},fn=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Is=async(e,t)=>{await e.removeItem(t)};class La{constructor(){this.promise=new La.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}La.promiseConstructor=Promise;function Sl(e){const t=e.split(".");if(t.length!==3)throw new kc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!rM.test(t[n]))throw new kc("JWT not in base64url format");return{header:JSON.parse(qf(t[0])),payload:JSON.parse(qf(t[1])),signature:mM(t[2]),raw:{header:t[0],payload:t[1]}}}async function xM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SM(e,t){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await e(r);if(!t(r,null,o)){n(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function kM(e){return("0"+e.toString(16)).substr(-2)}function TM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let r=0;r<56;r++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,kM).join("")}async function OM(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function DM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await OM(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kn(e,t,s=!1){const n=TM();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await ni(e,`${t}-code-verifier`,i);const r=await DM(n);return[r,n===r?"plain":"s256"]}const CM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MM(e){const t=e.headers.get(xc);if(!t||!t.match(CM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function EM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function AM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(e){if(!IM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kl(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jf(e){return JSON.parse(JSON.stringify(e))}var PM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const yn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LM=[502,503,504];async function Yf(e){var t;if(!wM(e))throw new Sc(yn(e),0);if(LM.includes(e.status))throw new Sc(yn(e),e.status);let s;try{s=await e.json()}catch(r){throw new Zy(yn(r),r)}let n;const i=MM(e);if(i&&i.getTime()>=Ky["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new zf(yn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Rs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new zf(yn(s),e.status,s.weak_password.reasons);throw new aM(yn(s),e.status||500,n)}const RM=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function dt(e,t,s,n){var i;const r=Object.assign({},n?.headers);r[xc]||(r[xc]=Ky["2024-01-01"].name),n?.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await $M(e,t,s+a,{headers:r,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function $M(e,t,s,n,i,r){const o=RM(t,n,i,r);let a;try{a=await e(s,Object.assign({},o))}catch(l){throw console.error(l),new Sc(yn(l),0)}if(a.ok||await Yf(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Yf(l)}}function ps(e){var t;let s=null;BM(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=bM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Kf(e){const t=ps(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ws(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FM(e){return{data:e,error:null}}function NM(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r}=e,o=PM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function jM(e){return e}function BM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tl=["global","local","others"];var WM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class UM{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=Qy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Tl[0]){if(Tl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tl.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ws})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=WM(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:NM,redirectTo:s?.redirectTo})}catch(s){if(ot(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ws})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:jM});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);c[`${p}Page`]=m}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ot(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Zn(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ws})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Zn(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ws})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){Zn(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ws})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zn(t.userId);try{const{data:s,error:n}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(ot(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Zn(t.userId),Zn(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}}}function Zf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function zM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gn={debug:!!(globalThis&&Xy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class VM extends tb{}async function HM(e,t,s){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new VM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gn.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}zM();const qM={url:sM,storageKey:nM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gf(e,t,s){return await s()}const Xn={};class Mr{constructor(t){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mr.nextInstanceID,Mr.nextInstanceID+=1,this.instanceID>0&&Ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},qM),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new UM({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Qy(i.fetch),this.lock=i.lock||Gf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ue()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=HM:this.lock=Gf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Xy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zf(this.memoryStorage)),Ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=Xn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Xn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=_M(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ue()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(s,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),uM(r)){const l=(t=r.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ot(s)?{error:s}:{error:new Zy("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const r=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ps}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var s,n,i;try{let r;if("email"in t){const{email:u,password:d,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Kn(this.storage,this.storageKey)),r=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},xform:ps})}else if("phone"in t){const{phone:u,password:d,options:h}=t;r=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ps})}else throw new So("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{let s;if("email"in t){const{email:r,password:o,options:a}=t;s=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else if("phone"in t){const{phone:r,password:o,options:a}=t;s=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else throw new So("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new xo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,n,i,r,o,a,l,c,u,d,h,f;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:p,wallet:y,statement:b,options:v}=t;let w;if(Ue())if(typeof y=="object")w=y;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))w=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const S=new URL((s=v?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const T=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let E;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")E=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)E=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=v?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=v?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const T=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=T}}try{const{data:p,error:y}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:yM(m)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ps});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new xo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(ot(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const s=await fn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:r,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ps});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new xo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(ot(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:r,nonce:o}=t,a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:ps}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new xo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,r,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Kn(this.storage,this.storageKey));const{error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new So("You must provide either an email or phone number.")}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,r;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,r=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:ps});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ot(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await Kn(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:FM})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Rs;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ot(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:r}=t,{error:o}=await dt(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:r}=t,{data:o,error:a}=await dt(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new So("You must provide either an email or phone number and a type")}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<wl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await fn(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=kl()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ws}):await this._useSession(async s=>{var n,i,r;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rs}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Ws})})}catch(s){if(ot(s))return cM(s)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new Rs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Kn(this.storage,this.storageKey));const{data:c,error:u}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ws});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rs;const s=Date.now()/1e3;let n=s,i=!0,r=null;const{payload:o}=Sl(t.access_token);if(o.exp&&(n=o.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(s){if(ot(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:a}=s;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Rs;const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Ue())throw new ko("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ko(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Uf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Uf("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!r||!a||!o||!c)throw new ko("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:m,error:p}=await this._getUser(r);if(p)throw p;const y={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(ot(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(lM(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=vM(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:r},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Kn(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,c,u;const{data:d,error:h}=r;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ue()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(ot(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(ot(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await SM(async i=>(i>0&&await xM(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ps})),(i,r)=>{const o=200*Math.pow(2,i);return r&&xl(r)&&Date.now()+o-n<si})}catch(n){if(this._debug(s,"error",n),ot(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Ue()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await fn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ni(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:kl()}else if(i&&!i.user&&!i.user){const o=await fn(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Is(this.storage,this.storageKey+"-user"),await ni(this.storage,this.storageKey,i)):i.user=kl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<wl;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${wl}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),xl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new La;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new Rs;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),ot(r)){const o={session:null,error:r};return xl(r)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await ni(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const r=Jf(i);await ni(this.storage,this.storageKey,r)}else{const i=Jf(s);await ni(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ue()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),si);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${si}ms, refresh threshold is ${wc} ticks`),i<=wc&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ue()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await Kn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n?.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ot(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ot(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{data:null,error:r};const{data:o,error:a}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(ot(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ot(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=t?.factors||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:r}=t;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Sl(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+oM>i)return n;const{data:r,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,s={}){try{let n=t;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};n=f.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=Sl(n);s?.allowExpired||EM(r.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:r,header:i,signature:o},error:null}}const u=AM(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,pM(`${a}.${l}`)))throw new kc("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}}Mr.nextInstanceID=0;const JM=Mr;class YM extends JM{constructor(t){super(t)}}var KM=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class ZM{constructor(t,s,n){var i,r,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=tM(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:qC,realtime:YC,auth:Object.assign(Object.assign({},JC),{storageKey:c}),global:HC},d=eM(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=d.global.headers)!==null&&r!==void 0?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=XC(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new hC(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new UC(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new XD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return KM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YM({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:r,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new MC(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GM=(e,t,s)=>new ZM(e,t,s);function XM(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}XM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const QM="https://ydjtxdquehaeglieozpz.supabase.co",tE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkanR4ZHF1ZWhhZWdsaWVvenB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0OTc2MzEsImV4cCI6MjA3MTA3MzYzMX0.zRO6-nChPo9eiVIWc44XYCojP8DYrxaRFHsZzbnxVD4",Xt=GM(QM,tE);async function eE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchNotesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("notes").select("id, text, start_time, end_time, tags").gte("start_time",s).lt("start_time",n).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,text:o.text??"",timestamp:D.fromISO(o.start_time).toJSDate(),startTime:D.fromISO(o.start_time).toJSDate(),endTime:o.end_time?D.fromISO(o.end_time).toJSDate():null,tags:Array.isArray(o.tags)?o.tags:[]}))}async function Xf({limit:e=10,anchor:t,query:s="",tags:n=[]}={}){let i=Xt.from("notes").select("id, text, start_time, end_time, tags",{count:"exact"}).order("start_time",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.startISO&&t?.id&&(i=i.or([`and(start_time.lt.${t.startISO})`,`and(start_time.eq.${t.startISO},id.lt.${t.id})`].join(",")));const r=(s||"").trim(),o=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);if(r.startsWith("#")){const f=r.slice(1).trim();f&&o.push(f)}else r.length>0&&(i=i.ilike("text",`%${r}%`));o.length>0&&(i=i.contains("tags",o));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,text:f.text??"",timestamp:D.fromISO(f.start_time).toJSDate(),startTime:D.fromISO(f.start_time).toJSDate(),endTime:f.end_time?D.fromISO(f.end_time).toJSDate():null,tags:Array.isArray(f.tags)?f.tags:[]})),d=u[u.length-1],h=d?{startISO:D.fromJSDate(d.startTime).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function sE(){const{data:e,error:t}=await Xt.rpc("all_note_tags");if(t)throw t;return(e??[]).map(s=>s.tag)}const nE={class:"all-notes"},iE={class:"search"},rE={key:0,class:"results-bar"},oE={key:0},aE={key:0},lE={key:1},cE={class:"tag-cloud"},uE=["onClick"],dE={key:1,class:"empty"},hE=["onClick"],fE={class:"note-log-body"},gE=["innerHTML"],mE={key:0,class:"note-tags"},pE={class:"load-more"},yE={key:1},bE={key:2},vE={__name:"AllNotesTab",emits:["note-click"],setup(e,{emit:t}){const s=t,n=mt([]),i=mt(null),r=mt(!1),o=mt(null),a=mt(""),l=mt([]),c=mt([]);function u(y){return c.value.includes(y)}function d(y){const b=c.value.indexOf(y);b>=0?c.value.splice(b,1):c.value.push(y),r.value=!0,n.value=[],i.value=null}function h(){a.value="",c.value=[]}async function f(){r.value=!0;try{const{items:y,nextAnchor:b,totalMatchingFilter:v}=await Xf({limit:10,query:a.value,tags:c.value});n.value=y,i.value=b,o.value=v}catch(y){console.error("[AllNotesTab] first page failed:",y),n.value=[],i.value=null,o.value=0}finally{r.value=!1}}async function g(){if(!(!i.value||r.value)){r.value=!0;try{const{items:y,nextAnchor:b}=await Xf({limit:10,query:a.value,tags:c.value,anchor:i.value});n.value.push(...y),i.value=b}catch(y){console.error("[AllNotesTab] next page failed:",y)}finally{r.value=!1}}}function m(y){Cs(y.timestamp,"all-notes"),s("note-click",y.timestamp)}Ne([a,()=>c.value.join("|")],async()=>{r.value=!0,n.value=[],i.value=null,o.value=null,await f()});async function p(){try{l.value=await sE()}catch(y){console.error("[AllNotesTab] loadAllTags failed:",y),l.value=[]}}return cs(async()=>{await p(),await f()}),(y,b)=>(O(),M("section",nE,[_("div",iE,[Fc(_("input",{"onUpdate:modelValue":b[0]||(b[0]=v=>a.value=v),type:"text",placeholder:"Search notes  (#tag or text)"},null,512),[[hm,a.value]]),a.value||c.value.length?(O(),M("button",{key:0,class:"clear-btn",type:"button",onClick:h}," Clear Search ")):Y("",!0),ht(qD,null,{default:Il(()=>b[1]||(b[1]=[_("div",null,[_("div",null,[J("To filter by tag, prefix tag name with "),_("code",null,"#"),J("or click on the tags listed below.")]),_("div",null,[J("To filter by note number, prefix note number with "),_("code",null,"#"),J(".")]),_("div",null,"Or you can just search the content by entering a word.")],-1)])),_:1,__:[1]})]),r.value?Y("",!0):(O(),M("div",rE,[(o.value??0)>0?(O(),M("span",oE,[J(P(o.value)+" result",1),o.value!==1?(O(),M("span",aE,"s")):Y("",!0)])):(O(),M("span",lE,"No results"))])),_("div",cE,[(O(!0),M(ft,null,zt(l.value,v=>(O(),M("button",{key:v,class:tt(["tag-chip",{selected:u(v)}]),type:"button",onClick:w=>d(v)},P(v),11,uE))),128))]),r.value?(O(),M("div",dE,"Loading")):(O(),Oe(_0,{key:2,name:"list",tag:"div",class:"notes-list"},{default:Il(()=>[(O(!0),M(ft,null,zt(n.value,v=>(O(),M("div",{key:v.id??v.timestamp+"-"+(v.text||"").slice(0,10),class:"note-log-block clickable-row",onClick:w=>m(v),role:"button",tabindex:"0"},[_("div",fE,[_("div",null,[_("strong",null,P(bt(Xl)(v.timestamp)),1),b[2]||(b[2]=J("  ",-1)),_("span",{innerHTML:(v.text||"").replace(/\n/g,"<br>")},null,8,gE)])]),v.tags?.length?(O(),M("div",mE,[(O(!0),M(ft,null,zt(v.tags,w=>(O(),M("span",{key:w,class:"note-tag"},P(w),1))),128))])):Y("",!0)],8,hE))),128))]),_:1})),_("div",pE,[i.value&&!r.value?(O(),M("button",{key:0,type:"button",onClick:g}," Load more ")):r.value?(O(),M("div",yE,"Loading")):n.value.length>0?(O(),M("div",bE,"No more results.")):Y("",!0)])]))}},_E=Lt(vE,[["__scopeId","data-v-5015ded6"]]),wE={class:"daily-section"},xE={key:0,class:"loading-row"},SE={key:1},kE={key:2},TE={__name:"NotesTab",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:r}=ie(s.selectedDate);return s.notes.filter(o=>{const a=o.timestamp instanceof Date?o.timestamp:at(o.timestamp);return a>=i&&a<r}).sort((o,a)=>{const l=(o.timestamp instanceof Date?o.timestamp:at(o.timestamp)).getTime(),c=(a.timestamp instanceof Date?a.timestamp:at(a.timestamp)).getTime();return l-c})});return(i,r)=>(O(),M("div",wE,[e.loading?(O(),M("div",xE,r[0]||(r[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading notes",-1)]))):n.value.length===0?(O(),M("div",SE,"No notes for this day.")):(O(),M("div",kE,[(O(!0),M(ft,null,zt(n.value,o=>(O(),Oe(Ry,{key:(o.timestamp?.getTime?.()??o.timestamp)+"-"+(o.noteNumber??""),note:o,onClick:a=>bt(Cs)(o.timestamp,"notes"),class:"clickable-row"},null,8,["note","onClick"]))),128))]))]))}},OE={class:"daily-section"},DE={key:0},CE={key:1},ME={class:"fast-label"},EE={key:0,class:"fast-notes"},AE={__name:"FastsTab",props:{fasts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:o,endOfDay:a}=ie(s.selectedDate);return s.fasts.filter(l=>{const c=l.startTime instanceof Date?l.startTime:at(l.startTime),u=l.endTime?l.endTime instanceof Date?l.endTime:at(l.endTime):null;return c<a&&(!u||u>o)}).sort((l,c)=>{const u=(l.startTime instanceof Date?l.startTime:at(l.startTime)).getTime(),d=(c.startTime instanceof Date?c.startTime:at(c.startTime)).getTime();return u-d})});function i(o){const a=o.startTime instanceof Date?o.startTime:at(o.startTime),l=o.endTime?o.endTime instanceof Date?o.endTime:at(o.endTime):null,c=mp(a,l,s.selectedDate);return js(c)}function r(o){const a=s.selectedDate,l=o.startTime,c=o.endTime;return io(l,a)&&c&&io(c,a)?"Started and Ended":io(l,a)?"Started fast:":c&&io(c,a)?"Ended fast:":"Continued"}return(o,a)=>(O(),M("div",OE,[n.value.length===0?(O(),M("div",DE,"No fasts for this day.")):(O(),M("div",CE,[(O(!0),M(ft,null,zt(n.value,l=>(O(),M("div",{key:(l.startTime?.getTime?.()??l.startTime)+"-"+(l.endTime?.getTime?.()??"ongoing"),class:"fast-block",role:"button",tabindex:"0"},[_("div",ME,P(r(l)),1),_("div",null,[a[0]||(a[0]=_("strong",null,"Duration:",-1)),J(" "+P(i(l)),1)]),_("div",null,[a[1]||(a[1]=_("strong",null,"Start:",-1)),J(" "+P(bt(Xl)(l.startTime)),1)]),_("div",null,[a[2]||(a[2]=_("strong",null,"End:",-1)),J(" "+P(l.endTime?bt(Xl)(l.endTime):"Ongoing"),1)]),l.notes?(O(),M("div",EE," "+P(l.notes),1)):Y("",!0)]))),128))]))]))}},IE=Lt(AE,[["__scopeId","data-v-ad5edd99"]]);async function PE(e,t){const{data:s,error:n}=await Xt.rpc("total_fast_overlap_seconds",{s:e,e:t});if(n)throw n;return s??0}async function LE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFastsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("fasts").select("id, start_time, end_time, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,startTime:D.fromISO(o.start_time).toJSDate(),endTime:o.end_time?D.fromISO(o.end_time).toJSDate():null,notes:o.notes??""}))}const RE={class:"stats-card"},$E={class:"row"},FE={class:"pickers"},NE=["value"],jE=["value"],BE={class:"metric"},WE={key:0,class:"err"},UE={__name:"FastStatsTab",setup(e){mt(D.local().setZone("Australia/Sydney").toJSDate());const t=D.local().setZone("Australia/Sydney").startOf("day"),s=mt(t.minus({days:6}).toJSDate()),n=mt(t.toJSDate());G(()=>{const y=b=>b.setZone("Australia/Sydney").toFormat("d LLL yyyy");return`${y(D.fromJSDate(s.value))}  ${y(D.fromJSDate(n.value))}`});const i=G(()=>D.fromJSDate(s.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd")),r=G(()=>D.fromJSDate(n.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function o(y){const b=D.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");s.value=b.toJSDate()}function a(y){const b=D.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");n.value=b.toJSDate()}const l=mt(!1),c=mt(""),u=mt("");function d(y){if(y==null)return"";const b=Math.round(y/60);return js(b)}async function h(){l.value=!0,c.value="";try{const{startUtcISO:y,endUtcISO:b}=Zc(s.value,n.value),v=await PE(y,b),w=D.fromISO(y),S=D.fromISO(b),T=Math.max(1,S.diff(w,"days").days),E=v/T;u.value=d(E)}catch(y){console.error("[FastStatsTab] load failed:",y),c.value="Failed to load.",u.value=""}finally{l.value=!1}}Ne([s,n],()=>{h()});function f(){const y=D.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),b=D.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day"),v=Math.floor(b.diff(y,"days").days);return Math.max(1,v)}function g(y){const b=D.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),v=D.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day");s.value=b.plus({days:y}).toJSDate(),n.value=v.plus({days:y}).toJSDate()}function m(){g(-f())}function p(){g(f())}return h(),(y,b)=>(O(),M("div",RE,[_("div",$E,[_("button",{type:"button",onClick:m}," Prev"),_("div",FE,[_("input",{type:"date",value:i.value,onChange:o},null,40,NE),b[0]||(b[0]=_("span",null,"",-1)),_("input",{type:"date",value:r.value,onChange:a},null,40,jE)]),_("button",{type:"button",onClick:p},"Next ")]),_("div",BE,[b[1]||(b[1]=_("div",{class:"title"},"Average Fasting Duration Per 24 Hours",-1)),_("div",{class:tt(["value",{dim:l.value}])},P(u.value),3),c.value?(O(),M("div",WE,P(c.value),1)):Y("",!0)])]))}},zE=Lt(UE,[["__scopeId","data-v-91e14c32"]]),VE={class:"daily-section"},HE={key:0},qE={key:1,class:"glucose-list"},JE=["onClick","aria-label"],YE={class:"time"},KE={class:"value"},ZE={__name:"GlucoseTab",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:i,endOfDay:r}=ie(t.selectedDate);return t.glucoseReadings.filter(o=>{const a=o.timestamp instanceof Date?o.timestamp:at(o.timestamp);return a>=i&&a<r}).map(o=>({...o,ts:o.timestamp instanceof Date?o.timestamp:at(o.timestamp)})).sort((o,a)=>o.ts-a.ts)});function n(i){const r=Number(i);return r<4?"is-low":r<=6?"is-inrange":r<=10?"is-elevated":"is-high"}return(i,r)=>(O(),M("div",VE,[s.value.length===0?(O(),M("div",HE,"No glucose readings for this day.")):(O(),M("div",qE,[(O(!0),M(ft,null,zt(s.value,o=>(O(),M("div",{key:o.ts.getTime()+"-"+o.value,class:tt(["glucose-row clickable-row",n(o.value)]),onClick:a=>bt(Cs)(o.ts,"bg"),"aria-label":`BG ${Number(o.value).toFixed(2)} at ${bt(Sr)(o.ts)}`},[_("span",YE,P(bt(Sr)(o.ts)),1),_("span",KE,P(Number(o.value).toFixed(2)),1),r[0]||(r[0]=_("span",{class:"unit"},"mmol/L",-1))],10,JE))),128))]))]))}},GE=Lt(ZE,[["__scopeId","data-v-882bf5e4"]]),XE={class:"daily-section"},QE={key:0,class:"loading-row"},tA={key:1},eA={key:2},sA={__name:"FoodLogsTab",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,s)=>(O(),M("div",XE,[e.loading?(O(),M("div",QE,s[0]||(s[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading food logs",-1)]))):e.foodLogs.length===0?(O(),M("div",tA,"No food logs.")):(O(),M("div",eA,[(O(!0),M(ft,null,zt(e.foodLogs,n=>(O(),Oe(wu,{key:n.id,log:n,onClick:i=>bt(Cs)(n.timestamp,"foodLogs"),class:"clickable-row"},null,8,["log","onClick"]))),128))]))]))}},nA={class:"daily-section"},iA={key:0},rA={key:1},oA={__name:"WorkoutsTab",props:{workouts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=ie(t.selectedDate);return t.workouts.filter(r=>{const o=r.start instanceof Date?r.start:at(r.start);return o>=n&&o<i}).sort((r,o)=>{const a=(r.start instanceof Date?r.start:at(r.start)).getTime(),l=(o.start instanceof Date?o.start:at(o.start)).getTime();return a-l})});return(n,i)=>(O(),M("div",nA,[s.value.length===0?(O(),M("div",iA,"No workouts for this day.")):(O(),M("div",rA,[(O(!0),M(ft,null,zt(s.value,r=>(O(),Oe($y,{key:(r.start?.getTime?.()??r.start)+"-"+(r.name||""),workout:r,onClick:o=>bt(Cs)(r.start,"workout"),class:"clickable-row"},null,8,["workout","onClick"]))),128))]))]))}},aA={class:"daily-section"},lA={key:0,class:"loading-row"},cA={key:1},uA={__name:"BolusTab",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=ie(t.selectedDate);return t.boluses.filter(r=>{const o=r.timestamp instanceof Date?r.timestamp:at(r.timestamp);return o>=n&&o<i}).sort((r,o)=>{const a=(r.timestamp instanceof Date?r.timestamp:at(r.timestamp)).getTime(),l=(o.timestamp instanceof Date?o.timestamp:at(o.timestamp)).getTime();return a-l})});return(n,i)=>(O(),M("div",aA,[e.loading?(O(),M("div",lA,i[0]||(i[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading boluses",-1)]))):s.value.length===0?(O(),M("div",cA,"No bolus doses for this day.")):(O(!0),M(ft,{key:2},zt(s.value,r=>(O(),Oe(Ly,{key:(r.timestamp?.getTime?.()??r.timestamp)+"-"+(r.amount??""),dose:r,onClick:o=>bt(Cs)(r.timestamp,"bolus"),class:"clickable-row"},null,8,["dose","onClick"]))),128))]))}},dA={class:"daily-section"},hA={key:0,class:"loading-row"},fA={key:1},gA={key:2},mA=["onClick"],pA={class:"log-details"},yA={key:1},bA={__name:"BasalTab",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){function t(){console.log("[Basal Debug] Total entries:",s.basalEntries.length);const i=s.basalEntries.filter(r=>!r.endTime);console.log("[Basal Debug] Entries with null endTime:",i.length),s.basalEntries.forEach((r,o)=>{console.log(`#${o} start: ${r.startTime}, end: ${r.endTime??"null"}, rate: ${r.rate}`)})}cs(()=>{t()});const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:r}=ie(s.selectedDate);return s.basalEntries.filter(o=>{const a=o.startTime instanceof Date?o.startTime:at(o.startTime),l=o.endTime?o.endTime instanceof Date?o.endTime:at(o.endTime):null;return a<r&&(!l||l>i)}).sort((o,a)=>{const l=(o.startTime instanceof Date?o.startTime:at(o.startTime)).getTime(),c=(a.startTime instanceof Date?a.startTime:at(a.startTime)).getTime();return l-c})});return(i,r)=>(O(),M("div",dA,[e.loading?(O(),M("div",hA,r[0]||(r[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading basal",-1)]))):n.value.length===0?(O(),M("div",fA," No basal entries for this day. ")):(O(),M("div",gA,[(O(!0),M(ft,null,zt(n.value,o=>(O(),M("div",{key:(o.startTime?.getTime?.()??o.startTime)+"-"+(o.endTime?.getTime?.()??"ongoing")+"-"+(o.rate??""),class:"log-block clickable-row",role:"button",tabindex:"0",onClick:a=>bt(Cs)(o.startTime,"basal")},[_("div",null,[_("strong",null,P(bt(lr)(o.startTime)),1),r[1]||(r[1]=J("  ",-1)),_("strong",null,P(o.endTime?bt(lr)(o.endTime):"Ongoing"),1)]),_("div",null,[r[2]||(r[2]=_("strong",null,"Duration:",-1)),J(" "+P(bt(Lw)(bt(mp)(o.startTime,o.endTime,e.selectedDate))),1)]),_("div",pA,[_("span",null," Rate: "+P(o.rate)+" U/hr",1),o.mode?(O(),M("span",{key:0,class:tt(["mode-chip",{"chip-control-iq":o.mode==="ControlIQ","chip-manual":o.mode==="Manual","chip-suspended":o.mode==="Suspended"}])},P(o.mode),3)):Y("",!0),o.notes?(O(),M("span",yA," "+P(o.notes),1)):Y("",!0)])],8,mA))),128))]))]))}},vA=Lt(bA,[["__scopeId","data-v-5bd58bd6"]]),_A={class:"basal-by-hour"},wA={class:"summary"},xA={class:"table-wrap"},SA={class:"hour-table"},kA={class:"hour-label"},TA={class:"units"},OA={__name:"BasalByHourTab",props:{basalEntries:{type:Array,default:()=>[]},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){const t=e,s=G(()=>Array.isArray(t.hourlyBasalTotals)&&t.hourlyBasalTotals.length===24?t.hourlyBasalTotals:new Array(24).fill(0)),n=G(()=>{const r=[],o=D.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day");for(let a=0;a<24;a++){const l=o.plus({hours:a}),c=l.plus({hours:1});r.push({hour:a,label:`${l.toFormat("h:mm a")}  ${c.toFormat("h:mm a")}`,units:s.value[a]})}return r}),i=G(()=>s.value.reduce((r,o)=>r+o,0));return(r,o)=>(O(),M("section",_A,[o[2]||(o[2]=_("h3",{class:"title"},"Basal Delivered by Hour",-1)),_("div",wA,[_("div",null,[o[0]||(o[0]=_("strong",null,"Total basal for the day:",-1)),J(" "+P(i.value.toFixed(2))+" U",1)])]),_("div",xA,[_("table",SA,[o[1]||(o[1]=_("thead",null,[_("tr",null,[_("th",null,"Hour"),_("th",null,"Units")])],-1)),_("tbody",null,[(O(!0),M(ft,null,zt(n.value,a=>(O(),M("tr",{key:a.hour},[_("td",kA,P(a.label),1),_("td",TA,P(a.units.toFixed(3)),1)]))),128))])])])]))}},DA=Lt(OA,[["__scopeId","data-v-9e5f6077"]]),CA={class:"stat-grid"},MA={class:"card"},EA={class:"card"},AA={class:"card"},IA={class:"card"},PA={class:"card"},LA={__name:"InsulinStatsTab",props:{selectedDate:{type:Date,required:!0},bolusDoses:{type:Array,default:()=>[]},basalEntries:{type:Array,default:()=>[]},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:l,endOfDay:c}=ie(t.selectedDate);return t.bolusDoses.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:at(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d.amount??0),0)}),n=G(()=>{const{startOfDay:l,endOfDay:c}=ie(t.selectedDate),u=t.basalEntries.map(h=>({startTime:h.startTime instanceof Date?h.startTime:at(h.startTime),endTime:h.endTime?h.endTime instanceof Date?h.endTime:at(h.endTime):null,rate:Number(h.rate??0)})).filter(h=>h.startTime<c&&(!h.endTime||h.endTime>l)).sort((h,f)=>h.startTime-f.startTime);let d=0;for(const h of u){const f=new Date(Math.max(h.startTime.getTime(),l.getTime())),m=(new Date(Math.min((h.endTime??c).getTime(),c.getTime()))-f)/6e4;m>0&&(d+=h.rate*(m/60))}return d}),i=G(()=>s.value+n.value),r=G(()=>{const{startOfDay:l,endOfDay:c}=ie(t.selectedDate);return t.foodLogs.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:at(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d?.netCarbs??0),0)}),o=G(()=>{const l=r.value,c=s.value;return l>0&&c>0?`${(l/c).toFixed(2)}`:"N/A"}),a=G(()=>{const l=r.value,c=i.value;return c>0?`${(l/c).toFixed(2)}`:"N/A"});return(l,c)=>(O(),M("div",CA,[_("div",MA,[c[0]||(c[0]=J(" Bolus ",-1)),_("strong",null,P(s.value.toFixed(2))+"U",1)]),_("div",EA,[c[1]||(c[1]=J(" Basal ",-1)),_("strong",null,P(n.value.toFixed(2))+"U",1)]),_("div",AA,[c[2]||(c[2]=J(" Total Insulin ",-1)),_("strong",null,P(i.value.toFixed(2))+"U",1)]),_("div",IA,[c[3]||(c[3]=J(" Net Carbs / Bolus ",-1)),_("strong",null,P(o.value),1)]),_("div",PA,[c[4]||(c[4]=J(" Net Carbs / Total Insulin ",-1)),_("strong",null,P(a.value),1)])]))}},RA=Lt(LA,[["__scopeId","data-v-868c365a"]]),$A={class:"stat-grid"},FA={class:"card"},NA={class:"value"},jA={class:"card"},BA={class:"value"},WA={class:"card"},UA={class:"value"},zA=["data-status"],VA={class:"value"},HA={class:"target-bar"},qA=["title"],JA={class:"ticks-row"},YA={class:"card"},KA={class:"value"},ZA={class:"card"},GA={class:"value"},XA={__name:"NutritionStatsTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:h,endOfDay:f}=ie(t.selectedDate);return t.foodLogs.map(g=>({...g,timestamp:g.timestamp instanceof Date?g.timestamp:at(g.timestamp)})).filter(g=>g.timestamp>=h&&g.timestamp<f)}),n=G(()=>{const h=f=>s.value.reduce((g,m)=>g+Number(m?.[f]??0),0);return{netCarbs:h("netCarbs"),totalCarbs:h("totalCarbs"),fat:h("fat"),protein:h("protein"),fibre:h("fibre"),calories:h("calories")}}),i=G(()=>{const h=(Number(n.value.fat)||0)*9,f=Number(n.value.calories)||0;return f<=0?0:h/f*100}),r=G(()=>{const h=Number(i.value)||0;return Math.max(15,h)}),o=G(()=>`${Math.max(0,Number(i.value)||0)/r.value*100}%`),a=G(()=>o.value),l=G(()=>{const h=10/r.value*100,f=5/r.value*100;return{left:`${h}%`,width:`${f}%`}}),c=G(()=>`${10/r.value*100}%`),u=G(()=>`${15/r.value*100}%`),d=G(()=>{const h=Number(i.value)||0;return h<10?"below":h>15?"above":"in"});return(h,f)=>(O(),M("div",$A,[_("div",FA,[f[0]||(f[0]=J(" Net Carbs ",-1)),_("span",NA,P(n.value.netCarbs.toFixed(1))+"g",1)]),_("div",jA,[f[1]||(f[1]=J(" Total Carbs ",-1)),_("span",BA,P(n.value.totalCarbs.toFixed(1))+"g",1)]),_("div",WA,[f[2]||(f[2]=_("span",null," Fat",-1)),f[3]||(f[3]=J()),_("span",UA,P(n.value.fat.toFixed(1))+"g",1)]),_("div",{class:"card fat-pct","data-status":d.value},[f[5]||(f[5]=_("span",{class:"label"}," % Calories from Fat",-1)),_("span",VA,P(i.value.toFixed(1))+"%",1),_("div",HA,[f[4]||(f[4]=_("div",{class:"bar"},null,-1)),_("div",{class:"target-band",style:ke({left:l.value.left,width:l.value.width})},null,4),_("div",{class:"fill",style:ke({width:a.value})},null,4),_("div",{class:"tick",style:ke({left:c.value}),"aria-hidden":"true"},null,4),_("div",{class:"tick",style:ke({left:u.value}),"aria-hidden":"true"},null,4),_("div",{class:"marker",style:ke({left:o.value}),title:i.value.toFixed(1)+"%"},null,12,qA)]),_("div",JA,[_("div",{class:"tick-label",style:ke({left:c.value})},"10",4),_("div",{class:"tick-label",style:ke({left:u.value})},"15",4),_("div",{class:"tick-label value-label",style:ke({left:o.value})},P(i.value.toFixed(1)),5)])],8,zA),f[8]||(f[8]=_("div",{class:"card"},[J(" Protein "),_("span",{class:"value"},"Not tracked yet...")],-1)),_("div",YA,[f[6]||(f[6]=J(" Fibre ",-1)),_("span",KA,P(n.value.fibre.toFixed(1))+"g",1)]),_("div",ZA,[f[7]||(f[7]=J(" Calories ",-1)),_("span",GA,P(n.value.calories.toFixed(0)),1)])]))}},QA=Lt(XA,[["__scopeId","data-v-7397306a"]]),tI={class:"weekly-table"},eI={class:"num"},sI={class:"num"},nI={class:"num"},iI={key:0,class:tt(["delta","neutral"])},rI={class:"num"},oI={class:"num"},aI={key:0},Qf=2.2046226218,lI={__name:"WeeklyCaloriesTab",props:{foodLogs:{type:Array,default:()=>[]},weekStartsOn:{type:String,default:"monday"},tz:{type:String,default:"Australia/Sydney"},weights:{type:Array,default:()=>[]},dailyActivity:{type:Array,default:()=>[]}},setup(e){const t=e;function s(c,u){let d=0,h=0,f=0,g=0,m=0,p=0,y=0,b=0;for(const v of t.dailyActivity){const w=D.fromFormat(v.sydney_date,"yyyy-LL-dd",{zone:t.tz});if(!w.isValid||w<c||w>=u)continue;const S=Number(v.active_calories);Number.isFinite(S)&&(d+=S,h+=1);const T=Number(v.resting_calories);Number.isFinite(T)&&(f+=T,g+=1);const E=Number(v.total_calories);Number.isFinite(E)&&(m+=E,p+=1);const R=Number(v.exercise_minutes);Number.isFinite(R)&&(y+=R,b+=1)}return{avgActive:h?d/h:null,avgResting:g?f/g:null,avgTotalEnergy:p?m/p:null,avgExerciseMin:b?y/b:null}}function n(c,u){let d=0,h=0;for(const f of t.weights){const g=at(f.timestamp),m=D.fromJSDate(g,{zone:t.tz});if(m.isValid&&m>=c&&m<u){const p=Number(f.value);Number.isFinite(p)&&(d+=p,h+=1)}}return h?d/h:null}function i(c,u){if(u==="monday")return c.startOf("week");const d=c.weekday%7;return c.minus({days:d}).startOf("day")}function r(c){return c.plus({days:7})}function o(c,u){const d=r(c).minus({seconds:1});return`${c.setZone(u).toFormat("ccc d LLL")}  ${d.setZone(u).toFormat("ccc d LLL")}`}const a=G(()=>{const c=new Map;for(const u of t.foodLogs){const d=at(u.timestamp),h=D.fromJSDate(d,{zone:t.tz});if(!h?.isValid)continue;const f=h.toFormat("yyyy-LL-dd"),g=Number(u.calories??u.kcal??0);Number.isFinite(g)&&c.set(f,(c.get(f)??0)+g)}return c});G(()=>[...a.value.entries()].map(([c,u])=>({day:c,kcal:u})).sort((c,u)=>c.day.localeCompare(u.day)));const l=G(()=>{const c=[...a.value.keys()].sort();if(!c.length)return[];const u=D.fromFormat(c[0],"yyyy-LL-dd",{zone:t.tz}),d=D.fromFormat(c[c.length-1],"yyyy-LL-dd",{zone:t.tz});let h=i(u,t.weekStartsOn);const f=r(i(d,t.weekStartsOn)),g=D.now().setZone(t.tz).startOf("day"),m=[];for(;h<f;){const p=h,y=r(h),v=Array.from({length:7},(C,W)=>p.plus({days:W}).toFormat("yyyy-LL-dd")).map(C=>a.value.get(C)??0),w=v.reduce((C,W)=>C+W,0),S=p<=g&&g<y,T=v.filter(C=>C>0).length,R=w/(S?T||1:7),I=n(p,y),B=I!=null?I*Qf:null,L=s(p,y);m.push({weekStart:p,weekEnd:y,label:o(p,t.tz),total:w,avgPerDay:R,avgWeight:I,avgWeightLb:B,avgActive:L.avgActive,avgResting:L.avgResting,avgTotalEnergy:L.avgTotalEnergy,avgExerciseMin:L.avgExerciseMin}),h=y}for(let p=0;p<m.length;p++){const y=p>0?m[p-1]:null;m[p].deltaAvg=y?m[p].avgPerDay-y.avgPerDay:null,m[p].deltaTotal=y?m[p].total-y.total:null,m[p].deltaWeight=y&&m[p].avgWeight!=null&&y.avgWeight!=null?m[p].avgWeight-y.avgWeight:null,m[p].deltaWeightLb=m[p].deltaWeight!=null?m[p].deltaWeight*Qf:null,m[p].deltaActive=y&&m[p].avgActive!=null&&y.avgActive!=null?m[p].avgActive-y.avgActive:null,m[p].deltaResting=y&&m[p].avgResting!=null&&y.avgResting!=null?m[p].avgResting-y.avgResting:null,m[p].deltaTotalEnergy=y&&m[p].avgTotalEnergy!=null&&y.avgTotalEnergy!=null?m[p].avgTotalEnergy-y.avgTotalEnergy:null,m[p].deltaExerciseMin=y&&m[p].avgExerciseMin!=null&&y.avgExerciseMin!=null?m[p].avgExerciseMin-y.avgExerciseMin:null}return m.reverse()});return(c,u)=>(O(),M("div",tI,[_("table",null,[u[1]||(u[1]=_("thead",null,[_("tr",null,[_("th",null,"Week"),_("th",{class:"num"},"Avg kcal/day"),_("th",{class:"num"},"Total kcal"),_("th",{class:"num"},"Avg active (kcal/day)"),_("th",{class:"num"},"Avg weight (kg)"),_("th",{class:"num"},"Avg weight (lb)")])],-1)),_("tbody",null,[(O(!0),M(ft,null,zt(l.value,d=>(O(),M("tr",{key:d.weekStart.toISO()},[_("td",null,P(d.label),1),_("td",eI,[J(P(Math.round(d.avgPerDay).toLocaleString("en-AU"))+" ",1),d.deltaAvg!=null?(O(),M("span",{key:0,class:tt(["delta",d.deltaAvg>=0?"up":"down"])},P(d.deltaAvg>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaAvg)).toLocaleString("en-AU"))+") ",3)):Y("",!0)]),_("td",sI,[J(P(Math.round(d.total).toLocaleString("en-AU"))+" ",1),d.deltaTotal!=null?(O(),M("span",{key:0,class:tt(["delta",d.deltaTotal>=0?"up":"down"])},P(d.deltaTotal>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaTotal)).toLocaleString("en-AU"))+") ",3)):Y("",!0)]),_("td",nI,[J(P(d.avgActive!=null?Math.round(d.avgActive).toLocaleString("en-AU"):"")+" ",1),d.deltaActive!=null?(O(),M("span",iI,P(d.deltaActive>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaActive)).toLocaleString("en-AU"))+") ",1)):Y("",!0)]),_("td",rI,[J(P(d.avgWeight!=null?d.avgWeight.toFixed(2):"")+" ",1),d.deltaWeight!=null?(O(),M("span",{key:0,class:tt(["delta",d.deltaWeight>=0?"up":"down"])},P(d.deltaWeight>=0?"":"")+" ("+P(Math.abs(d.deltaWeight).toFixed(2))+") ",3)):Y("",!0)]),_("td",oI,[J(P(d.avgWeightLb!=null?d.avgWeightLb.toFixed(2):"")+" ",1),d.deltaWeightLb!=null?(O(),M("span",{key:0,class:tt(["delta",d.deltaWeightLb>=0?"up":"down"])},P(d.deltaWeightLb>=0?"":"")+" ("+P(Math.abs(d.deltaWeightLb).toFixed(2))+") ",3)):Y("",!0)])]))),128)),l.value.length?Y("",!0):(O(),M("tr",aI,u[0]||(u[0]=[_("td",{colspan:"3",class:"empty"},"No data",-1)])))])])]))}},cI=Lt(lI,[["__scopeId","data-v-24683c06"]]),uI={class:"bg-grid"},dI={class:"row green"},hI={class:"right"},fI={class:"chip chip-green"},gI={class:"row green"},mI={class:"right"},pI={class:"chip chip-green"},yI={class:"row red"},bI={class:"row amber"},vI={class:"row red"},_I={class:"row red"},wI={key:0,class:"secondary"},xI={class:"row red"},SI={key:0,class:"secondary"},kI={class:"row grey"},TI={key:0,class:"secondary"},OI={class:"foot"},DI={__name:"BgStatsTab",props:{selectedDate:{type:Date,required:!0},glucoseReadings:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:n,endOfDay:i}=ie(t.selectedDate),r=t.glucoseReadings.map(v=>({timestamp:v.timestamp instanceof Date?v.timestamp:at(v.timestamp),value:Number(v.value)})).filter(v=>v.timestamp>=n&&v.timestamp<i).sort((v,w)=>v.timestamp-w.timestamp);let o=0,a=0,l=0,c=0,u=0,d=0,h=1/0,f=-1/0,g=0;for(let v=0;v<r.length;v++){const w=r[v],S=r[v+1],T=w.timestamp,E=S?S.timestamp:new Date(Math.min(i,w.timestamp.getTime()+300*1e3)),R=Math.max(0,(E-T)/6e4);d+=R;const I=w.value;I<4&&(o+=R),I>=4&&I<=6&&(a+=R),I>=4&&I<=10&&(l+=R),I>8&&(c+=R),I>10&&(u+=R),Number.isFinite(I)&&I<h&&(h=I),Number.isFinite(I)&&I>f&&(f=I),Number.isFinite(I)&&(g+=I*R)}const m=Math.max(d,1),p=Number.isFinite(h)?h:null,y=Number.isFinite(f)?f:null,b=d>0&&Number.isFinite(g)?g/d:null;return{timeBelow4:o,timeBetween4and6:a,timeBetween4and10:l,timeAbove8:c,timeAbove10:u,totalCoveredMinutes:d,uncoveredMinutes:Math.max(0,1440-d),pct4to6:a/m*100,pct4to10:l/m*100,lowestBG:p,highestBG:y,averageBG:b}});return(n,i)=>(O(),M("div",uI,[_("div",dI,[i[0]||(i[0]=_("span",null,"In range (410)",-1)),_("div",hI,[_("span",fI,P(s.value.pct4to10.toFixed(1))+"%",1),_("strong",null,P(bt(js)(s.value.timeBetween4and10)),1)])]),_("div",gI,[i[1]||(i[1]=_("span",null,"In range, stricter (46)",-1)),_("div",mI,[_("span",pI,P(s.value.pct4to6.toFixed(1))+"%",1),_("strong",null,P(bt(js)(s.value.timeBetween4and6)),1)])]),_("div",yI,[i[2]||(i[2]=_("span",null,"High (above 10)",-1)),_("strong",null,P(bt(js)(s.value.timeAbove10)),1)]),_("div",bI,[i[3]||(i[3]=_("span",null,"Above 8",-1)),_("strong",null,P(bt(js)(s.value.timeAbove8)),1)]),_("div",vI,[i[4]||(i[4]=_("span",null,"Low (below 4)",-1)),_("strong",null,P(bt(js)(s.value.timeBelow4)),1)]),_("div",_I,[i[5]||(i[5]=_("span",null,"Lowest BG",-1)),_("strong",null,[J(P(s.value.lowestBG!=null?s.value.lowestBG.toFixed(2)+" ":"")+" ",1),s.value.lowestBG!=null?(O(),M("span",wI," ("+P((s.value.lowestBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",xI,[i[6]||(i[6]=_("span",null,"Highest BG",-1)),_("strong",null,[J(P(s.value.highestBG!=null?s.value.highestBG.toFixed(2)+" ":"")+" ",1),s.value.highestBG!=null?(O(),M("span",SI," ("+P((s.value.highestBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",kI,[i[7]||(i[7]=_("span",null,"Average BG",-1)),_("strong",null,[J(P(s.value.averageBG!=null?s.value.averageBG.toFixed(2)+" ":"")+" ",1),s.value.averageBG!=null?(O(),M("span",TI," ("+P((s.value.averageBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",OI,[i[8]||(i[8]=J(" Time not covered in the calculations: ",-1)),_("strong",null,P(bt(js)(s.value.uncoveredMinutes)),1)])]))}},CI=Lt(DI,[["__scopeId","data-v-2625d06e"]]);async function tg({limit:e=20,anchor:t,foodName:s="",tags:n=[]}={}){let i=Xt.from("food_logs").select("id, timestamp, food_name, quantity, net_carbs, calories, fat, protein, total_carbs, fibre, is_unfinished, resumed_at, food_tags",{count:"exact"}).order("timestamp",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.tsISO&&t?.id&&(i=i.or([`and(timestamp.lt.${t.tsISO})`,`and(timestamp.eq.${t.tsISO},id.lt.${t.id})`].join(",")));const r=(s||"").trim();r&&(i=i.ilike("food_name",r));const o=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);o.length>0&&(i=i.contains("food_tags",o));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,timestamp:D.fromISO(f.timestamp).toJSDate(),foodName:f.food_name??"",quantity:Number(f.quantity??0),netCarbs:Number(f.net_carbs??0),calories:Number(f.calories??0),fat:Number(f.fat??0),protein:Number(f.protein??0),totalCarbs:Number(f.total_carbs??0),fibre:Number(f.fibre??0),isUnfinished:!!f.is_unfinished,resumedAt:f.resumed_at?D.fromISO(f.resumed_at).toJSDate():null,foodTags:Array.isArray(f.food_tags)?f.food_tags:[]})),d=u[u.length-1],h=d?{tsISO:D.fromJSDate(d.timestamp).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function MI({foodName:e="",tags:t=[]}={}){const{data:s,error:n}=await Xt.rpc("food_history_summary",{p_food_name:(e||"").trim()||null,p_tags:Array.isArray(t)&&t.length?t:null});if(n)throw n;const i=(s??[])[0];if(!i)return{totalQuantity:0,totalCount:0,durationDays:0,averagePerDay:0};const r=i.min_ts?D.fromISO(i.min_ts):null,o=i.max_ts?D.fromISO(i.max_ts):null,a=Number(i.total_qty??0),l=Number(i.total_count??0);let c=0;if(r&&o){const d=Math.max(0,o.toMillis()-r.toMillis());c=Math.max(1,Math.ceil(d/(24*3600*1e3)))}const u=c?a/c:0;return{totalQuantity:a,totalCount:l,durationDays:c,averagePerDay:u}}const EI={class:"daily-section"},AI={class:"search-box"},II={key:2,class:"suggestions"},PI=["onMousedown"],LI={class:"tag-cloud"},RI=["onClick"],$I={key:0,class:"hint"},FI={key:1},NI={key:0,class:"results-bar"},jI={key:0},BI={key:0},WI={key:1},UI={key:1,class:"summary pretty"},zI={class:"stat-row"},VI={class:"right"},HI={class:"chip"},qI={class:"stat-row"},JI={class:"right"},YI={class:"chip"},KI={class:"stat-row"},ZI={class:"right"},GI={class:"chip"},XI={key:2,class:"empty"},QI={key:3,class:"empty"},tP={key:0,class:"empty"},eP={class:"date-heading"},sP={class:"load-more"},nP={key:1},iP={__name:"FoodHistorySearchTab",props:{foods:{type:Array,default:()=>[]},loading:{type:Object,default:()=>({})}},setup(e){const t=mt(""),s=mt(""),n=mt(!1),i=mt([]),r=e,o=mt(null),a=G(()=>{const L=new Set((r.foods??[]).map(C=>(C.name??"").trim()).filter(Boolean));return Array.from(L).sort((C,W)=>C.localeCompare(W,void 0,{sensitivity:"base"}))}),l=G(()=>{const L=t.value.trim().toLowerCase();return L?a.value.filter(C=>C.toLowerCase().includes(L)).slice(0,20):a.value.slice(0,20)}),c=G(()=>{const L=new Set;for(const C of r.foods??[])for(const W of Array.isArray(C.tags)?C.tags:[]){const st=String(W).trim();st&&L.add(st)}return Array.from(L).sort((C,W)=>C.localeCompare(W,void 0,{sensitivity:"accent"}))});function u(){t.value="",s.value="",n.value=!1,o.value?.focus()}function d(L){const C=i.value.indexOf(L);C>=0?i.value.splice(C,1):i.value.push(L),g.value=!0,p.value=[],y.value=null,b.value=null}function h(L){return i.value.includes(L)}function f(L){s.value=L,t.value=L,n.value=!1,g.value=!0,p.value=[],y.value=null,b.value=null}const g=mt(!1),m=mt(!1),p=mt([]),y=mt(null),b=mt(null),v=mt(0),w=mt(0),S=mt(0);async function T(){g.value=!0;try{const{items:L,nextAnchor:C,totalMatchingFilter:W}=await tg({limit:20,foodName:s.value,tags:i.value});p.value=L,y.value=C,b.value=W}catch(L){console.error("[FoodHistory] first page failed:",L),p.value=[],y.value=null,b.value=0}finally{g.value=!1}}async function E(){if(!(!y.value||g.value)){g.value=!0;try{const{items:L,nextAnchor:C}=await tg({limit:20,foodName:s.value,tags:i.value,anchor:y.value});p.value.push(...L),y.value=C}catch(L){console.error("[FoodHistory] next page failed:",L)}finally{g.value=!1}}}async function R(){m.value=!0;try{const L=await MI({foodName:s.value,tags:i.value});v.value=L.totalQuantity,w.value=L.durationDays,S.value=L.averagePerDay}catch(L){console.error("[FoodHistory] summary failed:",L),v.value=0,w.value=0,S.value=0}finally{m.value=!1}}function I(L){Cs(L,"food-history")}Ne([()=>s.value,()=>i.value.join("|")],async()=>{g.value=!0,p.value=[],y.value=null,b.value=null,await Promise.all([T(),R()])});function B(L){const C=new Map;for(const W of L){const st=D.fromJSDate(W.timestamp,{zone:"Australia/Sydney"}),nt=st.toISODate(),rt=st.toFormat("EEE d LLL yyyy");C.has(nt)||C.set(nt,{label:rt,items:[]}),C.get(nt).items.push(W)}return Array.from(C.entries()).sort((W,st)=>st[0].localeCompare(W[0])).map(([,W])=>W)}return(L,C)=>(O(),M("div",EI,[_("div",AI,[Fc(_("input",{ref_key:"inputEl",ref:o,"onUpdate:modelValue":C[0]||(C[0]=W=>t.value=W),type:"text",class:"search-input",placeholder:"Search foods (e.g., apple)",onFocus:C[1]||(C[1]=W=>n.value=!0),onBlur:C[2]||(C[2]=W=>n.value=!1),onKeydown:[C[3]||(C[3]=ud(W=>n.value=!1,["esc"])),C[4]||(C[4]=ud(Ya(W=>f((l.value[0]||t.value)??""),["prevent"]),["enter"]))]},null,544),[[hm,t.value]]),t.value||s.value?(O(),M("button",{key:0,class:"clear-btn",type:"button",onMousedown:C[5]||(C[5]=Ya(()=>{},["prevent"])),onClick:u,"aria-label":"Clear search"},"",32)):Y("",!0),i.value.length||s.value?(O(),M("button",{key:1,class:"clear-btn",type:"button",onClick:C[6]||(C[6]=()=>{i.value.splice(0),u()}),"aria-label":"Clear tag & name filters",style:{"margin-left":"0.5rem"}},"Clear Filters")):Y("",!0),n.value&&l.value.length&&t.value.trim().length?(O(),M("ul",II,[(O(!0),M(ft,null,zt(l.value,W=>(O(),M("li",{key:W,class:"suggestion",onMousedown:Ya(st=>f(W),["prevent"])},P(W),41,PI))),128))])):Y("",!0)]),_("div",LI,[(O(!0),M(ft,null,zt(c.value,W=>(O(),M("button",{key:W,class:tt(["tag-chip",{selected:h(W)}]),type:"button",onClick:st=>d(W)},P(W),11,RI))),128))]),!s.value&&i.value.length===0?(O(),M("div",$I," Search for a food, select it, then browse the history and click any row to jump the charts. ")):Y("",!0),s.value||i.value.length?(O(),M("div",FI,[g.value?Y("",!0):(O(),M("div",NI,[(b.value??0)>0?(O(),M("span",jI,[J(P(b.value)+" result",1),b.value!==1?(O(),M("span",BI,"s")):Y("",!0)])):(O(),M("span",WI,"No results"))])),!m.value&&b.value?(O(),M("div",UI,[_("div",zI,[C[7]||(C[7]=_("span",{class:"label"},"Total consumed",-1)),_("span",VI,[_("span",HI,P(v.value)+"g",1)])]),_("div",qI,[C[8]||(C[8]=_("span",{class:"label"},"Days covered",-1)),_("span",JI,[_("span",YI,P(w.value),1)])]),_("div",KI,[C[9]||(C[9]=_("span",{class:"label"},"Avg per day",-1)),_("span",ZI,[_("span",GI,P(S.value.toFixed(1))+"g",1)])])])):m.value?(O(),M("div",XI,"Calculating summary")):Y("",!0),g.value?(O(),M("div",QI,"Loading")):(O(),M(ft,{key:4},[p.value.length===0?(O(),M("div",tP,"No logs found.")):(O(),M(ft,{key:1},[(O(!0),M(ft,null,zt(B(p.value),(W,st)=>(O(),M(ft,{key:st},[_("h4",eP,P(W.label),1),(O(!0),M(ft,null,zt(W.items,nt=>(O(),Oe(wu,{key:nt.id,log:nt,onClick:rt=>I(nt.timestamp)},null,8,["log","onClick"]))),128))],64))),128)),_("div",sP,[y.value?(O(),M("button",{key:0,type:"button",onClick:E},"Load more")):p.value.length>0?(O(),M("div",nP,"No more results.")):Y("",!0)])],64))],64))])):Y("",!0)]))}},rP=Lt(iP,[["__scopeId","data-v-db37e84c"]]),oP={class:"tab-section"},aP={class:"tab-bar"},lP={class:"daily-section"},cP={__name:"Tabs",props:{data:{type:Object,required:!0},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Object,default:()=>({})}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=t,i=mt("combined");function r(o){i.value=o}return(o,a)=>(O(),M("section",oP,[_("div",aP,[_("button",{class:tt(["tab-button",{active:i.value==="combined"}]),onClick:a[0]||(a[0]=l=>r("combined"))}," Combined",2),_("button",{class:tt(["tab-button",{active:i.value==="notes"}]),onClick:a[1]||(a[1]=l=>r("notes"))}," Notes",2),_("button",{class:tt(["tab-button",{active:i.value==="foodLogs"}]),onClick:a[2]||(a[2]=l=>r("foodLogs"))}," Food",2),_("button",{class:tt(["tab-button",{active:i.value==="bolus"}]),onClick:a[3]||(a[3]=l=>r("bolus"))}," Bolus",2),_("button",{class:tt(["tab-button",{active:i.value==="fasts"}]),onClick:a[4]||(a[4]=l=>r("fasts"))}," Fasts",2),_("button",{class:tt(["tab-button",{active:i.value==="fast-stats"}]),onClick:a[5]||(a[5]=l=>r("fast-stats"))}," Fast Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="workouts"}]),onClick:a[6]||(a[6]=l=>r("workouts"))}," Workouts",2),_("button",{class:tt(["tab-button",{active:i.value==="basal"}]),onClick:a[7]||(a[7]=l=>r("basal"))}," Basal",2),_("button",{class:tt(["tab-button",{active:i.value==="basal-by-hour"}]),onClick:a[8]||(a[8]=l=>r("basal-by-hour"))}," Hourly Basal",2),_("button",{class:tt(["tab-button",{active:i.value==="glucose"}]),onClick:a[9]||(a[9]=l=>r("glucose"))}," BG",2),_("button",{class:tt(["tab-button",{active:i.value==="all-notes"}]),onClick:a[10]||(a[10]=l=>r("all-notes"))}," All Notes",2),_("button",{class:tt(["tab-button",{active:i.value==="insulin-stats"}]),onClick:a[11]||(a[11]=l=>r("insulin-stats"))}," Insulin Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="nutrition-stats"}]),onClick:a[12]||(a[12]=l=>r("nutrition-stats"))}," Nutrition Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="bg-stats"}]),onClick:a[13]||(a[13]=l=>r("bg-stats"))}," BG Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="food-history"}]),onClick:a[14]||(a[14]=l=>r("food-history"))}," Food History",2),_("button",{class:tt(["tab-button",{active:i.value==="weekly-calories"}]),onClick:a[15]||(a[15]=l=>r("weekly-calories"))}," Weight Analysis",2)]),_("div",{class:tt(["tab-content",{"active-tab":i.value==="combined"}])},[ht(WD,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs,boluses:e.data.boluses,notes:e.data.notes,workouts:e.data.workouts},null,8,["selected-date","food-logs","boluses","notes","workouts"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="notes"}])},[ht(TE,{notes:e.data.notes,"selected-date":e.selectedDate,loading:s.loading?.notes===!0},null,8,["notes","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="foodLogs"}])},[ht(sA,{"food-logs":e.data.foodLogs,"selected-date":e.selectedDate,loading:s.loading?.foodLogs===!0},null,8,["food-logs","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="bolus"}])},[ht(uA,{boluses:e.data.boluses,"selected-date":e.selectedDate,loading:s.loading?.boluses===!0},null,8,["boluses","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="fasts"}])},[ht(IE,{fasts:e.data.fasts,"selected-date":e.selectedDate},null,8,["fasts","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="fast-stats"}])},[ht(zE)],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="workouts"}])},[ht(oA,{workouts:e.data.workouts,"selected-date":e.selectedDate},null,8,["workouts","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="basal"}])},[ht(vA,{"basal-entries":e.data.basalEntries,"selected-date":e.selectedDate,loading:s.loading?.basal===!0},null,8,["basal-entries","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="basal-by-hour"}])},[ht(DA,{"basal-entries":e.data.basalEntries,"hourly-basal-totals":e.hourlyBasalTotals,"selected-date":e.selectedDate},null,8,["basal-entries","hourly-basal-totals","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="glucose"}])},[ht(GE,{"glucose-readings":e.data.glucoseReadings,"selected-date":e.selectedDate},null,8,["glucose-readings","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="all-notes"}])},[_("div",lP,[ht(_E,{notes:e.data.notes,onNoteClick:a[16]||(a[16]=l=>n("note-click",l))},null,8,["notes"])])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="insulin-stats"}])},[ht(RA,{"selected-date":e.selectedDate,"bolus-doses":e.data.boluses,"basal-entries":e.data.basalEntries,"food-logs":e.data.foodLogs},null,8,["selected-date","bolus-doses","basal-entries","food-logs"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="nutrition-stats"}])},[ht(QA,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs},null,8,["selected-date","food-logs"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="bg-stats"}])},[ht(CI,{"selected-date":e.selectedDate,"glucose-readings":e.data.glucoseReadings},null,8,["selected-date","glucose-readings"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="food-history"}])},[ht(rP,{"all-food-logs":e.data.foodLogs,foods:e.data.foods},null,8,["all-food-logs","foods"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="weekly-calories"}])},[ht(cI,{"food-logs":e.data.weeklyFoodLogs,weights:e.data.weeklyWeights,"week-starts-on":"monday","daily-activity":e.data.dailyActivity,tz:"Australia/Sydney"},null,8,["food-logs","weights","daily-activity"])],2)]))}},uP=Lt(cP,[["__scopeId","data-v-51372b80"]]),dP={class:"row"},hP={class:"row"},fP={class:"row"},gP={key:0,class:"row"},mP={key:1,class:"row"},pP={key:0},yP={key:2,class:"row note-row"},bP={class:"note-text"},vP={__name:"CustomTooltip",props:{visible:{type:Boolean,default:!1},time:{type:String,default:""},bg:{type:[Number,null],default:null},basal:{type:[Number,null],default:null},left:{type:Number,default:8},top:{type:Number,default:8},hourlyBasalUnits:{type:[Number,null],default:null},hourlyBasalLabel:{type:String,default:""},bolus:{type:[Object,null],default:null},note:{type:[Object,null],default:null}},setup(e){return(t,s)=>Fc((O(),M("div",{class:"tooltip",style:ke({left:e.left+"px",top:e.top+"px"}),role:"status","aria-live":"polite"},[_("div",dP,[_("strong",null,P(e.time),1)]),_("div",hP,[s[0]||(s[0]=J(" BG: ",-1)),_("span",null,P(e.bg!=null?e.bg.toFixed(2)+" mmol/L":"")+" ("+P((e.bg*18).toFixed(2))+" mg/dL) ",1)]),_("div",fP,[s[1]||(s[1]=J("Basal Rate: ",-1)),_("span",null,P(e.basal!=null?e.basal.toFixed(3)+" U/hr":""),1)]),e.hourlyBasalUnits!=null?(O(),M("div",gP,[J(" Total basal from "+P(e.hourlyBasalLabel)+": ",1),_("strong",null,P(Number(e.hourlyBasalUnits).toFixed(2)),1),s[2]||(s[2]=J(" units ",-1))])):Y("",!0),e.bolus?(O(),M("div",mP,[s[3]||(s[3]=J(" Bolus: ",-1)),_("strong",null,P(Number(e.bolus.amount).toFixed(2)),1),s[4]||(s[4]=J(" units ",-1)),e.bolus.type?(O(),M("span",pP," ("+P(e.bolus.type)+")",1)):Y("",!0)])):Y("",!0),e.note?(O(),M("div",yP,[s[5]||(s[5]=_("span",{class:"note-symbol"},"",-1)),_("div",bP,P(e.note.text),1)])):Y("",!0)],4)),[[i0,e.visible]])}},_P=Lt(vP,[["__scopeId","data-v-fc2dfd5a"]]);async function wP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBolusesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("boluses").select("timestamp, amount, type, notes").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({timestamp:D.fromISO(o.timestamp).toJSDate(),amount:Number(o.amount??0),type:o.type??null,notes:o.notes??null}))}async function xP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchGlucoseReadingsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("glucose_readings").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({timestamp:D.fromISO(o.timestamp).toJSDate(),value:Number(o.value??0)}))}async function SP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBasalEntriesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("basal_entries").select("start_time, end_time, rate, mode, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({startTime:D.fromISO(o.start_time).toJSDate(),endTime:o.end_time?D.fromISO(o.end_time).toJSDate():null,rate:Number(o.rate??0),mode:o.mode??null,notes:o.notes??null}))}function kP(e,t,s){const n=D.fromJSDate(t).setZone("Australia/Sydney"),i=n.startOf("day").toJSDate(),r=n.endOf("day").toJSDate(),o=s?D.fromJSDate(s):null,a=o?o.toJSDate():null,l=[];for(const c of e){const u=c.endTime??a,d=c.startTime<i?i:c.startTime,h=u?u>r?r:u:r;d<h&&l.push({...c,startTime:d,endTime:u?h:null})}return l}async function TP(e,t,s="Australia/Sydney"){const{startUtcISO:n,endUtcISO:i,startSydney:r,endSydney:o}=Zc(e,t,{withMillis:!0});console.log("[weekly fetch] Sydney window:",r.toISO(),"",o.toISO(),"(exclusive)"),console.log("[weekly fetch] UTC filter   :",n,"",i,"(exclusive)");const a=1e3;let l=0,c=a-1,u=[];for(;;){const{data:d,error:h}=await Xt.from("food_logs").select("timestamp, calories").gte("timestamp",n).lt("timestamp",i).order("timestamp",{ascending:!0}).range(l,c);if(h)throw h;const f=d??[];if(u=u.concat(f),console.log("[weekly fetch] page",`${l}-${c}`,"rows:",f.length),f.length<a)break;l+=a,c+=a}return u.length?console.log("[weekly fetch] total rows:",u.length,"first:",u[0].timestamp,"last:",u[u.length-1].timestamp):console.log("[weekly fetch] total rows: 0"),u.map(d=>({timestamp:d.timestamp,calories:Number(d.calories??0)}))}async function OP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFoodLogsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("food_logs").select(`
      id,
      food_name,
      timestamp,
      quantity,
      net_carbs,
      calories,
      fat,
      protein,
      total_carbs,
      fibre,
      is_unfinished,
      resumed_at,
      food_tags
    `).gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,foodName:o.food_name??"Unknown",timestamp:D.fromISO(o.timestamp).toJSDate(),quantity:o.quantity,netCarbs:o.net_carbs,calories:o.calories,fat:o.fat,protein:o.protein,totalCarbs:o.total_carbs,fibre:o.fibre,isUnfinished:!!o.is_unfinished,resumedAt:o.resumed_at?D.fromISO(o.resumed_at).toJSDate():null,foodTags:Array.isArray(o.food_tags)?o.food_tags:[]}))}async function DP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchWorkoutsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:r}=await Xt.from("workouts").select(`
      id,
      start_time,
      end_time,
      elapsed_time,
      duration,
      type,
      name,
      notes,
      distance,
      active_calories,
      average_heart_rate,
      max_heart_rate,
      minutes_per_km,
      km_per_hour,
      tags
    `).lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,start:D.fromISO(o.start_time).toJSDate(),endTime:o.end_time?D.fromISO(o.end_time).toJSDate():null,elapsedTime:Number(o.elapsed_time??0),duration:Number(o.duration??0),type:String(o.type??""),name:String(o.name??""),notes:String(o.notes??""),distance:Number(o.distance??0),activeCalories:Number(o.active_calories??0),averageHeartRate:Number(o.average_heart_rate??0),maxHeartRate:Number(o.max_heart_rate??0),minutesPerKm:Number(o.minutes_per_km??0),kmPerHour:Number(o.km_per_hour??0),tags:String(o.tags??"")}))}async function CP(){const{data:e,error:t}=await Xt.from("app_settings").select("pump_upload_time").eq("id",1).single();if(t&&t.code!=="PGRST116")throw t;const s=e?.pump_upload_time??null;return{pumpUploadTime:s?new Date(s):null}}async function MP(e,t,s){t.boluses=!0;try{e.boluses=await wP(s)}catch(n){console.error("[dayLoadersUI] boluses failed:",n),e.boluses=[]}finally{t.boluses=!1}}async function EP(e,t,s){t.bg=!0;try{e.glucoseReadings=await xP(s)}catch(n){console.error("[dayLoadersUI] BG failed:",n),e.glucoseReadings=[]}finally{t.bg=!1}}async function AP(e,t,s){t.basal=!0;try{const[n,i]=await Promise.all([SP(s),CP()]),r=i?.pumpUploadTime?new Date(i.pumpUploadTime):null;r&&console.log("[dayLoadersUI] Pump upload time:",Iw(r)),e.basalEntries=kP(n,s,r)}catch(n){console.error("[dayLoadersUI] basal failed:",n),e.basalEntries=[]}finally{t.basal=!1}}async function IP(e,t,s){t.notes=!0;try{e.notes=await eE(s)}catch(n){console.error("[dayLoadersUI] notes failed:",n),e.notes=[]}finally{t.notes=!1}}async function PP(e,t,s){t.foodLogs=!0;try{e.foodLogs=await OP(s)}catch(n){console.error("[dayLoadersUI] food logs failed:",n),e.foodLogs=[]}finally{t.foodLogs=!1}}async function LP(e,t,s){t.fasts=!0;try{e.fasts=await LE(s)}catch(n){console.error("[dayLoadersUI] fasts failed:",n),e.fasts=[]}finally{t.fasts=!1}}async function RP(e,t,s){t.workouts=!0;try{e.workouts=await DP(s)}catch(n){console.error("[dayLoadersUI] workouts failed:",n),e.workouts=[]}finally{t.workouts=!1}}async function $P(e,t,s){await Promise.allSettled([MP(e,t,s),EP(e,t,s),AP(e,t,s),IP(e,t,s),PP(e,t,s),LP(e,t,s),RP(e,t,s)])}async function FP(){const{data:e,error:t}=await Xt.from("foods").select("id, name, tags").order("name",{ascending:!0});if(t)throw t;return(e??[]).map(s=>({id:s.id,name:s.name??"",tags:Array.isArray(s.tags)?s.tags:[]}))}async function NP(e,t){const{startUtcISO:s,endUtcISO:n}=Zc(e,t),{data:i,error:r}=await Xt.from("weights").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({timestamp:o.timestamp,value:Number(o.value)}))}function eg(e){return e instanceof Date?e:new Date(e)}async function jP(e,t,s="Australia/Sydney"){const n=D.fromJSDate(eg(e),{zone:s}).toFormat("yyyy-LL-dd"),i=D.fromJSDate(eg(t),{zone:s}).toFormat("yyyy-LL-dd"),{data:r,error:o}=await Xt.from("daily_activity").select("sydney_date, active_calories, resting_calories, total_calories, exercise_minutes").gte("sydney_date",n).lt("sydney_date",i).order("sydney_date",{ascending:!0});if(o)throw o;return(r??[]).map(a=>({sydney_date:a.sydney_date,active_calories:a.active_calories==null?null:Number(a.active_calories),resting_calories:a.resting_calories==null?null:Number(a.resting_calories),total_calories:a.total_calories==null?null:Number(a.total_calories),exercise_minutes:a.exercise_minutes==null?null:Number(a.exercise_minutes)}))}const BP={style:{padding:"1rem"}},WP={class:"dashboard-grid"},UP={class:"left-rail"},zP={class:"chart-box bg-box"},VP={class:"chart-box notes-box"},HP={class:"chart-box basal-box"},qP={class:"chart-box hourly-basal-box"},JP={class:"chart-box bolus-box"},YP={class:"right-rail"},KP={__name:"App",setup(e){const t=ai({notes:[],filteredNotes:[],filteredNotesCursor:null,foods:[],glucoseReadings:[],foodLogs:[],fasts:[],workouts:[],basalEntries:[],boluses:[],weeklyFoodLogs:[],weeklyWeights:[],dailyActivity:[]}),s=ai({boluses:!1,bg:!1,basal:!1,filteredNotes:!1,foodLogs:!1,foods:!1,fasts:!1,workouts:!1}),n=mt(gp()),i=mt(null),r=ai({visible:!1,time:"",bg:null,basal:null,left:12,locked:!1,hourlyBasalUnits:null,hourlyBasalLabel:"",bolus:null,note:null}),o=b=>b instanceof Date?b:typeof b=="number"?new Date(b):typeof b=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(b)?D.fromISO(b):D.fromISO(b,{zone:"Australia/Sydney"})).toJSDate():null,a=G(()=>{const b=new Array(24).fill(0);if(!n.value||!Array.isArray(t.basalEntries))return b;const v=n.value instanceof Date?n.value:o(n.value);let w=D.fromJSDate(v,{zone:"Australia/Sydney"}).startOf("day");const S=w.plus({days:1});for(const T of t.basalEntries){const E=T.startTime instanceof Date?T.startTime:o(T.startTime),R=T.endTime?T.endTime instanceof Date?T.endTime:o(T.endTime):null;if(!E||!R||R<=E)continue;const I=Number(T.rate);if(!Number.isFinite(I)||I<=0)continue;let B=D.fromJSDate(E,{zone:"Australia/Sydney"}),L=D.fromJSDate(R,{zone:"Australia/Sydney"});if(!(L<=w||B>=S))for(B<w&&(B=w),L>S&&(L=S);B<L;){const C=B.startOf("hour").plus({hours:1}),W=L<C?L:C,st=Math.max(0,W.toSeconds()-B.toSeconds());if(st>0){const nt=B.hour;b[nt]+=I*(st/3600)}B=W}}return b.map(T=>Math.round(T*1e3)/1e3)});function l(b,v,w){return Math.max(v,Math.min(b,w))}function c(b,v="any"){let w;if(b instanceof Date)w=D.fromJSDate(b);else if(typeof b=="number")w=D.fromMillis(b);else if(typeof b=="string")w=/Z|[+\-]\d{2}:?\d{2}$/.test(b)?D.fromISO(b):D.fromISO(b,{zone:"Australia/Sydney"});else return;const S=w.setZone("Australia/Sydney");n.value=S.startOf("day").toJSDate();const T=S.toMillis();window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:T,px:null,source:v}})),console.log("[goToTimestamp] jumped to",S.toISO(),"source:",v)}const u=b=>{const v=b?.detail?.at,w=b?.detail?.source??"any";c(v,w)};async function d(){s.foods=!0;try{t.foods=await FP()}catch(b){console.error("[App] fetchAllFoods failed:",b),t.foods=[]}finally{s.foods=!1}}async function h(b=26,v="Australia/Sydney"){const w=D.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),T=w.plus({days:1}).startOf("day").toJSDate();try{t.dailyActivity=await jP(S,T,v),console.log("[daily activity range]","start=",S.toISOString(),"endExclusive=",T.toISOString(),"rows=",t.dailyActivity.length)}catch(E){console.error("[loadDailyActivity] failed:",E),t.dailyActivity=[]}}async function f(b=26,v="Australia/Sydney"){const w=D.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),T=w.plus({days:1}).startOf("day").toJSDate();s.weights=!0;try{t.weeklyWeights=await NP(S,T);const E=t.weeklyWeights[0]?.timestamp??"-",R=t.weeklyWeights.at(-1)?.timestamp??"-";console.log("[weekly weights] rows=",t.weeklyWeights.length,"first=",E,"last=",R)}catch(E){console.error("[loadWeeklyWeights] failed:",E),t.weeklyWeights=[]}finally{s.weights=!1}}async function g(b=26,v="Australia/Sydney"){const w=D.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),T=w.plus({days:1}).startOf("day").toJSDate();try{t.weeklyFoodLogs=await TP(S,T,v),console.log("[weekly range]","start=",S.toISOString(),"endExclusive=",T.toISOString(),"rows=",t.weeklyFoodLogs.length)}catch(E){console.error("[loadFoodLogsWeekly] failed:",E),t.weeklyFoodLogs=[]}}function m(b){const{x:v,px:w,source:S,hide:T,bolus:E,note:R}=b?.detail??{};if(console.log("[handleChartHover] x value:",v,"type:",typeof v),T){r.visible=!1,r.locked=!1,r.hourlyBasalUnits=null,r.hourlyBasalLabel="",r.bolus=null,r.note=null;return}const I=v!=null?new Date(v):null;if(!I){r.locked||(r.visible=!1);return}const B=i.value?.getBoundingClientRect();if(B&&typeof w=="number"){const pt=w-90;r.left=l(pt,8,B.width-180-8)}const L=D.fromMillis(Number(v)).setZone("Australia/Sydney"),C=L.hour,W=L.startOf("hour"),st=W.plus({hours:1}),nt=rt=>rt.toFormat("h a").toLowerCase().replace(" ","");r.hourlyBasalLabel=`${nt(W)}${nt(st)}`,r.hourlyBasalUnits=Number(a.value?.[C]??0),r.locked=S==="combined",r.visible=!0,r.time=D.fromMillis(Number(v)).setZone("Australia/Sydney").toFormat("h:mma"),r.bg=p(I),r.basal=y(I),S==="bolus"&&E?.amount!=null?r.bolus={amount:Number(E.amount),type:E.type??null}:r.bolus=null,S==="note"&&R?.text?r.note=R:r.note=null}function p(b){if(!t.glucoseReadings.length||!b)return null;const v=b instanceof Date?b:new Date(b);let w=null,S=null;for(const T of t.glucoseReadings){const E=o(T.timestamp);E<=v&&(w===null||E>w)&&(w=E,S=Number(T.value))}return S}function y(b){if(!t.basalEntries.length||!b)return null;const v=b instanceof Date?b:new Date(b);for(const w of t.basalEntries){const S=w.startTime instanceof Date?w.startTime:o(w.startTime),T=w.endTime?w.endTime instanceof Date?w.endTime:o(w.endTime):null;if(S<=v&&(T===null||v<T))return Number(w.rate??0)}return null}return Ne(n,b=>{$P(t,s,b)},{immediate:!0}),en(()=>{window.removeEventListener("jump-to-time",u),window.removeEventListener("chart-hover",m)}),cs(async()=>{window.addEventListener("jump-to-time",u),window.addEventListener("chart-hover",m),await d(),await g(26),await f(26),await h(26);try{console.log("[App:onMounted] loaded",{glucose:t.glucoseReadings.length,foodLogs:t.foodLogs.length,notes:t.notes.length,fasts:t.fasts.length,workouts:t.workouts.length,basalEntries:t.basalEntries.length,boluses:t.boluses.length})}catch(b){console.error("[App:onMounted] failed to load data:",b)}}),(b,v)=>(O(),M("main",BP,[_("section",WP,[_("aside",UP,[ht(Bw,{selectedDate:n.value,"onUpdate:selectedDate":v[0]||(v[0]=w=>n.value=w)},null,8,["selectedDate"]),_("div",{ref_key:"stageRef",ref:i,class:"chart-stage"},[ht(_P,{visible:r.visible,time:r.time,bg:r.bg,basal:r.basal,left:r.left,top:8,"hourly-basal-units":r.hourlyBasalUnits,"hourly-basal-label":r.hourlyBasalLabel,bolus:r.bolus,note:r.note},null,8,["visible","time","bg","basal","left","hourly-basal-units","hourly-basal-label","bolus","note"]),_("div",zP,[ht(RO,{"glucose-readings":t.glucoseReadings,"selected-date":n.value},null,8,["glucose-readings","selected-date"])]),_("div",VP,[ht(FO,{notes:t.notes,"selected-date":n.value,"note-icon-url":"/note-icon.png"},null,8,["notes","selected-date"])]),_("div",HP,[ht(jO,{"basal-entries":t.basalEntries,"selected-date":n.value},null,8,["basal-entries","selected-date"])]),_("div",qP,[ht(VO,{"hourly-totals":a.value,"selected-date":n.value},null,8,["hourly-totals","selected-date"])]),_("div",JP,[ht(WO,{boluses:t.boluses,"selected-date":n.value},null,8,["boluses","selected-date"])])],512)]),_("main",YP,[ht(uP,{data:t,"hourly-basal-totals":a.value,"selected-date":n.value,loading:s},null,8,["data","hourly-basal-totals","selected-date","loading"])])])]))}},ZP=Lt(KP,[["__scopeId","data-v-5e033209"]]);A0(ZP).mount("#app");
