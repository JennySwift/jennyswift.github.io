(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Tc(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ct={},oi=[],as=()=>{},nb=()=>!1,ra=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Oc=e=>e.startsWith("onUpdate:"),qt=Object.assign,Dc=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ib=Object.prototype.hasOwnProperty,wt=(e,t)=>ib.call(e,t),X=Array.isArray,ri=e=>aa(e)==="[object Map]",sg=e=>aa(e)==="[object Set]",ct=e=>typeof e=="function",Nt=e=>typeof e=="string",Os=e=>typeof e=="symbol",Pt=e=>e!==null&&typeof e=="object",ng=e=>(Pt(e)||ct(e))&&ct(e.then)&&ct(e.catch),ig=Object.prototype.toString,aa=e=>ig.call(e),ob=e=>aa(e).slice(8,-1),og=e=>aa(e)==="[object Object]",Cc=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,no=Tc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),la=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},rb=/-(\w)/g,Gs=la(e=>e.replace(rb,(t,s)=>s?s.toUpperCase():"")),ab=/\B([A-Z])/g,sn=la(e=>e.replace(ab,"-$1").toLowerCase()),rg=la(e=>e.charAt(0).toUpperCase()+e.slice(1)),$a=la(e=>e?`on${rg(e)}`:""),Js=(e,t)=>!Object.is(e,t),Or=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ol=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Dl=e=>{const t=parseFloat(e);return isNaN(t)?e:t},lb=e=>{const t=Nt(e)?Number(e):NaN;return isNaN(t)?e:t};let Au;const ca=()=>Au||(Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Te(e){if(X(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Nt(n)?hb(n):Te(n);if(i)for(const o in i)t[o]=i[o]}return t}else if(Nt(e)||Pt(e))return e}const cb=/;(?![^(]*\))/g,ub=/:([^]+)/,db=/\/\*[^]*?\*\//g;function hb(e){const t={};return e.replace(db,"").split(cb).forEach(s=>{if(s){const n=s.split(ub);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function tt(e){let t="";if(Nt(e))t=e;else if(X(e))for(let s=0;s<e.length;s++){const n=tt(e[s]);n&&(t+=n+" ")}else if(Pt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const fb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gb=Tc(fb);function ag(e){return!!e||e===""}const lg=e=>!!(e&&e.__v_isRef===!0),P=e=>Nt(e)?e:e==null?"":X(e)||Pt(e)&&(e.toString===ig||!ct(e.toString))?lg(e)?P(e.value):JSON.stringify(e,cg,2):String(e),cg=(e,t)=>lg(t)?cg(e,t.value):ri(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],o)=>(s[Fa(n,o)+" =>"]=i,s),{})}:sg(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Fa(s))}:Os(t)?Fa(t):Pt(t)&&!X(t)&&!og(t)?String(t):t,Fa=(e,t="")=>{var s;return Os(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class mb{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=pe;try{return pe=this,t()}finally{pe=s}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function pb(){return pe}let At;const Na=new WeakSet;class ug{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Na.has(this)&&(Na.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Iu(this),fg(this);const t=At,s=He;At=this,He=!0;try{return this.fn()}finally{gg(this),At=t,He=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ac(t);this.deps=this.depsTail=void 0,Iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Na.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cl(this)&&this.run()}get dirty(){return Cl(this)}}let dg=0,io,oo;function hg(e,t=!1){if(e.flags|=8,t){e.next=oo,oo=e;return}e.next=io,io=e}function Mc(){dg++}function Ec(){if(--dg>0)return;if(oo){let t=oo;for(oo=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;io;){let t=io;for(io=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function fg(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gg(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Ac(n),yb(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Cl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(mg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function mg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===vo)||(e.globalVersion=vo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Cl(e))))return;e.flags|=2;const t=e.dep,s=At,n=He;At=e,He=!0;try{fg(e);const i=e.fn(e._value);(t.version===0||Js(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{At=s,He=n,gg(e),e.flags&=-3}}function Ac(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Ac(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function yb(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let He=!0;const pg=[];function xs(){pg.push(He),He=!1}function Ss(){const e=pg.pop();He=e===void 0?!0:e}function Iu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=At;At=void 0;try{t()}finally{At=s}}}let vo=0;class bb{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ic{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!He||At===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==At)s=this.activeLink=new bb(At,this),At.deps?(s.prevDep=At.depsTail,At.depsTail.nextDep=s,At.depsTail=s):At.deps=At.depsTail=s,yg(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=At.depsTail,s.nextDep=void 0,At.depsTail.nextDep=s,At.depsTail=s,At.deps===s&&(At.deps=n)}return s}trigger(t){this.version++,vo++,this.notify(t)}notify(t){Mc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ec()}}}function yg(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)yg(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ml=new WeakMap,Sn=Symbol(""),El=Symbol(""),_o=Symbol("");function ee(e,t,s){if(He&&At){let n=Ml.get(e);n||Ml.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new Ic),i.map=n,i.key=s),i.track()}}function _s(e,t,s,n,i,o){const r=Ml.get(e);if(!r){vo++;return}const a=l=>{l&&l.trigger()};if(Mc(),t==="clear")r.forEach(a);else{const l=X(e),c=l&&Cc(s);if(l&&s==="length"){const u=Number(n);r.forEach((d,h)=>{(h==="length"||h===_o||!Os(h)&&h>=u)&&a(d)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(_o)),t){case"add":l?c&&a(r.get("length")):(a(r.get(Sn)),ri(e)&&a(r.get(El)));break;case"delete":l||(a(r.get(Sn)),ri(e)&&a(r.get(El)));break;case"set":ri(e)&&a(r.get(Sn));break}}Ec()}function Fn(e){const t=_t(e);return t===e?t:(ee(t,"iterate",_o),Ne(e)?t:t.map(Kt))}function ua(e){return ee(e=_t(e),"iterate",_o),e}const vb={__proto__:null,[Symbol.iterator](){return ja(this,Symbol.iterator,Kt)},concat(...e){return Fn(this).concat(...e.map(t=>X(t)?Fn(t):t))},entries(){return ja(this,"entries",e=>(e[1]=Kt(e[1]),e))},every(e,t){return ds(this,"every",e,t,void 0,arguments)},filter(e,t){return ds(this,"filter",e,t,s=>s.map(Kt),arguments)},find(e,t){return ds(this,"find",e,t,Kt,arguments)},findIndex(e,t){return ds(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ds(this,"findLast",e,t,Kt,arguments)},findLastIndex(e,t){return ds(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ds(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ba(this,"includes",e)},indexOf(...e){return Ba(this,"indexOf",e)},join(e){return Fn(this).join(e)},lastIndexOf(...e){return Ba(this,"lastIndexOf",e)},map(e,t){return ds(this,"map",e,t,void 0,arguments)},pop(){return Ri(this,"pop")},push(...e){return Ri(this,"push",e)},reduce(e,...t){return Pu(this,"reduce",e,t)},reduceRight(e,...t){return Pu(this,"reduceRight",e,t)},shift(){return Ri(this,"shift")},some(e,t){return ds(this,"some",e,t,void 0,arguments)},splice(...e){return Ri(this,"splice",e)},toReversed(){return Fn(this).toReversed()},toSorted(e){return Fn(this).toSorted(e)},toSpliced(...e){return Fn(this).toSpliced(...e)},unshift(...e){return Ri(this,"unshift",e)},values(){return ja(this,"values",Kt)}};function ja(e,t,s){const n=ua(e),i=n[t]();return n!==e&&!Ne(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const _b=Array.prototype;function ds(e,t,s,n,i,o){const r=ua(e),a=r!==e&&!Ne(e),l=r[t];if(l!==_b[t]){const d=l.apply(e,o);return a?Kt(d):d}let c=s;r!==e&&(a?c=function(d,h){return s.call(this,Kt(d),h,e)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,e)}));const u=l.call(r,c,n);return a&&i?i(u):u}function Pu(e,t,s,n){const i=ua(e);let o=s;return i!==e&&(Ne(e)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,e)}):o=function(r,a,l){return s.call(this,r,Kt(a),l,e)}),i[t](o,...n)}function Ba(e,t,s){const n=_t(e);ee(n,"iterate",_o);const i=n[t](...s);return(i===-1||i===!1)&&Rc(s[0])?(s[0]=_t(s[0]),n[t](...s)):i}function Ri(e,t,s=[]){xs(),Mc();const n=_t(e)[t].apply(e,s);return Ec(),Ss(),n}const wb=Tc("__proto__,__v_isRef,__isVue"),bg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Os));function xb(e){Os(e)||(e=String(e));const t=_t(this);return ee(t,"has",e),t.hasOwnProperty(e)}class vg{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?Ib:Sg:o?xg:wg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=X(t);if(!i){let l;if(r&&(l=vb[s]))return l;if(s==="hasOwnProperty")return xb}const a=Reflect.get(t,s,ie(t)?t:n);return(Os(s)?bg.has(s):wb(s))||(i||ee(t,"get",s),o)?a:ie(a)?r&&Cc(s)?a:a.value:Pt(a)?i?kg(a):ai(a):a}}class _g extends vg{constructor(t=!1){super(!1,t)}set(t,s,n,i){let o=t[s];if(!this._isShallow){const l=Xs(o);if(!Ne(n)&&!Xs(n)&&(o=_t(o),n=_t(n)),!X(t)&&ie(o)&&!ie(n))return l?!1:(o.value=n,!0)}const r=X(t)&&Cc(s)?Number(s)<t.length:wt(t,s),a=Reflect.set(t,s,n,ie(t)?t:i);return t===_t(i)&&(r?Js(n,o)&&_s(t,"set",s,n):_s(t,"add",s,n)),a}deleteProperty(t,s){const n=wt(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&_s(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Os(s)||!bg.has(s))&&ee(t,"has",s),n}ownKeys(t){return ee(t,"iterate",X(t)?"length":Sn),Reflect.ownKeys(t)}}class Sb extends vg{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const kb=new _g,Tb=new Sb,Ob=new _g(!0);const Al=e=>e,Go=e=>Reflect.getPrototypeOf(e);function Db(e,t,s){return function(...n){const i=this.__v_raw,o=_t(i),r=ri(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...n),u=s?Al:t?$r:Kt;return!t&&ee(o,"iterate",l?El:Sn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Xo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Cb(e,t){const s={get(i){const o=this.__v_raw,r=_t(o),a=_t(i);e||(Js(i,a)&&ee(r,"get",i),ee(r,"get",a));const{has:l}=Go(r),c=t?Al:e?$r:Kt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&ee(_t(i),"iterate",Sn),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=_t(o),a=_t(i);return e||(Js(i,a)&&ee(r,"has",i),ee(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=_t(a),c=t?Al:e?$r:Kt;return!e&&ee(l,"iterate",Sn),a.forEach((u,d)=>i.call(o,c(u),c(d),r))}};return qt(s,e?{add:Xo("add"),set:Xo("set"),delete:Xo("delete"),clear:Xo("clear")}:{add(i){!t&&!Ne(i)&&!Xs(i)&&(i=_t(i));const o=_t(this);return Go(o).has.call(o,i)||(o.add(i),_s(o,"add",i,i)),this},set(i,o){!t&&!Ne(o)&&!Xs(o)&&(o=_t(o));const r=_t(this),{has:a,get:l}=Go(r);let c=a.call(r,i);c||(i=_t(i),c=a.call(r,i));const u=l.call(r,i);return r.set(i,o),c?Js(o,u)&&_s(r,"set",i,o):_s(r,"add",i,o),this},delete(i){const o=_t(this),{has:r,get:a}=Go(o);let l=r.call(o,i);l||(i=_t(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&_s(o,"delete",i,void 0),c},clear(){const i=_t(this),o=i.size!==0,r=i.clear();return o&&_s(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Db(i,e,t)}),s}function Pc(e,t){const s=Cb(e,t);return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(wt(s,i)&&i in n?s:n,i,o)}const Mb={get:Pc(!1,!1)},Eb={get:Pc(!1,!0)},Ab={get:Pc(!0,!1)};const wg=new WeakMap,xg=new WeakMap,Sg=new WeakMap,Ib=new WeakMap;function Pb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lb(e){return e.__v_skip||!Object.isExtensible(e)?0:Pb(ob(e))}function ai(e){return Xs(e)?e:Lc(e,!1,kb,Mb,wg)}function Rb(e){return Lc(e,!1,Ob,Eb,xg)}function kg(e){return Lc(e,!0,Tb,Ab,Sg)}function Lc(e,t,s,n,i){if(!Pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Lb(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?n:s);return i.set(e,a),a}function li(e){return Xs(e)?li(e.__v_raw):!!(e&&e.__v_isReactive)}function Xs(e){return!!(e&&e.__v_isReadonly)}function Ne(e){return!!(e&&e.__v_isShallow)}function Rc(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function $b(e){return!wt(e,"__v_skip")&&Object.isExtensible(e)&&Ol(e,"__v_skip",!0),e}const Kt=e=>Pt(e)?ai(e):e,$r=e=>Pt(e)?kg(e):e;function ie(e){return e?e.__v_isRef===!0:!1}function gt(e){return Fb(e,!1)}function Fb(e,t){return ie(e)?e:new Nb(e,t)}class Nb{constructor(t,s){this.dep=new Ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:_t(t),this._value=s?t:Kt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Ne(t)||Xs(t);t=n?t:_t(t),Js(t,s)&&(this._rawValue=t,this._value=n?t:Kt(t),this.dep.trigger())}}function bt(e){return ie(e)?e.value:e}const jb={get:(e,t,s)=>t==="__v_raw"?e:bt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return ie(i)&&!ie(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Tg(e){return li(e)?e:new Proxy(e,jb)}class Bb{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return hg(this,!0),!0}get value(){const t=this.dep.track();return mg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wb(e,t,s=!1){let n,i;return ct(e)?n=e:(n=e.get,i=e.set),new Bb(n,i,s)}const Qo={},Fr=new WeakMap;let mn;function Ub(e,t=!1,s=mn){if(s){let n=Fr.get(s);n||Fr.set(s,n=[]),n.push(e)}}function zb(e,t,s=Ct){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=w=>i?w:Ne(w)||i===!1||i===0?ws(w,1):ws(w);let u,d,h,f,g=!1,m=!1;if(ie(e)?(d=()=>e.value,g=Ne(e)):li(e)?(d=()=>c(e),g=!0):X(e)?(m=!0,g=e.some(w=>li(w)||Ne(w)),d=()=>e.map(w=>{if(ie(w))return w.value;if(li(w))return c(w);if(ct(w))return l?l(w,2):w()})):ct(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){xs();try{h()}finally{Ss()}}const w=mn;mn=u;try{return l?l(e,3,[f]):e(f)}finally{mn=w}}:d=as,t&&i){const w=d,S=i===!0?1/0:i;d=()=>ws(w(),S)}const p=pb(),y=()=>{u.stop(),p&&p.active&&Dc(p.effects,u)};if(o&&t){const w=t;t=(...S)=>{w(...S),y()}}let b=m?new Array(e.length).fill(Qo):Qo;const v=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const S=u.run();if(i||g||(m?S.some((D,E)=>Js(D,b[E])):Js(S,b))){h&&h();const D=mn;mn=u;try{const E=[S,b===Qo?void 0:m&&b[0]===Qo?[]:b,f];b=S,l?l(t,3,E):t(...E)}finally{mn=D}}}else u.run()};return a&&a(v),u=new ug(d),u.scheduler=r?()=>r(v,!1):v,f=w=>Ub(w,!1,u),h=u.onStop=()=>{const w=Fr.get(u);if(w){if(l)l(w,4);else for(const S of w)S();Fr.delete(u)}},t?n?v(!0):b=u.run():r?r(v.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function ws(e,t=1/0,s){if(t<=0||!Pt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ie(e))ws(e.value,t,s);else if(X(e))for(let n=0;n<e.length;n++)ws(e[n],t,s);else if(sg(e)||ri(e))e.forEach(n=>{ws(n,t,s)});else if(og(e)){for(const n in e)ws(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ws(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Po(e,t,s,n){try{return n?e(...n):e()}catch(i){da(i,t,s)}}function qe(e,t,s,n){if(ct(e)){const i=Po(e,t,s,n);return i&&ng(i)&&i.catch(o=>{da(o,t,s)}),i}if(X(e)){const i=[];for(let o=0;o<e.length;o++)i.push(qe(e[o],t,s,n));return i}}function da(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ct;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(o){xs(),Po(o,null,10,[e,l,c]),Ss();return}}Vb(e,s,i,n,r)}function Vb(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const le=[];let ss=-1;const ci=[];let Fs=null,Qn=0;const Og=Promise.resolve();let Nr=null;function Hb(e){const t=Nr||Og;return e?t.then(this?e.bind(this):e):t}function qb(e){let t=ss+1,s=le.length;for(;t<s;){const n=t+s>>>1,i=le[n],o=wo(i);o<e||o===e&&i.flags&2?t=n+1:s=n}return t}function $c(e){if(!(e.flags&1)){const t=wo(e),s=le[le.length-1];!s||!(e.flags&2)&&t>=wo(s)?le.push(e):le.splice(qb(t),0,e),e.flags|=1,Dg()}}function Dg(){Nr||(Nr=Og.then(Mg))}function Jb(e){X(e)?ci.push(...e):Fs&&e.id===-1?Fs.splice(Qn+1,0,e):e.flags&1||(ci.push(e),e.flags|=1),Dg()}function Lu(e,t,s=ss+1){for(;s<le.length;s++){const n=le[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;le.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Cg(e){if(ci.length){const t=[...new Set(ci)].sort((s,n)=>wo(s)-wo(n));if(ci.length=0,Fs){Fs.push(...t);return}for(Fs=t,Qn=0;Qn<Fs.length;Qn++){const s=Fs[Qn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Fs=null,Qn=0}}const wo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Mg(e){try{for(ss=0;ss<le.length;ss++){const t=le[ss];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Po(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ss<le.length;ss++){const t=le[ss];t&&(t.flags&=-2)}ss=-1,le.length=0,Cg(),Nr=null,(le.length||ci.length)&&Mg()}}let ne=null,Eg=null;function jr(e){const t=ne;return ne=e,Eg=e&&e.type.__scopeId||null,t}function Il(e,t=ne,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&zu(-1);const o=jr(t);let r;try{r=e(...i)}finally{jr(o),n._d&&zu(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Fc(e,t){if(ne===null)return e;const s=ma(ne),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=Ct]=t[i];o&&(ct(o)&&(o={mounted:o,updated:o}),o.deep&&ws(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function rn(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(xs(),qe(l,s,8,[e.el,a,e,t]),Ss())}}const Yb=Symbol("_vte"),Kb=e=>e.__isTeleport,Nn=Symbol("_leaveCb"),tr=Symbol("_enterCb");function Zb(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ye(()=>{e.isMounted=!0}),Cs(()=>{e.isUnmounting=!0}),e}const Ae=[Function,Array],Gb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ae,onEnter:Ae,onAfterEnter:Ae,onEnterCancelled:Ae,onBeforeLeave:Ae,onLeave:Ae,onAfterLeave:Ae,onLeaveCancelled:Ae,onBeforeAppear:Ae,onAppear:Ae,onAfterAppear:Ae,onAppearCancelled:Ae};function Xb(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Pl(e,t,s,n,i){const{appear:o,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:p,onAppear:y,onAfterAppear:b,onAppearCancelled:v}=t,w=String(e.key),S=Xb(s,e),D=(I,B)=>{I&&qe(I,n,9,B)},E=(I,B)=>{const L=B[1];D(I,B),X(I)?I.every(M=>M.length<=1)&&L():I.length<=1&&L()},R={mode:r,persisted:a,beforeEnter(I){let B=l;if(!s.isMounted)if(o)B=p||l;else return;I[Nn]&&I[Nn](!0);const L=S[w];L&&ti(e,L)&&L.el[Nn]&&L.el[Nn](),D(B,[I])},enter(I){let B=c,L=u,M=d;if(!s.isMounted)if(o)B=y||c,L=b||u,M=v||d;else return;let W=!1;const et=I[tr]=nt=>{W||(W=!0,nt?D(M,[I]):D(L,[I]),R.delayedLeave&&R.delayedLeave(),I[tr]=void 0)};B?E(B,[I,et]):et()},leave(I,B){const L=String(e.key);if(I[tr]&&I[tr](!0),s.isUnmounting)return B();D(h,[I]);let M=!1;const W=I[Nn]=et=>{M||(M=!0,B(),et?D(m,[I]):D(g,[I]),I[Nn]=void 0,S[L]===e&&delete S[L])};S[L]=e,f?E(f,[I,W]):W()},clone(I){return Pl(I,t,s,n)}};return R}function xo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,xo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ag(e,t=!1,s){let n=[],i=0;for(let o=0;o<e.length;o++){let r=e[o];const a=s==null?r.key:String(s)+String(r.key!=null?r.key:o);r.type===ft?(r.patchFlag&128&&i++,n=n.concat(Ag(r.children,t,a))):(t||r.type!==cs)&&n.push(a!=null?On(r,{key:a}):r)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function Ig(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ro(e,t,s,n,i=!1){if(X(e)){e.forEach((g,m)=>ro(g,t&&(X(t)?t[m]:t),s,n,i));return}if(ui(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ro(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?ma(n.component):n.el,r=i?null:o,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Ct?a.refs={}:a.refs,d=a.setupState,h=_t(d),f=d===Ct?()=>!1:g=>wt(h,g);if(c!=null&&c!==l&&(Nt(c)?(u[c]=null,f(c)&&(d[c]=null)):ie(c)&&(c.value=null)),ct(l))Po(l,a,12,[r,u]);else{const g=Nt(l),m=ie(l);if(g||m){const p=()=>{if(e.f){const y=g?f(l)?d[l]:u[l]:l.value;i?X(y)&&Dc(y,o):X(y)?y.includes(o)||y.push(o):g?(u[l]=[o],f(l)&&(d[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else g?(u[l]=r,f(l)&&(d[l]=r)):m&&(l.value=r,e.k&&(u[e.k]=r))};r?(p.id=-1,Se(p,s)):p()}}}ca().requestIdleCallback;ca().cancelIdleCallback;const ui=e=>!!e.type.__asyncLoader,Pg=e=>e.type.__isKeepAlive;function Qb(e,t){Lg(e,"a",t)}function tv(e,t){Lg(e,"da",t)}function Lg(e,t,s=ce){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ha(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Pg(i.parent.vnode)&&ev(n,t,s,i),i=i.parent}}function ev(e,t,s,n){const i=ha(t,e,n,!0);$g(()=>{Dc(n[t],i)},s)}function ha(e,t,s=ce,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{xs();const a=Lo(s),l=qe(t,s,e,r);return a(),Ss(),l});return n?i.unshift(o):i.push(o),o}}const Ds=e=>(t,s=ce)=>{(!ko||e==="sp")&&ha(e,(...n)=>t(...n),s)},sv=Ds("bm"),Ye=Ds("m"),nv=Ds("bu"),Rg=Ds("u"),Cs=Ds("bum"),$g=Ds("um"),iv=Ds("sp"),ov=Ds("rtg"),rv=Ds("rtc");function av(e,t=ce){ha("ec",e,t)}const lv=Symbol.for("v-ndc");function Ut(e,t,s,n){let i;const o=s,r=X(e);if(r||Nt(e)){const a=r&&li(e);let l=!1,c=!1;a&&(l=!Ne(e),c=Xs(e),e=ua(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?$r(Kt(e[u])):Kt(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(Pt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,o)}}else i=[];return i}function cv(e,t,s={},n,i){if(ne.ce||ne.parent&&ui(ne.parent)&&ne.parent.ce)return T(),De(ft,null,[ht("slot",s,n&&n())],64);let o=e[t];o&&o._c&&(o._d=!1),T();const r=o&&Fg(o(s)),a=s.key||r&&r.key,l=De(ft,{key:(a&&!Os(a)?a:`_${t}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&e._===1?64:-2);return o&&o._c&&(o._d=!0),l}function Fg(e){return e.some(t=>Bc(t)?!(t.type===cs||t.type===ft&&!Fg(t.children)):!0)?e:null}const Ll=e=>e?im(e)?ma(e):Ll(e.parent):null,ao=qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ll(e.parent),$root:e=>Ll(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>jg(e),$forceUpdate:e=>e.f||(e.f=()=>{$c(e.update)}),$nextTick:e=>e.n||(e.n=Hb.bind(e.proxy)),$watch:e=>Av.bind(e)}),Wa=(e,t)=>e!==Ct&&!e.__isScriptSetup&&wt(e,t),uv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=r[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(Wa(n,t))return r[t]=1,n[t];if(i!==Ct&&wt(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&wt(c,t))return r[t]=3,o[t];if(s!==Ct&&wt(s,t))return r[t]=4,s[t];Rl&&(r[t]=0)}}const u=ao[t];let d,h;if(u)return t==="$attrs"&&ee(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Ct&&wt(s,t))return r[t]=4,s[t];if(h=l.config.globalProperties,wt(h,t))return h[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return Wa(i,t)?(i[t]=s,!0):n!==Ct&&wt(n,t)?(n[t]=s,!0):wt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||e!==Ct&&wt(e,r)||Wa(t,r)||(a=o[0])&&wt(a,r)||wt(n,r)||wt(ao,r)||wt(i.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:wt(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ru(e){return X(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Rl=!0;function dv(e){const t=jg(e),s=e.proxy,n=e.ctx;Rl=!1,t.beforeCreate&&$u(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:g,activated:m,deactivated:p,beforeDestroy:y,beforeUnmount:b,destroyed:v,unmounted:w,render:S,renderTracked:D,renderTriggered:E,errorCaptured:R,serverPrefetch:I,expose:B,inheritAttrs:L,components:M,directives:W,filters:et}=t;if(c&&hv(c,n,null),r)for(const ut in r){const yt=r[ut];ct(yt)&&(n[ut]=yt.bind(s))}if(i){const ut=i.call(s,s);Pt(ut)&&(e.data=ai(ut))}if(Rl=!0,o)for(const ut in o){const yt=o[ut],he=ct(yt)?yt.bind(s,s):ct(yt.get)?yt.get.bind(s,s):as,je=!ct(yt)&&ct(yt.set)?yt.set.bind(s):as,Ee=G({get:he,set:je});Object.defineProperty(n,ut,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Yt=>Ee.value=Yt})}if(a)for(const ut in a)Ng(a[ut],n,s,ut);if(l){const ut=ct(l)?l.call(s):l;Reflect.ownKeys(ut).forEach(yt=>{bv(yt,ut[yt])})}u&&$u(u,e,"c");function ot(ut,yt){X(yt)?yt.forEach(he=>ut(he.bind(s))):yt&&ut(yt.bind(s))}if(ot(sv,d),ot(Ye,h),ot(nv,f),ot(Rg,g),ot(Qb,m),ot(tv,p),ot(av,R),ot(rv,D),ot(ov,E),ot(Cs,b),ot($g,w),ot(iv,I),X(B))if(B.length){const ut=e.exposed||(e.exposed={});B.forEach(yt=>{Object.defineProperty(ut,yt,{get:()=>s[yt],set:he=>s[yt]=he,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===as&&(e.render=S),L!=null&&(e.inheritAttrs=L),M&&(e.components=M),W&&(e.directives=W),I&&Ig(e)}function hv(e,t,s=as){X(e)&&(e=$l(e));for(const n in e){const i=e[n];let o;Pt(i)?"default"in i?o=Dr(i.from||n,i.default,!0):o=Dr(i.from||n):o=Dr(i),ie(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function $u(e,t,s){qe(X(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ng(e,t,s,n){let i=n.includes(".")?Xg(s,n):()=>s[n];if(Nt(e)){const o=t[e];ct(o)&&Ce(i,o)}else if(ct(e))Ce(i,e.bind(s));else if(Pt(e))if(X(e))e.forEach(o=>Ng(o,t,s,n));else{const o=ct(e.handler)?e.handler.bind(s):t[e.handler];ct(o)&&Ce(i,o,e)}}function jg(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>Br(l,c,r,!0)),Br(l,t,r)),Pt(t)&&o.set(t,l),l}function Br(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&Br(e,o,s,!0),i&&i.forEach(r=>Br(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const a=fv[r]||s&&s[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const fv={data:Fu,props:Nu,emits:Nu,methods:Yi,computed:Yi,beforeCreate:ae,created:ae,beforeMount:ae,mounted:ae,beforeUpdate:ae,updated:ae,beforeDestroy:ae,beforeUnmount:ae,destroyed:ae,unmounted:ae,activated:ae,deactivated:ae,errorCaptured:ae,serverPrefetch:ae,components:Yi,directives:Yi,watch:mv,provide:Fu,inject:gv};function Fu(e,t){return t?e?function(){return qt(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function gv(e,t){return Yi($l(e),$l(t))}function $l(e){if(X(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ae(e,t){return e?[...new Set([].concat(e,t))]:t}function Yi(e,t){return e?qt(Object.create(null),e,t):t}function Nu(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:qt(Object.create(null),Ru(e),Ru(t??{})):t}function mv(e,t){if(!e)return t;if(!t)return e;const s=qt(Object.create(null),e);for(const n in t)s[n]=ae(e[n],t[n]);return s}function Bg(){return{app:null,config:{isNativeTag:nb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pv=0;function yv(e,t){return function(n,i=null){ct(n)||(n=qt({},n)),i!=null&&!Pt(i)&&(i=null);const o=Bg(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:pv++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Gv,get config(){return o.config},set config(u){},use(u,...d){return r.has(u)||(u&&ct(u.install)?(r.add(u),u.install(c,...d)):ct(u)&&(r.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ht(n,i);return f.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,ma(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(qe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=di;di=c;try{return u()}finally{di=d}}};return c}}let di=null;function bv(e,t){if(ce){let s=ce.provides;const n=ce.parent&&ce.parent.provides;n===s&&(s=ce.provides=Object.create(n)),s[e]=t}}function Dr(e,t,s=!1){const n=nm();if(n||di){let i=di?di._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ct(t)?t.call(n&&n.proxy):t}}const Wg={},Ug=()=>Object.create(Wg),zg=e=>Object.getPrototypeOf(e)===Wg;function vv(e,t,s,n=!1){const i={},o=Ug();e.propsDefaults=Object.create(null),Vg(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:Rb(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function _v(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=_t(i),[l]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(fa(e.emitsOptions,h))continue;const f=t[h];if(l)if(wt(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const g=Gs(h);i[g]=Fl(l,a,g,f,e,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{Vg(e,t,i,o)&&(c=!0);let u;for(const d in a)(!t||!wt(t,d)&&((u=sn(d))===d||!wt(t,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(i[d]=Fl(l,a,d,void 0,e,!0)):delete i[d]);if(o!==a)for(const d in o)(!t||!wt(t,d))&&(delete o[d],c=!0)}c&&_s(e.attrs,"set","")}function Vg(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(no(l))continue;const c=t[l];let u;i&&wt(i,u=Gs(l))?!o||!o.includes(u)?s[u]=c:(a||(a={}))[u]=c:fa(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=_t(s),c=a||Ct;for(let u=0;u<o.length;u++){const d=o[u];s[d]=Fl(i,l,d,c[d],e,!wt(c,d))}}return r}function Fl(e,t,s,n,i,o){const r=e[s];if(r!=null){const a=wt(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ct(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Lo(i);n=c[s]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===sn(s))&&(n=!0))}return n}const wv=new WeakMap;function Hg(e,t,s=!1){const n=s?wv:t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!ct(e)){const u=d=>{l=!0;const[h,f]=Hg(d,t,!0);qt(r,h),f&&a.push(...f)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return Pt(e)&&n.set(e,oi),oi;if(X(o))for(let u=0;u<o.length;u++){const d=Gs(o[u]);ju(d)&&(r[d]=Ct)}else if(o)for(const u in o){const d=Gs(u);if(ju(d)){const h=o[u],f=r[d]=X(h)||ct(h)?{type:h}:qt({},h),g=f.type;let m=!1,p=!0;if(X(g))for(let y=0;y<g.length;++y){const b=g[y],v=ct(b)&&b.name;if(v==="Boolean"){m=!0;break}else v==="String"&&(p=!1)}else m=ct(g)&&g.name==="Boolean";f[0]=m,f[1]=p,(m||wt(f,"default"))&&a.push(d)}}const c=[r,a];return Pt(e)&&n.set(e,c),c}function ju(e){return e[0]!=="$"&&!no(e)}const Nc=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",jc=e=>X(e)?e.map(rs):[rs(e)],xv=(e,t,s)=>{if(t._n)return t;const n=Il((...i)=>jc(t(...i)),s);return n._c=!1,n},qg=(e,t,s)=>{const n=e._ctx;for(const i in e){if(Nc(i))continue;const o=e[i];if(ct(o))t[i]=xv(i,o,n);else if(o!=null){const r=jc(o);t[i]=()=>r}}},Jg=(e,t)=>{const s=jc(t);e.slots.default=()=>s},Yg=(e,t,s)=>{for(const n in t)(s||!Nc(n))&&(e[n]=t[n])},Sv=(e,t,s)=>{const n=e.slots=Ug();if(e.vnode.shapeFlag&32){const i=t.__;i&&Ol(n,"__",i,!0);const o=t._;o?(Yg(n,t,s),s&&Ol(n,"_",o,!0)):qg(t,n)}else t&&Jg(e,t)},kv=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=Ct;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:Yg(i,t,s):(o=!t.$stable,qg(t,i)),r=t}else t&&(Jg(e,t),r={default:1});if(o)for(const a in i)!Nc(a)&&r[a]==null&&delete i[a]},Se=Nv;function Tv(e){return Ov(e)}function Ov(e,t){const s=ca();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=as,insertStaticContent:g}=e,m=(x,k,A,N=null,$=null,F=null,H=void 0,z=null,U=!!k.dynamicChildren)=>{if(x===k)return;x&&!ti(x,k)&&(N=Zo(x),Yt(x,$,F,!0),x=null),k.patchFlag===-2&&(U=!1,k.dynamicChildren=null);const{type:j,ref:Z,shapeFlag:q}=k;switch(j){case ga:p(x,k,A,N);break;case cs:y(x,k,A,N);break;case za:x==null&&b(k,A,N,H);break;case ft:M(x,k,A,N,$,F,H,z,U);break;default:q&1?S(x,k,A,N,$,F,H,z,U):q&6?W(x,k,A,N,$,F,H,z,U):(q&64||q&128)&&j.process(x,k,A,N,$,F,H,z,U,Pi)}Z!=null&&$?ro(Z,x&&x.ref,F,k||x,!k):Z==null&&x&&x.ref!=null&&ro(x.ref,null,F,x,!0)},p=(x,k,A,N)=>{if(x==null)n(k.el=a(k.children),A,N);else{const $=k.el=x.el;k.children!==x.children&&c($,k.children)}},y=(x,k,A,N)=>{x==null?n(k.el=l(k.children||""),A,N):k.el=x.el},b=(x,k,A,N)=>{[x.el,x.anchor]=g(x.children,k,A,N,x.el,x.anchor)},v=({el:x,anchor:k},A,N)=>{let $;for(;x&&x!==k;)$=h(x),n(x,A,N),x=$;n(k,A,N)},w=({el:x,anchor:k})=>{let A;for(;x&&x!==k;)A=h(x),i(x),x=A;i(k)},S=(x,k,A,N,$,F,H,z,U)=>{k.type==="svg"?H="svg":k.type==="math"&&(H="mathml"),x==null?D(k,A,N,$,F,H,z,U):I(x,k,$,F,H,z,U)},D=(x,k,A,N,$,F,H,z)=>{let U,j;const{props:Z,shapeFlag:q,transition:K,dirs:st}=x;if(U=x.el=r(x.type,F,Z&&Z.is,Z),q&8?u(U,x.children):q&16&&R(x.children,U,null,N,$,Ua(x,F),H,z),st&&rn(x,null,N,"created"),E(U,x,x.scopeId,H,N),Z){for(const Mt in Z)Mt!=="value"&&!no(Mt)&&o(U,Mt,null,Z[Mt],F,N);"value"in Z&&o(U,"value",null,Z.value,F),(j=Z.onVnodeBeforeMount)&&Xe(j,N,x)}st&&rn(x,null,N,"beforeMount");const mt=Dv($,K);mt&&K.beforeEnter(U),n(U,k,A),((j=Z&&Z.onVnodeMounted)||mt||st)&&Se(()=>{j&&Xe(j,N,x),mt&&K.enter(U),st&&rn(x,null,N,"mounted")},$)},E=(x,k,A,N,$)=>{if(A&&f(x,A),N)for(let F=0;F<N.length;F++)f(x,N[F]);if($){let F=$.subTree;if(k===F||tm(F.type)&&(F.ssContent===k||F.ssFallback===k)){const H=$.vnode;E(x,H,H.scopeId,H.slotScopeIds,$.parent)}}},R=(x,k,A,N,$,F,H,z,U=0)=>{for(let j=U;j<x.length;j++){const Z=x[j]=z?Ns(x[j]):rs(x[j]);m(null,Z,k,A,N,$,F,H,z)}},I=(x,k,A,N,$,F,H)=>{const z=k.el=x.el;let{patchFlag:U,dynamicChildren:j,dirs:Z}=k;U|=x.patchFlag&16;const q=x.props||Ct,K=k.props||Ct;let st;if(A&&an(A,!1),(st=K.onVnodeBeforeUpdate)&&Xe(st,A,k,x),Z&&rn(k,x,A,"beforeUpdate"),A&&an(A,!0),(q.innerHTML&&K.innerHTML==null||q.textContent&&K.textContent==null)&&u(z,""),j?B(x.dynamicChildren,j,z,A,N,Ua(k,$),F):H||yt(x,k,z,null,A,N,Ua(k,$),F,!1),U>0){if(U&16)L(z,q,K,A,$);else if(U&2&&q.class!==K.class&&o(z,"class",null,K.class,$),U&4&&o(z,"style",q.style,K.style,$),U&8){const mt=k.dynamicProps;for(let Mt=0;Mt<mt.length;Mt++){const kt=mt[Mt],fe=q[kt],ge=K[kt];(ge!==fe||kt==="value")&&o(z,kt,fe,ge,$,A)}}U&1&&x.children!==k.children&&u(z,k.children)}else!H&&j==null&&L(z,q,K,A,$);((st=K.onVnodeUpdated)||Z)&&Se(()=>{st&&Xe(st,A,k,x),Z&&rn(k,x,A,"updated")},N)},B=(x,k,A,N,$,F,H)=>{for(let z=0;z<k.length;z++){const U=x[z],j=k[z],Z=U.el&&(U.type===ft||!ti(U,j)||U.shapeFlag&198)?d(U.el):A;m(U,j,Z,null,N,$,F,H,!0)}},L=(x,k,A,N,$)=>{if(k!==A){if(k!==Ct)for(const F in k)!no(F)&&!(F in A)&&o(x,F,k[F],null,$,N);for(const F in A){if(no(F))continue;const H=A[F],z=k[F];H!==z&&F!=="value"&&o(x,F,z,H,$,N)}"value"in A&&o(x,"value",k.value,A.value,$)}},M=(x,k,A,N,$,F,H,z,U)=>{const j=k.el=x?x.el:a(""),Z=k.anchor=x?x.anchor:a("");let{patchFlag:q,dynamicChildren:K,slotScopeIds:st}=k;st&&(z=z?z.concat(st):st),x==null?(n(j,A,N),n(Z,A,N),R(k.children||[],A,Z,$,F,H,z,U)):q>0&&q&64&&K&&x.dynamicChildren?(B(x.dynamicChildren,K,A,$,F,H,z),(k.key!=null||$&&k===$.subTree)&&Kg(x,k,!0)):yt(x,k,A,Z,$,F,H,z,U)},W=(x,k,A,N,$,F,H,z,U)=>{k.slotScopeIds=z,x==null?k.shapeFlag&512?$.ctx.activate(k,A,N,H,U):et(k,A,N,$,F,H,U):nt(x,k,U)},et=(x,k,A,N,$,F,H)=>{const z=x.component=Hv(x,N,$);if(Pg(x)&&(z.ctx.renderer=Pi),qv(z,!1,H),z.asyncDep){if($&&$.registerDep(z,ot,H),!x.el){const U=z.subTree=ht(cs);y(null,U,k,A),x.placeholder=U.el}}else ot(z,x,k,A,$,F,H)},nt=(x,k,A)=>{const N=k.component=x.component;if($v(x,k,A))if(N.asyncDep&&!N.asyncResolved){ut(N,k,A);return}else N.next=k,N.update();else k.el=x.el,N.vnode=k},ot=(x,k,A,N,$,F,H)=>{const z=()=>{if(x.isMounted){let{next:q,bu:K,u:st,parent:mt,vnode:Mt}=x;{const Ze=Zg(x);if(Ze){q&&(q.el=Mt.el,ut(x,q,H)),Ze.asyncDep.then(()=>{x.isUnmounted||z()});return}}let kt=q,fe;an(x,!1),q?(q.el=Mt.el,ut(x,q,H)):q=Mt,K&&Or(K),(fe=q.props&&q.props.onVnodeBeforeUpdate)&&Xe(fe,mt,q,Mt),an(x,!0);const ge=Wu(x),Ke=x.subTree;x.subTree=ge,m(Ke,ge,d(Ke.el),Zo(Ke),x,$,F),q.el=ge.el,kt===null&&Fv(x,ge.el),st&&Se(st,$),(fe=q.props&&q.props.onVnodeUpdated)&&Se(()=>Xe(fe,mt,q,Mt),$)}else{let q;const{el:K,props:st}=k,{bm:mt,m:Mt,parent:kt,root:fe,type:ge}=x,Ke=ui(k);an(x,!1),mt&&Or(mt),!Ke&&(q=st&&st.onVnodeBeforeMount)&&Xe(q,kt,k),an(x,!0);{fe.ce&&fe.ce._def.shadowRoot!==!1&&fe.ce._injectChildStyle(ge);const Ze=x.subTree=Wu(x);m(null,Ze,A,N,x,$,F),k.el=Ze.el}if(Mt&&Se(Mt,$),!Ke&&(q=st&&st.onVnodeMounted)){const Ze=k;Se(()=>Xe(q,kt,Ze),$)}(k.shapeFlag&256||kt&&ui(kt.vnode)&&kt.vnode.shapeFlag&256)&&x.a&&Se(x.a,$),x.isMounted=!0,k=A=N=null}};x.scope.on();const U=x.effect=new ug(z);x.scope.off();const j=x.update=U.run.bind(U),Z=x.job=U.runIfDirty.bind(U);Z.i=x,Z.id=x.uid,U.scheduler=()=>$c(Z),an(x,!0),j()},ut=(x,k,A)=>{k.component=x;const N=x.vnode.props;x.vnode=k,x.next=null,_v(x,k.props,N,A),kv(x,k.children,A),xs(),Lu(x),Ss()},yt=(x,k,A,N,$,F,H,z,U=!1)=>{const j=x&&x.children,Z=x?x.shapeFlag:0,q=k.children,{patchFlag:K,shapeFlag:st}=k;if(K>0){if(K&128){je(j,q,A,N,$,F,H,z,U);return}else if(K&256){he(j,q,A,N,$,F,H,z,U);return}}st&8?(Z&16&&we(j,$,F),q!==j&&u(A,q)):Z&16?st&16?je(j,q,A,N,$,F,H,z,U):we(j,$,F,!0):(Z&8&&u(A,""),st&16&&R(q,A,N,$,F,H,z,U))},he=(x,k,A,N,$,F,H,z,U)=>{x=x||oi,k=k||oi;const j=x.length,Z=k.length,q=Math.min(j,Z);let K;for(K=0;K<q;K++){const st=k[K]=U?Ns(k[K]):rs(k[K]);m(x[K],st,A,null,$,F,H,z,U)}j>Z?we(x,$,F,!0,!1,q):R(k,A,N,$,F,H,z,U,q)},je=(x,k,A,N,$,F,H,z,U)=>{let j=0;const Z=k.length;let q=x.length-1,K=Z-1;for(;j<=q&&j<=K;){const st=x[j],mt=k[j]=U?Ns(k[j]):rs(k[j]);if(ti(st,mt))m(st,mt,A,null,$,F,H,z,U);else break;j++}for(;j<=q&&j<=K;){const st=x[q],mt=k[K]=U?Ns(k[K]):rs(k[K]);if(ti(st,mt))m(st,mt,A,null,$,F,H,z,U);else break;q--,K--}if(j>q){if(j<=K){const st=K+1,mt=st<Z?k[st].el:N;for(;j<=K;)m(null,k[j]=U?Ns(k[j]):rs(k[j]),A,mt,$,F,H,z,U),j++}}else if(j>K)for(;j<=q;)Yt(x[j],$,F,!0),j++;else{const st=j,mt=j,Mt=new Map;for(j=mt;j<=K;j++){const xe=k[j]=U?Ns(k[j]):rs(k[j]);xe.key!=null&&Mt.set(xe.key,j)}let kt,fe=0;const ge=K-mt+1;let Ke=!1,Ze=0;const Li=new Array(ge);for(j=0;j<ge;j++)Li[j]=0;for(j=st;j<=q;j++){const xe=x[j];if(fe>=ge){Yt(xe,$,F,!0);continue}let Ge;if(xe.key!=null)Ge=Mt.get(xe.key);else for(kt=mt;kt<=K;kt++)if(Li[kt-mt]===0&&ti(xe,k[kt])){Ge=kt;break}Ge===void 0?Yt(xe,$,F,!0):(Li[Ge-mt]=j+1,Ge>=Ze?Ze=Ge:Ke=!0,m(xe,k[Ge],A,null,$,F,H,z,U),fe++)}const Cu=Ke?Cv(Li):oi;for(kt=Cu.length-1,j=ge-1;j>=0;j--){const xe=mt+j,Ge=k[xe],Mu=k[xe+1],Eu=xe+1<Z?Mu.el||Mu.placeholder:N;Li[j]===0?m(null,Ge,A,Eu,$,F,H,z,U):Ke&&(kt<0||j!==Cu[kt]?Ee(Ge,A,Eu,2):kt--)}}},Ee=(x,k,A,N,$=null)=>{const{el:F,type:H,transition:z,children:U,shapeFlag:j}=x;if(j&6){Ee(x.component.subTree,k,A,N);return}if(j&128){x.suspense.move(k,A,N);return}if(j&64){H.move(x,k,A,Pi);return}if(H===ft){n(F,k,A);for(let q=0;q<U.length;q++)Ee(U[q],k,A,N);n(x.anchor,k,A);return}if(H===za){v(x,k,A);return}if(N!==2&&j&1&&z)if(N===0)z.beforeEnter(F),n(F,k,A),Se(()=>z.enter(F),$);else{const{leave:q,delayLeave:K,afterLeave:st}=z,mt=()=>{x.ctx.isUnmounted?i(F):n(F,k,A)},Mt=()=>{q(F,()=>{mt(),st&&st()})};K?K(F,mt,Mt):Mt()}else n(F,k,A)},Yt=(x,k,A,N=!1,$=!1)=>{const{type:F,props:H,ref:z,children:U,dynamicChildren:j,shapeFlag:Z,patchFlag:q,dirs:K,cacheIndex:st}=x;if(q===-2&&($=!1),z!=null&&(xs(),ro(z,null,A,x,!0),Ss()),st!=null&&(k.renderCache[st]=void 0),Z&256){k.ctx.deactivate(x);return}const mt=Z&1&&K,Mt=!ui(x);let kt;if(Mt&&(kt=H&&H.onVnodeBeforeUnmount)&&Xe(kt,k,x),Z&6)on(x.component,A,N);else{if(Z&128){x.suspense.unmount(A,N);return}mt&&rn(x,null,k,"beforeUnmount"),Z&64?x.type.remove(x,k,A,Pi,N):j&&!j.hasOnce&&(F!==ft||q>0&&q&64)?we(j,k,A,!1,!0):(F===ft&&q&384||!$&&Z&16)&&we(U,k,A),N&&Es(x)}(Mt&&(kt=H&&H.onVnodeUnmounted)||mt)&&Se(()=>{kt&&Xe(kt,k,x),mt&&rn(x,null,k,"unmounted")},A)},Es=x=>{const{type:k,el:A,anchor:N,transition:$}=x;if(k===ft){us(A,N);return}if(k===za){w(x);return}const F=()=>{i(A),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(x.shapeFlag&1&&$&&!$.persisted){const{leave:H,delayLeave:z}=$,U=()=>H(A,F);z?z(x.el,F,U):U()}else F()},us=(x,k)=>{let A;for(;x!==k;)A=h(x),i(x),x=A;i(k)},on=(x,k,A)=>{const{bum:N,scope:$,job:F,subTree:H,um:z,m:U,a:j,parent:Z,slots:{__:q}}=x;Bu(U),Bu(j),N&&Or(N),Z&&X(q)&&q.forEach(K=>{Z.renderCache[K]=void 0}),$.stop(),F&&(F.flags|=8,Yt(H,x,k,A)),z&&Se(z,k),Se(()=>{x.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},we=(x,k,A,N=!1,$=!1,F=0)=>{for(let H=F;H<x.length;H++)Yt(x[H],k,A,N,$)},Zo=x=>{if(x.shapeFlag&6)return Zo(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const k=h(x.anchor||x.el),A=k&&k[Yb];return A?h(A):k};let Ra=!1;const Du=(x,k,A)=>{x==null?k._vnode&&Yt(k._vnode,null,null,!0):m(k._vnode||null,x,k,null,null,null,A),k._vnode=x,Ra||(Ra=!0,Lu(),Cg(),Ra=!1)},Pi={p:m,um:Yt,m:Ee,r:Es,mt:et,mc:R,pc:yt,pbc:B,n:Zo,o:e};return{render:Du,hydrate:void 0,createApp:yv(Du)}}function Ua({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function an({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kg(e,t,s=!1){const n=e.children,i=t.children;if(X(n)&&X(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Ns(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&Kg(r,a)),a.type===ga&&(a.el=r.el),a.type===cs&&!a.el&&(a.el=r.el)}}function Cv(e){const t=e.slice(),s=[0];let n,i,o,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,e[s[a]]<c?o=a+1:r=a;c<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}function Zg(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Zg(t)}function Bu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Mv=Symbol.for("v-scx"),Ev=()=>Dr(Mv);function Ce(e,t,s){return Gg(e,t,s)}function Gg(e,t,s=Ct){const{immediate:n,deep:i,flush:o,once:r}=s,a=qt({},s),l=t&&n||!t&&o!=="post";let c;if(ko){if(o==="sync"){const f=Ev();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=as,f.resume=as,f.pause=as,f}}const u=ce;a.call=(f,g,m)=>qe(f,u,g,m);let d=!1;o==="post"?a.scheduler=f=>{Se(f,u&&u.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(f,g)=>{g?f():$c(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=zb(e,t,a);return ko&&(c?c.push(h):l&&h()),h}function Av(e,t,s){const n=this.proxy,i=Nt(e)?e.includes(".")?Xg(n,e):()=>n[e]:e.bind(n,n);let o;ct(t)?o=t:(o=t.handler,s=t);const r=Lo(this),a=Gg(i,o.bind(n),s);return r(),a}function Xg(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Iv=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Gs(t)}Modifiers`]||e[`${sn(t)}Modifiers`];function Pv(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ct;let i=s;const o=t.startsWith("update:"),r=o&&Iv(n,t.slice(7));r&&(r.trim&&(i=s.map(u=>Nt(u)?u.trim():u)),r.number&&(i=s.map(Dl)));let a,l=n[a=$a(t)]||n[a=$a(Gs(t))];!l&&o&&(l=n[a=$a(sn(t))]),l&&qe(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,qe(c,e,6,i)}}function Qg(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!ct(e)){const l=c=>{const u=Qg(c,t,!0);u&&(a=!0,qt(r,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Pt(e)&&n.set(e,null),null):(X(o)?o.forEach(l=>r[l]=null):qt(r,o),Pt(e)&&n.set(e,r),r)}function fa(e,t){return!e||!ra(t)?!1:(t=t.slice(2).replace(/Once$/,""),wt(e,t[0].toLowerCase()+t.slice(1))||wt(e,sn(t))||wt(e,t))}function Wu(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:g,inheritAttrs:m}=e,p=jr(e);let y,b;try{if(s.shapeFlag&4){const w=i||n,S=w;y=rs(c.call(S,w,u,d,f,h,g)),b=a}else{const w=t;y=rs(w.length>1?w(d,{attrs:a,slots:r,emit:l}):w(d,null)),b=t.props?a:Lv(a)}}catch(w){lo.length=0,da(w,e,1),y=ht(cs)}let v=y;if(b&&m!==!1){const w=Object.keys(b),{shapeFlag:S}=v;w.length&&S&7&&(o&&w.some(Oc)&&(b=Rv(b,o)),v=On(v,b,!1,!0))}return s.dirs&&(v=On(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&xo(v,s.transition),y=v,jr(p),y}const Lv=e=>{let t;for(const s in e)(s==="class"||s==="style"||ra(s))&&((t||(t={}))[s]=e[s]);return t},Rv=(e,t)=>{const s={};for(const n in e)(!Oc(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function $v(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Uu(n,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(r[h]!==n[h]&&!fa(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Uu(n,r,c):!0:!!r;return!1}function Uu(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!fa(s,o))return!0}return!1}function Fv({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const tm=e=>e.__isSuspense;function Nv(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):Jb(e)}const ft=Symbol.for("v-fgt"),ga=Symbol.for("v-txt"),cs=Symbol.for("v-cmt"),za=Symbol.for("v-stc"),lo=[];let Oe=null;function T(e=!1){lo.push(Oe=e?null:[])}function jv(){lo.pop(),Oe=lo[lo.length-1]||null}let So=1;function zu(e,t=!1){So+=e,e<0&&Oe&&t&&(Oe.hasOnce=!0)}function em(e){return e.dynamicChildren=So>0?Oe||oi:null,jv(),So>0&&Oe&&Oe.push(e),e}function C(e,t,s,n,i,o){return em(_(e,t,s,n,i,o,!0))}function De(e,t,s,n,i){return em(ht(e,t,s,n,i,!0))}function Bc(e){return e?e.__v_isVNode===!0:!1}function ti(e,t){return e.type===t.type&&e.key===t.key}const sm=({key:e})=>e??null,Cr=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||ie(e)||ct(e)?{i:ne,r:e,k:t,f:!!s}:e:null);function _(e,t=null,s=null,n=0,i=null,o=e===ft?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sm(t),ref:t&&Cr(t),scopeId:Eg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ne};return a?(Wc(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=Nt(s)?8:16),So>0&&!r&&Oe&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Oe.push(l),l}const ht=Bv;function Bv(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===lv)&&(e=cs),Bc(e)){const a=On(e,t,!0);return s&&Wc(a,s),So>0&&!o&&Oe&&(a.shapeFlag&6?Oe[Oe.indexOf(e)]=a:Oe.push(a)),a.patchFlag=-2,a}if(Zv(e)&&(e=e.__vccOpts),t){t=Wv(t);let{class:a,style:l}=t;a&&!Nt(a)&&(t.class=tt(a)),Pt(l)&&(Rc(l)&&!X(l)&&(l=qt({},l)),t.style=Te(l))}const r=Nt(e)?1:tm(e)?128:Kb(e)?64:Pt(e)?4:ct(e)?2:0;return _(e,t,s,n,i,r,o,!0)}function Wv(e){return e?Rc(e)||zg(e)?qt({},e):e:null}function On(e,t,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,c=t?Uv(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&sm(c),ref:t&&t.ref?s&&o?X(o)?o.concat(Cr(t)):[o,Cr(t)]:Cr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ft?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&On(e.ssContent),ssFallback:e.ssFallback&&On(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&xo(u,l.clone(u)),u}function J(e=" ",t=0){return ht(ga,null,e,t)}function Y(e="",t=!1){return t?(T(),De(cs,null,e)):ht(cs,null,e)}function rs(e){return e==null||typeof e=="boolean"?ht(cs):X(e)?ht(ft,null,e.slice()):Bc(e)?Ns(e):ht(ga,null,String(e))}function Ns(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:On(e)}function Wc(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(X(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Wc(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!zg(t)?t._ctx=ne:i===3&&ne&&(ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:ne},s=32):(t=String(t),n&64?(s=16,t=[J(t)]):s=8);e.children=t,e.shapeFlag|=s}function Uv(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=tt([t.class,n.class]));else if(i==="style")t.style=Te([t.style,n.style]);else if(ra(i)){const o=t[i],r=n[i];r&&o!==r&&!(X(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function Xe(e,t,s,n=null){qe(e,t,7,[s,n])}const zv=Bg();let Vv=0;function Hv(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||zv,o={uid:Vv++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hg(n,i),emitsOptions:Qg(n,i),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:n.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Pv.bind(null,o),e.ce&&e.ce(o),o}let ce=null;const nm=()=>ce||ne;let Wr,Nl;{const e=ca(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Wr=t("__VUE_INSTANCE_SETTERS__",s=>ce=s),Nl=t("__VUE_SSR_SETTERS__",s=>ko=s)}const Lo=e=>{const t=ce;return Wr(e),e.scope.on(),()=>{e.scope.off(),Wr(t)}},Vu=()=>{ce&&ce.scope.off(),Wr(null)};function im(e){return e.vnode.shapeFlag&4}let ko=!1;function qv(e,t=!1,s=!1){t&&Nl(t);const{props:n,children:i}=e.vnode,o=im(e);vv(e,n,o,t),Sv(e,i,s||t);const r=o?Jv(e,t):void 0;return t&&Nl(!1),r}function Jv(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,uv);const{setup:n}=s;if(n){xs();const i=e.setupContext=n.length>1?Kv(e):null,o=Lo(e),r=Po(n,e,0,[e.props,i]),a=ng(r);if(Ss(),o(),(a||e.sp)&&!ui(e)&&Ig(e),a){if(r.then(Vu,Vu),t)return r.then(l=>{Hu(e,l)}).catch(l=>{da(l,e,0)});e.asyncDep=r}else Hu(e,r)}else om(e)}function Hu(e,t,s){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pt(t)&&(e.setupState=Tg(t)),om(e)}function om(e,t,s){const n=e.type;e.render||(e.render=n.render||as);{const i=Lo(e);xs();try{dv(e)}finally{Ss(),i()}}}const Yv={get(e,t){return ee(e,"get",""),e[t]}};function Kv(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Yv),slots:e.slots,emit:e.emit,expose:t}}function ma(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Tg($b(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ao)return ao[s](e)},has(t,s){return s in t||s in ao}})):e.proxy}function Zv(e){return ct(e)&&"__vccOpts"in e}const G=(e,t)=>Wb(e,t,ko),Gv="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jl;const qu=typeof window<"u"&&window.trustedTypes;if(qu)try{jl=qu.createPolicy("vue",{createHTML:e=>e})}catch{}const rm=jl?e=>jl.createHTML(e):e=>e,Xv="http://www.w3.org/2000/svg",Qv="http://www.w3.org/1998/Math/MathML",ys=typeof document<"u"?document:null,Ju=ys&&ys.createElement("template"),t0={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ys.createElementNS(Xv,e):t==="mathml"?ys.createElementNS(Qv,e):s?ys.createElement(e,{is:s}):ys.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ys.createTextNode(e),createComment:e=>ys.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ys.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{Ju.innerHTML=rm(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Ju.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},As="transition",$i="animation",mi=Symbol("_vtc"),am={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},e0=qt({},Gb,am),ln=(e,t=[])=>{X(e)?e.forEach(s=>s(...t)):e&&e(...t)},Yu=e=>e?X(e)?e.some(t=>t.length>1):e.length>1:!1;function s0(e){const t={};for(const M in e)M in am||(t[M]=e[M]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:o=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=o,appearActiveClass:c=r,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=e,g=n0(i),m=g&&g[0],p=g&&g[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:v,onLeave:w,onLeaveCancelled:S,onBeforeAppear:D=y,onAppear:E=b,onAppearCancelled:R=v}=t,I=(M,W,et,nt)=>{M._enterCancelled=nt,Ls(M,W?u:a),Ls(M,W?c:r),et&&et()},B=(M,W)=>{M._isLeaving=!1,Ls(M,d),Ls(M,f),Ls(M,h),W&&W()},L=M=>(W,et)=>{const nt=M?E:b,ot=()=>I(W,M,et);ln(nt,[W,ot]),Ku(()=>{Ls(W,M?l:o),ts(W,M?u:a),Yu(nt)||Zu(W,n,m,ot)})};return qt(t,{onBeforeEnter(M){ln(y,[M]),ts(M,o),ts(M,r)},onBeforeAppear(M){ln(D,[M]),ts(M,l),ts(M,c)},onEnter:L(!1),onAppear:L(!0),onLeave(M,W){M._isLeaving=!0;const et=()=>B(M,W);ts(M,d),M._enterCancelled?(ts(M,h),Bl()):(Bl(),ts(M,h)),Ku(()=>{M._isLeaving&&(Ls(M,d),ts(M,f),Yu(w)||Zu(M,n,p,et))}),ln(w,[M,et])},onEnterCancelled(M){I(M,!1,void 0,!0),ln(v,[M])},onAppearCancelled(M){I(M,!0,void 0,!0),ln(R,[M])},onLeaveCancelled(M){B(M),ln(S,[M])}})}function n0(e){if(e==null)return null;if(Pt(e))return[Va(e.enter),Va(e.leave)];{const t=Va(e);return[t,t]}}function Va(e){return lb(e)}function ts(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[mi]||(e[mi]=new Set)).add(t)}function Ls(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[mi];s&&(s.delete(t),s.size||(e[mi]=void 0))}function Ku(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let i0=0;function Zu(e,t,s,n){const i=e._endId=++i0,o=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:r,timeout:a,propCount:l}=lm(e,t);if(!r)return n();const c=r+"end";let u=0;const d=()=>{e.removeEventListener(c,h),o()},h=f=>{f.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,h)}function lm(e,t){const s=window.getComputedStyle(e),n=g=>(s[g]||"").split(", "),i=n(`${As}Delay`),o=n(`${As}Duration`),r=Gu(i,o),a=n(`${$i}Delay`),l=n(`${$i}Duration`),c=Gu(a,l);let u=null,d=0,h=0;t===As?r>0&&(u=As,d=r,h=o.length):t===$i?c>0&&(u=$i,d=c,h=l.length):(d=Math.max(r,c),u=d>0?r>c?As:$i:null,h=u?u===As?o.length:l.length:0);const f=u===As&&/\b(transform|all)(,|$)/.test(n(`${As}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Gu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Xu(s)+Xu(e[n])))}function Xu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Bl(){return document.body.offsetHeight}function o0(e,t,s){const n=e[mi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Ur=Symbol("_vod"),cm=Symbol("_vsh"),r0={beforeMount(e,{value:t},{transition:s}){e[Ur]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Fi(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Fi(e,!0),n.enter(e)):n.leave(e,()=>{Fi(e,!1)}):Fi(e,t))},beforeUnmount(e,{value:t}){Fi(e,t)}};function Fi(e,t){e.style.display=t?e[Ur]:"none",e[cm]=!t}const a0=Symbol(""),l0=/(^|;)\s*display\s*:/;function c0(e,t,s){const n=e.style,i=Nt(s);let o=!1;if(s&&!i){if(t)if(Nt(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Mr(n,a,"")}else for(const r in t)s[r]==null&&Mr(n,r,"");for(const r in s)r==="display"&&(o=!0),Mr(n,r,s[r])}else if(i){if(t!==s){const r=n[a0];r&&(s+=";"+r),n.cssText=s,o=l0.test(s)}}else t&&e.removeAttribute("style");Ur in e&&(e[Ur]=o?n.display:"",e[cm]&&(n.display="none"))}const Qu=/\s*!important$/;function Mr(e,t,s){if(X(s))s.forEach(n=>Mr(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=u0(e,t);Qu.test(s)?e.setProperty(sn(n),s.replace(Qu,""),"important"):e[n]=s}}const td=["Webkit","Moz","ms"],Ha={};function u0(e,t){const s=Ha[t];if(s)return s;let n=Gs(t);if(n!=="filter"&&n in e)return Ha[t]=n;n=rg(n);for(let i=0;i<td.length;i++){const o=td[i]+n;if(o in e)return Ha[t]=o}return t}const ed="http://www.w3.org/1999/xlink";function sd(e,t,s,n,i,o=gb(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ed,t.slice(6,t.length)):e.setAttributeNS(ed,t,s):s==null||o&&!ag(s)?e.removeAttribute(t):e.setAttribute(t,o?"":Os(s)?String(s):s)}function nd(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?rm(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=ag(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function ei(e,t,s,n){e.addEventListener(t,s,n)}function d0(e,t,s,n){e.removeEventListener(t,s,n)}const id=Symbol("_vei");function h0(e,t,s,n,i=null){const o=e[id]||(e[id]={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=f0(t);if(n){const c=o[t]=p0(n,i);ei(e,a,c,l)}else r&&(d0(e,a,r,l),o[t]=void 0)}}const od=/(?:Once|Passive|Capture)$/;function f0(e){let t;if(od.test(e)){t={};let n;for(;n=e.match(od);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):sn(e.slice(2)),t]}let qa=0;const g0=Promise.resolve(),m0=()=>qa||(g0.then(()=>qa=0),qa=Date.now());function p0(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;qe(y0(n,s.value),t,5,[n])};return s.value=e,s.attached=m0(),s}function y0(e,t){if(X(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const rd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,b0=(e,t,s,n,i,o)=>{const r=i==="svg";t==="class"?o0(e,n,r):t==="style"?c0(e,s,n):ra(t)?Oc(t)||h0(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):v0(e,t,n,r))?(nd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sd(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(n))?nd(e,Gs(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),sd(e,t,n,r))};function v0(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&rd(t)&&ct(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return rd(t)&&Nt(s)?!1:t in e}const um=new WeakMap,dm=new WeakMap,zr=Symbol("_moveCb"),ad=Symbol("_enterCb"),_0=e=>(delete e.props.mode,e),w0=_0({name:"TransitionGroup",props:qt({},e0,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=nm(),n=Zb();let i,o;return Rg(()=>{if(!i.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!O0(i[0].el,s.vnode.el,r)){i=[];return}i.forEach(S0),i.forEach(k0);const a=i.filter(T0);Bl(),a.forEach(l=>{const c=l.el,u=c.style;ts(c,r),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[zr]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[zr]=null,Ls(c,r))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const r=_t(e),a=s0(r);let l=r.tag||ft;if(i=[],o)for(let c=0;c<o.length;c++){const u=o[c];u.el&&u.el instanceof Element&&(i.push(u),xo(u,Pl(u,a,n,s)),um.set(u,u.el.getBoundingClientRect()))}o=t.default?Ag(t.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&xo(u,Pl(u,a,n,s))}return ht(l,null,o)}}}),x0=w0;function S0(e){const t=e.el;t[zr]&&t[zr](),t[ad]&&t[ad]()}function k0(e){dm.set(e,e.el.getBoundingClientRect())}function T0(e){const t=um.get(e),s=dm.get(e),n=t.left-s.left,i=t.top-s.top;if(n||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${i}px)`,o.transitionDuration="0s",e}}function O0(e,t,s){const n=e.cloneNode(),i=e[mi];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(n);const{hasTransform:r}=lm(n);return o.removeChild(n),r}const ld=e=>{const t=e.props["onUpdate:modelValue"]||!1;return X(t)?s=>Or(t,s):t};function D0(e){e.target.composing=!0}function cd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ja=Symbol("_assign"),hm={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[Ja]=ld(i);const o=n||i.props&&i.props.type==="number";ei(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=Dl(a)),e[Ja](a)}),s&&ei(e,"change",()=>{e.value=e.value.trim()}),t||(ei(e,"compositionstart",D0),ei(e,"compositionend",cd),ei(e,"change",cd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(e[Ja]=ld(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?Dl(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},C0=["ctrl","shift","alt","meta"],M0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>C0.some(s=>e[`${s}Key`]&&!t.includes(s))},Ya=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<t.length;r++){const a=M0[t[r]];if(a&&a(i,t))return}return e(i,...o)})},E0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ud=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const o=sn(i.key);if(t.some(r=>r===o||E0[r]===o))return e(i)})},A0=qt({patchProp:b0},t0);let dd;function I0(){return dd||(dd=Tv(A0))}const P0=(...e)=>{const t=I0().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=R0(n);if(!i)return;const o=t._component;!ct(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,L0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function L0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function R0(e){return Nt(e)?document.querySelector(e):e}class An extends Error{}class $0 extends An{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class F0 extends An{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class N0 extends An{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ii extends An{}class fm extends An{constructor(t){super(`Invalid unit ${t}`)}}class te extends An{}class Is extends An{constructor(){super("Zone is an abstract class")}}const V="numeric",Je="short",Me="long",Vr={year:V,month:V,day:V},gm={year:V,month:Je,day:V},j0={year:V,month:Je,day:V,weekday:Je},mm={year:V,month:Me,day:V},pm={year:V,month:Me,day:V,weekday:Me},ym={hour:V,minute:V},bm={hour:V,minute:V,second:V},vm={hour:V,minute:V,second:V,timeZoneName:Je},_m={hour:V,minute:V,second:V,timeZoneName:Me},wm={hour:V,minute:V,hourCycle:"h23"},xm={hour:V,minute:V,second:V,hourCycle:"h23"},Sm={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:Je},km={hour:V,minute:V,second:V,hourCycle:"h23",timeZoneName:Me},Tm={year:V,month:V,day:V,hour:V,minute:V},Om={year:V,month:V,day:V,hour:V,minute:V,second:V},Dm={year:V,month:Je,day:V,hour:V,minute:V},Cm={year:V,month:Je,day:V,hour:V,minute:V,second:V},B0={year:V,month:Je,day:V,weekday:Je,hour:V,minute:V},Mm={year:V,month:Me,day:V,hour:V,minute:V,timeZoneName:Je},Em={year:V,month:Me,day:V,hour:V,minute:V,second:V,timeZoneName:Je},Am={year:V,month:Me,day:V,weekday:Me,hour:V,minute:V,timeZoneName:Me},Im={year:V,month:Me,day:V,weekday:Me,hour:V,minute:V,second:V,timeZoneName:Me};class Ro{get type(){throw new Is}get name(){throw new Is}get ianaName(){return this.name}get isUniversal(){throw new Is}offsetName(t,s){throw new Is}formatOffset(t,s){throw new Is}offset(t){throw new Is}equals(t){throw new Is}get isValid(){throw new Is}}let Ka=null;class pa extends Ro{static get instance(){return Ka===null&&(Ka=new pa),Ka}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return zm(t,s,n)}formatOffset(t,s){return co(this.offset(t),s)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const Wl=new Map;function W0(e){let t=Wl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Wl.set(e,t)),t}const U0={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function z0(e,t){const s=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,i,o,r,a,l,c,u]=n;return[r,i,o,a,l,c,u]}function V0(e,t){const s=e.formatToParts(t),n=[];for(let i=0;i<s.length;i++){const{type:o,value:r}=s[i],a=U0[o];o==="era"?n[a]=r:Q(a)||(n[a]=parseInt(r,10))}return n}const Za=new Map;class ks extends Ro{static create(t){let s=Za.get(t);return s===void 0&&Za.set(t,s=new ks(t)),s}static resetCache(){Za.clear(),Wl.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=ks.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return zm(t,s,n,this.name)}formatOffset(t,s){return co(this.offset(t),s)}offset(t){if(!this.valid)return NaN;const s=new Date(t);if(isNaN(s))return NaN;const n=W0(this.name);let[i,o,r,a,l,c,u]=n.formatToParts?V0(n,s):z0(n,s);a==="BC"&&(i=-Math.abs(i)+1);const h=ba({year:i,month:o,day:r,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+s;const g=f%1e3;return f-=g>=0?g:1e3+g,(h-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let hd={};function H0(e,t={}){const s=JSON.stringify([e,t]);let n=hd[s];return n||(n=new Intl.ListFormat(e,t),hd[s]=n),n}const Ul=new Map;function zl(e,t={}){const s=JSON.stringify([e,t]);let n=Ul.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(e,t),Ul.set(s,n)),n}const Vl=new Map;function q0(e,t={}){const s=JSON.stringify([e,t]);let n=Vl.get(s);return n===void 0&&(n=new Intl.NumberFormat(e,t),Vl.set(s,n)),n}const Hl=new Map;function J0(e,t={}){const{base:s,...n}=t,i=JSON.stringify([e,n]);let o=Hl.get(i);return o===void 0&&(o=new Intl.RelativeTimeFormat(e,t),Hl.set(i,o)),o}let Ki=null;function Y0(){return Ki||(Ki=new Intl.DateTimeFormat().resolvedOptions().locale,Ki)}const ql=new Map;function Pm(e){let t=ql.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),ql.set(e,t)),t}const Jl=new Map;function K0(e){let t=Jl.get(e);if(!t){const s=new Intl.Locale(e);t="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in t||(t={...Lm,...t}),Jl.set(e,t)}return t}function Z0(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const s=e.indexOf("-u-");if(s===-1)return[e];{let n,i;try{n=zl(e).resolvedOptions(),i=e}catch{const l=e.substring(0,s);n=zl(l).resolvedOptions(),i=l}const{numberingSystem:o,calendar:r}=n;return[i,o,r]}}function G0(e,t,s){return(s||t)&&(e.includes("-u-")||(e+="-u"),s&&(e+=`-ca-${s}`),t&&(e+=`-nu-${t}`)),e}function X0(e){const t=[];for(let s=1;s<=12;s++){const n=O.utc(2009,s,1);t.push(e(n))}return t}function Q0(e){const t=[];for(let s=1;s<=7;s++){const n=O.utc(2016,11,13+s);t.push(e(n))}return t}function er(e,t,s,n){const i=e.listingMode();return i==="error"?null:i==="en"?s(t):n(t)}function t_(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||Pm(e.locale).numberingSystem==="latn"}class e_{constructor(t,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:o,...r}=n;if(!s||Object.keys(r).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=q0(t,a)}}format(t){if(this.inf){const s=this.floor?Math.floor(t):t;return this.inf.format(s)}else{const s=this.floor?Math.floor(t):qc(t,3);return jt(s,this.padTo)}}}class s_{constructor(t,s,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const r=-1*(t.offset/60),a=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;t.offset!==0&&ks.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=zl(s,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class n_{constructor(t,s,n){this.opts={style:"long",...n},!s&&Wm()&&(this.rtf=J0(t,n))}format(t,s){return this.rtf?this.rtf.format(t,s):T_(s,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,s){return this.rtf?this.rtf.formatToParts(t,s):[]}}const Lm={firstDay:1,minimalDays:4,weekend:[6,7]};class xt{static fromOpts(t){return xt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,s,n,i,o=!1){const r=t||Rt.defaultLocale,a=r||(o?"en-US":Y0()),l=s||Rt.defaultNumberingSystem,c=n||Rt.defaultOutputCalendar,u=Kl(i)||Rt.defaultWeekSettings;return new xt(a,l,c,u,r)}static resetCache(){Ki=null,Ul.clear(),Vl.clear(),Hl.clear(),ql.clear(),Jl.clear()}static fromObject({locale:t,numberingSystem:s,outputCalendar:n,weekSettings:i}={}){return xt.create(t,s,n,i)}constructor(t,s,n,i,o){const[r,a,l]=Z0(t);this.locale=r,this.numberingSystem=s||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=G0(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=t_(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&s?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:xt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Kl(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,s=!1){return er(this,t,qm,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");s&=!n;const i=s?{month:t,day:"numeric"}:{month:t},o=s?"format":"standalone";if(!this.monthsCache[o][t]){const r=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[o][t]=X0(r)}return this.monthsCache[o][t]})}weekdays(t,s=!1){return er(this,t,Km,()=>{const n=s?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=s?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=Q0(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return er(this,void 0,()=>Zm,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[O.utc(2016,11,13,9),O.utc(2016,11,13,19)].map(s=>this.extract(s,t,"dayperiod"))}return this.meridiemCache})}eras(t){return er(this,t,Gm,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[O.utc(-40,1,1),O.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[t]})}extract(t,s,n){const i=this.dtFormatter(t,s),o=i.formatToParts(),r=o.find(a=>a.type.toLowerCase()===n);return r?r.value:null}numberFormatter(t={}){return new e_(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,s={}){return new s_(t,this.intl,s)}relFormatter(t={}){return new n_(this.intl,this.isEnglish(),t)}listFormatter(t={}){return H0(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Pm(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Um()?K0(this.locale):Lm}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Ga=null;class ue extends Ro{static get utcInstance(){return Ga===null&&(Ga=new ue(0)),Ga}static instance(t){return t===0?ue.utcInstance:new ue(t)}static parseSpecifier(t){if(t){const s=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new ue(va(s[1],s[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${co(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${co(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,s){return co(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class i_ extends Ro{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ws(e,t){if(Q(e)||e===null)return t;if(e instanceof Ro)return e;if(u_(e)){const s=e.toLowerCase();return s==="default"?t:s==="local"||s==="system"?pa.instance:s==="utc"||s==="gmt"?ue.utcInstance:ue.parseSpecifier(s)||ks.create(e)}else return Ys(e)?ue.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new i_(e)}const Uc={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},fd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},o_=Uc.hanidec.replace(/[\[|\]]/g,"").split("");function r_(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(e[s].search(Uc.hanidec)!==-1)t+=o_.indexOf(e[s]);else for(const i in fd){const[o,r]=fd[i];n>=o&&n<=r&&(t+=n-o)}}return parseInt(t,10)}else return t}const Yl=new Map;function a_(){Yl.clear()}function Be({numberingSystem:e},t=""){const s=e||"latn";let n=Yl.get(s);n===void 0&&(n=new Map,Yl.set(s,n));let i=n.get(t);return i===void 0&&(i=new RegExp(`${Uc[s]}${t}`),n.set(t,i)),i}let gd=()=>Date.now(),md="system",pd=null,yd=null,bd=null,vd=60,_d,wd=null;class Rt{static get now(){return gd}static set now(t){gd=t}static set defaultZone(t){md=t}static get defaultZone(){return Ws(md,pa.instance)}static get defaultLocale(){return pd}static set defaultLocale(t){pd=t}static get defaultNumberingSystem(){return yd}static set defaultNumberingSystem(t){yd=t}static get defaultOutputCalendar(){return bd}static set defaultOutputCalendar(t){bd=t}static get defaultWeekSettings(){return wd}static set defaultWeekSettings(t){wd=Kl(t)}static get twoDigitCutoffYear(){return vd}static set twoDigitCutoffYear(t){vd=t%100}static get throwOnInvalid(){return _d}static set throwOnInvalid(t){_d=t}static resetCaches(){xt.resetCache(),ks.resetCache(),O.resetCache(),a_()}}class Ve{constructor(t,s){this.reason=t,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Rm=[0,31,59,90,120,151,181,212,243,273,304,334],$m=[0,31,60,91,121,152,182,213,244,274,305,335];function Re(e,t){return new Ve("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function zc(e,t,s){const n=new Date(Date.UTC(e,t-1,s));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function Fm(e,t,s){return s+($o(e)?$m:Rm)[t-1]}function Nm(e,t){const s=$o(e)?$m:Rm,n=s.findIndex(o=>o<t),i=t-s[n];return{month:n+1,day:i}}function Vc(e,t){return(e-t+7)%7+1}function Hr(e,t=4,s=1){const{year:n,month:i,day:o}=e,r=Fm(n,i,o),a=Vc(zc(n,i,o),s);let l=Math.floor((r-a+14-t)/7),c;return l<1?(c=n-1,l=To(c,t,s)):l>To(n,t,s)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,..._a(e)}}function xd(e,t=4,s=1){const{weekYear:n,weekNumber:i,weekday:o}=e,r=Vc(zc(n,1,t),s),a=hi(n);let l=i*7+o-r-7+t,c;l<1?(c=n-1,l+=hi(c)):l>a?(c=n+1,l-=hi(n)):c=n;const{month:u,day:d}=Nm(c,l);return{year:c,month:u,day:d,..._a(e)}}function Xa(e){const{year:t,month:s,day:n}=e,i=Fm(t,s,n);return{year:t,ordinal:i,..._a(e)}}function Sd(e){const{year:t,ordinal:s}=e,{month:n,day:i}=Nm(t,s);return{year:t,month:n,day:i,..._a(e)}}function kd(e,t){if(!Q(e.localWeekday)||!Q(e.localWeekNumber)||!Q(e.localWeekYear)){if(!Q(e.weekday)||!Q(e.weekNumber)||!Q(e.weekYear))throw new ii("Cannot mix locale-based week fields with ISO-based week fields");return Q(e.localWeekday)||(e.weekday=e.localWeekday),Q(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Q(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function l_(e,t=4,s=1){const n=ya(e.weekYear),i=$e(e.weekNumber,1,To(e.weekYear,t,s)),o=$e(e.weekday,1,7);return n?i?o?!1:Re("weekday",e.weekday):Re("week",e.weekNumber):Re("weekYear",e.weekYear)}function c_(e){const t=ya(e.year),s=$e(e.ordinal,1,hi(e.year));return t?s?!1:Re("ordinal",e.ordinal):Re("year",e.year)}function jm(e){const t=ya(e.year),s=$e(e.month,1,12),n=$e(e.day,1,qr(e.year,e.month));return t?s?n?!1:Re("day",e.day):Re("month",e.month):Re("year",e.year)}function Bm(e){const{hour:t,minute:s,second:n,millisecond:i}=e,o=$e(t,0,23)||t===24&&s===0&&n===0&&i===0,r=$e(s,0,59),a=$e(n,0,59),l=$e(i,0,999);return o?r?a?l?!1:Re("millisecond",i):Re("second",n):Re("minute",s):Re("hour",t)}function Q(e){return typeof e>"u"}function Ys(e){return typeof e=="number"}function ya(e){return typeof e=="number"&&e%1===0}function u_(e){return typeof e=="string"}function d_(e){return Object.prototype.toString.call(e)==="[object Date]"}function Wm(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Um(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function h_(e){return Array.isArray(e)?e:[e]}function Td(e,t,s){if(e.length!==0)return e.reduce((n,i)=>{const o=[t(i),i];return n&&s(n[0],o[0])===n[0]?n:o},null)[1]}function f_(e,t){return t.reduce((s,n)=>(s[n]=e[n],s),{})}function pi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kl(e){if(e==null)return null;if(typeof e!="object")throw new te("Week settings must be an object");if(!$e(e.firstDay,1,7)||!$e(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!$e(t,1,7)))throw new te("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function $e(e,t,s){return ya(e)&&e>=t&&e<=s}function g_(e,t){return e-t*Math.floor(e/t)}function jt(e,t=2){const s=e<0;let n;return s?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function js(e){if(!(Q(e)||e===null||e===""))return parseInt(e,10)}function cn(e){if(!(Q(e)||e===null||e===""))return parseFloat(e)}function Hc(e){if(!(Q(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function qc(e,t,s="round"){const n=10**t;switch(s){case"expand":return e>0?Math.ceil(e*n)/n:Math.floor(e*n)/n;case"trunc":return Math.trunc(e*n)/n;case"round":return Math.round(e*n)/n;case"floor":return Math.floor(e*n)/n;case"ceil":return Math.ceil(e*n)/n;default:throw new RangeError(`Value rounding ${s} is out of range`)}}function $o(e){return e%4===0&&(e%100!==0||e%400===0)}function hi(e){return $o(e)?366:365}function qr(e,t){const s=g_(t-1,12)+1,n=e+(t-s)/12;return s===2?$o(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function ba(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Od(e,t,s){return-Vc(zc(e,1,t),s)+t-1}function To(e,t=4,s=1){const n=Od(e,t,s),i=Od(e+1,t,s);return(hi(e)-n+i)/7}function Zl(e){return e>99?e:e>Rt.twoDigitCutoffYear?1900+e:2e3+e}function zm(e,t,s,n=null){const i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);const r={timeZoneName:t,...o},a=new Intl.DateTimeFormat(s,r).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function va(e,t){let s=parseInt(e,10);Number.isNaN(s)&&(s=0);const n=parseInt(t,10)||0,i=s<0||Object.is(s,-0)?-n:n;return s*60+i}function Vm(e){const t=Number(e);if(typeof e=="boolean"||e===""||!Number.isFinite(t))throw new te(`Invalid unit value ${e}`);return t}function Jr(e,t){const s={};for(const n in e)if(pi(e,n)){const i=e[n];if(i==null)continue;s[t(n)]=Vm(i)}return s}function co(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${jt(s,2)}:${jt(n,2)}`;case"narrow":return`${i}${s}${n>0?`:${n}`:""}`;case"techie":return`${i}${jt(s,2)}${jt(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function _a(e){return f_(e,["hour","minute","second","millisecond"])}const m_=["January","February","March","April","May","June","July","August","September","October","November","December"],Hm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p_=["J","F","M","A","M","J","J","A","S","O","N","D"];function qm(e){switch(e){case"narrow":return[...p_];case"short":return[...Hm];case"long":return[...m_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Jm=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ym=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],y_=["M","T","W","T","F","S","S"];function Km(e){switch(e){case"narrow":return[...y_];case"short":return[...Ym];case"long":return[...Jm];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Zm=["AM","PM"],b_=["Before Christ","Anno Domini"],v_=["BC","AD"],__=["B","A"];function Gm(e){switch(e){case"narrow":return[...__];case"short":return[...v_];case"long":return[...b_];default:return null}}function w_(e){return Zm[e.hour<12?0:1]}function x_(e,t){return Km(t)[e.weekday-1]}function S_(e,t){return qm(t)[e.month-1]}function k_(e,t){return Gm(t)[e.year<0?0:1]}function T_(e,t,s="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(s==="auto"&&o){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${i[e][0]}`;case-1:return d?"yesterday":`last ${i[e][0]}`;case 0:return d?"today":`this ${i[e][0]}`}}const r=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],u=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return r?`${a} ${u} ago`:`in ${a} ${u}`}function Dd(e,t){let s="";for(const n of e)n.literal?s+=n.val:s+=t(n.val);return s}const O_={D:Vr,DD:gm,DDD:mm,DDDD:pm,t:ym,tt:bm,ttt:vm,tttt:_m,T:wm,TT:xm,TTT:Sm,TTTT:km,f:Tm,ff:Dm,fff:Mm,ffff:Am,F:Om,FF:Cm,FFF:Em,FFFF:Im};class se{static create(t,s={}){return new se(t,s)}static parseFormat(t){let s=null,n="",i=!1;const o=[];for(let r=0;r<t.length;r++){const a=t.charAt(r);a==="'"?((n.length>0||i)&&o.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),s=null,n="",i=!i):i||a===s?n+=a:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=a,s=a)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(t){return O_[t]}constructor(t,s){this.opts=s,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...s}).format()}dtFormatter(t,s={}){return this.loc.dtFormatter(t,{...this.opts,...s})}formatDateTime(t,s){return this.dtFormatter(t,s).format()}formatDateTimeParts(t,s){return this.dtFormatter(t,s).formatToParts()}formatInterval(t,s){return this.dtFormatter(t.start,s).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,s){return this.dtFormatter(t,s).resolvedOptions()}num(t,s=0,n=void 0){if(this.opts.forceSimple)return jt(t,s);const i={...this.opts};return s>0&&(i.padTo=s),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,s){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(f,g)=>this.loc.extract(t,f,g),r=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>n?w_(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>n?S_(t,f):o(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>n?x_(t,f):o(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const g=se.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(t,g):f},d=f=>n?k_(t,f):o({era:f},"era"),h=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?o({day:"numeric"},"day"):this.num(t.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(t.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(t.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(f)}};return Dd(se.parseFormat(s),h)}formatDurationFromString(t,s){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},o=(u,d)=>h=>{const f=i(h);if(f){const g=d.isNegativeDuration&&f!==d.largestUnit?n:1;let m;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?m="never":this.opts.signMode==="all"?m="always":m="auto",this.num(u.get(f)*g,h.length,m)}else return h},r=se.parseFormat(s),a=r.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),l=t.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Dd(r,o(l,c))}}const Xm=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xi(...e){const t=e.reduce((s,n)=>s+n.source,"");return RegExp(`^${t}$`)}function Si(...e){return t=>e.reduce(([s,n,i],o)=>{const[r,a,l]=o(t,i);return[{...s,...r},a||n,l]},[{},null,1]).slice(0,2)}function ki(e,...t){if(e==null)return[null,null];for(const[s,n]of t){const i=s.exec(e);if(i)return n(i)}return[null,null]}function Qm(...e){return(t,s)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=js(t[s+i]);return[n,null,s+i]}}const tp=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,D_=`(?:${tp.source}?(?:\\[(${Xm.source})\\])?)?`,Jc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ep=RegExp(`${Jc.source}${D_}`),Yc=RegExp(`(?:[Tt]${ep.source})?`),C_=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,M_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,E_=/(\d{4})-?(\d{3})/,A_=Qm("weekYear","weekNumber","weekDay"),I_=Qm("year","ordinal"),P_=/(\d{4})-(\d\d)-(\d\d)/,sp=RegExp(`${Jc.source} ?(?:${tp.source}|(${Xm.source}))?`),L_=RegExp(`(?: ${sp.source})?`);function fi(e,t,s){const n=e[t];return Q(n)?s:js(n)}function R_(e,t){return[{year:fi(e,t),month:fi(e,t+1,1),day:fi(e,t+2,1)},null,t+3]}function Ti(e,t){return[{hours:fi(e,t,0),minutes:fi(e,t+1,0),seconds:fi(e,t+2,0),milliseconds:Hc(e[t+3])},null,t+4]}function Fo(e,t){const s=!e[t]&&!e[t+1],n=va(e[t+1],e[t+2]),i=s?null:ue.instance(n);return[{},i,t+3]}function No(e,t){const s=e[t]?ks.create(e[t]):null;return[{},s,t+1]}const $_=RegExp(`^T?${Jc.source}$`),F_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function N_(e){const[t,s,n,i,o,r,a,l,c]=e,u=t[0]==="-",d=l&&l[0]==="-",h=(f,g=!1)=>f!==void 0&&(g||f&&u)?-f:f;return[{years:h(cn(s)),months:h(cn(n)),weeks:h(cn(i)),days:h(cn(o)),hours:h(cn(r)),minutes:h(cn(a)),seconds:h(cn(l),l==="-0"),milliseconds:h(Hc(c),d)}]}const j_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Kc(e,t,s,n,i,o,r){const a={year:t.length===2?Zl(js(t)):js(t),month:Hm.indexOf(s)+1,day:js(n),hour:js(i),minute:js(o)};return r&&(a.second=js(r)),e&&(a.weekday=e.length>3?Jm.indexOf(e)+1:Ym.indexOf(e)+1),a}const B_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function W_(e){const[,t,s,n,i,o,r,a,l,c,u,d]=e,h=Kc(t,i,n,s,o,r,a);let f;return l?f=j_[l]:c?f=0:f=va(u,d),[h,new ue(f)]}function U_(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const z_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,V_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,H_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Cd(e){const[,t,s,n,i,o,r,a]=e;return[Kc(t,i,n,s,o,r,a),ue.utcInstance]}function q_(e){const[,t,s,n,i,o,r,a]=e;return[Kc(t,a,s,n,i,o,r),ue.utcInstance]}const J_=xi(C_,Yc),Y_=xi(M_,Yc),K_=xi(E_,Yc),Z_=xi(ep),np=Si(R_,Ti,Fo,No),G_=Si(A_,Ti,Fo,No),X_=Si(I_,Ti,Fo,No),Q_=Si(Ti,Fo,No);function tw(e){return ki(e,[J_,np],[Y_,G_],[K_,X_],[Z_,Q_])}function ew(e){return ki(U_(e),[B_,W_])}function sw(e){return ki(e,[z_,Cd],[V_,Cd],[H_,q_])}function nw(e){return ki(e,[F_,N_])}const iw=Si(Ti);function ow(e){return ki(e,[$_,iw])}const rw=xi(P_,L_),aw=xi(sp),lw=Si(Ti,Fo,No);function cw(e){return ki(e,[rw,np],[aw,lw])}const Md="Invalid Duration",ip={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},uw={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...ip},Ie=146097/400,jn=146097/4800,dw={years:{quarters:4,months:12,weeks:Ie/7,days:Ie,hours:Ie*24,minutes:Ie*24*60,seconds:Ie*24*60*60,milliseconds:Ie*24*60*60*1e3},quarters:{months:3,weeks:Ie/28,days:Ie/4,hours:Ie*24/4,minutes:Ie*24*60/4,seconds:Ie*24*60*60/4,milliseconds:Ie*24*60*60*1e3/4},months:{weeks:jn/7,days:jn,hours:jn*24,minutes:jn*24*60,seconds:jn*24*60*60,milliseconds:jn*24*60*60*1e3},...ip},_n=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],hw=_n.slice(0).reverse();function hs(e,t,s=!1){const n={values:s?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new pt(n)}function op(e,t){let s=t.milliseconds??0;for(const n of hw.slice(1))t[n]&&(s+=t[n]*e[n].milliseconds);return s}function Ed(e,t){const s=op(e,t)<0?-1:1;_n.reduceRight((n,i)=>{if(Q(t[i]))return n;if(n){const o=t[n]*s,r=e[i][n],a=Math.floor(o/r);t[i]+=a*s,t[n]-=a*r*s}return i},null),_n.reduce((n,i)=>{if(Q(t[i]))return n;if(n){const o=t[n]%1;t[n]-=o,t[i]+=o*e[n][i]}return i},null)}function Ad(e){const t={};for(const[s,n]of Object.entries(e))n!==0&&(t[s]=n);return t}class pt{constructor(t){const s=t.conversionAccuracy==="longterm"||!1;let n=s?dw:uw;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||xt.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,s){return pt.fromObject({milliseconds:t},s)}static fromObject(t,s={}){if(t==null||typeof t!="object")throw new te(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new pt({values:Jr(t,pt.normalizeUnit),loc:xt.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(t){if(Ys(t))return pt.fromMillis(t);if(pt.isDuration(t))return t;if(typeof t=="object")return pt.fromObject(t);throw new te(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,s){const[n]=nw(t);return n?pt.fromObject(n,s):pt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,s){const[n]=ow(t);return n?pt.fromObject(n,s):pt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,s=null){if(!t)throw new te("need to specify a reason the Duration is invalid");const n=t instanceof Ve?t:new Ve(t,s);if(Rt.throwOnInvalid)throw new N0(n);return new pt({invalid:n})}static normalizeUnit(t){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!s)throw new fm(t);return s}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?se.create(this.loc,n).formatDurationFromString(this,t):Md}toHuman(t={}){if(!this.isValid)return Md;const s=t.showZeros!==!1,n=_n.map(i=>{const o=this.values[i];return Q(o)||o===0&&!s?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(o)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=qc(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},O.fromMillis(s,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?op(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const s=pt.fromDurationLike(t),n={};for(const i of _n)(pi(s.values,i)||pi(this.values,i))&&(n[i]=s.get(i)+this.get(i));return hs(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const s=pt.fromDurationLike(t);return this.plus(s.negate())}mapUnits(t){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=Vm(t(this.values[n],n));return hs(this,{values:s},!0)}get(t){return this[pt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const s={...this.values,...Jr(t,pt.normalizeUnit)};return hs(this,{values:s})}reconfigure({locale:t,numberingSystem:s,conversionAccuracy:n,matrix:i}={}){const r={loc:this.loc.clone({locale:t,numberingSystem:s}),matrix:i,conversionAccuracy:n};return hs(this,r)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Ed(this.matrix,t),hs(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Ad(this.normalize().shiftToAll().toObject());return hs(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(r=>pt.normalizeUnit(r));const s={},n={},i=this.toObject();let o;for(const r of _n)if(t.indexOf(r)>=0){o=r;let a=0;for(const c in n)a+=this.matrix[c][r]*n[c],n[c]=0;Ys(i[r])&&(a+=i[r]);const l=Math.trunc(a);s[r]=l,n[r]=(a*1e3-l*1e3)/1e3}else Ys(i[r])&&(n[r]=i[r]);for(const r in n)n[r]!==0&&(s[o]+=r===o?n[r]:n[r]/this.matrix[o][r]);return Ed(this.matrix,s),hs(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=this.values[s]===0?0:-this.values[s];return hs(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=Ad(this.values);return hs(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function s(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of _n)if(!s(this.values[n],t.values[n]))return!1;return!0}}const Bn="Invalid Interval";function fw(e,t){return!e||!e.isValid?Lt.invalid("missing or invalid start"):!t||!t.isValid?Lt.invalid("missing or invalid end"):t<e?Lt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Lt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,s=null){if(!t)throw new te("need to specify a reason the Interval is invalid");const n=t instanceof Ve?t:new Ve(t,s);if(Rt.throwOnInvalid)throw new F0(n);return new Lt({invalid:n})}static fromDateTimes(t,s){const n=Ni(t),i=Ni(s),o=fw(n,i);return o??new Lt({start:n,end:i})}static after(t,s){const n=pt.fromDurationLike(s),i=Ni(t);return Lt.fromDateTimes(i,i.plus(n))}static before(t,s){const n=pt.fromDurationLike(s),i=Ni(t);return Lt.fromDateTimes(i.minus(n),i)}static fromISO(t,s){const[n,i]=(t||"").split("/",2);if(n&&i){let o,r;try{o=O.fromISO(n,s),r=o.isValid}catch{r=!1}let a,l;try{a=O.fromISO(i,s),l=a.isValid}catch{l=!1}if(r&&l)return Lt.fromDateTimes(o,a);if(r){const c=pt.fromISO(i,s);if(c.isValid)return Lt.after(o,c)}else if(l){const c=pt.fromISO(n,s);if(c.isValid)return Lt.before(a,c)}}return Lt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(t,s);let i;return s?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,s),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:s}={}){return this.isValid?Lt.fromDateTimes(t||this.s,s||this.e):this}splitAt(...t){if(!this.isValid)return[];const s=t.map(Ni).filter(r=>this.contains(r)).sort((r,a)=>r.toMillis()-a.toMillis()),n=[];let{s:i}=this,o=0;for(;i<this.e;){const r=s[o]||this.e,a=+r>+this.e?this.e:r;n.push(Lt.fromDateTimes(i,a)),i=a,o+=1}return n}splitBy(t){const s=pt.fromDurationLike(t);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,i=1,o;const r=[];for(;n<this.e;){const a=this.start.plus(s.mapUnits(l=>l*i));o=+a>+this.e?this.e:a,r.push(Lt.fromDateTimes(n,o)),n=o,i+=1}return r}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const s=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return s>=n?null:Lt.fromDateTimes(s,n)}union(t){if(!this.isValid)return this;const s=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Lt.fromDateTimes(s,n)}static merge(t){const[s,n]=t.sort((i,o)=>i.s-o.s).reduce(([i,o],r)=>o?o.overlaps(r)||o.abutsStart(r)?[i,o.union(r)]:[i.concat([o]),r]:[i,r],[[],null]);return n&&s.push(n),s}static xor(t){let s=null,n=0;const i=[],o=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),r=Array.prototype.concat(...o),a=r.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?s=l.time:(s&&+s!=+l.time&&i.push(Lt.fromDateTimes(s,l.time)),s=null);return Lt.merge(i)}difference(...t){return Lt.xor([this].concat(t)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Bn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Vr,s={}){return this.isValid?se.create(this.s.loc.clone(s),t).formatInterval(this):Bn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Bn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Bn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Bn}toFormat(t,{separator:s="  "}={}){return this.isValid?`${this.s.toFormat(t)}${s}${this.e.toFormat(t)}`:Bn}toDuration(t,s){return this.isValid?this.e.diff(this.s,t,s):pt.invalid(this.invalidReason)}mapEndpoints(t){return Lt.fromDateTimes(t(this.s),t(this.e))}}class sr{static hasDST(t=Rt.defaultZone){const s=O.now().setZone(t).set({month:12});return!t.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(t){return ks.isValidZone(t)}static normalizeZone(t){return Ws(t,Rt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||xt.create(s,n,o)).months(t)}static monthsFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||xt.create(s,n,o)).months(t,!0)}static weekdays(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return xt.create(t).meridiems()}static eras(t="short",{locale:s=null}={}){return xt.create(s,null,"gregory").eras(t)}static features(){return{relative:Wm(),localeWeek:Um()}}}function Id(e,t){const s=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(t)-s(e);return Math.floor(pt.fromMillis(n).as("days"))}function gw(e,t,s){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Id(l,c);return(u-u%7)/7}],["days",Id]],i={},o=e;let r,a;for(const[l,c]of n)s.indexOf(l)>=0&&(r=l,i[l]=c(e,t),a=o.plus(i),a>t?(i[l]--,e=o.plus(i),e>t&&(a=e,i[l]--,e=o.plus(i))):e=a);return[e,i,a,r]}function mw(e,t,s,n){let[i,o,r,a]=gw(e,t,s);const l=t-i,c=s.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(r<t&&(r=i.plus({[a]:1})),r!==i&&(o[a]=(o[a]||0)+l/(r-i)));const u=pt.fromObject(o,n);return c.length>0?pt.fromMillis(l,n).shiftTo(...c).plus(u):u}const pw="missing Intl.DateTimeFormat.formatToParts support";function vt(e,t=s=>s){return{regex:e,deser:([s])=>t(r_(s))}}const yw="",rp=`[ ${yw}]`,ap=new RegExp(rp,"g");function bw(e){return e.replace(/\./g,"\\.?").replace(ap,rp)}function Pd(e){return e.replace(/\./g,"").replace(ap," ").toLowerCase()}function We(e,t){return e===null?null:{regex:RegExp(e.map(bw).join("|")),deser:([s])=>e.findIndex(n=>Pd(s)===Pd(n))+t}}function Ld(e,t){return{regex:e,deser:([,s,n])=>va(s,n),groups:t}}function nr(e){return{regex:e,deser:([t])=>t}}function vw(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _w(e,t){const s=Be(t),n=Be(t,"{2}"),i=Be(t,"{3}"),o=Be(t,"{4}"),r=Be(t,"{6}"),a=Be(t,"{1,2}"),l=Be(t,"{1,3}"),c=Be(t,"{1,6}"),u=Be(t,"{1,9}"),d=Be(t,"{2,4}"),h=Be(t,"{4,6}"),f=p=>({regex:RegExp(vw(p.val)),deser:([y])=>y,literal:!0}),m=(p=>{if(e.literal)return f(p);switch(p.val){case"G":return We(t.eras("short"),0);case"GG":return We(t.eras("long"),0);case"y":return vt(c);case"yy":return vt(d,Zl);case"yyyy":return vt(o);case"yyyyy":return vt(h);case"yyyyyy":return vt(r);case"M":return vt(a);case"MM":return vt(n);case"MMM":return We(t.months("short",!0),1);case"MMMM":return We(t.months("long",!0),1);case"L":return vt(a);case"LL":return vt(n);case"LLL":return We(t.months("short",!1),1);case"LLLL":return We(t.months("long",!1),1);case"d":return vt(a);case"dd":return vt(n);case"o":return vt(l);case"ooo":return vt(i);case"HH":return vt(n);case"H":return vt(a);case"hh":return vt(n);case"h":return vt(a);case"mm":return vt(n);case"m":return vt(a);case"q":return vt(a);case"qq":return vt(n);case"s":return vt(a);case"ss":return vt(n);case"S":return vt(l);case"SSS":return vt(i);case"u":return nr(u);case"uu":return nr(a);case"uuu":return vt(s);case"a":return We(t.meridiems(),0);case"kkkk":return vt(o);case"kk":return vt(d,Zl);case"W":return vt(a);case"WW":return vt(n);case"E":case"c":return vt(s);case"EEE":return We(t.weekdays("short",!1),1);case"EEEE":return We(t.weekdays("long",!1),1);case"ccc":return We(t.weekdays("short",!0),1);case"cccc":return We(t.weekdays("long",!0),1);case"Z":case"ZZ":return Ld(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Ld(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return nr(/[a-z_+-/]{1,256}?/i);case" ":return nr(/[^\S\n\r]/);default:return f(p)}})(e)||{invalidReason:pw};return m.token=e,m}const ww={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function xw(e,t,s){const{type:n,value:i}=e;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const o=t[n];let r=n;n==="hour"&&(t.hour12!=null?r=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?r="hour12":r="hour24":r=s.hour12?"hour12":"hour24");let a=ww[r];if(typeof a=="object"&&(a=a[o]),a)return{literal:!1,val:a}}function Sw(e){return[`^${e.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,e]}function kw(e,t,s){const n=e.match(t);if(n){const i={};let o=1;for(const r in s)if(pi(s,r)){const a=s[r],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(o,o+l))),o+=l}return[n,i]}else return[n,{}]}function Tw(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return Q(e.z)||(s=ks.create(e.z)),Q(e.Z)||(s||(s=new ue(e.Z)),n=e.Z),Q(e.q)||(e.M=(e.q-1)*3+1),Q(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Q(e.u)||(e.S=Hc(e.u)),[Object.keys(e).reduce((o,r)=>{const a=t(r);return a&&(o[a]=e[r]),o},{}),s,n]}let Qa=null;function Ow(){return Qa||(Qa=O.fromMillis(1555555555555)),Qa}function Dw(e,t){if(e.literal)return e;const s=se.macroTokenToFormatOpts(e.val),n=dp(s,t);return n==null||n.includes(void 0)?e:n}function lp(e,t){return Array.prototype.concat(...e.map(s=>Dw(s,t)))}class cp{constructor(t,s){if(this.locale=t,this.format=s,this.tokens=lp(se.parseFormat(s),t),this.units=this.tokens.map(n=>_w(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=Sw(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[s,n]=kw(t,this.regex,this.handlers),[i,o,r]=n?Tw(n):[null,null,void 0];if(pi(n,"a")&&pi(n,"H"))throw new ii("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:i,zone:o,specificOffset:r}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function up(e,t,s){return new cp(e,s).explainFromTokens(t)}function Cw(e,t,s){const{result:n,zone:i,specificOffset:o,invalidReason:r}=up(e,t,s);return[n,i,o,r]}function dp(e,t){if(!e)return null;const n=se.create(t,e).dtFormatter(Ow()),i=n.formatToParts(),o=n.resolvedOptions();return i.map(r=>xw(r,e,o))}const tl="Invalid DateTime",Rd=864e13;function Zi(e){return new Ve("unsupported zone",`the zone "${e.name}" is not supported`)}function el(e){return e.weekData===null&&(e.weekData=Hr(e.c)),e.weekData}function sl(e){return e.localWeekData===null&&(e.localWeekData=Hr(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function un(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new O({...s,...t,old:s})}function hp(e,t,s){let n=e-t*60*1e3;const i=s.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const o=s.offset(n);return i===o?[n,i]:[e-Math.min(i,o)*60*1e3,Math.max(i,o)]}function ir(e,t){e+=t*60*1e3;const s=new Date(e);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function Er(e,t,s){return hp(ba(e),t,s)}function $d(e,t){const s=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:n,month:i,day:Math.min(e.c.day,qr(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},r=pt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ba(o);let[l,c]=hp(a,s,e.zone);return r!==0&&(l+=r,c=e.zone.offset(l)),{ts:l,o:c}}function Wn(e,t,s,n,i,o){const{setZone:r,zone:a}=s;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=O.fromObject(e,{...s,zone:l,specificOffset:o});return r?c:c.setZone(a)}else return O.invalid(new Ve("unparsable",`the input "${i}" can't be parsed as ${n}`))}function or(e,t,s=!0){return e.isValid?se.create(xt.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(e,t):null}function nl(e,t,s){const n=e.c.year>9999||e.c.year<0;let i="";if(n&&e.c.year>=0&&(i+="+"),i+=jt(e.c.year,n?6:4),s==="year")return i;if(t){if(i+="-",i+=jt(e.c.month),s==="month")return i;i+="-"}else if(i+=jt(e.c.month),s==="month")return i;return i+=jt(e.c.day),i}function Fd(e,t,s,n,i,o,r){let a=!s||e.c.millisecond!==0||e.c.second!==0,l="";switch(r){case"day":case"month":case"year":break;default:if(l+=jt(e.c.hour),r==="hour")break;if(t){if(l+=":",l+=jt(e.c.minute),r==="minute")break;a&&(l+=":",l+=jt(e.c.second))}else{if(l+=jt(e.c.minute),r==="minute")break;a&&(l+=jt(e.c.second))}if(r==="second")break;a&&(!n||e.c.millisecond!==0)&&(l+=".",l+=jt(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&e.offset===0&&!o?l+="Z":e.o<0?(l+="-",l+=jt(Math.trunc(-e.o/60)),l+=":",l+=jt(Math.trunc(-e.o%60))):(l+="+",l+=jt(Math.trunc(e.o/60)),l+=":",l+=jt(Math.trunc(e.o%60)))),o&&(l+="["+e.zone.ianaName+"]"),l}const fp={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Mw={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ew={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ar=["year","month","day","hour","minute","second","millisecond"],Aw=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Iw=["year","ordinal","hour","minute","second","millisecond"];function Ir(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new fm(e);return t}function Nd(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ir(e)}}function Pw(e){if(Gi===void 0&&(Gi=Rt.now()),e.type!=="iana")return e.offset(Gi);const t=e.name;let s=Gl.get(t);return s===void 0&&(s=e.offset(Gi),Gl.set(t,s)),s}function jd(e,t){const s=Ws(t.zone,Rt.defaultZone);if(!s.isValid)return O.invalid(Zi(s));const n=xt.fromObject(t);let i,o;if(Q(e.year))i=Rt.now();else{for(const l of Ar)Q(e[l])&&(e[l]=fp[l]);const r=jm(e)||Bm(e);if(r)return O.invalid(r);const a=Pw(s);[i,o]=Er(e,a,s)}return new O({ts:i,zone:s,loc:n,o})}function Bd(e,t,s){const n=Q(s.round)?!0:s.round,i=Q(s.rounding)?"trunc":s.rounding,o=(a,l)=>(a=qc(a,n||s.calendary?0:2,s.calendary?"round":i),t.loc.clone(s).relFormatter(s).format(a,l)),r=a=>s.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a);if(s.unit)return o(r(s.unit),s.unit);for(const a of s.units){const l=r(a);if(Math.abs(l)>=1)return o(l,a)}return o(e>t?-0:0,s.units[s.units.length-1])}function Wd(e){let t={},s;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],s=Array.from(e).slice(0,e.length-1)):s=Array.from(e),[t,s]}let Gi;const Gl=new Map;class O{constructor(t){const s=t.zone||Rt.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Ve("invalid input"):null)||(s.isValid?null:Zi(s));this.ts=Q(t.ts)?Rt.now():t.ts;let i=null,o=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(s))[i,o]=[t.old.c,t.old.o];else{const a=Ys(t.o)&&!t.old?t.o:s.offset(this.ts);i=ir(this.ts,a),n=Number.isNaN(i.year)?new Ve("invalid input"):null,i=n?null:i,o=n?null:a}this._zone=s,this.loc=t.loc||xt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new O({})}static local(){const[t,s]=Wd(arguments),[n,i,o,r,a,l,c]=s;return jd({year:n,month:i,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static utc(){const[t,s]=Wd(arguments),[n,i,o,r,a,l,c]=s;return t.zone=ue.utcInstance,jd({year:n,month:i,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,s={}){const n=d_(t)?t.valueOf():NaN;if(Number.isNaN(n))return O.invalid("invalid input");const i=Ws(s.zone,Rt.defaultZone);return i.isValid?new O({ts:n,zone:i,loc:xt.fromObject(s)}):O.invalid(Zi(i))}static fromMillis(t,s={}){if(Ys(t))return t<-Rd||t>Rd?O.invalid("Timestamp out of range"):new O({ts:t,zone:Ws(s.zone,Rt.defaultZone),loc:xt.fromObject(s)});throw new te(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,s={}){if(Ys(t))return new O({ts:t*1e3,zone:Ws(s.zone,Rt.defaultZone),loc:xt.fromObject(s)});throw new te("fromSeconds requires a numerical input")}static fromObject(t,s={}){t=t||{};const n=Ws(s.zone,Rt.defaultZone);if(!n.isValid)return O.invalid(Zi(n));const i=xt.fromObject(s),o=Jr(t,Nd),{minDaysInFirstWeek:r,startOfWeek:a}=kd(o,i),l=Rt.now(),c=Q(s.specificOffset)?n.offset(l):s.specificOffset,u=!Q(o.ordinal),d=!Q(o.year),h=!Q(o.month)||!Q(o.day),f=d||h,g=o.weekYear||o.weekNumber;if((f||u)&&g)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new ii("Can't mix ordinal dates with month/day");const m=g||o.weekday&&!f;let p,y,b=ir(l,c);m?(p=Aw,y=Mw,b=Hr(b,r,a)):u?(p=Iw,y=Ew,b=Xa(b)):(p=Ar,y=fp);let v=!1;for(const B of p){const L=o[B];Q(L)?v?o[B]=y[B]:o[B]=b[B]:v=!0}const w=m?l_(o,r,a):u?c_(o):jm(o),S=w||Bm(o);if(S)return O.invalid(S);const D=m?xd(o,r,a):u?Sd(o):o,[E,R]=Er(D,c,n),I=new O({ts:E,zone:n,o:R,loc:i});return o.weekday&&f&&t.weekday!==I.weekday?O.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${I.toISO()}`):I.isValid?I:O.invalid(I.invalid)}static fromISO(t,s={}){const[n,i]=tw(t);return Wn(n,i,s,"ISO 8601",t)}static fromRFC2822(t,s={}){const[n,i]=ew(t);return Wn(n,i,s,"RFC 2822",t)}static fromHTTP(t,s={}){const[n,i]=sw(t);return Wn(n,i,s,"HTTP",s)}static fromFormat(t,s,n={}){if(Q(t)||Q(s))throw new te("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[a,l,c,u]=Cw(r,t,s);return u?O.invalid(u):Wn(a,l,n,`format ${s}`,t,c)}static fromString(t,s,n={}){return O.fromFormat(t,s,n)}static fromSQL(t,s={}){const[n,i]=cw(t);return Wn(n,i,s,"SQL",t)}static invalid(t,s=null){if(!t)throw new te("need to specify a reason the DateTime is invalid");const n=t instanceof Ve?t:new Ve(t,s);if(Rt.throwOnInvalid)throw new $0(n);return new O({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,s={}){const n=dp(t,xt.fromObject(s));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,s={}){return lp(se.parseFormat(t),xt.fromObject(s)).map(i=>i.val).join("")}static resetCache(){Gi=void 0,Gl.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?el(this).weekYear:NaN}get weekNumber(){return this.isValid?el(this).weekNumber:NaN}get weekday(){return this.isValid?el(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?sl(this).weekday:NaN}get localWeekNumber(){return this.isValid?sl(this).weekNumber:NaN}get localWeekYear(){return this.isValid?sl(this).weekYear:NaN}get ordinal(){return this.isValid?Xa(this.c).ordinal:NaN}get monthShort(){return this.isValid?sr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?sr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?sr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?sr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,s=6e4,n=ba(this.c),i=this.zone.offset(n-t),o=this.zone.offset(n+t),r=this.zone.offset(n-i*s),a=this.zone.offset(n-o*s);if(r===a)return[this];const l=n-r*s,c=n-a*s,u=ir(l,r),d=ir(c,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[un(this,{ts:l}),un(this,{ts:c})]:[this]}get isInLeapYear(){return $o(this.year)}get daysInMonth(){return qr(this.year,this.month)}get daysInYear(){return this.isValid?hi(this.year):NaN}get weeksInWeekYear(){return this.isValid?To(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?To(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:s,numberingSystem:n,calendar:i}=se.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:i}}toUTC(t=0,s={}){return this.setZone(ue.instance(t),s)}toLocal(){return this.setZone(Rt.defaultZone)}setZone(t,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(t=Ws(t,Rt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(s||n){const o=t.offset(this.ts),r=this.toObject();[i]=Er(r,o,t)}return un(this,{ts:i,zone:t})}else return O.invalid(Zi(t))}reconfigure({locale:t,numberingSystem:s,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:s,outputCalendar:n});return un(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const s=Jr(t,Nd),{minDaysInFirstWeek:n,startOfWeek:i}=kd(s,this.loc),o=!Q(s.weekYear)||!Q(s.weekNumber)||!Q(s.weekday),r=!Q(s.ordinal),a=!Q(s.year),l=!Q(s.month)||!Q(s.day),c=a||l,u=s.weekYear||s.weekNumber;if((c||r)&&u)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&r)throw new ii("Can't mix ordinal dates with month/day");let d;o?d=xd({...Hr(this.c,n,i),...s},n,i):Q(s.ordinal)?(d={...this.toObject(),...s},Q(s.day)&&(d.day=Math.min(qr(d.year,d.month),d.day))):d=Sd({...Xa(this.c),...s});const[h,f]=Er(d,this.o,this.zone);return un(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const s=pt.fromDurationLike(t);return un(this,$d(this,s))}minus(t){if(!this.isValid)return this;const s=pt.fromDurationLike(t).negate();return un(this,$d(this,s))}startOf(t,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},i=pt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(s){const o=this.loc.getStartOfWeek(),{weekday:r}=this;r<o&&(n.weekNumber=this.weekNumber-1),n.weekday=o}else n.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)}endOf(t,s){return this.isValid?this.plus({[t]:1}).startOf(t,s).minus(1):this}toFormat(t,s={}){return this.isValid?se.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,t):tl}toLocaleString(t=Vr,s={}){return this.isValid?se.create(this.loc.clone(s),t).formatDateTime(this):tl}toLocaleParts(t={}){return this.isValid?se.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=Ir(r);const a=t==="extended";let l=nl(this,a,r);return Ar.indexOf(r)>=3&&(l+="T"),l+=Fd(this,a,s,n,i,o,r),l}toISODate({format:t="extended",precision:s="day"}={}){return this.isValid?nl(this,t==="extended",Ir(s)):null}toISOWeekDate(){return or(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:r="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Ir(a),(i&&Ar.indexOf(a)>=3?"T":"")+Fd(this,r==="extended",s,t,n,o,a)):null}toRFC2822(){return or(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return or(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?nl(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(s||t)&&(n&&(i+=" "),s?i+="z":t&&(i+="ZZ")),or(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():tl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const s={...this.c};return t.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,s="milliseconds",n={}){if(!this.isValid||!t.isValid)return pt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=h_(s).map(pt.normalizeUnit),r=t.valueOf()>this.valueOf(),a=r?this:t,l=r?t:this,c=mw(a,l,o,i);return r?c.negate():c}diffNow(t="milliseconds",s={}){return this.diff(O.now(),t,s)}until(t){return this.isValid?Lt.fromDateTimes(this,t):this}hasSame(t,s,n){if(!this.isValid)return!1;const i=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(s,n)<=i&&i<=o.endOf(s,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const s=t.base||O.fromObject({},{zone:this.zone}),n=t.padding?this<s?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(i=t.unit,o=void 0),Bd(s,this.plus(n),{...t,numeric:"always",units:i,unit:o})}toRelativeCalendar(t={}){return this.isValid?Bd(t.base||O.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(O.isDateTime))throw new te("min requires all arguments be DateTimes");return Td(t,s=>s.valueOf(),Math.min)}static max(...t){if(!t.every(O.isDateTime))throw new te("max requires all arguments be DateTimes");return Td(t,s=>s.valueOf(),Math.max)}static fromFormatExplain(t,s,n={}){const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return up(r,t,s)}static fromStringExplain(t,s,n={}){return O.fromFormatExplain(t,s,n)}static buildFormatParser(t,s={}){const{locale:n=null,numberingSystem:i=null}=s,o=xt.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new cp(o,t)}static fromFormatParser(t,s,n={}){if(Q(t)||Q(s))throw new te("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});if(!r.equals(s.locale))throw new te(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${s.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=s.explainFromTokens(t);return u?O.invalid(u):Wn(a,l,n,`format ${s.format}`,t,c)}static get DATE_SHORT(){return Vr}static get DATE_MED(){return gm}static get DATE_MED_WITH_WEEKDAY(){return j0}static get DATE_FULL(){return mm}static get DATE_HUGE(){return pm}static get TIME_SIMPLE(){return ym}static get TIME_WITH_SECONDS(){return bm}static get TIME_WITH_SHORT_OFFSET(){return vm}static get TIME_WITH_LONG_OFFSET(){return _m}static get TIME_24_SIMPLE(){return wm}static get TIME_24_WITH_SECONDS(){return xm}static get TIME_24_WITH_SHORT_OFFSET(){return Sm}static get TIME_24_WITH_LONG_OFFSET(){return km}static get DATETIME_SHORT(){return Tm}static get DATETIME_SHORT_WITH_SECONDS(){return Om}static get DATETIME_MED(){return Dm}static get DATETIME_MED_WITH_SECONDS(){return Cm}static get DATETIME_MED_WITH_WEEKDAY(){return B0}static get DATETIME_FULL(){return Mm}static get DATETIME_FULL_WITH_SECONDS(){return Em}static get DATETIME_HUGE(){return Am}static get DATETIME_HUGE_WITH_SECONDS(){return Im}}function Ni(e){if(O.isDateTime(e))return e;if(e&&e.valueOf&&Ys(e.valueOf()))return O.fromJSDate(e);if(e&&typeof e=="object")return O.fromObject(e);throw new te(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function In(e,{withMillis:t=!1}={}){const s=e instanceof Date?e:new Date(e);if(Number.isNaN(s.getTime()))throw new Error(`sydneyDayRangeUtcISO: invalid date (${String(e)})`);const n=O.fromJSDate(s,{zone:"Australia/Sydney"}).startOf("day"),i=n.plus({days:1}),o=t?{}:{suppressMilliseconds:!0};return{startUtcISO:n.toUTC().toISO(o),endUtcISO:i.toUTC().toISO(o)}}function Zc(e,t,{withMillis:s=!1}={}){const n=e instanceof Date?e:new Date(e),i=t instanceof Date?t:new Date(t),o=O.fromJSDate(n,{zone:"Australia/Sydney"}).startOf("day"),r=O.fromJSDate(i,{zone:"Australia/Sydney"}).startOf("day"),a=s?{}:{suppressMilliseconds:!0};return{startUtcISO:o.toUTC().toISO(a),endUtcISO:r.toUTC().toISO(a),startSydney:o,endSydney:r}}function Lw(e){return O.fromJSDate(Dn(e)).setZone("Australia/Sydney").toFormat("d LLL yyyy, h:mma").toLowerCase()}function gp(){return O.local().setZone("Australia/Sydney").startOf("day").toJSDate()}function at(e){return e instanceof Date?e:typeof e=="number"?new Date(e):typeof e=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(e)?O.fromISO(e):O.fromISO(e,{zone:"Australia/Sydney"})).toJSDate():null}function Rw(e){return O.fromJSDate(Dn(e)).setZone("Australia/Sydney").toFormat("cccc d LLLL yyyy")}function Oo(e){return O.fromJSDate(Dn(e)).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function Xt(e){const t=O.fromJSDate(Dn(e)).setZone("Australia/Sydney").startOf("day"),s=t.plus({days:1});return{startOfDay:t.toJSDate(),endOfDay:s.toJSDate()}}function rr(e,t){const s=O.fromJSDate(Dn(e)).setZone("Australia/Sydney"),n=O.fromJSDate(Dn(t)).setZone("Australia/Sydney");return s.hasSame(n,"day")}function uo(e){return Yr(e).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function Xl(e){const t=Yr(e).setZone("Australia/Sydney");return`${t.toFormat("d LLL")}, ${t.toFormat("h:mma").toLowerCase()}`}function mp(e,t,s){const n=Yr(e),i=t?Yr(t):O.fromJSDate(Dn(s)).setZone("Australia/Sydney").startOf("day").plus({days:1}),o=Math.max(0,i.toMillis()-n.toMillis());return Math.round(o/6e4)}function Yr(e){return e instanceof Date?O.fromJSDate(e):typeof e=="number"?O.fromMillis(e):typeof e=="string"?/Z|[+\-]\d{2}:?\d{2}$/.test(e)?O.fromISO(e):O.fromISO(e,{zone:"utc"}):O.invalid("Unknown input")}function Bs(e){const t=Math.round(e||0),s=Math.floor(t/60),n=t%60;return s>0&&n>0?`${s}h${n}m`:s>0?`${s}h`:`${n}m`}function $w(e){const t=Math.max(0,Math.round(e||0)),s=Math.floor(t/60),n=t%60;return s>0?`${s}h ${n}m`:`${n}m`}function Dn(e){if(e instanceof Date)return e;if(typeof e=="number")return new Date(e);if(typeof e=="string"){const t=O.fromISO(e);return t.isValid?t.toJSDate():new Date(e)}return new Date(NaN)}const Ft=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Fw={class:"date-header"},Nw={class:"date-heading"},jw={class:"date-nav"},Bw=["value"],Ww={__name:"DateHeader",props:{selectedDate:{type:Date,default:()=>gp()}},emits:["update:selectedDate"],setup(e,{emit:t}){const s=e,n=t,i=G({get:()=>s.selectedDate,set:u=>n("update:selectedDate",u)}),o=G(()=>Rw(i.value)),r=G(()=>O.fromJSDate(i.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function a(){const u=O.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.minus({days:1}).startOf("day").toJSDate()}function l(){const u=O.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.plus({days:1}).startOf("day").toJSDate()}function c(u){const d=u.target.value;d&&(i.value=O.fromISO(d,{zone:"Australia/Sydney"}).startOf("day").toJSDate())}return(u,d)=>(T(),C("header",Fw,[_("h1",Nw,P(o.value),1),_("div",jw,[_("button",{class:"icon-btn",type:"button",onClick:a,"aria-label":"Previous day",title:"Previous day"},d[0]||(d[0]=[_("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{d:"M15 6l-6 6 6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_("input",{class:"date-input",type:"date",value:r.value,onInput:c},null,40,Bw),_("button",{class:"icon-btn",type:"button",onClick:l,"aria-label":"Next day",title:"Next day"},d[1]||(d[1]=[_("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[_("path",{d:"M9 6l6 6-6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]))}},Uw=Ft(Ww,[["__scopeId","data-v-f392a69f"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jo(e){return e+.5|0}const zs=(e,t,s)=>Math.max(Math.min(e,s),t);function Xi(e){return zs(jo(e*2.55),0,255)}function Ks(e){return zs(jo(e*255),0,255)}function vs(e){return zs(jo(e/2.55)/100,0,1)}function Ud(e){return zs(jo(e*100),0,100)}const Pe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ql=[..."0123456789ABCDEF"],zw=e=>Ql[e&15],Vw=e=>Ql[(e&240)>>4]+Ql[e&15],ar=e=>(e&240)>>4===(e&15),Hw=e=>ar(e.r)&&ar(e.g)&&ar(e.b)&&ar(e.a);function qw(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Pe[e[1]]*17,g:255&Pe[e[2]]*17,b:255&Pe[e[3]]*17,a:t===5?Pe[e[4]]*17:255}:(t===7||t===9)&&(s={r:Pe[e[1]]<<4|Pe[e[2]],g:Pe[e[3]]<<4|Pe[e[4]],b:Pe[e[5]]<<4|Pe[e[6]],a:t===9?Pe[e[7]]<<4|Pe[e[8]]:255})),s}const Jw=(e,t)=>e<255?t(e):"";function Yw(e){var t=Hw(e)?zw:Vw;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Jw(e.a,t):void 0}const Kw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pp(e,t,s){const n=t*Math.min(s,1-s),i=(o,r=(o+e/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function Zw(e,t,s){const n=(i,o=(i+e/60)%6)=>s-s*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Gw(e,t,s){const n=pp(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function Xw(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function Gc(e){const s=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=Xw(s,n,i,u,o),l=l*60+.5),[l|0,c||0,a]}function Xc(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Ks)}function Qc(e,t,s){return Xc(pp,e,t,s)}function Qw(e,t,s){return Xc(Gw,e,t,s)}function tx(e,t,s){return Xc(Zw,e,t,s)}function yp(e){return(e%360+360)%360}function ex(e){const t=Kw.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?Xi(+t[5]):Ks(+t[5]));const i=yp(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=Qw(i,o,r):t[1]==="hsv"?n=tx(i,o,r):n=Qc(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function sx(e,t){var s=Gc(e);s[0]=yp(s[0]+t),s=Qc(s),e.r=s[0],e.g=s[1],e.b=s[2]}function nx(e){if(!e)return;const t=Gc(e),s=t[0],n=Ud(t[1]),i=Ud(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${vs(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const zd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ix(){const e={},t=Object.keys(Vd),s=Object.keys(zd);let n,i,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,zd[o]);o=parseInt(Vd[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let lr;function ox(e){lr||(lr=ix(),lr.transparent=[0,0,0,0]);const t=lr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const rx=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ax(e){const t=rx.exec(e);let s=255,n,i,o;if(t){if(t[7]!==n){const r=+t[7];s=t[8]?Xi(r):zs(r*255,0,255)}return n=+t[1],i=+t[3],o=+t[5],n=255&(t[2]?Xi(n):zs(n,0,255)),i=255&(t[4]?Xi(i):zs(i,0,255)),o=255&(t[6]?Xi(o):zs(o,0,255)),{r:n,g:i,b:o,a:s}}}function lx(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${vs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const il=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Un=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function cx(e,t,s){const n=Un(vs(e.r)),i=Un(vs(e.g)),o=Un(vs(e.b));return{r:Ks(il(n+s*(Un(vs(t.r))-n))),g:Ks(il(i+s*(Un(vs(t.g))-i))),b:Ks(il(o+s*(Un(vs(t.b))-o))),a:e.a+s*(t.a-e.a)}}function cr(e,t,s){if(e){let n=Gc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=Qc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function bp(e,t){return e&&Object.assign(t||{},e)}function Hd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ks(e[3]))):(t=bp(e,{r:0,g:0,b:0,a:1}),t.a=Ks(t.a)),t}function ux(e){return e.charAt(0)==="r"?ax(e):ex(e)}class Do{constructor(t){if(t instanceof Do)return t;const s=typeof t;let n;s==="object"?n=Hd(t):s==="string"&&(n=qw(t)||ox(t)||ux(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=bp(this._rgb);return t&&(t.a=vs(t.a)),t}set rgb(t){this._rgb=Hd(t)}rgbString(){return this._valid?lx(this._rgb):void 0}hexString(){return this._valid?Yw(this._rgb):void 0}hslString(){return this._valid?nx(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=cx(this._rgb,t._rgb,s)),this}clone(){return new Do(this.rgb)}alpha(t){return this._rgb.a=Ks(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=jo(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return cr(this._rgb,2,t),this}darken(t){return cr(this._rgb,2,-t),this}saturate(t){return cr(this._rgb,1,t),this}desaturate(t){return cr(this._rgb,1,-t),this}rotate(t){return sx(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fs(){}const dx=(()=>{let e=0;return()=>e++})();function St(e){return e==null}function It(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function lt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Jt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Qe(e,t){return Jt(e)?e:t}function it(e,t){return typeof e>"u"?t:e}const hx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,vp=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Dt(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function Tt(e,t,s,n){let i,o,r;if(It(e))for(o=e.length,i=0;i<o;i++)t.call(s,e[i],i);else if(lt(e))for(r=Object.keys(e),o=r.length,i=0;i<o;i++)t.call(s,e[r[i]],r[i])}function Kr(e,t){let s,n,i,o;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],o=t[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Zr(e){if(It(e))return e.map(Zr);if(lt(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=Zr(e[s[i]]);return t}return e}function _p(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function fx(e,t,s,n){if(!_p(e))return;const i=t[e],o=s[e];lt(i)&&lt(o)?Co(i,o,n):t[e]=Zr(o)}function Co(e,t,s){const n=It(t)?t:[t],i=n.length;if(!lt(e))return e;s=s||{};const o=s.merger||fx;let r;for(let a=0;a<i;++a){if(r=n[a],!lt(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,s)}return e}function ho(e,t){return Co(e,t,{merger:gx})}function gx(e,t,s){if(!_p(e))return;const n=t[e],i=s[e];lt(n)&&lt(i)?ho(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Zr(i))}const qd={"":e=>e,x:e=>e.x,y:e=>e.y};function mx(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function px(e){const t=mx(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function Cn(e,t){return(qd[t]||(qd[t]=px(t)))(e)}function tu(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ve=e=>typeof e<"u",be=e=>typeof e=="function",Jd=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function yx(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ot=Math.PI,Vt=2*Ot,bx=Vt+Ot,Gr=Number.POSITIVE_INFINITY,eu=Ot/180,Zt=Ot/2,Le=Ot/4,Xr=Ot*2/3,wp=Math.log10,ls=Math.sign;function fo(e,t,s){return Math.abs(e-t)<s}function Yd(e){const t=Math.round(e);e=fo(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(wp(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function vx(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,o)=>i-o).pop(),t}function _x(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Qs(e){return!_x(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function wx(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function xx(e,t,s){let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n][s],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ht(e){return e*(Ot/180)}function xp(e){return e*(180/Ot)}function Kd(e){if(!Jt(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function tc(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*Ot&&(o+=Vt),{angle:o,distance:i}}function yi(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Sx(e,t){return(e-t+bx)%Vt-Ot}function os(e){return(e%Vt+Vt)%Vt}function Qr(e,t,s,n){const i=os(e),o=os(t),r=os(s),a=os(o-i),l=os(r-i),c=os(i-o),u=os(i-r);return i===o||i===r||n&&o===r||a>l&&c<u}function Fe(e,t,s){return Math.max(t,Math.min(s,e))}function kx(e){return Fe(e,-32768,32767)}function Vs(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function su(e,t,s){s=s||(r=>e[r]<t);let n=e.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const wn=(e,t,s,n)=>su(e,s,n?i=>{const o=e[i][t];return o<s||o===s&&e[i+1][t]===s}:i=>e[i][t]<s),Tx=(e,t,s)=>su(e,s,n=>e[n][t]>=s);function Ox(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const Sp=["push","pop","shift","splice","unshift"];function Dx(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Sp.forEach(s=>{const n="_onData"+tu(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Zd(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(Sp.forEach(o=>{delete e[o]}),delete e._chartjs)}function kp(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Tp=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Op(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Tp.call(window,()=>{n=!1,e.apply(t,s)}))}}function Cx(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const Dp=e=>e==="start"?"left":e==="end"?"right":"center",ke=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,Mx=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function Cp(e,t,s){const n=t.length;let i=0,o=n;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=r.axis,{min:d,max:h,minDefined:f,maxDefined:g}=r.getUserBounds();if(f){if(i=Math.min(wn(l,u,d).lo,s?n:wn(t,u,r.getPixelForValue(d)).lo),c){const m=l.slice(0,i+1).reverse().findIndex(p=>!St(p[a.axis]));i-=Math.max(0,m)}i=Fe(i,0,n-1)}if(g){let m=Math.max(wn(l,r.axis,h,!0).hi+1,s?0:wn(t,u,r.getPixelForValue(h),!0).hi+1);if(c){const p=l.slice(m-1).findIndex(y=>!St(y[a.axis]));m+=Math.max(0,p)}o=Fe(m,i,n)-i}else o=n-i}return{start:i,count:o}}function Mp(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const ur=e=>e===0||e===1,Gd=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Vt/s)),Xd=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Vt/s)+1,go={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Zt)+1,easeOutSine:e=>Math.sin(e*Zt),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ur(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ur(e)?e:Gd(e,.075,.3),easeOutElastic:e=>ur(e)?e:Xd(e,.075,.3),easeInOutElastic(e){return ur(e)?e:e<.5?.5*Gd(e*2,.1125,.45):.5+.5*Xd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-go.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?go.easeInBounce(e*2)*.5:go.easeOutBounce(e*2-1)*.5+.5};function nu(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qd(e){return nu(e)?e:new Do(e)}function ol(e){return nu(e)?e:new Do(e).saturate(.5).darken(.1).hexString()}const Ex=["x","y","borderWidth","radius","tension"],Ax=["color","borderColor","backgroundColor"];function Ix(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Ax},numbers:{type:"number",properties:Ex}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Px(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const th=new Map;function Lx(e,t){t=t||{};const s=e+JSON.stringify(t);let n=th.get(s);return n||(n=new Intl.NumberFormat(e,t),th.set(s,n)),n}function iu(e,t,s){return Lx(t,s).format(e)}const Rx={values(e){return It(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,o=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=$x(e,s)}const r=wp(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),iu(e,n,l)}};function $x(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var Ep={formatters:Rx};function Fx(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ep.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Mn=Object.create(null),ec=Object.create(null);function mo(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];e=e[o]||(e[o]=Object.create(null))}return e}function rl(e,t,s){return typeof t=="string"?Co(mo(e,t),s):Co(mo(e,""),t)}class Nx{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>ol(i.backgroundColor),this.hoverBorderColor=(n,i)=>ol(i.borderColor),this.hoverColor=(n,i)=>ol(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return rl(this,t,s)}get(t){return mo(this,t)}describe(t,s){return rl(ec,t,s)}override(t,s){return rl(Mn,t,s)}route(t,s,n,i){const o=mo(this,t),r=mo(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return lt(l)?Object.assign({},c,l):it(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var $t=new Nx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ix,Px,Fx]);function jx(e){return!e||St(e.size)||St(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function eh(e,t,s,n,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,s.push(i)),o>n&&(n=o),n}function dn(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function sh(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sc(e,t,s,n){Ap(e,t,s,n,null)}function Ap(e,t,s,n,i){let o,r,a,l,c,u,d,h;const f=t.pointStyle,g=t.rotation,m=t.radius;let p=(g||0)*eu;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(p),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(s,n,i/2,m,0,0,Vt):e.arc(s,n,m,0,Vt),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(s+Math.sin(p)*u,n-Math.cos(p)*m),p+=Xr,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*m),p+=Xr,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,r=Math.cos(p+Le)*l,d=Math.cos(p+Le)*(i?i/2-c:l),a=Math.sin(p+Le)*l,h=Math.sin(p+Le)*(i?i/2-c:l),e.arc(s-d,n-a,c,p-Ot,p-Zt),e.arc(s+h,n-r,c,p-Zt,p),e.arc(s+d,n+a,c,p,p+Zt),e.arc(s-h,n+r,c,p+Zt,p+Ot),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(s-u,n-l,2*u,2*l);break}p+=Le;case"rectRot":d=Math.cos(p)*(i?i/2:m),r=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+h,n-r),e.lineTo(s+d,n+a),e.lineTo(s-h,n+r),e.closePath();break;case"crossRot":p+=Le;case"cross":d=Math.cos(p)*(i?i/2:m),r=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r);break;case"star":d=Math.cos(p)*(i?i/2:m),r=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r),p+=Le,d=Math.cos(p)*(i?i/2:m),r=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(i?i/2:m),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r);break;case"line":r=i?i/2:Math.cos(p)*m,a=Math.sin(p)*m,e.moveTo(s-r,n-a),e.lineTo(s+r,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(p)*(i?i/2:m),n+Math.sin(p)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Mo(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Bo(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Wo(e){e.restore()}function Bx(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const o=(t.x+s.x)/2;e.lineTo(o,t.y),e.lineTo(o,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function Wx(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Ux(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),St(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function zx(e,t,s,n,i){if(i.strikethrough||i.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function Vx(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function ta(e,t,s,n,i,o={}){const r=It(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Ux(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Vx(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),St(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,s,n,o.maxWidth)),e.fillText(c,s,n,o.maxWidth),zx(e,s,n,c,o),n+=Number(i.lineHeight);e.restore()}function Eo(e,t){const{x:s,y:n,w:i,h:o,radius:r}=t;e.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*Ot,Ot,!0),e.lineTo(s,n+o-r.bottomLeft),e.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,Ot,Zt,!0),e.lineTo(s+i-r.bottomRight,n+o),e.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Zt,0,!0),e.lineTo(s+i,n+r.topRight),e.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-Zt,!0),e.lineTo(s+r.topLeft,n)}const Hx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Jx(e,t){const s=(""+e).match(Hx);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const Yx=e=>+e||0;function Ip(e,t){const s={},n=lt(t),i=n?Object.keys(t):t,o=lt(e)?n?r=>it(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of i)s[r]=Yx(o(r));return s}function Pp(e){return Ip(e,{top:"y",right:"x",bottom:"y",left:"x"})}function kn(e){return Ip(e,["topLeft","topRight","bottomLeft","bottomRight"])}function de(e){const t=Pp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Gt(e,t){e=e||{},t=t||$t.font;let s=it(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=it(e.style,t.style);n&&!(""+n).match(qx)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:it(e.family,t.family),lineHeight:Jx(it(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:it(e.weight,t.weight),string:""};return i.string=jx(i),i}function dr(e,t,s,n){let i,o,r;for(i=0,o=e.length;i<o;++i)if(r=e[i],r!==void 0&&r!==void 0)return r}function Kx(e,t,s){const{min:n,max:i}=e,o=vp(t,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function Pn(e,t){return Object.assign(Object.create(e),t)}function ou(e,t=[""],s,n,i=()=>e[0]){const o=s||e;typeof n>"u"&&(n=Fp("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>ou([a,...e],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Rp(a,l,()=>nS(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return ih(a).includes(l)},ownKeys(a){return ih(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function bi(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Lp(e,n),setContext:o=>bi(e,o,s,n),override:o=>bi(e.override(o),t,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return Rp(o,r,()=>Gx(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function Lp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:be(s)?s:()=>s,isIndexable:be(n)?n:()=>n}}const Zx=(e,t)=>e?e+tu(t):t,ru=(e,t)=>lt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Rp(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function Gx(e,t,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=e;let a=n[t];return be(a)&&r.isScriptable(t)&&(a=Xx(t,a,e,s)),It(a)&&a.length&&(a=Qx(t,a,e,r.isIndexable)),ru(t,a)&&(a=bi(a,i,o&&o[t],r)),a}function Xx(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||n);return a.delete(e),ru(e,l)&&(l=au(i._scopes,i,e,l)),l}function Qx(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(e))return t[o.index%t.length];if(lt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=au(c,i,e,u);t.push(bi(d,o,r&&r[e],a))}}return t}function $p(e,t,s){return be(e)?e(t,s):e}const tS=(e,t)=>e===!0?t:typeof e=="string"?Cn(t,e):void 0;function eS(e,t,s,n,i){for(const o of t){const r=tS(s,o);if(r){e.add(r);const a=$p(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function au(e,t,s,n){const i=t._rootScopes,o=$p(t._fallback,s,n),r=[...e,...i],a=new Set;a.add(n);let l=nh(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=nh(a,r,o,l,n),l===null)?!1:ou(Array.from(a),[""],i,o,()=>sS(t,s,n))}function nh(e,t,s,n,i){for(;s;)s=eS(e,t,s,n,i);return s}function sS(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return It(i)&&lt(s)?s:i||{}}function nS(e,t,s,n){let i;for(const o of t)if(i=Fp(Zx(o,e),s),typeof i<"u")return ru(e,i)?au(s,n,e,i):i}function Fp(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function ih(e){let t=e._keys;return t||(t=e._keys=iS(e._scopes)),t}function iS(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}const oS=Number.EPSILON||1e-14,vi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Np=e=>e==="x"?"y":"x";function rS(e,t,s,n){const i=e.skip?t:e,o=t,r=s.skip?t:s,a=yi(o,i),l=yi(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=n*c,h=n*u;return{previous:{x:o.x-d*(r.x-i.x),y:o.y-d*(r.y-i.y)},next:{x:o.x+h*(r.x-i.x),y:o.y+h*(r.y-i.y)}}}function aS(e,t,s){const n=e.length;let i,o,r,a,l,c=vi(e,0);for(let u=0;u<n-1;++u)if(l=c,c=vi(e,u+1),!(!l||!c)){if(fo(t[u],0,oS)){s[u]=s[u+1]=0;continue}i=s[u]/t[u],o=s[u+1]/t[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=i*r*t[u],s[u+1]=o*r*t[u])}}function lS(e,t,s="x"){const n=Np(s),i=e.length;let o,r,a,l=vi(e,0);for(let c=0;c<i;++c){if(r=a,a=l,l=vi(e,c+1),!a)continue;const u=a[s],d=a[n];r&&(o=(u-r[s])/3,a[`cp1${s}`]=u-o,a[`cp1${n}`]=d-o*t[c]),l&&(o=(l[s]-u)/3,a[`cp2${s}`]=u+o,a[`cp2${n}`]=d+o*t[c])}}function cS(e,t="x"){const s=Np(t),n=e.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=vi(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=vi(e,r+1),!!l){if(c){const u=c[t]-l[t];i[r]=u!==0?(c[s]-l[s])/u:0}o[r]=a?c?ls(i[r-1])!==ls(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}aS(e,i,o),lS(e,o,t)}function hr(e,t,s){return Math.max(Math.min(e,s),t)}function uS(e,t){let s,n,i,o,r,a=Mo(e[0],t);for(s=0,n=e.length;s<n;++s)r=o,o=a,a=s<n-1&&Mo(e[s+1],t),o&&(i=e[s],r&&(i.cp1x=hr(i.cp1x,t.left,t.right),i.cp1y=hr(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=hr(i.cp2x,t.left,t.right),i.cp2y=hr(i.cp2y,t.top,t.bottom)))}function dS(e,t,s,n,i){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")cS(e,i);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=rS(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&uS(e,s)}function lu(){return typeof window<"u"&&typeof document<"u"}function cu(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ea(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const wa=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function hS(e,t){return wa(e).getPropertyValue(t)}const fS=["top","right","bottom","left"];function Tn(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=fS[i];n[o]=parseFloat(e[t+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const gS=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function mS(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(gS(i,o,e.target))a=i,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function pn(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=wa(s),o=i.boxSizing==="border-box",r=Tn(i,"padding"),a=Tn(i,"border","width"),{x:l,y:c,box:u}=mS(e,s),d=r.left+(u&&a.left),h=r.top+(u&&a.top);let{width:f,height:g}=t;return o&&(f-=r.width+a.width,g-=r.height+a.height),{x:Math.round((l-d)/f*s.width/n),y:Math.round((c-h)/g*s.height/n)}}function pS(e,t,s){let n,i;if(t===void 0||s===void 0){const o=e&&cu(e);if(!o)t=e.clientWidth,s=e.clientHeight;else{const r=o.getBoundingClientRect(),a=wa(o),l=Tn(a,"border","width"),c=Tn(a,"padding");t=r.width-c.width-l.width,s=r.height-c.height-l.height,n=ea(a.maxWidth,o,"clientWidth"),i=ea(a.maxHeight,o,"clientHeight")}}return{width:t,height:s,maxWidth:n||Gr,maxHeight:i||Gr}}const fr=e=>Math.round(e*10)/10;function yS(e,t,s,n){const i=wa(e),o=Tn(i,"margin"),r=ea(i.maxWidth,e,"clientWidth")||Gr,a=ea(i.maxHeight,e,"clientHeight")||Gr,l=pS(e,t,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Tn(i,"border","width"),f=Tn(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=fr(Math.min(c,r,l.maxWidth)),u=fr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=fr(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=fr(Math.floor(u*n))),{width:c,height:u}}function oh(e,t,s){const n=t||1,i=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(e.currentDevicePixelRatio=n,r.height=i,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const bS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lu()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function rh(e,t){const s=hS(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function yn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function vS(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function _S(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=yn(e,i,s),a=yn(i,o,s),l=yn(o,t,s),c=yn(r,a,s),u=yn(a,l,s);return yn(c,u,s)}const wS=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},xS=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function gi(e,t,s){return e?wS(t,s):xS()}function jp(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Bp(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wp(e){return e==="angle"?{between:Qr,compare:Sx,normalize:os}:{between:Vs,compare:(t,s)=>t-s,normalize:t=>t}}function ah({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function SS(e,t,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Wp(n),l=t.length;let{start:c,end:u,loop:d}=e,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&r(a(t[c%l][n]),i,o);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function Up(e,t,s){if(!s)return[e];const{property:n,start:i,end:o}=s,r=t.length,{compare:a,between:l,normalize:c}=Wp(n),{start:u,end:d,loop:h,style:f}=SS(e,t,s),g=[];let m=!1,p=null,y,b,v;const w=()=>l(i,v,y)&&a(i,v)!==0,S=()=>a(o,y)===0||l(o,v,y),D=()=>m||w(),E=()=>!m||S();for(let R=u,I=u;R<=d;++R)b=t[R%r],!b.skip&&(y=c(b[n]),y!==v&&(m=l(y,i,o),p===null&&D()&&(p=a(y,i)===0?R:I),p!==null&&E()&&(g.push(ah({start:p,end:R,loop:h,count:r,style:f})),p=null),I=R,v=y));return p!==null&&g.push(ah({start:p,end:d,loop:h,count:r,style:f})),g}function zp(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const o=Up(n[i],e.points,t);o.length&&s.push(...o)}return s}function kS(e,t,s,n){let i=0,o=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}function TS(e,t,s,n){const i=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%i,end:(l-1)%i,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%i,end:r%i,loop:n}),o}function OS(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const o=!!e._loop,{start:r,end:a}=kS(s,i,o,n);if(n===!0)return lh(e,[{start:r,end:a,loop:o}],s,t);const l=a<r?a+i:a,c=!!e._fullLoop&&r===0&&a===i-1;return lh(e,TS(s,r,l,c),s,t)}function lh(e,t,s,n){return!n||!n.setContext||!s?t:DS(e,t,s,n)}function DS(e,t,s,n){const i=e._chart.getContext(),o=ch(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=s.length,c=[];let u=o,d=t[0].start,h=d;function f(g,m,p,y){const b=a?-1:1;if(g!==m){for(g+=l;s[g%l].skip;)g-=b;for(;s[m%l].skip;)m+=b;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:p,style:y}),u=y,d=m%l)}}for(const g of t){d=a?d:g.start;let m=s[d%l],p;for(h=d+1;h<=g.end;h++){const y=s[h%l];p=ch(n.setContext(Pn(i,{type:"segment",p0:m,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:r}))),CS(p,u)&&f(d,h-1,g.loop,u),m=y,u=p}d<h-1&&f(d,h-1,g.loop,u)}return c}function ch(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function CS(e,t){if(!t)return!1;const s=[],n=function(i,o){return nu(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function gr(e,t,s){return e.options.clip?e[s]:t[s]}function MS(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:gr(s,t,"left"),right:gr(s,t,"right"),top:gr(n,t,"top"),bottom:gr(n,t,"bottom")}:t}function Vp(e,t){const s=t._clip;if(s.disabled)return!1;const n=MS(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ES{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:t,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Tp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=o.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var gs=new ES;const uh="transparent",AS={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=Qd(e||uh),i=n.valid&&Qd(t||uh);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class IS{constructor(t,s,n,i){const o=s[n];i=dr([t.to,i,o,t.from]);const r=dr([t.from,o,i]);this._active=!0,this._fn=t.fn||AS[t.type||typeof r],this._easing=go[t.easing]||go.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=dr([t.to,s,i,t.from]),this._from=dr([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class uu{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!lt(t))return;const s=Object.keys($t.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!lt(o))return;const r={};for(const a of s)r[a]=o[a];(It(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,s){const n=s.options,i=LS(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&PS(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,s){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const u=s[c];let d=o[c];const h=n.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}o[c]=d=new IS(h,t,c,u),i.push(d)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return gs.add(this._chart,n),!0}}function PS(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const o=e[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function LS(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function dh(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,o=s.max===void 0?t:0;return{start:n?o:i,end:n?i:o}}function RS(e,t,s){if(s===!1)return!1;const n=dh(e,s),i=dh(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function $S(e){let t,s,n,i;return lt(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function Hp(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function hh(e,t,s,n={}){const i=e.keys,o=n.mode==="single";let r,a,l,c;if(t===null)return;let u=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(u=!0,n.all)continue;break}c=e.values[l],Jt(c)&&(o||t===0||ls(t)===ls(c))&&(t+=c)}return!u&&!n.all?0:t}function FS(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[i]:u,[o]:e[u]};return a}function al(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function NS(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function jS(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function BS(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function fh(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const o=e[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function gh(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=NS(o,r,n),d=t.length;let h;for(let f=0;f<d;++f){const g=t[f],{[l]:m,[c]:p}=g,y=g._stacks||(g._stacks={});h=y[c]=BS(i,u,m),h[a]=p,h._top=fh(h,r,!0,n.type),h._bottom=fh(h,r,!1,n.type);const b=h._visualValues||(h._visualValues={});b[a]=p}}function ll(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function WS(e,t){return Pn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function US(e,t,s){return Pn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function ji(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const cl=e=>e==="reset"||e==="none",mh=(e,t)=>t?e:Object.assign({},e),zS=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Hp(s,!0),values:null};class Uo{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=al(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ji(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,o=s.xAxisID=it(n.xAxisID,ll(t,"x")),r=s.yAxisID=it(n.yAxisID,ll(t,"y")),a=s.rAxisID=it(n.rAxisID,ll(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),u=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Zd(this._data,this),t._stacked&&ji(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(lt(s)){const i=this._cachedMeta;this._data=FS(s,i)}else if(n!==s){if(n){Zd(n,this);const i=this._cachedMeta;ji(i),i._parsed=[]}s&&Object.isExtensible(s)&&Dx(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=al(s.vScale,s),s.stack!==n.stack&&(i=!0,ji(s),s.stack=n.stack),this._resyncElements(t),(i||o!==s._stacked)&&(gh(this,s._parsed),s._stacked=al(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,d,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{It(i[t])?h=this.parseArrayData(n,i,t,s):lt(i[t])?h=this.parseObjectData(n,i,t,s):h=this.parsePrimitiveData(n,i,t,s);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<s;++u)n._parsed[u+t]=d=h[u],l&&(f()&&(l=!1),c=d);n._sorted=l}r&&gh(this,h)}parsePrimitiveData(t,s,n,i){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,d=new Array(i);let h,f,g;for(h=0,f=i;h<f;++h)g=h+n,d[h]={[a]:u||o.parse(c[g],g),[l]:r.parse(s[g],g)};return d}parseArrayData(t,s,n,i){const{xScale:o,yScale:r}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+n,d=s[u],a[l]={x:o.parse(d[0],u),y:r.parse(d[1],u)};return a}parseObjectData(t,s,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+n,f=s[h],c[u]={x:o.parse(Cn(f,a),h),y:r.parse(Cn(f,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,o=this._cachedMeta,r=s[t.axis],a={keys:Hp(i,!0),values:s._stacks[t.axis]._visualValues};return hh(a,r,o.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=hh(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,r=i.length,a=this._getOtherScale(t),l=zS(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=jS(a);let h,f;function g(){f=i[h];const m=f[a.axis];return!Jt(f[t.axis])||u>m||d<m}for(h=0;h<r&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),o));++h);if(o){for(h=r-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][t.axis],Jt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=$S(it(this.options.clip,RS(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=US(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=WS(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=t+"-"+s,a=o[r],l=this.enableOptionSharing&&ve(n);if(a)return mh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys($t.elements[t]),g=()=>this.getContext(n,i,s),m=c.resolveNamedOptions(h,f,g,d);return m.$shared&&(m.$shared=l,o[r]=Object.freeze(mh(m,l))),m}_resolveAnimations(t,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,n,s))}const c=new uu(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||cl(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(t,s,n,i){cl(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!cl(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,s,n=!0){const i=this._cachedMeta,o=i.data,r=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(o,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&ji(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function VS(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=kp(n.sort((i,o)=>i-o))}return e._cache.$bar}function HS(e){const t=e.iScale,s=VS(t,e.type);let n=t._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(ve(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=t.ticks.length;i<o;++i)r=t.getPixelForTick(i),l();return n}function qS(e,t,s,n){const i=s.barThickness;let o,r;return St(i)?(o=t.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function JS(e,t,s,n){const i=t.pixels,o=i[e];let r=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function YS(e,t,s,n){const i=s.parse(e[0],n),o=s.parse(e[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function qp(e,t,s,n){return It(e)?YS(e,t,s,n):t[s.axis]=s.parse(e,n),t}function ph(e,t,s,n){const i=e.iScale,o=e.vScale,r=i.getLabels(),a=i===o,l=[];let c,u,d,h;for(c=s,u=s+n;c<u;++c)h=t[c],d={},d[i.axis]=a||i.parse(r[c],c),l.push(qp(h,d,o,c));return l}function ul(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function KS(e,t,s){return e!==0?ls(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function ZS(e){let t,s,n,i,o;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:t,top:i,bottom:o}}function GS(e,t,s,n){let i=t.borderSkipped;const o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=ZS(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(o[yh(u,r,a,l)]=!0,i=c)),o[yh(i,r,a,l)]=!0,e.borderSkipped=o}function yh(e,t,s,n){return n?(e=XS(e,t,s),e=bh(e,s,t)):e=bh(e,t,s),e}function XS(e,t,s){return e===t?s:e===s?t:e}function bh(e,t,s){return e==="start"?t:e==="end"?s:e}function QS(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class Jp extends Uo{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,s,n,i){return ph(t,s,n,i)}parseArrayData(t,s,n,i){return ph(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,d=[];let h,f,g,m;for(h=n,f=n+i;h<f;++h)m=s[h],g={},g[o.axis]=o.parse(Cn(m,c),h),d.push(qp(Cn(m,u),g,r,h));return d}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(t),r=o._custom,a=ul(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i);for(let f=s;f<s+n;f++){const g=this.getParsed(f),m=o||St(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),y=(g._stacks||{})[a.axis],b={horizontal:c,base:m.base,enableBorderRadius:!y||ul(g._custom)||r===y._top||r===y._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};h&&(b.options=d||this.resolveDataElementOptions(f,t[f].active?"active":i));const v=b.options||t[f].options;GS(b,v,y,r),QS(b,v,u.ratio),this.updateElement(t[f],f,b,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const d=u._parsed.find(f=>f[n.axis]===l),h=d&&d[u.vScale.axis];if(St(h)||isNaN(h))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===s).shift()}_getAxis(){const t={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[it(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(t)}_getStackIndex(t,s,n){const i=this._getStacks(t,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||HS(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=ul(c);let d=l[s.axis],h=0,f=n?this.applyStack(s,l,n):d,g,m;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&ls(d)!==ls(c.barEnd)&&(h=0),h+=d);const p=!St(o)&&!u?o:h;let y=s.getPixelForValue(p);if(this.chart.getDataVisibility(t)?g=s.getPixelForValue(h+f):g=y,m=g-y,Math.abs(m)<r){m=KS(m,s,a)*r,d===a&&(y-=m/2);const b=s.getPixelForDecimal(0),v=s.getPixelForDecimal(1),w=Math.min(b,v),S=Math.max(b,v);y=Math.max(Math.min(y,S),w),g=y+m,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(g)-s.getValueForPixel(y))}if(y===s.getPixelForValue(a)){const b=ls(m)*s.getLineWidthForValue(a)/2;y+=b,m-=b}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,o=i.skipNull,r=it(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(s.grouped){const u=o?this._getStackCount(t):s.stackCount,d=i.barThickness==="flex"?JS(t,s,i,u*c):qS(t,s,i,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(it(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;a=d.start+d.chunk*g+d.chunk/2,l=Math.min(r,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}function tk(e,t,s){let n=1,i=1,o=0,r=0;if(t<Vt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(v,w,S)=>Qr(v,a,l,!0)?1:Math.max(w,w*s,S,S*s),g=(v,w,S)=>Qr(v,a,l,!0)?-1:Math.min(w,w*s,S,S*s),m=f(0,c,d),p=f(Zt,u,h),y=g(Ot,c,d),b=g(Ot+Zt,u,h);n=(m-y)/2,i=(p-b)/2,o=-(m+y)/2,r=-(p+b)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class ek extends Uo{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(lt(n[t])){const{key:l="value"}=this._parsing;o=c=>+Cn(n[c],l)}let r,a;for(r=t,a=t+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Ht(this.options.rotation-90)}_getCircumference(){return Ht(this.options.circumference)}_getRotationExtents(){let t=Vt,s=-Vt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),s=Math.max(s,o+r)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(hx(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:g,offsetY:m}=tk(d,u,l),p=(n.width-r)/h,y=(n.height-r)/f,b=Math.max(Math.min(p,y)/2,0),v=vp(this.options.radius,b),w=Math.max(v*l,0),S=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,i.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Vt)}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=o&&c.animateScale,f=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(s,i);let y=this._getRotation(),b;for(b=0;b<s;++b)y+=this._circumference(b,o);for(b=s;b<s+n;++b){const v=this._circumference(b,o),w=t[b],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:g,innerRadius:f};p&&(S.options=m||this.resolveDataElementOptions(b,w.active?"active":i)),y+=v,this.updateElement(w,b,S,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const o=t._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?Vt*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=iu(s._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,o,r,a,l;if(!t){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}}if(!t)return 0;for(i=0,o=t.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(it(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class du extends Uo{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Cp(s,i,r);this._drawStart=a,this._drawCount=l,Mp(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,i),h=r.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,p=Qs(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||i==="none",b=s+n,v=t.length;let w=s>0&&this.getParsed(s-1);for(let S=0;S<v;++S){const D=t[S],E=y?D:{};if(S<s||S>=b){E.skip=!0;continue}const R=this.getParsed(S),I=St(R[f]),B=E[h]=r.getPixelForValue(R[h],S),L=E[f]=o||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,R,l):R[f],S);E.skip=isNaN(B)||isNaN(L)||I,E.stop=S>0&&Math.abs(R[h]-w[h])>p,m&&(E.parsed=R,E.raw=c.data[S]),d&&(E.options=u||this.resolveDataElementOptions(S,D.active?"active":i)),y||this.updateElement(D,S,E,i),w=R}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class sk extends Uo{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=Cp(s,n,i);if(this._drawStart=o,this._drawCount=r,Mp(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=r.axis,g=a.axis,{spanGaps:m,segment:p}=this.options,y=Qs(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||i==="none";let v=s>0&&this.getParsed(s-1);for(let w=s;w<s+n;++w){const S=t[w],D=this.getParsed(w),E=b?S:{},R=St(D[g]),I=E[f]=r.getPixelForValue(D[f],w),B=E[g]=o||R?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[g],w);E.skip=isNaN(I)||isNaN(B)||R,E.stop=w>0&&Math.abs(D[f]-v[f])>y,p&&(E.parsed=D,E.raw=c.data[w]),h&&(E.options=d||this.resolveDataElementOptions(w,S.active?"active":i)),b||this.updateElement(S,w,E,i),v=D}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const t=this._cachedMeta,s=t.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}function hn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hu{static override(t){Object.assign(hu.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return hn()}parse(){return hn()}format(){return hn()}add(){return hn()}diff(){return hn()}startOf(){return hn()}endOf(){return hn()}}var Yp={_date:hu};function nk(e,t,s,n){const{controller:i,data:o,_sorted:r}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?Tx:wn;if(n){if(i._sharedOptions){const u=o[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const h=c(o,t,s-d),f=c(o,t,s+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(o,t,s);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=e,f=h.slice(0,u.lo+1).reverse().findIndex(m=>!St(m[d.axis]));u.lo-=Math.max(0,f);const g=h.slice(u.hi).findIndex(m=>!St(m[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:o.length-1}}function xa(e,t,s,n,i){const o=e.getSortedVisibleDatasetMetas(),r=s[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:d,hi:h}=nk(o[a],t,r,i);for(let f=d;f<=h;++f){const g=u[f];g.skip||n(g,c,f)}}}function ik(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const o=t?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function dl(e,t,s,n,i){const o=[];return!i&&!e.isPointInArea(t)||xa(e,s,t,function(a,l,c){!i&&!Mo(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function ok(e,t,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:d}=tc(r,{x:t.x,y:t.y});Qr(d,c,u)&&i.push({element:r,datasetIndex:a,index:l})}return xa(e,s,t,o),i}function rk(e,t,s,n,i,o){let r=[];const a=ik(s);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(t.x,t.y,i);if(n&&!f)return;const g=u.getCenterPoint(i);if(!(!!o||e.isPointInArea(g))&&!f)return;const p=a(t,g);p<l?(r=[{element:u,datasetIndex:d,index:h}],l=p):p===l&&r.push({element:u,datasetIndex:d,index:h})}return xa(e,s,t,c),r}function hl(e,t,s,n,i,o){return!o&&!e.isPointInArea(t)?[]:s==="r"&&!n?ok(e,t,s,i):rk(e,t,s,n,i,o)}function vh(e,t,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return xa(e,s,t,(l,c,u)=>{l[r]&&l[r](t[s],i)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:o}var ak={modes:{index(e,t,s,n){const i=pn(t,e),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?dl(e,i,o,n,r):hl(e,i,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,s,n){const i=pn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?dl(e,i,o,n,r):hl(e,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,s,n){const i=pn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return dl(e,i,o,n,r)},nearest(e,t,s,n){const i=pn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return hl(e,i,o,s.intersect,n,r)},x(e,t,s,n){const i=pn(t,e);return vh(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=pn(t,e);return vh(e,i,"y",s.intersect,n)}}};const Kp=["left","top","right","bottom"];function Bi(e,t){return e.filter(s=>s.pos===t)}function _h(e,t){return e.filter(s=>Kp.indexOf(s.pos)===-1&&s.box.axis===t)}function Wi(e,t){return e.sort((s,n)=>{const i=t?n:s,o=t?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function lk(e){const t=[];let s,n,i,o,r,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return t}function ck(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Kp.includes(i))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function uk(e,t){const s=ck(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return s}function dk(e){const t=lk(e),s=Wi(t.filter(c=>c.box.fullSize),!0),n=Wi(Bi(t,"left"),!0),i=Wi(Bi(t,"right")),o=Wi(Bi(t,"top"),!0),r=Wi(Bi(t,"bottom")),a=_h(t,"x"),l=_h(t,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:Bi(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function wh(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function Zp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function hk(e,t,s,n){const{pos:i,box:o}=s,r=e.maxPadding;if(!lt(i)){s.size&&(e[i]-=s.size);const d=n[s.stack]||{size:0,count:1};d.size=Math.max(d.size,s.horizontal?o.height:o.width),s.size=d.size/d.count,e[i]+=s.size}o.getPadding&&Zp(r,o.getPadding());const a=Math.max(0,t.outerWidth-wh(r,e,"left","right")),l=Math.max(0,t.outerHeight-wh(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function fk(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function gk(e,t){const s=t.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(t[r],s[r])}),o}return n(e?["left","right"]:["top","bottom"])}function Qi(e,t,s,n){const i=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,gk(a.horizontal,t));const{same:d,other:h}=hk(t,s,a,n);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Qi(i,t,s,n)||u}function mr(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function xh(e,t,s,n){const i=s.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,h=c.size||l.height;ve(c.start)&&(r=c.start),l.fullSize?mr(l,i.left,r,s.outerWidth-i.right-i.left,h):mr(l,t.left+c.placed,r,d,h),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*u,h=c.size||l.width;ve(c.start)&&(o=c.start),l.fullSize?mr(l,o,i.top,h,s.outerHeight-i.bottom-i.top):mr(l,o,t.top+c.placed,h,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}var Hs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=de(e.options.layout.padding),o=Math.max(t-i.width,0),r=Math.max(s-i.height,0),a=dk(e.boxes),l=a.vertical,c=a.horizontal;Tt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),h=Object.assign({},i);Zp(h,de(n));const f=Object.assign({maxPadding:h,w:o,h:r,x:i.left,y:i.top},i),g=uk(l.concat(c),d);Qi(a.fullSize,f,d,g),Qi(l,f,d,g),Qi(c,f,d,g)&&Qi(l,f,d,g),fk(f),xh(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,xh(a.rightAndBottom,f,d,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Tt(a.chartArea,m=>{const p=m.box;Object.assign(p,e.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Gp{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class mk extends Gp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Pr="$chartjs",pk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Sh=e=>e===null||e==="";function yk(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[Pr]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Sh(i)){const o=rh(e,"width");o!==void 0&&(e.width=o)}if(Sh(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=rh(e,"height");o!==void 0&&(e.height=o)}return e}const Xp=bS?{passive:!0}:!1;function bk(e,t,s){e&&e.addEventListener(t,s,Xp)}function vk(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Xp)}function _k(e,t){const s=pk[e.type]||e.type,{x:n,y:i}=pn(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function sa(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function wk(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||sa(a.addedNodes,n),r=r&&!sa(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function xk(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||sa(a.removedNodes,n),r=r&&!sa(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ao=new Map;let kh=0;function Qp(){const e=window.devicePixelRatio;e!==kh&&(kh=e,Ao.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function Sk(e,t){Ao.size||window.addEventListener("resize",Qp),Ao.set(e,t)}function kk(e){Ao.delete(e),Ao.size||window.removeEventListener("resize",Qp)}function Tk(e,t,s){const n=e.canvas,i=n&&cu(n);if(!i)return;const o=Op((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(i),Sk(e,o),r}function fl(e,t,s){s&&s.disconnect(),t==="resize"&&kk(e)}function Ok(e,t,s){const n=e.canvas,i=Op(o=>{e.ctx!==null&&s(_k(o,e))},e);return bk(n,t,i),i}class Dk extends Gp{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(yk(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[Pr])return!1;const n=s[Pr].initial;["height","width"].forEach(o=>{const r=n[o];St(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[Pr],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),r={attach:wk,detach:xk,resize:Tk}[s]||Ok;i[s]=r(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:fl,detach:fl,resize:fl}[s]||vk)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return yS(t,s,n,i)}isAttached(t){const s=t&&cu(t);return!!(s&&s.isConnected)}}function Ck(e){return!lu()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?mk:Dk}let _e=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return Qs(this.x)&&Qs(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}};function Mk(e,t){const s=e.options.ticks,n=Ek(e),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?Ik(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return Pk(t,c,o,r/i),c;const u=Ak(o,t,i);if(r>0){let d,h;const f=r>1?Math.round((l-a)/(r-1)):null;for(pr(t,c,u,St(f)?0:a-f,a),d=0,h=r-1;d<h;d++)pr(t,c,u,o[d],o[d+1]);return pr(t,c,u,l,St(f)?t.length:l+f),c}return pr(t,c,u),c}function Ek(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function Ak(e,t,s){const n=Lk(e),i=t.length/s;if(!n)return Math.max(i,1);const o=vx(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function Ik(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function Pk(e,t,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),i++,o=s[i*n])}function pr(e,t,s,n,i){const o=it(n,0),r=Math.min(it(i,e.length),e.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*s))}function Lk(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const Rk=e=>e==="left"?"right":e==="right"?"left":e,Th=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Oh=(e,t)=>Math.min(t||e,e);function Dh(e,t){const s=[],n=e.length/t,i=e.length;let o=0;for(;o<i;o+=n)s.push(e[Math.floor(o)]);return s}function $k(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>r+a)))return l}function Fk(e,t){Tt(e,s=>{const n=s.gc,i=n.length/2;let o;if(i>t){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function Ui(e){return e.drawTicks?e.tickLength:0}function Ch(e,t){if(!e.display)return 0;const s=Gt(e.font,t),n=de(e.padding);return(It(e.text)?e.text.length:1)*s.lineHeight+n.height}function Nk(e,t){return Pn(e,{scale:t,type:"scale"})}function jk(e,t,s){return Pn(e,{tick:s,index:t,type:"tick"})}function Bk(e,t,s){let n=Dp(e);return(s&&t!=="right"||!s&&t==="right")&&(n=Rk(n)),n}function Wk(e,t,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,h,f,g;const m=r-i,p=a-o;if(e.isHorizontal()){if(f=ke(n,o,a),lt(s)){const y=Object.keys(s)[0],b=s[y];g=u[y].getPixelForValue(b)+m-t}else s==="center"?g=(c.bottom+c.top)/2+m-t:g=Th(e,s,t);h=a-o}else{if(lt(s)){const y=Object.keys(s)[0],b=s[y];f=u[y].getPixelForValue(b)-p+t}else s==="center"?f=(c.left+c.right)/2-p+t:f=Th(e,s,t);g=ke(n,r,i),d=s==="left"?-Zt:Zt}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}class zo extends _e{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=Qe(t,Number.POSITIVE_INFINITY),s=Qe(s,Number.NEGATIVE_INFINITY),n=Qe(n,Number.POSITIVE_INFINITY),i=Qe(i,Number.NEGATIVE_INFINITY),{min:Qe(t,n),max:Qe(s,i),minDefined:Jt(t),maxDefined:Jt(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:Qe(s,Qe(n,s)),max:Qe(n,Qe(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Kx(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Dh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Mk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Dt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=Dt(s.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Oh(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Fe(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-Ui(t.grid)-s.padding-Ch(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),r=xp(Math.min(Math.asin(Fe((u.highest.height+6)/a,-1,1)),Math.asin(Fe(l/c,-1,1))-Math.asin(Fe(h/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ch(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=Ui(o)+l):(t.height=this.maxHeight,t.width=Ui(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=n.padding*2,g=Ht(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(a){const y=n.mirror?0:p*d.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=n.mirror?0:m*d.width+p*h.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,u,p,m)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*t.width,f=n*s.height):(h=n*t.height,f=i*s.width):o==="start"?f=s.width:o==="end"?h=t.width:o!=="inner"&&(h=t.width/2,f=s.width/2),this.paddingLeft=Math.max((h-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+r)*this.width/(this.width-d),0)}else{let u=s.height/2,d=t.height/2;o==="start"?(u=0,d=t.height):o==="end"&&(u=s.height,d=0),this.paddingTop=u+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)St(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Dh(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Oh(s,n));let c=0,u=0,d,h,f,g,m,p,y,b,v,w,S;for(d=0;d<s;d+=l){if(g=t[d].label,m=this._resolveTickFontOptions(d),i.font=p=m.string,y=o[p]=o[p]||{data:{},gc:[]},b=m.lineHeight,v=w=0,!St(g)&&!It(g))v=eh(i,y.data,y.gc,v,g),w=b;else if(It(g))for(h=0,f=g.length;h<f;++h)S=g[h],!St(S)&&!It(S)&&(v=eh(i,y.data,y.gc,v,S),w+=b);r.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}Fk(o,s);const D=r.indexOf(c),E=a.indexOf(u),R=I=>({width:r[I]||0,height:a[I]||0});return{first:R(0),last:R(s-1),widest:R(D),highest:R(E),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return kx(this._alignToPixels?dn(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=jk(this.getContext(),t,n))}return this.$context||(this.$context=Nk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ht(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Ui(o),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,y=function(ot){return dn(n,ot,m)};let b,v,w,S,D,E,R,I,B,L,M,W;if(r==="top")b=y(this.bottom),E=this.bottom-h,I=b-p,L=y(t.top)+p,W=t.bottom;else if(r==="bottom")b=y(this.top),L=t.top,W=y(t.bottom)-p,E=b+p,I=this.top+h;else if(r==="left")b=y(this.right),D=this.right-h,R=b-p,B=y(t.left)+p,M=t.right;else if(r==="right")b=y(this.left),B=t.left,M=y(t.right)-p,D=b+p,R=this.left+h;else if(s==="x"){if(r==="center")b=y((t.top+t.bottom)/2+.5);else if(lt(r)){const ot=Object.keys(r)[0],ut=r[ot];b=y(this.chart.scales[ot].getPixelForValue(ut))}L=t.top,W=t.bottom,E=b+p,I=E+h}else if(s==="y"){if(r==="center")b=y((t.left+t.right)/2);else if(lt(r)){const ot=Object.keys(r)[0],ut=r[ot];b=y(this.chart.scales[ot].getPixelForValue(ut))}D=b-p,R=D-h,B=t.left,M=t.right}const et=it(i.ticks.maxTicksLimit,d),nt=Math.max(1,Math.ceil(d/et));for(v=0;v<d;v+=nt){const ot=this.getContext(v),ut=o.setContext(ot),yt=a.setContext(ot),he=ut.lineWidth,je=ut.color,Ee=yt.dash||[],Yt=yt.dashOffset,Es=ut.tickWidth,us=ut.tickColor,on=ut.tickBorderDash||[],we=ut.tickBorderDashOffset;w=$k(this,v,l),w!==void 0&&(S=dn(n,w,he),c?D=R=B=M=S:E=I=L=W=S,f.push({tx1:D,ty1:E,tx2:R,ty2:I,x1:B,y1:L,x2:M,y2:W,width:he,color:je,borderDash:Ee,borderDashOffset:Yt,tickWidth:Es,tickColor:us,tickBorderDash:on,tickBorderDashOffset:we}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=o,h=Ui(n.grid),f=h+u,g=d?-u:f,m=-Ht(this.labelRotation),p=[];let y,b,v,w,S,D,E,R,I,B,L,M,W="middle";if(i==="top")D=this.bottom-g,E=this._getXAxisLabelAlignment();else if(i==="bottom")D=this.top+g,E=this._getXAxisLabelAlignment();else if(i==="left"){const nt=this._getYAxisLabelAlignment(h);E=nt.textAlign,S=nt.x}else if(i==="right"){const nt=this._getYAxisLabelAlignment(h);E=nt.textAlign,S=nt.x}else if(s==="x"){if(i==="center")D=(t.top+t.bottom)/2+f;else if(lt(i)){const nt=Object.keys(i)[0],ot=i[nt];D=this.chart.scales[nt].getPixelForValue(ot)+f}E=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")S=(t.left+t.right)/2-f;else if(lt(i)){const nt=Object.keys(i)[0],ot=i[nt];S=this.chart.scales[nt].getPixelForValue(ot)}E=this._getYAxisLabelAlignment(h).textAlign}s==="y"&&(l==="start"?W="top":l==="end"&&(W="bottom"));const et=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){v=a[y],w=v.label;const nt=o.setContext(this.getContext(y));R=this.getPixelForTick(y)+o.labelOffset,I=this._resolveTickFontOptions(y),B=I.lineHeight,L=It(w)?w.length:1;const ot=L/2,ut=nt.color,yt=nt.textStrokeColor,he=nt.textStrokeWidth;let je=E;r?(S=R,E==="inner"&&(y===b-1?je=this.options.reverse?"left":"right":y===0?je=this.options.reverse?"right":"left":je="center"),i==="top"?c==="near"||m!==0?M=-L*B+B/2:c==="center"?M=-et.highest.height/2-ot*B+B:M=-et.highest.height+B/2:c==="near"||m!==0?M=B/2:c==="center"?M=et.highest.height/2-ot*B:M=et.highest.height-L*B,d&&(M*=-1),m!==0&&!nt.showLabelBackdrop&&(S+=B/2*Math.sin(m))):(D=R,M=(1-L)*B/2);let Ee;if(nt.showLabelBackdrop){const Yt=de(nt.backdropPadding),Es=et.heights[y],us=et.widths[y];let on=M-Yt.top,we=0-Yt.left;switch(W){case"middle":on-=Es/2;break;case"bottom":on-=Es;break}switch(E){case"center":we-=us/2;break;case"right":we-=us;break;case"inner":y===b-1?we-=us:y>0&&(we-=us/2);break}Ee={left:we,top:on,width:us+Yt.width,height:Es+Yt.height,color:nt.backdropColor}}p.push({label:w,font:I,textOffset:M,options:{rotation:m,color:ut,strokeColor:yt,strokeWidth:he,textAlign:je,textBaseline:W,translation:[S,D],backdrop:Ee}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ht(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return s==="left"?i?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=dn(t,this.left,r)-r/2,u=dn(t,this.right,a)+a/2,d=h=l):(d=dn(t,this.top,r)-r/2,h=dn(t,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,d),s.lineTo(u,h),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Bo(n,i);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;ta(n,c,0,u,l,a)}i&&Wo(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=Gt(n.font),r=de(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||lt(s)?(l+=r.bottom,It(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Wk(this,l,s,a);ta(t,n.text,0,0,o,{color:n.color,maxWidth:d,rotation:h,textAlign:Bk(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=it(t.grid&&t.grid.z,-1),i=it(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zo.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return Gt(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class yr{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;Vk(s)&&(n=this.register(s));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,Uk(t,r,n),this.override&&$t.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in $t[i]&&(delete $t[i][n],this.override&&delete Mn[n])}}function Uk(e,t,s){const n=Co(Object.create(null),[s?$t.get(s):{},$t.get(t),e.defaults]);$t.set(t,n),e.defaultRoutes&&zk(t,e.defaultRoutes),e.descriptors&&$t.describe(t,e.descriptors)}function zk(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),o=[e].concat(n).join("."),r=t[s].split("."),a=r.pop(),l=r.join(".");$t.route(o,i,l,a)})}function Vk(e){return"id"in e&&"defaults"in e}class Hk{constructor(){this.controllers=new yr(Uo,"datasets",!0),this.elements=new yr(_e,"elements"),this.plugins=new yr(Object,"plugins"),this.scales=new yr(zo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(t,o,i):Tt(i,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,s,n){const i=tu(t);Dt(n["before"+i],[],n),s[t](n),Dt(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var ns=new Hk;class qk{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,s,n);return s==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,s,n,i){i=i||{};for(const o of t){const r=o.plugin,a=r[n],l=[s,i,o.options];if(Dt(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){St(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=it(n.options&&n.options.plugins,{}),o=Jk(n);return i===!1&&!s?[]:Kk(t,o,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function Jk(e){const t={},s=[],n=Object.keys(ns.plugins.items);for(let o=0;o<n.length;o++)s.push(ns.getPlugin(n[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),t[r.id]=!0)}return{plugins:s,localIds:t}}function Yk(e,t){return!t&&e===!1?null:e===!0?{}:e}function Kk(e,{plugins:t,localIds:s},n,i){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=Yk(n[l],i);c!==null&&o.push({plugin:a,options:Zk(e.config,{plugin:a,local:s[l]},c,r)})}return o}function Zk(e,{plugin:t,local:s},n,i){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return s&&t.defaults&&r.push(t.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nc(e,t){const s=$t.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function Gk(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function Xk(e,t){return e===t?"_index_":"_value_"}function Mh(e){if(e==="x"||e==="y"||e==="r")return e}function Qk(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ic(e,...t){if(Mh(e))return e;for(const s of t){const n=s.axis||Qk(s.position)||e.length>1&&Mh(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Eh(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function tT(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Eh(e,"x",s[0])||Eh(e,"y",s[0])}return{}}function eT(e,t){const s=Mn[e.type]||{scales:{}},n=t.scales||{},i=nc(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!lt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=ic(r,a,tT(r,e),$t.scales[a.type]),c=Xk(l,i),u=s.scales||{};o[r]=ho(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||nc(a,t),u=(Mn[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Gk(d,l),f=r[h+"AxisID"]||h;o[f]=o[f]||Object.create(null),ho(o[f],[{axis:h},n[f],u[d]])})}),Object.keys(o).forEach(r=>{const a=o[r];ho(a,[$t.scales[a.type],$t.scale])}),o}function ty(e){const t=e.options||(e.options={});t.plugins=it(t.plugins,{}),t.scales=eT(e,t)}function ey(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function sT(e){return e=e||{},e.data=ey(e.data),ty(e),e}const Ah=new Map,sy=new Set;function br(e,t){let s=Ah.get(e);return s||(s=t(),Ah.set(e,s),sy.add(s)),s}const zi=(e,t,s)=>{const n=Cn(t,s);n!==void 0&&e.add(n)};class nT{constructor(t){this._config=sT(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ey(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ty(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return br(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return br(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return br(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return br(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{t&&(l.add(t),u.forEach(d=>zi(l,t,d))),u.forEach(d=>zi(l,i,d)),u.forEach(d=>zi(l,Mn[o]||{},d)),u.forEach(d=>zi(l,$t,d)),u.forEach(d=>zi(l,ec,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),sy.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,Mn[s]||{},$t.datasets[s]||{},{type:s},$t,ec]}resolveNamedOptions(t,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ih(this._resolverCache,t,i);let l=r;if(oT(r,s)){o.$shared=!1,n=be(n)?n():n;const c=this.createResolver(t,n,a);l=bi(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(t,s,n=[""],i){const{resolver:o}=Ih(this._resolverCache,t,n);return lt(s)?bi(o,s,void 0,i):o}}function Ih(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let o=n.get(i);return o||(o={resolver:ou(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const iT=e=>lt(e)&&Object.getOwnPropertyNames(e).some(t=>be(e[t]));function oT(e,t){const{isScriptable:s,isIndexable:n}=Lp(e);for(const i of t){const o=s(i),r=n(i),a=(r||o)&&e[i];if(o&&(be(a)||iT(a))||r&&It(a))return!0}return!1}var rT="4.5.0";const aT=["top","bottom","left","right","chartArea"];function Ph(e,t){return e==="top"||e==="bottom"||aT.indexOf(e)===-1&&t==="x"}function Lh(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Rh(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),Dt(s&&s.onComplete,[e],t)}function lT(e){const t=e.chart,s=t.options.animation;Dt(s&&s.onProgress,[e],t)}function ny(e){return lu()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Lr={},$h=e=>{const t=ny(e);return Object.values(Lr).filter(s=>s.canvas===t).pop()};function cT(e,t,s){const n=Object.keys(e);for(const i of n){const o=+i;if(o>=t){const r=e[i];delete e[i],(s>0||o>t)&&(e[o+s]=r)}}}function uT(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class oe{static defaults=$t;static instances=Lr;static overrides=Mn;static registry=ns;static version=rT;static getChart=$h;static register(...t){ns.add(...t),Fh()}static unregister(...t){ns.remove(...t),Fh()}constructor(t,s){const n=this.config=new nT(s),i=ny(t),o=$h(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Ck(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=dx(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Cx(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Lr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",Rh),gs.listen(this,"progress",lT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return St(t)?s&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ns}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():oh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sh(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(t,s){gs.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,oh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Dt(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Tt(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=ic(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Tt(o,r=>{const a=r.options,l=a.id,c=ic(l,a),u=it(a.type,r.dtype);(a.position===void 0||Ph(a.position,c)!==Ph(r.dposition))&&(a.position=r.dposition),i[l]=!0;let d=null;if(l in n&&n[l].type===u)d=n[l];else{const h=ns.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),Tt(i,(r,a)=>{r||delete n[a]}),Tt(n,r=>{Hs.configure(this,r,r.options),Hs.addBox(this,r)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort(Lh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||nc(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=ns.getController(a),{datasetElementType:c,dataElementType:u}=$t.datasets[a];Object.assign(l,{dataElementType:ns.getElement(u),datasetElementType:c&&ns.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&o.indexOf(d)===-1;d.buildOrUpdateElements(h),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Tt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Lh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Tt(this.scales,t=>{Hs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Jd(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;cT(t,i,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!Jd(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Hs.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Tt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,be(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),Rh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Vp(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Bo(s,i),t.controller.draw(),i&&Wo(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Mo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const o=ak.modes[s];return typeof o=="function"?o(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);ve(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),gs.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),sh(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Lr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),t[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Tt(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Tt(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},Tt(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Kr(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),r=o(s,t),a=n?t:o(t,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(t,i,n,r),l=yx(t),c=uT(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Dt(o.onHover,[t,a,this],this),l&&Dt(o.onClick,[t,a,this],this));const u=!Kr(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}function Fh(){return Tt(oe.instances,e=>e._plugins.invalidate())}function iy(e,t,s=t){e.lineCap=it(s.borderCapStyle,t.borderCapStyle),e.setLineDash(it(s.borderDash,t.borderDash)),e.lineDashOffset=it(s.borderDashOffset,t.borderDashOffset),e.lineJoin=it(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=it(s.borderWidth,t.borderWidth),e.strokeStyle=it(s.borderColor,t.borderColor)}function dT(e,t,s){e.lineTo(s.x,s.y)}function hT(e){return e.stepped?Bx:e.tension||e.cubicInterpolationMode==="monotone"?Wx:dT}function oy(e,t,s={}){const n=e.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=t,l=Math.max(i,r),c=Math.min(o,a),u=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function fT(e,t,s,n){const{points:i,options:o}=t,{count:r,start:a,loop:l,ilen:c}=oy(i,s,n),u=hT(o);let{move:d=!0,reverse:h}=n||{},f,g,m;for(f=0;f<=c;++f)g=i[(a+(h?c-f:f))%r],!g.skip&&(d?(e.moveTo(g.x,g.y),d=!1):u(e,m,g,h,o.stepped),m=g);return l&&(g=i[(a+(h?c:0))%r],u(e,m,g,h,o.stepped)),!!l}function gT(e,t,s,n){const i=t.points,{count:o,start:r,ilen:a}=oy(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,d=0,h,f,g,m,p,y;const b=w=>(r+(c?a-w:w))%o,v=()=>{m!==p&&(e.lineTo(u,p),e.lineTo(u,m),e.lineTo(u,y))};for(l&&(f=i[b(0)],e.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[b(h)],f.skip)continue;const w=f.x,S=f.y,D=w|0;D===g?(S<m?m=S:S>p&&(p=S),u=(d*u+w)/++d):(v(),e.lineTo(w,S),g=D,d=0,m=p=S),y=S}v()}function oc(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?gT:fT}function mT(e){return e.stepped?vS:e.tension||e.cubicInterpolationMode==="monotone"?_S:yn}function pT(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),iy(e,t.options),e.stroke(i)}function yT(e,t,s,n){const{segments:i,options:o}=t,r=oc(t);for(const a of i)iy(e,o,a.style),e.beginPath(),r(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const bT=typeof Path2D=="function";function vT(e,t,s,n){bT&&!t.options.segment?pT(e,t,s,n):yT(e,t,s,n)}class Oi extends _e{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;dS(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=OS(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],o=this.points,r=zp(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=mT(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:d,end:h}=r[c],f=o[d],g=o[h];if(f===g){a.push(f);continue}const m=Math.abs((i-f[s])/(g[s]-f[s])),p=l(f,g,m,n.stepped);p[s]=t[s],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,s,n){return oc(this)(t,this,s,n)}path(t,s,n){const i=this.segments,o=oc(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(t,this,a,{start:s,end:s+n-1});return!!r}draw(t,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),vT(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Nh(e,t,s,n){const i=e.options,{[s]:o}=e.getProps([s],n);return Math.abs(t-o)<i.radius+i.hitRadius}class Sa extends _e{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,n){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(s-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,s){return Nh(this,t,"x",s)}inYRange(t,s){return Nh(this,t,"y",s)}getCenterPoint(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const n=s&&t.borderWidth||0;return(s+n)*2}draw(t,s){const n=this.options;this.skip||n.radius<.1||!Mo(this,s,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,sc(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ry(e,t){const{x:s,y:n,base:i,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-d,u=n+d):(d=o/2,a=s-d,l=s+d,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function qs(e,t,s,n){return e?0:Fe(t,s,n)}function _T(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,o=Pp(n);return{t:qs(i.top,o.top,0,s),r:qs(i.right,o.right,0,t),b:qs(i.bottom,o.bottom,0,s),l:qs(i.left,o.left,0,t)}}function wT(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=kn(i),r=Math.min(t,s),a=e.borderSkipped,l=n||lt(i);return{topLeft:qs(!l||a.top||a.left,o.topLeft,0,r),topRight:qs(!l||a.top||a.right,o.topRight,0,r),bottomLeft:qs(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:qs(!l||a.bottom||a.right,o.bottomRight,0,r)}}function xT(e){const t=ry(e),s=t.right-t.left,n=t.bottom-t.top,i=_T(e,s/2,n/2),o=wT(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function gl(e,t,s,n){const i=t===null,o=s===null,a=e&&!(i&&o)&&ry(e,n);return a&&(i||Vs(t,a.left,a.right))&&(o||Vs(s,a.top,a.bottom))}function ST(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function kT(e,t){e.rect(t.x,t.y,t.w,t.h)}function ml(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,o=(e.x+e.w!==s.x+s.w?t:0)-n,r=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+o,h:e.h+r,radius:e.radius}}class ay extends _e{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=xT(this),a=ST(r.radius)?Eo:kT;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,ml(r,s,o)),t.clip(),a(t,ml(o,-s,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,ml(o,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return gl(this,t,s,n)}inXRange(t,s){return gl(this,t,null,s)}inYRange(t,s){return gl(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function TT(e,t,s){const n=e.segments,i=e.points,o=t.points,r=[];for(const a of n){let{start:l,end:c}=a;c=ka(l,c,i);const u=rc(s,i[l],i[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=zp(t,u);for(const h of d){const f=rc(s,o[h.start],o[h.end],h.loop),g=Up(a,i,f);for(const m of g)r.push({source:m,target:h,start:{[s]:jh(u,f,"start",Math.max)},end:{[s]:jh(u,f,"end",Math.min)}})}}return r}function rc(e,t,s,n){if(n)return;let i=t[e],o=s[e];return e==="angle"&&(i=os(i),o=os(o)),{property:e,start:i,end:o}}function OT(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=ka(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function ka(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function jh(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function ly(e,t){let s=[],n=!1;return It(e)?(n=!0,s=e):s=OT(e,t),s.length?new Oi({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Bh(e){return e&&e.fill!==!1}function DT(e,t,s){let i=e[t].fill;const o=[t];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Jt(i))return i;if(r=e[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function CT(e,t,s){const n=IT(e);if(lt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Jt(i)&&Math.floor(i)===i?MT(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function MT(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function ET(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:lt(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function AT(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:lt(e)?n=e.value:n=t.getBaseValue(),n}function IT(e){const t=e.options,s=t.fill;let n=it(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function PT(e){const{scale:t,index:s,line:n}=e,i=[],o=n.segments,r=n.points,a=LT(t,s);a.push(ly({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)RT(i,r[u],a)}return new Oi({points:i,options:{}})}function LT(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===t)break;o.hidden||s.unshift(o.dataset)}return s}function RT(e,t,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=$T(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function $T(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],d=r[u.start][s],h=r[u.end][s];if(Vs(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:n}}class cy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Vt},t.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,o=t.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function FT(e){const{chart:t,fill:s,line:n}=e;if(Jt(s))return NT(t,s);if(s==="stack")return PT(e);if(s==="shape")return!0;const i=jT(e);return i instanceof cy?i:ly(i,n)}function NT(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function jT(e){return(e.scale||{}).getPointPositionForValue?WT(e):BT(e)}function BT(e){const{scale:t={},fill:s}=e,n=ET(s,t);if(Jt(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function WT(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,o=n.reverse?t.max:t.min,r=AT(s,t,o),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,o);return new cy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,r));return a}function pl(e,t,s){const n=FT(t),{chart:i,index:o,line:r,scale:a,axis:l}=t,c=r.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},g=i.getDatasetMeta(o),m=Vp(i,g);n&&r.points.length&&(Bo(e,s),UT(e,{line:r,target:n,above:h,below:f,area:s,scale:a,axis:l,clip:m}),Wo(e))}function UT(e,t){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save();let u=o;o!==i&&(c==="x"?(Wh(e,n,r.top),yl(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Wh(e,n,r.bottom)):c==="y"&&(Uh(e,n,r.left),yl(e,{line:s,target:n,color:o,scale:a,property:c,clip:l}),e.restore(),e.save(),Uh(e,n,r.right),u=i)),yl(e,{line:s,target:n,color:u,scale:a,property:c,clip:l}),e.restore()}function Wh(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[ka(l,c,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,s),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Uh(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[ka(l,c,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(s,u.y),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(s,d.y)}e.lineTo(s,t.first().y),e.closePath(),e.clip()}function yl(e,t){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=t,l=TT(s,n,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=o}={}}=c,g=n!==!0;e.save(),e.fillStyle=f,zT(e,r,a,g&&rc(i,d,h)),e.beginPath();const m=!!s.pathSegment(e,c);let p;if(g){m?e.closePath():zh(e,n,h,i);const y=!!n.pathSegment(e,u,{move:m,reverse:!0});p=m&&y,p||zh(e,n,d,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function zT(e,t,s,n){const i=t.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,u,d;o==="x"?(l=r,c=i.top,u=a,d=i.bottom):(l=i.left,c=r,u=i.right,d=a),e.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),d=Math.min(d,s.bottom)),e.rect(l,c,u-l,d-c),e.clip()}}function zh(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var fu={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Oi&&(l={visible:e.isDatasetVisible(r),index:r,fill:CT(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=DT(i,r,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&pl(e.ctx,a,o))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Bh(o)&&pl(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!Bh(n)||s.drawTime!=="beforeDatasetDraw"||pl(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Vh=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},VT=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Hh extends _e{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=Dt(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=Gt(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Vh(n,o);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;o.textAlign="left",o.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,m)=>{const p=n+s/2+o.measureText(g.text).width;(m===0||c[c.length-1]+p+2*a>r)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:p,height:i},c[c.length-1]+=p+a}),d}_fitCols(t,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let d=a,h=0,f=0,g=0,m=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:b,itemHeight:v}=HT(n,s,o,p,i);y>0&&f+v+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,m++,h=f=0),l[y]={left:g,top:f,col:m,width:b,height:v},h=Math.max(h,b),f+=v+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=gi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=ke(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=ke(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=ke(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=ke(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Bo(t,this),this._draw(),Wo(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,a=$t.color,l=gi(t.rtl,this.left,this.width),c=Gt(r.font),{padding:u}=r,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:p}=Vh(r,d),y=function(D,E,R){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const I=it(R.lineWidth,1);if(i.fillStyle=it(R.fillStyle,a),i.lineCap=it(R.lineCap,"butt"),i.lineDashOffset=it(R.lineDashOffset,0),i.lineJoin=it(R.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=it(R.strokeStyle,a),i.setLineDash(it(R.lineDash,[])),r.usePointStyle){const B={radius:m*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:I},L=l.xPlus(D,g/2),M=E+h;Ap(i,B,L,M,r.pointStyleWidth&&g)}else{const B=E+Math.max((d-m)/2,0),L=l.leftForLtr(D,g),M=kn(R.borderRadius);i.beginPath(),Object.values(M).some(W=>W!==0)?Eo(i,{x:L,y:B,w:g,h:m,radius:M}):i.rect(L,B,g,m),i.fill(),I!==0&&i.stroke()}i.restore()},b=function(D,E,R){ta(i,R.text,D,E+p/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:ke(o,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:ke(o,this.top+w+u,this.bottom-s[0].height),line:0},jp(this.ctx,t.textDirection);const S=p+u;this.legendItems.forEach((D,E)=>{i.strokeStyle=D.fontColor,i.fillStyle=D.fontColor;const R=i.measureText(D.text).width,I=l.textAlign(D.textAlign||(D.textAlign=r.textAlign)),B=g+h+R;let L=f.x,M=f.y;l.setWidth(this.width),v?E>0&&L+B+u>this.right&&(M=f.y+=S,f.line++,L=f.x=ke(o,this.left+u,this.right-n[f.line])):E>0&&M+S>this.bottom&&(L=f.x=L+s[f.line].width+u,f.line++,M=f.y=ke(o,this.top+w+u,this.bottom-s[f.line].height));const W=l.x(L);if(y(W,M,D),L=Mx(I,L+g+h,v?L+B:this.right,t.rtl),b(l.x(L),M,D),v)f.x+=B+u;else if(typeof D.text!="string"){const et=c.lineHeight;f.y+=uy(D,et)+u}else f.y+=S}),Bp(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=Gt(s.font),i=de(s.padding);if(!s.display)return;const o=gi(t.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=ke(t.align,d,this.right-h);else{const g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);u=c+ke(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=ke(a,d,d+h);r.textAlign=o.textAlign(Dp(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,ta(r,s.text,f,u,n)}_computeTitleHeight(){const t=this.options.title,s=Gt(t.font),n=de(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,o;if(Vs(t,this.left,this.right)&&Vs(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Vs(t,i.left,i.left+i.width)&&Vs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!YT(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,o=VT(i,n);i&&!o&&Dt(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!o&&Dt(s.onHover,[t,n,this],this)}else n&&Dt(s.onClick,[t,n,this],this)}}function HT(e,t,s,n,i){const o=qT(n,e,t,s),r=JT(i,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function qT(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),t+s.size/2+n.measureText(i).width}function JT(e,t,s){let n=e;return typeof t.text!="string"&&(n=uy(t,s)),n}function uy(e,t){const s=e.text?e.text.length:0;return t*s}function YT(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Ta={id:"legend",_element:Hh,start(e,t,s){const n=e.legend=new Hh({ctx:e.ctx,options:s,chart:e});Hs.configure(e,n,s),Hs.addBox(e,n)},stop(e){Hs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;Hs.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=de(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const to={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,o=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=yi(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function es(e,t){return t&&(It(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ms(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function KT(e,t){const{element:s,datasetIndex:n,index:i}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:e,label:r,parsed:o.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function qh(e,t){const s=e.chart.ctx,{body:n,footer:i,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=Gt(t.bodyFont),c=Gt(t.titleFont),u=Gt(t.footerFont),d=o.length,h=i.length,f=n.length,g=de(t.padding);let m=g.height,p=0,y=n.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*w+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0;const v=function(w){p=Math.max(p,s.measureText(w).width+b)};return s.save(),s.font=c.string,Tt(e.title,v),s.font=l.string,Tt(e.beforeBody.concat(e.afterBody),v),b=t.displayColors?r+2+t.boxPadding:0,Tt(n,w=>{Tt(w.before,v),Tt(w.lines,v),Tt(w.after,v)}),b=0,s.font=u.string,Tt(e.footer,v),s.restore(),p+=g.width,{width:p,height:m}}function ZT(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function GT(e,t,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(e==="left"&&i+o+r>t.width||e==="right"&&i-o-r<0)return!0}function XT(e,t,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),GT(c,e,t,s)&&(c="center"),c}function Jh(e,t,s){const n=s.yAlign||t.yAlign||ZT(e,s);return{xAlign:s.xAlign||t.xAlign||XT(e,t,s,n),yAlign:n}}function QT(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function t1(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function Yh(e,t,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=kn(r);let g=QT(t,a);const m=t1(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(d,f)+i),{x:Fe(g,0,n.width-t.width),y:Fe(m,0,n.height-t.height)}}function vr(e,t,s){const n=de(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Kh(e){return es([],ms(e))}function e1(e,t,s){return Pn(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function Zh(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const dy={beforeTitle:fs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:fs,beforeBody:fs,beforeLabel:fs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return St(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:fs,afterBody:fs,beforeFooter:fs,footer:fs,afterFooter:fs};function me(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?dy[t].call(s,n):i}let Gh=class extends _e{static positioners=to;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new uu(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=e1(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=me(n,"beforeTitle",this,t),o=me(n,"title",this,t),r=me(n,"afterTitle",this,t);let a=[];return a=es(a,ms(i)),a=es(a,ms(o)),a=es(a,ms(r)),a}getBeforeBody(t,s){return Kh(me(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return Tt(t,o=>{const r={before:[],lines:[],after:[]},a=Zh(n,o);es(r.before,ms(me(a,"beforeLabel",this,o))),es(r.lines,me(a,"label",this,o)),es(r.after,ms(me(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(t,s){return Kh(me(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=me(n,"beforeFooter",this,t),o=me(n,"footer",this,t),r=me(n,"afterFooter",this,t);let a=[];return a=es(a,ms(i)),a=es(a,ms(o)),a=es(a,ms(r)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(KT(this.chart,s[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,n))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,n))),Tt(a,u=>{const d=Zh(t.callbacks,u);i.push(me(d,"labelColor",this,u)),o.push(me(d,"labelPointStyle",this,u)),r.push(me(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=to[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=qh(this,n),c=Object.assign({},a,l),u=Jh(this.chart,n,c),d=Yh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const o=this.getCaretPosition(t,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=kn(a),{x:h,y:f}=t,{width:g,height:m}=s;let p,y,b,v,w,S;return o==="center"?(w=f+m/2,i==="left"?(p=h,y=p-r,v=w+r,S=w-r):(p=h+g,y=p+r,v=w-r,S=w+r),b=p):(i==="left"?y=h+Math.max(l,u)+r:i==="right"?y=h+g-Math.max(c,d)-r:y=this.caretX,o==="top"?(v=f,w=v-r,p=y-r,b=y+r):(v=f+m,w=v+r,p=y+r,b=y-r),S=v),{x1:p,x2:y,x3:b,y1:v,y2:w,y3:S}}drawTitle(t,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=gi(n.rtl,this.x,this.width);for(t.x=vr(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=Gt(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,u=Gt(o.bodyFont),d=vr(this,"left",o),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=s.y+f;if(o.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(h,c)+c/2,y=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,sc(t,m,p,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,sc(t,m,p,y)}else{t.lineWidth=lt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const m=i.leftForLtr(h,c),p=i.leftForLtr(i.xPlus(h,1),c-2),y=kn(r.borderRadius);Object.values(y).some(b=>b!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Eo(t,{x:m,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Eo(t,{x:p,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=r.backgroundColor,t.fillRect(p,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,d=Gt(n.bodyFont);let h=d.lineHeight,f=0;const g=gi(n.rtl,this.x,this.width),m=function(R){s.fillText(R,g.x(t.x+f),t.y+h/2),t.y+=h+o},p=g.textAlign(r);let y,b,v,w,S,D,E;for(s.textAlign=r,s.textBaseline="middle",s.font=d.string,t.x=vr(this,p,n),s.fillStyle=n.bodyColor,Tt(this.beforeBody,m),f=a&&p!=="right"?r==="center"?c/2+u:c+2+u:0,w=0,D=i.length;w<D;++w){for(y=i[w],b=this.labelTextColors[w],s.fillStyle=b,Tt(y.before,m),v=y.lines,a&&v.length&&(this._drawColorBox(s,t,w,g,n),h=Math.max(d.lineHeight,l)),S=0,E=v.length;S<E;++S)m(v[S]),h=d.lineHeight;Tt(y.after,m)}f=0,h=d.lineHeight,Tt(this.afterBody,m),t.y-=o}drawFooter(t,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=gi(n.rtl,this.x,this.width);for(t.x=vr(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=Gt(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=kn(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+d,l),r==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-h,l),s.quadraticCurveTo(a+c,l,a+c,l+h),r==="center"&&o==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+u-g),s.quadraticCurveTo(a+c,l+u,a+c-g,l+u),r==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+f,l+u),s.quadraticCurveTo(a,l+u,a,l+u-f),r==="center"&&o==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+d),s.quadraticCurveTo(a,l,a+d,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=to[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=qh(this,t),l=Object.assign({},r,this._size),c=Jh(s,t,l),u=Yh(t,l,c,s);(i._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=de(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,s),jp(t,s.textDirection),o.y+=r.top,this.drawTitle(o,t,s),this.drawBody(o,t,s),this.drawFooter(o,t,s),Bp(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Kr(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,s,n),a=this._positionChanged(r,t),l=s||!Kr(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const o=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,s){const{caretX:n,caretY:i,options:o}=this,r=to[o.position].call(this,t,s);return r!==!1&&(n!==r.x||i!==r.y)}};var Di={id:"tooltip",_element:Gh,positioners:to,afterInit(e,t,s){s&&(e.tooltip=new Gh({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function s1(e,t){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,f=o||1,g=u-1,{min:m,max:p}=t,y=!St(r),b=!St(a),v=!St(c),w=(p-m)/(d+1);let S=Yd((p-m)/g/f)*f,D,E,R,I;if(S<1e-14&&!y&&!b)return[{value:m},{value:p}];I=Math.ceil(p/S)-Math.floor(m/S),I>g&&(S=Yd(I*S/g/f)*f),St(l)||(D=Math.pow(10,l),S=Math.ceil(S*D)/D),i==="ticks"?(E=Math.floor(m/S)*S,R=Math.ceil(p/S)*S):(E=m,R=p),y&&b&&o&&wx((a-r)/o,S/1e3)?(I=Math.round(Math.min((a-r)/S,u)),S=(a-r)/I,E=r,R=a):v?(E=y?r:E,R=b?a:R,I=c-1,S=(R-E)/I):(I=(R-E)/S,fo(I,Math.round(I),S/1e3)?I=Math.round(I):I=Math.ceil(I));const B=Math.max(Kd(S),Kd(E));D=Math.pow(10,St(l)?B:l),E=Math.round(E*D)/D,R=Math.round(R*D)/D;let L=0;for(y&&(h&&E!==r?(s.push({value:r}),E<r&&L++,fo(Math.round((E+L*S)*D)/D,r,Xh(r,w,e))&&L++):E<r&&L++);L<I;++L){const M=Math.round((E+L*S)*D)/D;if(b&&M>a)break;s.push({value:M})}return b&&h&&R!==a?s.length&&fo(s[s.length-1].value,a,Xh(a,w,e))?s[s.length-1].value=a:s.push({value:a}):(!b||R===a)&&s.push({value:R}),s}function Xh(e,t,{horizontal:s,minRotation:n}){const i=Ht(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class n1 extends zo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return St(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(t){const l=ls(i),c=ls(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(i-l)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=s1(i,o);return t.bounds==="ticks"&&xx(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return iu(t,this.chart.options.locale,this.options.ticks.format)}}class Ci extends n1{static id="linear";static defaults={ticks:{callback:Ep.formatters.numeric}};determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=Jt(t)?t:0,this.max=Jt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=Ht(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Oa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ye=Object.keys(Oa);function Qh(e,t){return e-t}function tf(e,t){if(St(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),Jt(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(Qs(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function ef(e,t,s,n){const i=ye.length;for(let o=ye.indexOf(e);o<i-1;++o){const r=Oa[ye[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-t)/(a*r.size))<=n)return ye[o]}return ye[i-1]}function i1(e,t,s,n,i){for(let o=ye.length-1;o>=ye.indexOf(s);o--){const r=ye[o];if(Oa[r].common&&e._adapter.diff(i,n,r)>=t-1)return r}return ye[s?ye.indexOf(s):0]}function o1(e){for(let t=ye.indexOf(e)+1,s=ye.length;t<s;++t)if(Oa[ye[t]].common)return ye[t]}function sf(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=su(s,t),o=s[n]>=t?s[n]:s[i];e[o]=!0}}function r1(e,t,s,n){const i=e._adapter,o=+i.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function nf(e,t,s){const n=[],i={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:r1(e,n,i,s)}class tn extends zo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new Yp._date(t.adapters.date);i.init(s),ho(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:tf(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Jt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=Jt(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=Ox(i,o,r);return this._unit=s.unit||(n.autoSkip?ef(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):i1(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:o1(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),nf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,o;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;s=Fe(s,0,r),n=Fe(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||ef(o.minUnit,s,n,this._getLabelCapacity(s)),a=it(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Qs(l)||l===!0,u={};let d=s,h,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<n;h=+t.add(h,a,r),f++)sf(u,h,g);return(h===n||i.bounds==="ticks"||f===1)&&sf(u,h,g),Object.keys(u).sort(Qh).map(m=>+m)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return Dt(r,[t,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=n[s],f=c&&d&&h&&h.major;return this._adapter.format(t,i||(f?d:u))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=Ht(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(t,0,nf(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(tf(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return kp(t.sort(Qh))}}function _r(e,t,s){let n=0,i=e.length-1,o,r,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=wn(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=wn(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[i]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class r2 extends tn{static id="timeseries";static defaults=tn.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=_r(s,this.min),this._tableRange=_r(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)u=i[r+1],l=i[r-1],c=i[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(_r(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return _r(this._table,n*this._tableRange+this._minPos,!0)}}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const a1={datetime:O.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:O.TIME_WITH_SECONDS,minute:O.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Yp._date.override({_id:"luxon",_create:function(e){return O.fromMillis(e,this.options)},init(e){this.options.locale||(this.options.locale=e.locale)},formats:function(){return a1},parse:function(e,t){const s=this.options,n=typeof e;return e===null||n==="undefined"?null:(n==="number"?e=this._create(e):n==="string"?typeof t=="string"?e=O.fromFormat(e,t,s):e=O.fromISO(e,s):e instanceof Date?e=O.fromJSDate(e,s):n==="object"&&!(e instanceof O)&&(e=O.fromObject(e,s)),e.isValid?e.valueOf():null)},format:function(e,t){const s=this._create(e);return typeof t=="string"?s.toFormat(t):s.toLocaleString(t)},add:function(e,t,s){const n={};return n[s]=t,this._create(e).plus(n).valueOf()},diff:function(e,t,s){return this._create(e).diff(this._create(t)).as(s).valueOf()},startOf:function(e,t,s){if(t==="isoWeek"){s=Math.trunc(Math.min(Math.max(0,s),6));const n=this._create(e);return n.minus({days:(n.weekday-s+7)%7}).startOf("day").valueOf()}return t?this._create(e).startOf(t).valueOf():e},endOf:function(e,t){return this._create(e).endOf(t).valueOf()}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const of={modes:{point(e,t){return Rr(e,t,{intersect:!0})},nearest(e,t,s){return u1(e,t,s)},x(e,t,s){return Rr(e,t,{intersect:s.intersect,axis:"x"})},y(e,t,s){return Rr(e,t,{intersect:s.intersect,axis:"y"})}}};function gu(e,t,s){return(of.modes[s.mode]||of.modes.nearest)(e,t,s)}function l1(e,t,s){return s!=="x"&&s!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,s,!0)}function c1(e,t,s){return s==="x"?{x:e.x,y:t.y}:s==="y"?{x:t.x,y:e.y}:t}function Rr(e,t,s){return e.filter(n=>s.intersect?n.inRange(t.x,t.y):l1(n,t,s.axis))}function u1(e,t,s){let n=Number.POSITIVE_INFINITY;return Rr(e,t,s).reduce((i,o)=>{const r=o.getCenterPoint(),a=c1(t,r,s.axis),l=yi(t,a);return l<n?(i=[o],n=l):l===n&&i.push(o),i},[]).sort((i,o)=>i._index-o._index).slice(0,1)}function Ln(e,t,s){const n=Math.cos(s),i=Math.sin(s),o=t.x,r=t.y;return{x:o+n*(e.x-o)-i*(e.y-r),y:r+i*(e.x-o)+n*(e.y-r)}}const d1=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,xn=.001,Da=(e,t,s)=>Math.min(s,Math.max(t,e)),hy=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function h1(e,t,s){for(const n of Object.keys(e))e[n]=Da(e[n],t,s);return e}function f1(e,t,s,n){return!e||!t||s<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(s+n,2)}function fy(e,{x:t,y:s,x2:n,y2:i},o,{borderWidth:r,hitTolerance:a}){const l=(r+a)/2,c=e.x>=t-l-xn&&e.x<=n+l+xn,u=e.y>=s-l-xn&&e.y<=i+l+xn;return o==="x"?c:(o==="y"||c)&&u}function gy(e,{rect:t,center:s},n,{rotation:i,borderWidth:o,hitTolerance:r}){const a=Ln(e,s,Ht(-i));return fy(a,t,n,{borderWidth:o,hitTolerance:r})}function Rn(e,t){const{centerX:s,centerY:n}=e.getProps(["centerX","centerY"],t);return{x:s,y:n}}function g1(e,t,s,n=!0){const i=s.split(".");let o=0;for(const r of t.split(".")){const a=i[o++];if(parseInt(r,10)<parseInt(a,10))break;if(d1(a,r)){if(n)throw new Error(`${e} v${s} is not supported. v${t} or newer is required.`);return!1}}return!0}const my=e=>typeof e=="string"&&e.endsWith("%"),py=e=>parseFloat(e)/100,yy=e=>Da(py(e),0,1),Vi=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),m1={box:e=>Vi(e.centerX,e.centerY),doughnutLabel:e=>Vi(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>Vi(e.centerX,e.centerY),line:e=>Vi(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>Vi(e.centerX,e.centerY)};function mu(e,t){return t==="start"?0:t==="end"?e:my(t)?yy(t)*e:e/2}function en(e,t,s=!0){return typeof t=="number"?t:my(t)?(s?yy(t):py(t))*e:e}function p1(e,t){const{x:s,width:n}=e,i=t.textAlign;return i==="center"?s+n/2:i==="end"||i==="right"?s+n:s}function by(e,t,{borderWidth:s,position:n,xAdjust:i,yAdjust:o},r){const a=lt(r),l=t.width+(a?r.width:0)+s,c=t.height+(a?r.height:0)+s,u=pu(n),d=rf(e.x,l,i,u.x),h=rf(e.y,c,o,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function pu(e,t="center"){return lt(e)?{x:it(e.x,t),y:it(e.y,t)}:(e=it(e,t),{x:e,y:e})}const vy=(e,t)=>e&&e.autoFit&&t<1;function _y(e,t){const s=e.font,n=It(s)?s:[s];return vy(e,t)?n.map(function(i){const o=Gt(i);return o.size=Math.floor(i.size*t),o.lineHeight=i.lineHeight,Gt(o)}):n.map(i=>Gt(i))}function wy(e){return e&&(ve(e.xValue)||ve(e.yValue))}function rf(e,t,s=0,n){return e-mu(t,n)+s}function Mi(e,t,s){const n=s.init;if(n){if(n===!0)return Sy(t,s)}else return;return y1(e,t,s)}function xy(e,t,s){let n=!1;return t.forEach(i=>{be(e[i])?(n=!0,s[i]=e[i]):ve(s[i])&&delete s[i]}),n}function Sy(e,t){const s=t.type||"line";return m1[s](e)}function y1(e,t,s){const n=Dt(s.init,[{chart:e,properties:t,options:s}]);if(n===!0)return Sy(t,s);if(lt(n))return n}const bl=new Map,b1=e=>isNaN(e)||e<=0,v1=e=>e.reduce(function(t,s){return t+=s.string,t},"");function Ca(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Ma(e,{x:t,y:s},n){n&&(e.translate(t,s),e.rotate(Ht(n)),e.translate(-t,-s))}function Ts(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Ei(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function Ea(e,t){const s=t.content;if(Ca(s))return{width:en(s.width,t.width),height:en(s.height,t.height)};const n=_y(t),i=t.textStrokeWidth,o=It(s)?s:[s],r=o.join()+v1(n)+i+(e._measureText?"-spriting":"");return bl.has(r)||bl.set(r,S1(e,o,n,i)),bl.get(r)}function ky(e,t,s){const{x:n,y:i,width:o,height:r}=t;e.save(),Ei(e,s);const a=Ts(e,s);e.fillStyle=s.backgroundColor,e.beginPath(),Eo(e,{x:n,y:i,w:o,h:r,radius:h1(kn(s.borderRadius),0,Math.min(o,r)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}function Ty(e,t,s,n){const i=s.content;if(Ca(i)){e.save(),e.globalAlpha=O1(s.opacity,i.style.opacity),e.drawImage(i,t.x,t.y,t.width,t.height),e.restore();return}const o=It(i)?i:[i],r=_y(s,n),a=s.color,l=It(a)?a:[a],c=p1(t,s),u=t.y+s.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=s.textAlign,_1(e,s)&&k1(e,{x:c,y:u},o,r),T1(e,{x:c,y:u},o,{fonts:r,colors:l}),e.restore()}function _1(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function w1(e,t,s,n){const{radius:i,options:o}=t,r=o.pointStyle,a=o.rotation;let l=(a||0)*eu;if(Ca(r)){e.save(),e.translate(s,n),e.rotate(l),e.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),e.restore();return}b1(i)||x1(e,{x:s,y:n,radius:i,rotation:a,style:r,rad:l})}function x1(e,{x:t,y:s,radius:n,rotation:i,style:o,rad:r}){let a,l,c,u;switch(e.beginPath(),o){default:e.arc(t,s,n,0,Vt),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(r)*n,s-Math.cos(r)*n),r+=Xr,e.lineTo(t+Math.sin(r)*n,s-Math.cos(r)*n),r+=Xr,e.lineTo(t+Math.sin(r)*n,s-Math.cos(r)*n),e.closePath();break;case"rectRounded":u=n*.516,c=n-u,a=Math.cos(r+Le)*c,l=Math.sin(r+Le)*c,e.arc(t-a,s-l,u,r-Ot,r-Zt),e.arc(t+l,s-a,u,r-Zt,r),e.arc(t+a,s+l,u,r,r+Zt),e.arc(t-l,s+a,u,r+Zt,r+Ot),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*n,e.rect(t-c,s-c,2*c,2*c);break}r+=Le;case"rectRot":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+l,s-a),e.lineTo(t+a,s+l),e.lineTo(t-l,s+a),e.closePath();break;case"crossRot":r+=Le;case"cross":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"star":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a),r+=Le,a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"line":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l);break;case"dash":e.moveTo(t,s),e.lineTo(t+Math.cos(r)*n,s+Math.sin(r)*n);break}e.fill()}function S1(e,t,s,n){e.save();const i=t.length;let o=0,r=n;for(let a=0;a<i;a++){const l=s[Math.min(a,s.length-1)];e.font=l.string;const c=t[a];o=Math.max(o,e.measureText(c).width+n),r+=l.lineHeight}return e.restore(),{width:o,height:r}}function k1(e,{x:t,y:s},n,i){e.beginPath();let o=0;n.forEach(function(r,a){const l=i[Math.min(a,i.length-1)],c=l.lineHeight;e.font=l.string,e.strokeText(r,t,s+c/2+o),o+=c}),e.stroke()}function T1(e,{x:t,y:s},n,{fonts:i,colors:o}){let r=0;n.forEach(function(a,l){const c=o[Math.min(l,o.length-1)],u=i[Math.min(l,i.length-1)],d=u.lineHeight;e.beginPath(),e.font=u.string,e.fillStyle=c,e.fillText(a,t,s+d/2+r),r+=d,e.fill()})}function O1(e,t){const s=Qs(e)?e:t;return Qs(s)?Da(s,0,1):1}const Oy=["left","bottom","top","right"];function D1(e,t){const{pointX:s,pointY:n,options:i}=t,o=i.callout,r=o&&o.display&&I1(t,o);if(!r||L1(t,o,r))return;if(e.save(),e.beginPath(),!Ts(e,o))return e.restore();const{separatorStart:l,separatorEnd:c}=C1(t,r),{sideStart:u,sideEnd:d}=E1(t,r,l);(o.margin>0||i.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(c.x,c.y)),e.moveTo(u.x,u.y),e.lineTo(d.x,d.y);const h=Ln({x:s,y:n},t.getCenterPoint(),Ht(-t.rotation));e.lineTo(h.x,h.y),e.stroke(),e.restore()}function C1(e,t){const{x:s,y:n,x2:i,y2:o}=e,r=M1(e,t);let a,l;return t==="left"||t==="right"?(a={x:s+r,y:n},l={x:a.x,y:o}):(a={x:s,y:n+r},l={x:i,y:a.y}),{separatorStart:a,separatorEnd:l}}function M1(e,t){const{width:s,height:n,options:i}=e,o=i.callout.margin+i.borderWidth/2;return t==="right"?s+o:t==="bottom"?n+o:-o}function E1(e,t,s){const{y:n,width:i,height:o,options:r}=e,a=r.callout.start,l=A1(t,r.callout);let c,u;return t==="left"||t==="right"?(c={x:s.x,y:n+en(o,a)},u={x:c.x+l,y:c.y}):(c={x:s.x+en(i,a),y:s.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function A1(e,t){const s=t.side;return e==="left"||e==="top"?-s:s}function I1(e,t){const s=t.position;return Oy.includes(s)?s:P1(e,t)}function P1(e,t){const{x:s,y:n,x2:i,y2:o,width:r,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=e,f={x:u,y:d},g=t.start,m=en(r,g),p=en(a,g),y=[s,s+m,s+m,i],b=[n+p,o,n,o],v=[];for(let w=0;w<4;w++){const S=Ln({x:y[w],y:b[w]},f,Ht(h));v.push({position:Oy[w],distance:yi(S,{x:l,y:c})})}return v.sort((w,S)=>w.distance-S.distance)[0].position}function L1(e,t,s){const{pointX:n,pointY:i}=e,o=t.margin;let r=n,a=i;return s==="left"?r+=o:s==="right"?r-=o:s==="top"?a+=o:s==="bottom"&&(a-=o),e.inRange(r,a)}const af={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function _i(e,t,s){return t=typeof t=="number"?t:e.parse(t),Jt(t)?e.getPixelForValue(t):s}function En(e,t,s){const n=t[s];if(n||s==="scaleID")return n;const i=s.charAt(0),o=Object.values(e).filter(r=>r.axis&&r.axis===i);return o.length?o[0].id:i}function Dy(e,t){if(e){const s=e.options.reverse,n=_i(e,t.min,s?t.end:t.start),i=_i(e,t.max,s?t.start:t.end);return{start:n,end:i}}}function Cy(e,t){const{chartArea:s,scales:n}=e,i=n[En(n,t,"xScaleID")],o=n[En(n,t,"yScaleID")];let r=s.width/2,a=s.height/2;return i&&(r=_i(i,t.xValue,i.left+i.width/2)),o&&(a=_i(o,t.yValue,o.top+o.height/2)),{x:r,y:a}}function yu(e,t){const s=e.scales,n=s[En(s,t,"xScaleID")],i=s[En(s,t,"yScaleID")];if(!n&&!i)return{};let{left:o,right:r}=n||e.chartArea,{top:a,bottom:l}=i||e.chartArea;const c=lf(n,{min:t.xMin,max:t.xMax,start:o,end:r});o=c.start,r=c.end;const u=lf(i,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:o,y:a,x2:r,y2:l,width:r-o,height:l-a,centerX:o+(r-o)/2,centerY:a+(l-a)/2}}function My(e,t){if(!wy(t)){const s=yu(e,t);let n=t.radius;(!n||isNaN(n))&&(n=Math.min(s.width,s.height)/2,t.radius=n);const i=n*2,o=s.centerX+t.xAdjust,r=s.centerY+t.yAdjust;return{x:o-n,y:r-n,x2:o+n,y2:r+n,centerX:o,centerY:r,width:i,height:i,radius:n}}return $1(e,t)}function R1(e,t){const{scales:s,chartArea:n}=e,i=s[t.scaleID],o={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return i?F1(i,o,t):N1(s,o,t),o}function Ey(e,t){const s=yu(e,t);return s.initProperties=Mi(e,s,t),s.elements=[{type:"label",optionScope:"label",properties:W1(e,s,t),initProperties:s.initProperties}],s}function $1(e,t){const s=Cy(e,t),n=t.radius*2;return{x:s.x-t.radius+t.xAdjust,y:s.y-t.radius+t.yAdjust,x2:s.x+t.radius+t.xAdjust,y2:s.y+t.radius+t.yAdjust,centerX:s.x+t.xAdjust,centerY:s.y+t.yAdjust,radius:t.radius,width:n,height:n}}function lf(e,t){const s=Dy(e,t)||t;return{start:Math.min(s.start,s.end),end:Math.max(s.start,s.end)}}function F1(e,t,s){const n=_i(e,s.value,NaN),i=_i(e,s.endValue,n);e.isHorizontal()?(t.x=n,t.x2=i):(t.y=n,t.y2=i)}function N1(e,t,s){for(const n of Object.keys(af)){const i=e[En(e,s,n)];if(i){const{min:o,max:r,start:a,end:l,startProp:c,endProp:u}=af[n],d=Dy(i,{min:s[o],max:s[r],start:i[a],end:i[l]});t[c]=d.start,t[u]=d.end}}}function j1({properties:e,options:t},s,n,i){const{x:o,x2:r,width:a}=e;return Ay({start:o,end:r,borderWidth:t.borderWidth},{position:n.x,padding:{start:i.left,end:i.right},adjust:t.label.xAdjust,size:s.width})}function B1({properties:e,options:t},s,n,i){const{y:o,y2:r,height:a}=e;return Ay({start:o,end:r,borderWidth:t.borderWidth},{position:n.y,padding:{start:i.top,end:i.bottom},adjust:t.label.yAdjust,size:s.height})}function Ay(e,t){const{start:s,end:n,borderWidth:i}=e,{position:o,padding:{start:r,end:a},adjust:l}=t,c=n-i-s-r-a-t.size;return s+i/2+l+mu(c,o)}function W1(e,t,s){const n=s.label;n.backgroundColor="transparent",n.callout.display=!1;const i=pu(n.position),o=de(n.padding),r=Ea(e.ctx,n),a=j1({properties:t,options:s},r,i,o),l=B1({properties:t,options:s},r,i,o),c=r.width+o.width,u=r.height+o.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:n.rotation}}const ac=["enter","leave"],bu=ac.concat("click");function U1(e,t,s){t.listened=xy(s,bu,t.listeners),t.moveListened=!1,ac.forEach(n=>{be(s[n])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(n=>{!t.listened&&be(n.click)&&(t.listened=!0),t.moveListened||ac.forEach(i=>{be(n[i])&&(t.listened=!0,t.moveListened=!0)})})}function z1(e,t,s){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return V1(e,t,s);case"click":return H1(e,t,s)}}function V1(e,t,s){if(!e.moveListened)return;let n;t.type==="mousemove"?n=gu(e.visibleElements,t,s.interaction):n=[];const i=e.hovered;e.hovered=n;const o={state:e,event:t};let r=cf(o,"leave",i,n);return cf(o,"enter",n,i)||r}function cf({state:e,event:t},s,n,i){let o;for(const r of n)i.indexOf(r)<0&&(o=Iy(r.options[s]||e.listeners[s],r,t)||o);return o}function H1(e,t,s){const n=e.listeners,i=gu(e.visibleElements,t,s.interaction);let o;for(const r of i)o=Iy(r.options.click||n.click,r,t)||o;return o}function Iy(e,t,s){return Dt(e,[t.$context,s])===!0}const na=["afterDraw","beforeDraw"];function q1(e,t,s){const n=t.visibleElements;t.hooked=xy(s,na,t.hooks),t.hooked||n.forEach(i=>{t.hooked||na.forEach(o=>{be(i.options[o])&&(t.hooked=!0)})})}function uf(e,t,s){if(e.hooked){const n=t.options[s]||e.hooks[s];return Dt(n,[t.$context])}}function J1(e,t,s){const n=X1(e.scales,t,s);let i=df(t,n,"min","suggestedMin");i=df(t,n,"max","suggestedMax")||i,i&&be(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function Y1(e,t){for(const s of e)Z1(s,t)}function df(e,t,s,n){if(Jt(t[s])&&!K1(e.options,s,n)){const i=e[s]!==t[s];return e[s]=t[s],i}}function K1(e,t,s){return ve(e[t])||ve(e[s])}function Z1(e,t){for(const s of["scaleID","xScaleID","yScaleID"]){const n=En(t,e,s);n&&!t[n]&&G1(e,s)&&console.warn(`No scale found with id '${n}' for annotation '${e.id}'`)}}function G1(e,t){if(t==="scaleID")return!0;const s=t.charAt(0);for(const n of["Min","Max","Value"])if(ve(e[s+n]))return!0;return!1}function X1(e,t,s){const n=t.axis,i=t.id,o=n+"ScaleID",r={min:it(t.min,Number.NEGATIVE_INFINITY),max:it(t.max,Number.POSITIVE_INFINITY)};for(const a of s)a.scaleID===i?hf(a,t,["value","endValue"],r):En(e,a,o)===i&&hf(a,t,[n+"Min",n+"Max",n+"Value"],r);return r}function hf(e,t,s,n){for(const i of s){const o=e[i];if(ve(o)){const r=t.parse(o);n.min=Math.min(n.min,r),n.max=Math.max(n.max,r)}}}class Ai extends _e{inRange(t,s,n,i){const{x:o,y:r}=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation));return fy({x:o,y:r},this.getProps(["x","y","x2","y2"],i),n,this.options)}getCenterPoint(t){return Rn(this,t)}draw(t){t.save(),Ma(t,this.getCenterPoint(),this.options.rotation),ky(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Ey(t,s)}}Ai.id="boxAnnotation";Ai.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ai.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ai.descriptors={label:{_fallback:!0}};class Aa extends _e{inRange(t,s,n,i){return gy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options;!s.display||!s.content||(iO(t,this),t.save(),Ma(t,this.getCenterPoint(),this.rotation),Ty(t,this,s,this._fitRatio),t.restore())}resolveElementProperties(t,s){const n=Q1(t,s);if(!n)return{};const{controllerMeta:i,point:o,radius:r}=eO(t,s,n);let a=Ea(t.ctx,s);const l=sO(a,r);vy(s,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=s,h=by(o,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Mi(t,h,s),...h,...i,rotation:s.rotation,_fitRatio:l}}}Aa.id="doughnutLabelAnnotation";Aa.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Aa.defaultRoutes={};function Q1(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(s,n){const i=n.controller;return i instanceof ek&&tO(e,t,n.data)&&(!s||i.innerRadius<s.controller.innerRadius)&&i.options.circumference>=90?n:s},void 0)}function tO(e,t,s){if(!t.autoHide)return!0;for(let n=0;n<s.length;n++)if(!s[n].hidden&&e.getDataVisibility(n))return!0}function eO({chartArea:e},t,s){const{left:n,top:i,right:o,bottom:r}=e,{innerRadius:a,offsetX:l,offsetY:c}=s.controller,u=(n+o)/2+l,d=(i+r)/2+c,h={left:Math.max(u-a,n),right:Math.min(u+a,o),top:Math.max(d-a,i),bottom:Math.min(d+a,r)},f={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},g=t.spacing+t.borderWidth/2,m=a-g,p=f.y>d,y=p?i+g:r-g,b=nO(y,u,d,m);return{controllerMeta:{_centerX:u,_centerY:d,_radius:m,_counterclockwise:p,...b},point:f,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function sO({width:e,height:t},s){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return s*2/n}function nO(e,t,s,n){const i=Math.pow(s-e,2),o=Math.pow(n,2),r=t*-2,a=Math.pow(t,2)+i-o,l=Math.pow(r,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Vt};const c=(-r-Math.sqrt(l))/2,u=(-r+Math.sqrt(l))/2;return{_startAngle:tc({x:t,y:s},{x:c,y:e}).angle,_endAngle:tc({x:t,y:s},{x:u,y:e}).angle}}function iO(e,t){const{_centerX:s,_centerY:n,_radius:i,_startAngle:o,_endAngle:r,_counterclockwise:a,options:l}=t;e.save();const c=Ts(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(s,n,i,o,r,a),e.closePath(),e.fill(),c&&e.stroke(),e.restore()}class Vo extends _e{inRange(t,s,n,i){return gy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options,n=!ve(this._visible)||this._visible;!s.display||!s.content||!n||(t.save(),Ma(t,this.getCenterPoint(),this.rotation),D1(t,this),ky(t,this,s),Ty(t,oO(this),s),t.restore())}resolveElementProperties(t,s){let n;if(wy(s))n=Cy(t,s);else{const{centerX:a,centerY:l}=yu(t,s);n={x:a,y:l}}const i=de(s.padding),o=Ea(t.ctx,s),r=by(n,o,s,i);return{initProperties:Mi(t,r,s),pointX:n.x,pointY:n.y,...r,rotation:s.rotation}}}Vo.id="labelAnnotation";Vo.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Vo.defaultRoutes={borderColor:"color"};function oO({x:e,y:t,width:s,height:n,options:i}){const o=i.borderWidth/2,r=de(i.padding);return{x:e+r.left+o,y:t+r.top+o,width:s-r.left-r.right-i.borderWidth,height:n-r.top-r.bottom-i.borderWidth}}const vu=(e,t,s)=>({x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}),lc=(e,t,s)=>vu(t,s,Math.abs((e-t.y)/(s.y-t.y))).x,ff=(e,t,s)=>vu(t,s,Math.abs((e-t.x)/(s.x-t.x))).y,eo=e=>e*e,rO=(e,t,{x:s,y:n,x2:i,y2:o},r)=>r==="y"?{start:Math.min(n,o),end:Math.max(n,o),value:t}:{start:Math.min(s,i),end:Math.max(s,i),value:e},gf=(e,t,s,n)=>(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*s,cc=(e,t,s,n)=>({x:gf(e.x,t.x,s.x,n),y:gf(e.y,t.y,s.y,n)}),mf=(e,t,s,n)=>2*(1-n)*(t-e)+2*n*(s-t),pf=(e,t,s,n)=>-Math.atan2(mf(e.x,t.x,s.x,n),mf(e.y,t.y,s.y,n))+.5*Ot;class Ho extends _e{inRange(t,s,n,i){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const r={mouseX:t,mouseY:s},{path:a,ctx:l}=this;if(a){Ts(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=t*u.currentDevicePixelRatio,h=s*u.currentDevicePixelRatio,f=l.isPointInStroke(a,d,h)||uc(this,r,i);return l.restore(),f}const c=eo(o);return uO(this,r,c,i)||uc(this,r,i)}return aO(this,{mouseX:t,mouseY:s},n,{hitSize:o,useFinalPosition:i})}getCenterPoint(t){return Rn(this,t)}draw(t){const{x:s,y:n,x2:i,y2:o,cp:r,options:a}=this;if(t.save(),!Ts(t,a))return t.restore();Ei(t,a);const l=Math.sqrt(Math.pow(i-s,2)+Math.pow(o-n,2));if(a.curve&&r)return bO(t,this,r,l),t.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Py(this),f=Math.atan2(o-n,i-s);t.translate(s,n),t.rotate(f),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-h,0),t.shadowColor=a.borderShadowColor,t.stroke(),dc(t,0,d,c),dc(t,l,-h,u),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){const n=R1(t,s),{x:i,y:o,x2:r,y2:a}=n,l=lO(n,t.chartArea),c=l?cO({x:i,y:o},{x:r,y:a},t.chartArea):{x:i,y:o,x2:r,y2:a,width:Math.abs(r-i),height:Math.abs(a-o)};if(c.centerX=(r+i)/2,c.centerY=(a+o)/2,c.initProperties=Mi(t,c,s),s.curve){const d={x:c.x,y:c.y},h={x:c.x2,y:c.y2};c.cp=yO(c,s,yi(d,h))}const u=dO(t,c,s.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Ho.id="lineAnnotation";const yf={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Ho.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},yf),fill:!1,length:12,start:Object.assign({},yf),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Vo.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ho.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Ho.defaultRoutes={borderColor:"color"};function aO(e,{mouseX:t,mouseY:s},n,{hitSize:i,useFinalPosition:o}){const r=rO(t,s,e.getProps(["x","y","x2","y2"],o),n);return hy(r,i)||uc(e,{mouseX:t,mouseY:s},o,n)}function lO({x:e,y:t,x2:s,y2:n},{top:i,right:o,bottom:r,left:a}){return!(e<a&&s<a||e>o&&s>o||t<i&&n<i||t>r&&n>r)}function bf({x:e,y:t},s,{top:n,right:i,bottom:o,left:r}){return e<r&&(t=ff(r,{x:e,y:t},s),e=r),e>i&&(t=ff(i,{x:e,y:t},s),e=i),t<n&&(e=lc(n,{x:e,y:t},s),t=n),t>o&&(e=lc(o,{x:e,y:t},s),t=o),{x:e,y:t}}function cO(e,t,s){const{x:n,y:i}=bf(e,t,s),{x:o,y:r}=bf(t,e,s);return{x:n,y:i,x2:o,y2:r,width:Math.abs(o-n),height:Math.abs(r-i)}}function uO(e,{mouseX:t,mouseY:s},n=xn,i){const{x:o,y:r,x2:a,y2:l}=e.getProps(["x","y","x2","y2"],i),c=a-o,u=l-r,d=eo(c)+eo(u),h=d===0?-1:((t-o)*c+(s-r)*u)/d;let f,g;return h<0?(f=o,g=r):h>1?(f=a,g=l):(f=o+h*c,g=r+h*u),eo(t-f)+eo(s-g)<=n}function uc(e,{mouseX:t,mouseY:s},n,i){const o=e.label;return o.options.display&&o.inRange(t,s,i,n)}function dO(e,t,s){const n=s.borderWidth,i=de(s.padding),o=Ea(e.ctx,s),r=o.width+i.width+n,a=o.height+i.height+n;return fO(t,s,{width:r,height:a,padding:i},e.chartArea)}function hO(e){const{x:t,y:s,x2:n,y2:i}=e,o=Math.atan2(i-s,n-t);return o>Ot/2?o-Ot:o<Ot/-2?o+Ot:o}function fO(e,t,s,n){const{width:i,height:o,padding:r}=s,{xAdjust:a,yAdjust:l}=t,c={x:e.x,y:e.y},u={x:e.x2,y:e.y2},d=t.rotation==="auto"?hO(e):Ht(t.rotation),h=gO(i,o,d),f=mO(e,t,{labelSize:h,padding:r},n),g=e.cp?cc(c,e.cp,u,f):vu(c,u,f),m={size:h.w,min:n.left,max:n.right,padding:r.left},p={size:h.h,min:n.top,max:n.bottom,padding:r.top},y=_f(g.x,m)+a,b=_f(g.y,p)+l;return{x:y-i/2,y:b-o/2,x2:y+i/2,y2:b+o/2,centerX:y,centerY:b,pointX:g.x,pointY:g.y,width:i,height:o,rotation:xp(d)}}function gO(e,t,s){const n=Math.cos(s),i=Math.sin(s);return{w:Math.abs(e*n)+Math.abs(t*i),h:Math.abs(e*i)+Math.abs(t*n)}}function mO(e,t,s,n){let i;const o=pO(e,n);return t.position==="start"?i=vf({w:e.x2-e.x,h:e.y2-e.y},s,t,o):t.position==="end"?i=1-vf({w:e.x-e.x2,h:e.y-e.y2},s,t,o):i=mu(1,t.position),i}function vf(e,t,s,n){const{labelSize:i,padding:o}=t,r=e.w*n.dx,a=e.h*n.dy,l=r>0&&(i.w/2+o.left-n.x)/r,c=a>0&&(i.h/2+o.top-n.y)/a;return Da(Math.max(l,c),0,.25)}function pO(e,t){const{x:s,x2:n,y:i,y2:o}=e,r=Math.min(i,o)-t.top,a=Math.min(s,n)-t.left,l=t.bottom-Math.max(i,o),c=t.right-Math.max(s,n);return{x:Math.min(a,c),y:Math.min(r,l),dx:a<=c?1:-1,dy:r<=l?1:-1}}function _f(e,t){const{size:s,min:n,max:i,padding:o}=t,r=s/2;return s>i-n?(i+n)/2:(n>=e-o-r&&(e=n+o+r),i<=e+o+r&&(e=i-o-r),e)}function Py(e){const t=e.options,s=t.arrowHeads&&t.arrowHeads.start,n=t.arrowHeads&&t.arrowHeads.end;return{startOpts:s,endOpts:n,startAdjust:wf(e,s),endAdjust:wf(e,n)}}function wf(e,t){if(!t||!t.display)return 0;const{length:s,width:n}=t,i=e.options.borderWidth/2,o={x:s,y:n+i};return Math.abs(lc(0,o,{x:0,y:i}))}function dc(e,t,s,n){if(!n||!n.display)return;const{length:i,width:o,fill:r,backgroundColor:a,borderColor:l}=n,c=Math.abs(t-i)+s;e.beginPath(),Ei(e,n),Ts(e,n),e.moveTo(c,-o),e.lineTo(t+s,0),e.lineTo(c,o),r===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=n.borderShadowColor,e.stroke()}function yO(e,t,s){const{x:n,y:i,x2:o,y2:r,centerX:a,centerY:l}=e,c=Math.atan2(r-i,o-n),u=pu(t.controlPoint,0),d={x:a+en(s,u.x,!1),y:l+en(s,u.y,!1)};return Ln(d,{x:a,y:l},c)}function xf(e,{x:t,y:s},{angle:n,adjust:i},o){!o||!o.display||(e.save(),e.translate(t,s),e.rotate(n),dc(e,0,-i,o),e.restore())}function bO(e,t,s,n){const{x:i,y:o,x2:r,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Py(t),f={x:i,y:o},g={x:r,y:a},m=pf(f,s,g,0),p=pf(f,s,g,1)-Ot,y=cc(f,s,g,d/n),b=cc(f,s,g,1-h/n),v=new Path2D;e.beginPath(),v.moveTo(y.x,y.y),v.quadraticCurveTo(s.x,s.y,b.x,b.y),e.shadowColor=l.borderShadowColor,e.stroke(v),t.path=v,t.ctx=e,xf(e,y,{angle:m,adjust:d},c),xf(e,b,{angle:p,adjust:h},u)}class qo extends _e{inRange(t,s,n,i){const o=this.options.rotation,r=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return vO({x:t,y:s},this.getProps(["width","height","centerX","centerY"],i),o,r);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],i),d=n==="y"?{start:l,end:u}:{start:a,end:c},h=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-o));return h[n]>=d.start-r-xn&&h[n]<=d.end+r+xn}getCenterPoint(t){return Rn(this,t)}draw(t){const{width:s,height:n,centerX:i,centerY:o,options:r}=this;t.save(),Ma(t,this.getCenterPoint(),r.rotation),Ei(t,this.options),t.beginPath(),t.fillStyle=r.backgroundColor;const a=Ts(t,r);t.ellipse(i,o,n/2,s/2,Ot/2,0,2*Ot),t.fill(),a&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Ey(t,s)}}qo.id="ellipseAnnotation";qo.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Ai.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};qo.defaultRoutes={borderColor:"color",backgroundColor:"color"};qo.descriptors={label:{_fallback:!0}};function vO(e,t,s,n){const{width:i,height:o,centerX:r,centerY:a}=t,l=i/2,c=o/2;if(l<=0||c<=0)return!1;const u=Ht(s||0),d=Math.cos(u),h=Math.sin(u),f=Math.pow(d*(e.x-r)+h*(e.y-a),2),g=Math.pow(h*(e.x-r)-d*(e.y-a),2);return f/Math.pow(l+n,2)+g/Math.pow(c+n,2)<=1.0001}class Ia extends _e{inRange(t,s,n,i){const{x:o,y:r,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?f1({x:t,y:s},this.getCenterPoint(i),c/2,u):hy(n==="y"?{start:r,end:l,value:s}:{start:o,end:a,value:t},u)}getCenterPoint(t){return Rn(this,t)}draw(t){const s=this.options,n=s.borderWidth;if(s.radius<.1)return;t.save(),t.fillStyle=s.backgroundColor,Ei(t,s);const i=Ts(t,s);w1(t,this,this.centerX,this.centerY),i&&!Ca(s.pointStyle)&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore(),s.borderWidth=n}resolveElementProperties(t,s){const n=My(t,s);return n.initProperties=Mi(t,n,s),n}}Ia.id="pointAnnotation";Ia.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ia.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Pa extends _e{inRange(t,s,n,i){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&wO(this.elements,t,s,i);const o=Ln({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation)),r=this.elements.map(c=>n==="y"?c.bY:c.bX),a=Math.min(...r),l=Math.max(...r);return o[n]>=a&&o[n]<=l}getCenterPoint(t){return Rn(this,t)}draw(t){const{elements:s,options:n}=this;t.save(),t.beginPath(),t.fillStyle=n.backgroundColor,Ei(t,n);const i=Ts(t,n);let o=!0;for(const r of s)o?(t.moveTo(r.x,r.y),o=!1):t.lineTo(r.x,r.y);t.closePath(),t.fill(),i&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,s){const n=My(t,s),{sides:i,rotation:o}=s,r=[],a=2*Ot/i;let l=o*eu;for(let c=0;c<i;c++,l+=a){const u=_O(n,s,l);u.initProperties=Mi(t,n,s),r.push(u)}return n.elements=r,n}}Pa.id="polygonAnnotation";Pa.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Pa.defaultRoutes={borderColor:"color",backgroundColor:"color"};function _O({centerX:e,centerY:t},{radius:s,borderWidth:n,hitTolerance:i},o){const r=(n+i)/2,a=Math.sin(o),l=Math.cos(o),c={x:e+a*s,y:t-l*s};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:e+a*(s+r),bY:t-l*(s+r)}}}function wO(e,t,s,n){let i=!1,o=e[e.length-1].getProps(["bX","bY"],n);for(const r of e){const a=r.getProps(["bX","bY"],n);a.bY>s!=o.bY>s&&t<(o.bX-a.bX)*(s-a.bY)/(o.bY-a.bY)+a.bX&&(i=!i),o=a}return i}const Zs={box:Ai,doughnutLabel:Aa,ellipse:qo,label:Vo,line:Ho,point:Ia,polygon:Pa};Object.keys(Zs).forEach(e=>{$t.describe(`elements.${Zs[e].id}`,{_fallback:"plugins.annotation.common"})});const xO={update:Object.assign},SO=bu.concat(na),Sf=(e,t)=>lt(t)?fc(e,t):e,hc=e=>e==="color"||e==="font";function _u(e="line"){return Zs[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function kO(e,t,s,n){const i=OO(e,s.animations,n),o=t.annotations,r=MO(t.elements,o);for(let a=0;a<o.length;a++){const l=o[a],c=Ly(r,a,l.type),u=l.setContext(CO(e,c,r,l)),d=c.resolveElementProperties(e,u);d.skip=TO(d),"elements"in d&&(DO(c,d.elements,u,i),delete d.elements),ve(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=Ry(u),i.update(c,d)}}function TO(e){return isNaN(e.x)||isNaN(e.y)}function OO(e,t,s){return s==="reset"||s==="none"||s==="resize"?xO:new uu(e,t)}function DO(e,t,s,n){const i=e.elements||(e.elements=[]);i.length=t.length;for(let o=0;o<t.length;o++){const r=t[o],a=r.properties,l=Ly(i,o,r.type,r.initProperties),c=s[r.optionScope].override(r);a.options=Ry(c),n.update(l,a)}}function Ly(e,t,s,n){const i=Zs[_u(s)];let o=e[t];return(!o||!(o instanceof i))&&(o=e[t]=new i,Object.assign(o,n)),o}function Ry(e){const t=Zs[_u(e.type)],s={};s.id=e.id,s.type=e.type,s.drawTime=e.drawTime,Object.assign(s,fc(e,t.defaults),fc(e,t.defaultRoutes));for(const n of SO)s[n]=e[n];return s}function fc(e,t){const s={};for(const n of Object.keys(t)){const i=t[n],o=e[n];hc(n)&&It(o)?s[n]=o.map(r=>Sf(r,i)):s[n]=Sf(o,i)}return s}function CO(e,t,s,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return s.filter(i=>i&&i.options)},id:n.id,type:"annotation"}))}function MO(e,t){const s=t.length,n=e.length;if(n<s){const i=s-n;e.splice(n,0,...new Array(i))}else n>s&&e.splice(s,n-s);return e}var EO="3.1.0";const Rs=new Map,kf=e=>e.type!=="doughnutLabel",AO=bu.concat(na);var Jo={id:"annotation",version:EO,beforeRegister(){g1("chart.js","4.0",oe.version)},afterRegister(){oe.register(Zs)},afterUnregister(){oe.unregister(Zs)},beforeInit(e){Rs.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,s){const n=Rs.get(e),i=n.annotations=[];let o=s.annotations;lt(o)?Object.keys(o).forEach(r=>{const a=o[r];lt(a)&&(a.id=r,i.push(a))}):It(o)&&i.push(...o),Y1(i.filter(kf),e.scales)},afterDataLimits(e,t){const s=Rs.get(e);J1(e,t.scale,s.annotations.filter(kf).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(e,t,s){const n=Rs.get(e);U1(e,n,s),kO(e,n,s,t.mode),n.visibleElements=n.elements.filter(i=>!i.skip&&i.options.display),q1(e,n,s)},beforeDatasetsDraw(e,t,s){Hi(e,"beforeDatasetsDraw",s.clip)},afterDatasetsDraw(e,t,s){Hi(e,"afterDatasetsDraw",s.clip)},beforeDatasetDraw(e,t,s){Hi(e,t.index,s.clip)},beforeDraw(e,t,s){Hi(e,"beforeDraw",s.clip)},afterDraw(e,t,s){Hi(e,"afterDraw",s.clip)},beforeEvent(e,t,s){const n=Rs.get(e);z1(n,t.event,s)&&(t.changed=!0)},afterDestroy(e){Rs.delete(e)},getAnnotations(e){const t=Rs.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,s){return gu(e,t,s)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!AO.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Zs[_u(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:hc,_fallback:!0},_indexable:hc}},additionalOptionScopes:[""]};function Hi(e,t,s){const{ctx:n,chartArea:i}=e,o=Rs.get(e);s&&Bo(n,i);const r=IO(o.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of r)PO(n,i,o,a);s&&Wo(n)}function IO(e,t){const s=[];for(const n of e)if(n.options.drawTime===t&&s.push({element:n,main:!0}),n.elements&&n.elements.length)for(const i of n.elements)i.options.display&&i.options.drawTime===t&&s.push({element:i});return s}function PO(e,t,s,n){const i=n.element;n.main?(uf(s,i,"beforeDraw"),i.draw(e,t),uf(s,i,"afterDraw")):i.draw(e,t)}const LO={class:"chartContainer"},RO={__name:"BgChart",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){oe.register(du,Oi,Sa,Ci,tn,Di,Ta,fu,Jo);const t=e,s=gt(null);let n=null,i=null;const o=G(()=>{if(!t.selectedDate)return[];const{startOfDay:f,endOfDay:g}=Xt(t.selectedDate);return t.glucoseReadings.filter(m=>{const p=typeof m.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(m.timestamp)?O.fromISO(m.timestamp):O.fromISO(m.timestamp,{zone:"Australia/Sydney"})).toJSDate():m.timestamp instanceof Date?m.timestamp:new Date(Number(m.timestamp));return p>=f&&p<g}).map(m=>({x:typeof m.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(m.timestamp)?O.fromISO(m.timestamp):O.fromISO(m.timestamp,{zone:"Australia/Sydney"})).toMillis():m.timestamp instanceof Date?m.timestamp.getTime():Number(m.timestamp),y:Number(m.value)})).sort((m,p)=>m.x-p.x)});function r(f){return{label:"BG (mmol/L)",data:f,pointRadius:0,pointHoverRadius:6,borderColor:"rgba(80, 80, 80, 0.9)",borderWidth:3,tension:.15,fill:!1}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bg"}}))}function l(f){if(!n)return;const g=f?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=g,n.update("none"))}function c(f){if(!f.length)return{min:4,max:10};const g=f.map(y=>y.y),m=Math.floor(Math.min(...g)),p=Math.ceil(Math.max(...g));return{min:Math.min(4,m),max:Math.max(10,p)}}function u(f,g){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,p,y)=>{const b=y.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(b.length){const{datasetIndex:v,index:w}=b[0],S=y.data.datasets[v].data[w].x;y.options.plugins.annotation.annotations.dynamicLine.value=S,y.update("none");const D=y.canvas.getBoundingClientRect(),R=(m?.native?.clientX??m.clientX)-D.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:S,px:R,source:"bg"}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>O.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:f?.min,max:f?.max},y:{position:"right",min:g.min,max:g.max,grid:{color:"#888",lineWidth:1},title:{display:!0,text:"mmol/L"},ticks:{stepSize:2}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{inRangeBand:{type:"box",yMin:4,yMax:6,backgroundColor:"rgba(100, 149, 237, 0.5)",borderWidth:0},dynamicLine:{type:"line",scaleID:"x",value:i,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function d(){if(!s.value)return;const f=s.value.getContext("2d"),g=o.value,m=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=m+864e5,y=c(g);n=new oe(f,{type:"line",data:{datasets:[r(g)]},options:u({min:m,max:p},y)})}function h(){if(!n)return;const f=o.value,g=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=c(f);n.data.datasets=[r(f)],n.options.scales.x.min=g,n.options.scales.x.max=m,n.options.scales.y.min=p.min,n.options.scales.y.max=p.max,n.update("none")}return Ye(()=>{d(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),Cs(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),Ce([()=>t.selectedDate,o],h),(f,g)=>(T(),C("div",LO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Blood glucose chart"},null,512)]))}},$O={__name:"NotesChart",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},noteIconUrl:{type:String,default:"/note-icon.png"}},setup(e){oe.register(sk,Sa,Ci,tn,Di);const t=e,s=gt(null);let n=null;const i=G(()=>{if(!t.selectedDate)return[];const{startOfDay:c,endOfDay:u}=Xt(t.selectedDate);return(t.notes||[]).map(d=>({ts:d.timestamp instanceof Date?d.timestamp:typeof d.timestamp=="string"?O.fromISO(d.timestamp).toJSDate():new Date(Number(d.timestamp)),text:d.text??""})).filter(d=>d.ts>=c&&d.ts<u).sort((d,h)=>d.ts-h.ts).map(d=>({x:d.ts.getTime(),y:.5,_note:{text:d.text,timestamp:d.ts}}))});function o(c){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!0},events:["mousemove","mouseout","click","touchstart","touchmove"],onHover:(u,d,h)=>{if(!d.length){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"note"}}));return}const{datasetIndex:f,index:g}=d[0],m=h.data.datasets[f].data[g],p=m.x,y=h.canvas.getBoundingClientRect(),v=(u?.native?.clientX??u.clientX)-y.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:p,px:v,source:"note",note:m._note}}))},plugins:{legend:{display:!1},tooltip:{enabled:!1}},layout:{padding:{top:2,bottom:2}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,color:"transparent",callback:u=>O.fromMillis(Number(u)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:c?.min,max:c?.max},y:{position:"right",min:0,max:1,grid:{display:!1},ticks:{display:!0,color:"transparent"},beginAtZero:!0,title:{display:!0,color:"transparent",text:"Notes",align:"center"}}}}}function r(c){return{type:"scatter",data:c,pointRadius:7,pointHoverRadius:12,pointHitRadius:18,pointBackgroundColor:"#f59e0b",pointBorderColor:"#f59e0b",borderWidth:0,pointStyle:""}}function a(){if(!s.value)return;const c=s.value.getContext("2d"),u=i.value,d=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),h=d+864e5;n=new oe(c,{type:"scatter",data:{datasets:[r(u)]},options:o({min:d,max:h})})}function l(){if(!n)return;const c=i.value,u=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),d=u+864e5;n.data.datasets=[r(c)],n.options.scales.x.min=u,n.options.scales.x.max=d,n.update("none")}return Ye(()=>{a()}),Cs(()=>{n?.destroy(),n=null}),Ce([()=>t.selectedDate,i],l),(c,u)=>(T(),C("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Notes lane"},null,512))}},FO={class:"chartContainer"},NO={__name:"BasalChart",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){oe.register(du,Oi,Sa,Ci,tn,Di,Ta,fu,Jo);const t=e,s=gt(null);let n=null;const i=G(()=>{if(!t.selectedDate)return[];const{startOfDay:h,endOfDay:f}=Xt(t.selectedDate),g=t.basalEntries.filter(p=>{const y=p.startTime instanceof Date?p.startTime:at(p.startTime),b=p.endTime?p.endTime instanceof Date?p.endTime:at(p.endTime):null;return y<f&&(!b||b>h)}).sort((p,y)=>{const b=(p.startTime instanceof Date?p.startTime:at(p.startTime)).getTime(),v=(y.startTime instanceof Date?y.startTime:at(y.startTime)).getTime();return b-v}),m=[];for(const p of g){const y=p.startTime instanceof Date?p.startTime:at(p.startTime),b=p.endTime?p.endTime instanceof Date?p.endTime:at(p.endTime):null,v=y<h?h:y,w=b?b>f?f:b:f,S=Number(p.rate??0);m.push({x:v.getTime(),y:S,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:S}),m.push({x:w.getTime(),y:S,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:S})}return m});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal"}}))}function r(h){if(!n)return;const f=h?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(m=>m.y));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (U/hr)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,m,p)=>{const y=p.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:b,index:v}=y[0],w=p.data.datasets[b].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const S=p.canvas.getBoundingClientRect(),E=(g?.native?.clientX??g.clientX)-S.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:E,source:"basal"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>O.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Basal Rate"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,g=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=a(f);n=new oe(h,{type:"line",data:{datasets:[l(f)]},options:c({min:g,max:m},p)})}function d(){if(!n)return;const h=i.value,f=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=f+864e5,m=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=g,n.options.scales.y.min=m.min,n.options.scales.y.max=m.max,n.update("none")}return Ye(()=>{u(),window.addEventListener("chart-hover",r),s.value?.addEventListener("mouseleave",o)}),Cs(()=>{window.removeEventListener("chart-hover",r),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),Ce([()=>t.selectedDate,i],d),(h,f)=>(T(),C("div",FO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Basal rate chart"},null,512)]))}},jO={class:"chartContainer"},BO={__name:"BolusChart",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){oe.register(Jp,ay,Ci,tn,Di,Ta,Jo);const t=e,s=gt(null);let n=null;function i(g,m){return getComputedStyle(document.documentElement).getPropertyValue(g).trim()||m}const o=G(()=>{if(!t.selectedDate)return[];const{startOfDay:g,endOfDay:m}=Xt(t.selectedDate);return(t.boluses||[]).map(p=>({ts:p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),amt:Number(p.amount??0),type:p.type??p.bolusType??null})).filter(p=>p.ts>=g&&p.ts<m&&p.amt>0).sort((p,y)=>p.ts-y.ts).map(p=>({x:p.ts.getTime(),y:p.amt,type:p.type??p.bolusType??null}))});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bolus",bolus:null}}))}function a(g){if(!n)return;const m=g?.detail?.x??null,p=n.options?.plugins?.annotation?.annotations;p?.dynamicLine!=null&&(p.dynamicLine.value=m,n.update("none"))}function l(g){if(!g.length)return{min:0,max:1};const m=Math.max(0,...g.map(y=>y.y));return{min:0,max:Math.max(1,Math.ceil(m+.2))}}function c(g,m,p="#000000"){const y=getComputedStyle(document.documentElement).getPropertyValue(g).trim()||p,b=y.length===4?"#"+[...y.slice(1)].map(E=>E+E).join(""):y,v=parseInt(b.slice(1),16),w=v>>16&255,S=v>>8&255,D=v&255;return`rgba(${w}, ${S}, ${D}, ${m})`}function u(g){return console.log("[createDataset] types:",g.map((m,p)=>({i:p,type:m.type??m.t,raw:m}))),i("--color-bolus","#ef4444"),{label:"Bolus (U)",data:g,type:"bar",borderWidth:0,borderRadius:2,barPercentage:.95,categoryPercentage:1,barThickness:10,backgroundColor:m=>{const p=m.raw?.type;return p==="meal"?c("--color-bolus-meal",.7,"#16a34a"):p==="correction"?c("--color-bolus-correction",.7,"#f97316"):p==="Control-IQ"?c("--color-bolus-controliq",.7,"#6b7280"):c("--color-bolus",.7,"#2563eb")}}}function d(g,m){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(p,y,b)=>{const v=b.getElementsAtEventForMode(p,"nearest",{intersect:!1},!1);if(v.length){const{datasetIndex:w,index:S}=v[0],D=b.data.datasets[w].data[S],E=D.x,R=typeof D.y=="number"?D.y:Number(D.amt??0);b.options.plugins.annotation.annotations.dynamicLine.value=E,b.update("none");const I=b.canvas.getBoundingClientRect(),L=(p?.native?.clientX??p.clientX)-I.left,M=D.type??null;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:E,px:L,source:"bolus",bolus:{amount:R,type:M}}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:p=>O.fromMillis(Number(p)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:g?.min,max:g?.max},y:{position:"right",min:m.min,max:m.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:1},title:{display:!0,text:"Bolus (U)"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:p=>p.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function h(){if(!s.value)return;const g=s.value.getContext("2d"),m=o.value,p=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),y=p+864e5,b=l(m);n=new oe(g,{type:"bar",data:{datasets:[u(m)]},options:d({min:p,max:y},b)})}function f(){if(!n)return;const g=o.value,m=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=m+864e5,y=l(g);n.data.datasets=[u(g)],n.options.scales.x.min=m,n.options.scales.x.max=p,n.options.scales.y.min=y.min,n.options.scales.y.max=y.max,n.update("none")}return Ye(()=>{h(),window.addEventListener("chart-hover",a),s.value?.addEventListener("mouseleave",r)}),Cs(()=>{window.removeEventListener("chart-hover",a),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),Ce([()=>t.selectedDate,()=>t.boluses],f),(g,m)=>(T(),C("div",jO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Bolus chart"},null,512)]))}},WO={class:"chartContainer"},UO={__name:"HourlyBasalChart",props:{hourlyTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){oe.register(du,Oi,Sa,Ci,tn,Di,Ta,fu,Jo);const t=e,s=gt(null);let n=null;const i=G(()=>{if(!t.selectedDate||!Array.isArray(t.hourlyTotals))return[];const h=t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate),f=O.fromJSDate(h).setZone("Australia/Sydney").startOf("day"),g=[];for(let m=0;m<24;m++){const p=Number(t.hourlyTotals[m]??0),y=f.plus({hours:m}).toMillis(),b=f.plus({hours:m+1}).toMillis();g.push({x:y,y:p,_segStart:y,_segEnd:b,_val:p}),g.push({x:b,y:p,_segStart:y,_segEnd:b,_val:p})}return g});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal-hourly"}}))}function r(h){if(!n)return;const f=h?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(m=>Number(m.y)||0));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (units/hour bucket)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,m,p)=>{const y=p.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:b,index:v}=y[0],w=p.data.datasets[b].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const S=p.canvas.getBoundingClientRect(),E=(g?.native?.clientX??g.clientX)-S.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:E,source:"basal-hourly"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>O.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Units / Hour"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,g=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=a(f);n=new oe(h,{type:"line",data:{datasets:[l(f)]},options:c({min:g,max:m},p)})}function d(){if(!n)return;const h=i.value,f=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),g=f+864e5,m=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=g,n.options.scales.y.min=m.min,n.options.scales.y.max=m.max,n.update("none")}return Ye(()=>{u(),window.addEventListener("chart-hover",r),s.value?.addEventListener("mouseleave",o)}),Cs(()=>{window.removeEventListener("chart-hover",r),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),Ce([()=>t.selectedDate,i],d),(h,f)=>(T(),C("div",WO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Hourly basal (totals) chart"},null,512)]))}},zO=Ft(UO,[["__scopeId","data-v-268a4885"]]),VO={class:"chartContainer"},HO={__name:"FoodLogsChart",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){oe.register(Jp,ay,Ci,tn,Di,Jo);const t=e,s=gt(null);let n=null;function i(h,f,g="#000000"){const m=getComputedStyle(document.documentElement).getPropertyValue(h).trim()||g,p=m.length===4?"#"+[...m.slice(1)].map(S=>S+S).join(""):m,y=parseInt(p.slice(1),16),b=y>>16&255,v=y>>8&255,w=y&255;return`rgba(${b}, ${v}, ${w}, ${f})`}const o=G(()=>{const{startOfDay:h,endOfDay:f}=Xt(t.selectedDate),g=new Map;for(const m of t.foodLogs){const p=m.timestamp instanceof Date?m.timestamp:new Date(m.timestamp);if(p<h||p>=f)continue;const y=p.getTime(),b=Number(m.netCarbs??0);m.foodName||m.description,g.has(y)||g.set(y,{x:y,y:0,logs:[]});const v=g.get(y);v.y+=b,v.logs.push({name:m.foodName,quantity:m.quantity})}return Array.from(g.values()).sort((m,p)=>m.x-p.x)});function r(h){const f=Math.max(1,...h.map(m=>m.y)),g=Math.ceil(f/20)*20;return{min:0,max:Math.max(100,g)}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"foodLogs",foodLogs:null}}))}function l(h){if(!n)return;const f=h?.detail?.x,g=n.options.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=f,n.update("none"))}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover(g,m,p){const y=p.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:b,index:v}=y[0],w=p.data.datasets[b].data[v];p.options.plugins.annotation.annotations.dynamicLine.value=w.x,p.update("none");const S=p.canvas.getBoundingClientRect(),E=(g?.native?.clientX??g.clientX)-S.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w.x,px:E,source:"foodLogs",foodLogs:{logs:w.logs,netCarbs:w.y}}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,maxRotation:0,minRotation:0,callback:g=>O.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{display:!0,color:"#888",lineWidth:1},title:{display:!0,text:"Net Carbs"},ticks:{stepSize:20}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!=null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=o.value,g=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=g+864e5,p=r(f),y={min:p.min,max:Math.max(100,p.max)};n=new oe(h,{type:"bar",data:{datasets:[{label:"Net Carbs",data:f,backgroundColor:i("--color-food",.6,"#10b981"),barThickness:10,borderRadius:3,borderWidth:1,borderColor:"#065f46"}]},options:c({min:g,max:m},y)})}function d(){if(!n)return;const h=o.value,f=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=f+864e5,m=r(h);n.data.datasets[0].data=h,n.options.scales.x.min=f,n.options.scales.x.max=g,n.options.scales.y.min=m.min,n.options.scales.y.max=Math.max(100,m.max),n.update("none")}return Ye(()=>{u(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),Cs(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),Ce([()=>t.foodLogs,()=>t.selectedDate],d),(h,f)=>(T(),C("div",VO,[_("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Food chart"},null,512)]))}},qO=["role","tabindex"],JO={class:"log-title"},YO={class:"log-details"},KO={key:0},ZO={key:1},GO={key:2},XO={key:3},QO={key:4},tD={key:5},eD={__name:"FoodLogRow",props:{log:{type:Object,required:!0},asButton:{type:Boolean,default:!0}},setup(e){const t=e,s=G(()=>t.log.timestamp instanceof Date?t.log.timestamp:at(t.log.timestamp));return(n,i)=>(T(),C("div",{class:"food-row clickable-row",role:e.asButton?"button":void 0,tabindex:e.asButton?0:void 0},[_("div",JO,[_("strong",null,P(bt(Oo)(s.value)),1),J(": "+P(e.log.foodName||"Food"),1)]),_("div",YO,[e.log.quantity!=null?(T(),C("span",KO," Grams (or mLs): "+P(e.log.quantity),1)):Y("",!0),e.log.netCarbs!=null?(T(),C("span",ZO," Net Carbs: "+P(e.log.netCarbs)+"g",1)):Y("",!0),e.log.totalCarbs!=null?(T(),C("span",GO," Total Carbs: "+P(e.log.totalCarbs)+"g",1)):Y("",!0),e.log.fat!=null?(T(),C("span",XO," Fat: "+P(e.log.fat)+"g",1)):Y("",!0),e.log.fibre!=null?(T(),C("span",QO," Fibre: "+P(e.log.fibre)+"g",1)):Y("",!0),e.log.calories!=null?(T(),C("span",tD," Calories: "+P(e.log.calories),1)):Y("",!0)])],8,qO))}},wu=Ft(eD,[["__scopeId","data-v-2c52b607"]]),sD={class:"bolus-row",role:"button",tabindex:"0"},nD={class:"line"},iD={class:"time"},oD={class:"amount-pill"},rD={class:"meta"},aD={key:1},lD={key:2},cD={key:3},uD={__name:"BolusRow",props:{dose:{type:Object,required:!0}},setup(e){const t=e,s=G(()=>{const i=t.dose?.timestamp;return i instanceof Date?i:at(i)}),n=G(()=>{const i=Number(t.dose?.amount??0);return isFinite(i)?i.toFixed(2):"0.00"});return(i,o)=>(T(),C("div",sD,[_("div",nD,[_("strong",iD,P(bt(Oo)(s.value)),1),_("span",oD,[J(P(n.value)+"U ",1),o[0]||(o[0]=_("span",{class:"icon","aria-hidden":"true"},"",-1))])]),_("div",rD,[e.dose?.type?(T(),C("span",{key:0,class:tt(["badge",{"badge-meal":e.dose.type==="meal","badge-correction":e.dose.type==="correction","badge-controliq":e.dose.type==="Control-IQ","badge-other":e.dose.type!=="meal"&&e.dose.type!=="correction"}])},P(e.dose.type),3)):Y("",!0),e.dose?.carbRatioUsed?(T(),C("span",aD,"Ratio: 1:"+P(e.dose.carbRatioUsed),1)):Y("",!0),e.dose?.duration?(T(),C("span",lD,"Duration: "+P(e.dose.duration)+"s",1)):Y("",!0),e.dose?.notes?(T(),C("span",cD," "+P(e.dose.notes),1)):Y("",!0)])]))}},$y=Ft(uD,[["__scopeId","data-v-780e029d"]]),dD={class:"note-body"},hD={key:0,class:"note-title"},fD={class:"note-line"},gD={key:0},mD={key:1},pD=["innerHTML"],yD={key:0,class:"note-tags"},bD={__name:"NoteRow",props:{note:{type:Object,required:!0}},setup(e){const t=e,s=G(()=>t.note.timestamp instanceof Date?t.note.timestamp:at(t.note.timestamp));return(n,i)=>(T(),C("div",{class:"note-row",role:"button",tabindex:"0",onClick:i[0]||(i[0]=(...o)=>n.onClick&&n.onClick(...o))},[_("div",dD,[e.note.title?(T(),C("div",hD,[_("strong",null,P(e.note.title),1)])):Y("",!0),_("div",fD,[e.note.noteNumber?(T(),C("strong",gD,"#"+P(e.note.noteNumber),1)):Y("",!0),e.note.noteNumber?(T(),C("span",mD,"  ")):Y("",!0),_("strong",null,P(bt(Oo)(s.value)),1),i[1]||(i[1]=J(": ",-1)),_("span",{class:"note-text",innerHTML:(e.note.text||"").replace(/\n/g,"<br>")},null,8,pD)])]),e.note.tags?.length?(T(),C("div",yD,[(T(!0),C(ft,null,Ut(e.note.tags,o=>(T(),C("span",{key:o,class:"note-tag"},"#"+P(o),1))),128))])):Y("",!0)]))}},Fy=Ft(bD,[["__scopeId","data-v-0cda799b"]]);function vD(e){const t=Math.floor(e),s=Math.round((e-t)*60);return`${t} min ${s.toString().padStart(2,"0")} sec/km`}function _D(e){return`${e.toFixed(1)} km/h`}function wD(e){return`${(e/1e3).toFixed(2)} km`}const xD={class:"log-title"},SD={class:"time"},kD={class:"log-details"},TD={key:0},OD={key:1},DD={key:2},CD={key:3},MD={key:4},ED={key:5},AD={key:6},ID={key:7},PD={key:8},LD={__name:"WorkoutRow",props:{workout:{type:Object,required:!0}},emits:["workout-click"],setup(e,{emit:t}){const s=e,n=t;function i(){n("workout-click",s.workout)}function o(a){return Math.round(Number(a??0)/60)}function r(a){return Math.round(Number(a??0))}return(a,l)=>(T(),C("div",{class:"log-block",role:"button",tabindex:"0",onClick:i},[_("div",xD,[_("strong",null,P(e.workout.name??e.workout.type??"Workout"),1),_("span",SD,"  "+P(bt(uo)(e.workout.start)),1)]),_("div",kD,[e.workout.duration!=null?(T(),C("span",TD,[l[0]||(l[0]=_("strong",null,"Duration:",-1)),J(" "+P(o(e.workout.duration))+" min",1)])):Y("",!0),e.workout.averageHeartRate!=null?(T(),C("span",OD,[l[1]||(l[1]=_("strong",null,"Avg HR:",-1)),J(" "+P(r(e.workout.averageHeartRate))+" bpm",1)])):Y("",!0),e.workout.maxHeartRate!=null?(T(),C("span",DD,[l[2]||(l[2]=_("strong",null,"Max HR:",-1)),J(" "+P(r(e.workout.maxHeartRate))+" bpm",1)])):Y("",!0),e.workout.activeCalories!=null?(T(),C("span",CD,[l[3]||(l[3]=_("strong",null,"Calories:",-1)),J(" "+P(r(e.workout.activeCalories)),1)])):Y("",!0),_("span",null,[l[4]||(l[4]=_("strong",null,"Start:",-1)),J(" "+P(bt(uo)(e.workout.start)),1)]),_("span",null,[l[5]||(l[5]=_("strong",null,"End:",-1)),J(" "+P(e.workout.endTime?bt(uo)(e.workout.endTime):""),1)]),e.workout.elapsedTime!=null?(T(),C("span",MD,[l[6]||(l[6]=_("strong",null,"Elapsed:",-1)),J(" "+P(o(e.workout.elapsedTime))+" min",1)])):Y("",!0),e.workout.distance!=null?(T(),C("span",ED,[l[7]||(l[7]=_("strong",null,"Distance:",-1)),J(" "+P(bt(wD)(e.workout.distance)),1)])):Y("",!0),e.workout.kmPerHour!=null?(T(),C("span",AD,[l[8]||(l[8]=_("strong",null,"Speed:",-1)),J(" "+P(bt(_D)(e.workout.kmPerHour)),1)])):Y("",!0),e.workout.minutesPerKm!=null?(T(),C("span",ID,[l[9]||(l[9]=_("strong",null,"Pace:",-1)),J(" "+P(bt(vD)(e.workout.minutesPerKm)),1)])):Y("",!0),e.workout.notes?(T(),C("span",PD,[l[10]||(l[10]=_("strong",null,"Notes:",-1)),J(" "+P(e.workout.notes),1)])):Y("",!0)])]))}},Ny=Ft(LD,[["__scopeId","data-v-2e8e572c"]]);function Ms(e,t="any"){window.dispatchEvent(new CustomEvent("jump-to-time",{detail:{at:e,source:t}})),console.log("[jumpToTime] dispatched",{at:e,source:t})}const RD={class:"combined-list"},$D={key:0,class:"empty"},FD={key:1,class:"stack"},ND=["onClick"],jD={class:"type-badge","aria-hidden":"true"},BD={class:"content"},WD={__name:"CombinedTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]},boluses:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},workouts:{type:Array,default:()=>[]}},setup(e){const t=e,s={food:{icon:"",cssVar:"--color-food"},bolus:{icon:"",cssVar:"--color-bolus"},note:{icon:"",cssVar:"--color-note"},workout:{icon:"",cssVar:"--color-workout"}};function n(r){return s[r]?.icon??""}function i(r){return`var(${s[r]?.cssVar||"--color-border"})`}const o=G(()=>{const{startOfDay:r,endOfDay:a}=Xt(t.selectedDate),l=t.foodLogs.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:at(h.timestamp);return f>=r&&f<a?{type:"food",ts:f,payload:h}:null}).filter(Boolean),c=t.boluses.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:at(h.timestamp);return f>=r&&f<a?{type:"bolus",ts:f,payload:h}:null}).filter(Boolean),u=t.notes.map(h=>{const f=h.timestamp??h.startTime,g=f instanceof Date?f:at(f);return g>=r&&g<a?{type:"note",ts:g,payload:{...h,timestamp:g}}:null}).filter(Boolean),d=t.workouts.map(h=>{const f=h.start instanceof Date?h.start:at(h.start);return f>=r&&f<a?{type:"workout",ts:f,payload:h}:null}).filter(Boolean);return[...l,...c,...u,...d].sort((h,f)=>h.ts-f.ts)});return(r,a)=>(T(),C("div",RD,[o.value.length===0?(T(),C("div",$D,"No activity for this day.")):(T(),C("div",FD,[(T(!0),C(ft,null,Ut(o.value,(l,c)=>(T(),C("div",{key:l.type+"-"+l.ts.getTime()+"-"+c,class:"feed-item clickable-row",style:Te({"--accent":i(l.type)}),onClick:u=>bt(Ms)(l.ts,"combined")},[_("div",jD,P(n(l.type)),1),_("div",BD,[l.type==="food"?(T(),De(wu,{key:0,log:l.payload},null,8,["log"])):l.type==="bolus"?(T(),De($y,{key:1,dose:l.payload},null,8,["dose"])):l.type==="note"?(T(),De(Fy,{key:2,note:l.payload},null,8,["note"])):l.type==="workout"?(T(),De(Ny,{key:3,workout:l.payload},null,8,["workout"])):Y("",!0)])],12,ND))),128))]))]))}},UD=Ft(WD,[["__scopeId","data-v-a9480cf9"]]),zD={class:"htp-root",tabindex:"0","aria-haspopup":"true","aria-expanded":"false"},VD={class:"htp-box",role:"tooltip"},HD={class:"htp-fallback"},qD={__name:"HelpTooltip",props:{Message:{type:String,default:""}},setup(e){return(t,s)=>(T(),C("span",zD,[s[0]||(s[0]=J(" ? ",-1)),_("span",VD,[cv(t.$slots,"default",{},()=>[_("span",HD,P(e.Message),1)])])]))}},JD=Ft(qD,[["__scopeId","data-v-65e5884a"]]),YD="modulepreload",KD=function(e){return"/"+e},Tf={},Yo=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var r=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(s.map(u=>{if(u=KD(u),u in Tf)return;Tf[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":YD,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((g,m)=>{f.addEventListener("load",g),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},ZD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Yo(async()=>{const{default:n}=await Promise.resolve().then(()=>Ii);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class xu extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class GD extends xu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Of extends xu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Df extends xu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gc||(gc={}));var XD=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class QD{constructor(t,{headers:s={},customFetch:n,region:i=gc.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=ZD(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return XD(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=r):typeof r=="string"?(a["Content-Type"]="text/plain",u=r):typeof FormData<"u"&&r instanceof FormData?u=r:(a["Content-Type"]="application/json",u=JSON.stringify(r)));const d=yield this.fetch(c.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(m=>{throw new GD(m)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Of(d);if(!d.ok)throw new Df(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Df||i instanceof Of?i.context:void 0}}})}}function tC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var zt={},zn={},Vn={},Hn={},qn={},Jn={},sC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wi=sC();const nC=wi.fetch,jy=wi.fetch.bind(wi),By=wi.Headers,iC=wi.Request,oC=wi.Response,Ii=Object.freeze(Object.defineProperty({__proto__:null,Headers:By,Request:iC,Response:oC,default:jy,fetch:nC},Symbol.toStringTag,{value:"Module"})),rC=eC(Ii);var wr={},Cf;function Wy(){if(Cf)return wr;Cf=1,Object.defineProperty(wr,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return wr.default=e,wr}var Mf;function Uy(){if(Mf)return Jn;Mf=1;var e=Jn&&Jn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Jn,"__esModule",{value:!0});const t=e(rC),s=e(Wy());class n{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,r){return this.headers=Object.assign({},this.headers),this.headers[o]=r,this}then(o,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,g=null,m=null,p=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=S:g=JSON.parse(S))}const v=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const v=await c.text();try{f=JSON.parse(v),Array.isArray(f)&&c.status===404&&(g=[],f=null,p=200,y="OK")}catch{c.status===404&&v===""?(p=204,y="No Content"):f={message:v}}if(f&&this.isMaybeSingle&&(!((h=f?.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,p=200,y="OK"),f&&this.shouldThrowOnError)throw new s.default(f)}return{error:f,data:g,count:m,status:p,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,r)}returns(){return this}overrideTypes(){return this}}return Jn.default=n,Jn}var Ef;function zy(){if(Ef)return qn;Ef=1;var e=qn&&qn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qn,"__esModule",{value:!0});const t=e(Uy());class s extends t.default{select(i){let o=!1;const r=(i??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:o=!0,nullsFirst:r,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${o?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:r=o}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,o,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:o=!1,settings:r=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,o?"verbose":null,r?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return qn.default=s,qn}var Af;function Su(){if(Af)return Hn;Af=1;var e=Hn&&Hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hn,"__esModule",{value:!0});const t=e(zy());class s extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const r=Array.from(new Set(o)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:r,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${l}fts${c}.${o}`),this}match(i){return Object.entries(i).forEach(([o,r])=>{this.url.searchParams.append(o,`eq.${r}`)}),this}not(i,o,r){return this.url.searchParams.append(i,`not.${o}.${r}`),this}or(i,{foreignTable:o,referencedTable:r=o}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,o,r){return this.url.searchParams.append(i,`${o}.${r}`),this}}return Hn.default=s,Hn}var If;function Vy(){if(If)return Vn;If=1;var e=Vn&&Vn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vn,"__esModule",{value:!0});const t=e(Su());class s{constructor(i,{headers:o={},schema:r,fetch:a}){this.url=i,this.headers=o,this.schema=r,this.fetch=a}select(i,{head:o=!1,count:r}={}){const a=o?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),r&&(this.headers.Prefer=`count=${r}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:o,defaultToNull:r=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:o,ignoreDuplicates:r=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${r?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:o}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),this.headers.Prefer=a.join(","),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const o="DELETE",r=[];return i&&r.push(`count=${i}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Vn.default=s,Vn}var qi={},Ji={},Pf;function aC(){return Pf||(Pf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.version=void 0,Ji.version="0.0.0-automated"),Ji}var Lf;function lC(){if(Lf)return qi;Lf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.DEFAULT_HEADERS=void 0;const e=aC();return qi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},qi}var Rf;function cC(){if(Rf)return zn;Rf=1;var e=zn&&zn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(zn,"__esModule",{value:!0});const t=e(Vy()),s=e(Su()),n=lC();class i{constructor(r,{headers:a={},schema:l,fetch:c}={}){this.url=r,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(r){const a=new URL(`${this.url}/${r}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new i(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${r}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{h.searchParams.append(m,p)})):(d="POST",f=a);const g=Object.assign({},this.headers);return u&&(g.Prefer=`count=${u}`),new s.default({method:d,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return zn.default=i,zn}var $f;function uC(){if($f)return zt;$f=1;var e=zt&&zt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.PostgrestError=zt.PostgrestBuilder=zt.PostgrestTransformBuilder=zt.PostgrestFilterBuilder=zt.PostgrestQueryBuilder=zt.PostgrestClient=void 0;const t=e(cC());zt.PostgrestClient=t.default;const s=e(Vy());zt.PostgrestQueryBuilder=s.default;const n=e(Su());zt.PostgrestFilterBuilder=n.default;const i=e(zy());zt.PostgrestTransformBuilder=i.default;const o=e(Uy());zt.PostgrestBuilder=o.default;const r=e(Wy());return zt.PostgrestError=r.default,zt.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:r.default},zt}var dC=uC();const hC=tC(dC),{PostgrestClient:fC,PostgrestQueryBuilder:a2,PostgrestFilterBuilder:l2,PostgrestTransformBuilder:c2,PostgrestBuilder:u2,PostgrestError:d2}=hC;class gC{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const n=this.getWebSocketConstructor();return new n(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mC="2.15.1",pC=`realtime-js/${mC}`,yC="1.0.0",mc=1e4,bC=1e3,vC=100;var po;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(po||(po={}));var Bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bt||(Bt={}));var ze;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ze||(ze={}));var pc;(function(e){e.websocket="websocket"})(pc||(pc={}));var vn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(vn||(vn={}));class _C{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(t.slice(r,r+i));r=r+i;const l=n.decode(t.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(t.slice(r,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Hy{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Ff=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,r)=>(o[r]=wC(r,e,t,i),o),{})},wC=(e,t,s,n)=>{const i=t.find(a=>a.name===e),o=i?.type,r=s[e];return o&&!n.includes(o)?qy(o,r):yc(r)},qy=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return TC(t,s)}switch(e){case Et.bool:return xC(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return SC(t);case Et.json:case Et.jsonb:return kC(t);case Et.timestamp:return OC(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return yc(t);default:return yc(t)}},yc=e=>e,xC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},SC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},TC=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let o;const r=e.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>qy(t,a))}return e},OC=e=>typeof e=="string"?e.replace(" ","T"):e,Jy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class vl{constructor(t,s,n={},i=mc){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nf||(Nf={}));class yo{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yo.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=yo.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=yo.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const o=this.cloneDeep(t),r=this.transformState(s),a={},l={};return this.map(o,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const d=o[c];if(d){const h=u.map(p=>p.presence_ref),f=d.map(p=>p.presence_ref),g=u.filter(p=>f.indexOf(p.presence_ref)<0),m=d.filter(p=>h.indexOf(p.presence_ref)<0);g.length>0&&(a[c]=g),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}n(a,u,l)}),this.map(r,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jf||(jf={}));var bo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(bo||(bo={}));var bs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bs||(bs={}));class ku{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new vl(this,ze.join,this.params,this.timeout),this.rejoinTimer=new Hy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ze.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new yo(this),this.broadcastEndpointURL=Jy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:o,presence:r,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[bo.PRESENCE]&&this.bindings[bo.PRESENCE].length>0,u={},d={broadcast:o,presence:Object.assign(Object.assign({},r),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(bs.CHANNEL_ERROR,h)),this._onClose(()=>t?.(bs.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){t?.(bs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,m=(f=g?.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<m;y++){const b=g[y],{filter:{event:v,schema:w,table:S,filter:D}}=b,E=h&&h[y];if(E&&E.event===v&&E.schema===w&&E.table===S&&E.filter===D)p.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=Bt.errored,t?.(bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(bs.SUBSCRIBED);return}}).receive("error",h=>{this.state=Bt.errored,t?.(bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===Bt.joined&&t===bo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:r}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ze.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new vl(this,ze.leave,{},t),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vl(this,t,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vC){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,o;const r=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ze;if(n&&[a,l,c,u].indexOf(r)>=0&&n!==this._joinRef())return;let h=this._onMessage(r,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(m=f.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===r}).map(f=>f.callback(h,n)):(o=this.bindings[r])===null||o===void 0||o.filter(f=>{var g,m,p,y,b,v;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in f){const w=f.id,S=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((m=s.ids)===null||m===void 0?void 0:m.includes(w))&&(S==="*"||S?.toLocaleLowerCase()===((p=s.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(b=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((v=s?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===r}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:m,table:p,commit_timestamp:y,type:b,errors:v}=g;h=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(h,n)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&ku.isEqual(i.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ze.close,{},t)}_onError(t){this._on(ze.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Ff(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Ff(t.columns,t.old_record)),s}}const Bf=()=>{},xr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},DC=[1e3,2e3,5e3,1e4],CC=1e4,MC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class EC{constructor(t,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=xr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bf,this.ref=0,this.reconnectTimer=null,this.logger=Bf,this.conn=null,this.sendBuffer=[],this.serializer=new _C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...r)=>Yo(async()=>{const{default:a}=await Promise.resolve().then(()=>Ii);return{default:a}},void 0).then(({default:a})=>a(...r)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...r)=>o(...r)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${pc.websocket}`,this.httpEndpoint=Jy(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gC.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yC}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case po.connecting:return vn.Connecting;case po.open:return vn.Open;case po.closing:return vn.Closing;default:return vn.Closed}}isConnected(){return this.connectionState()===vn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new ku(`realtime:${t}`,s,this);return this.channels.push(o),o}}push(t){const{topic:s,event:n,payload:i,ref:o}=t,r=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(bC,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},xr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:r}=s,a=r?`(${r})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,o,r)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ze.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([MC],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:pC};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ze.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Hy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,n,i,o,r,a,l,c;if(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:mc,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:xr.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(r=t?.accessToken)!==null&&r!==void 0?r:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t?.reconnectAfterMs)!==null&&a!==void 0?a:u=>DC[u-1]||CC,this.encode=(l=t?.encode)!==null&&l!==void 0?l:(u,d)=>d(JSON.stringify(u)),this.decode=(c=t?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Tu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class AC extends Tu{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bc extends Tu{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var IC=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Yy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Yo(async()=>{const{default:n}=await Promise.resolve().then(()=>Ii);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},PC=()=>IC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yo(()=>Promise.resolve().then(()=>Ii),void 0)).Response:Response}),vc=e=>{if(Array.isArray(e))return e.map(s=>vc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=vc(n)}),t},LC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var $n=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const _l=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RC=(e,t,s)=>$n(void 0,void 0,void 0,function*(){const n=yield PC();e instanceof n&&!s?.noResolveJson?e.json().then(i=>{const o=e.status||500,r=i?.statusCode||o+"";t(new AC(_l(i),o,r))}).catch(i=>{t(new bc(_l(i),i))}):t(new bc(_l(e),e))}),$C=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(LC(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s))};function Ko(e,t,s,n,i,o){return $n(this,void 0,void 0,function*(){return new Promise((r,a)=>{e(s,$C(t,n,i,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>RC(l,a,n))})})}function ia(e,t,s,n){return $n(this,void 0,void 0,function*(){return Ko(e,"GET",t,s,n)})}function is(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Ko(e,"POST",t,n,i,s)})}function _c(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Ko(e,"PUT",t,n,i,s)})}function FC(e,t,s,n){return $n(this,void 0,void 0,function*(){return Ko(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Ky(e,t,s,n,i){return $n(this,void 0,void 0,function*(){return Ko(e,"DELETE",t,n,i,s)})}var re=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const NC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jC{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=Yy(i)}uploadOrUpdate(t,s,n,i){return re(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Wf),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(t=="PUT"?_c:is)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},r?.duplex?{duplex:r.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(Wt(o))return{data:null,error:o};throw o}})}upload(t,s,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return re(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Wf.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield _c(this.fetch,a.toString(),l,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(Wt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s?.upsert&&(i["x-upsert"]="true");const o=yield is(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new Tu("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:a},error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}update(t,s,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return re(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}copy(t,s,n){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield is(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return re(this,void 0,void 0,function*(){try{const i=yield is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}download(t,s){return re(this,void 0,void 0,function*(){const i=typeof s?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(s?.transform||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ia(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wt(a))return{data:null,error:a};throw a}})}info(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield ia(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:vc(n),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}exists(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield FC(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Wt(n)&&n instanceof bc){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],o=s?.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return re(this,void 0,void 0,function*(){try{return{data:yield Ky(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}list(t,s,n){return re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},NC),s),{prefix:t||""});return{data:yield is(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}listV2(t,s){return re(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield is(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const BC="2.11.0",WC={"X-Client-Info":`storage-js/${BC}`};var Yn=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class UC{constructor(t,s={},n,i){const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},WC),s),this.fetch=Yy(n)}listBuckets(){return Yn(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Wt(t))return{data:null,error:t};throw t}})}getBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Yn(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Yn(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield Ky(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}}class zC extends UC{constructor(t,s={},n,i){super(t,s,n,i)}from(t){return new jC(this.url,this.headers,t,this.fetch)}}const VC="2.55.0";let so="";typeof Deno<"u"?so="deno":typeof document<"u"?so="web":typeof navigator<"u"&&navigator.product==="ReactNative"?so="react-native":so="node";const HC={"X-Client-Info":`supabase-js-${so}/${VC}`},qC={headers:HC},JC={schema:"public"},YC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KC={};var ZC=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const GC=e=>{let t;return e?t=e:typeof fetch>"u"?t=jy:t=fetch,(...s)=>t(...s)},XC=()=>typeof Headers>"u"?By:Headers,QC=(e,t,s)=>{const n=GC(s),i=XC();return(o,r)=>ZC(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(r?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var tM=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function eM(e){return e.endsWith("/")?e:e+"/"}function sM(e,t){var s,n;const{db:i,auth:o,realtime:r,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),r),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>tM(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Zy="2.71.1",si=30*1e3,wc=3,wl=wc*si,nM="http://localhost:9999",iM="supabase.auth.token",oM={"X-Client-Info":`gotrue-js/${Zy}`},xc="X-Supabase-Api-Version",Gy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aM=600*1e3;class Ou extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function rt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lM extends Ou{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function cM(e){return rt(e)&&e.name==="AuthApiError"}class Xy extends Ou{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class nn extends Ou{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class $s extends nn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uM(e){return rt(e)&&e.name==="AuthSessionMissingError"}class Sr extends nn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kr extends nn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Tr extends nn{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dM(e){return rt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Uf extends nn{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sc extends nn{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function xl(e){return rt(e)&&e.name==="AuthRetryableFetchError"}class zf extends nn{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class kc extends nn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vf=` 	
\r=`.split(""),hM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vf.length;t+=1)e[Vf[t].charCodeAt(0)]=-2;for(let t=0;t<oa.length;t+=1)e[oa[t].charCodeAt(0)]=t;return e})();function Hf(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(oa[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(oa[n]),t.queuedBits-=6}}function Qy(e,t,s){const n=hM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qf(e){const t=[],s=r=>{t.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{mM(r,n,s)};for(let r=0;r<e.length;r+=1)Qy(e.charCodeAt(r),i,o);return t.join("")}function fM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gM(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}fM(n,t)}}function mM(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function pM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Qy(e.charCodeAt(i),s,n);return new Uint8Array(t)}function yM(e){const t=[];return gM(e,s=>t.push(s)),new Uint8Array(t)}function bM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Hf(i,s,n)),Hf(null,s,n),t.join("")}function vM(e){return Math.round(Date.now()/1e3)+e}function _M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ue=()=>typeof window<"u"&&typeof document<"u",fn={tested:!1,writable:!1},tb=()=>{if(!Ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fn.tested)return fn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fn.tested=!0,fn.writable=!0}catch{fn.tested=!0,fn.writable=!1}return fn.writable};function wM(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const eb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Yo(async()=>{const{default:n}=await Promise.resolve().then(()=>Ii);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},xM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ni=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},gn=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ps=async(e,t)=>{await e.removeItem(t)};class La{constructor(){this.promise=new La.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}La.promiseConstructor=Promise;function Sl(e){const t=e.split(".");if(t.length!==3)throw new kc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!rM.test(t[n]))throw new kc("JWT not in base64url format");return{header:JSON.parse(qf(t[0])),payload:JSON.parse(qf(t[1])),signature:pM(t[2]),raw:{header:t[0],payload:t[1]}}}async function SM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function kM(e,t){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await e(o);if(!t(o,null,r)){n(r);return}}catch(r){if(!t(o,r)){i(r);return}}})()})}function TM(e){return("0"+e.toString(16)).substr(-2)}function OM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,TM).join("")}async function DM(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function CM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await DM(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kn(e,t,s=!1){const n=OM();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await ni(e,`${t}-code-verifier`,i);const o=await CM(n);return[o,n===o?"plain":"s256"]}const MM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EM(e){const t=e.headers.get(xc);if(!t||!t.match(MM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function IM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zn(e){if(!PM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kl(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jf(e){return JSON.parse(JSON.stringify(e))}var LM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RM=[502,503,504];async function Yf(e){var t;if(!xM(e))throw new Sc(bn(e),0);if(RM.includes(e.status))throw new Sc(bn(e),e.status);let s;try{s=await e.json()}catch(o){throw new Xy(bn(o),o)}let n;const i=EM(e);if(i&&i.getTime()>=Gy["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new zf(bn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $s}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new zf(bn(s),e.status,s.weak_password.reasons);throw new lM(bn(s),e.status||500,n)}const $M=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function dt(e,t,s,n){var i;const o=Object.assign({},n?.headers);o[xc]||(o[xc]=Gy["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await FM(e,t,s+a,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function FM(e,t,s,n,i,o){const r=$M(t,n,i,o);let a;try{a=await e(s,Object.assign({},r))}catch(l){throw console.error(l),new Sc(bn(l),0)}if(a.ok||await Yf(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Yf(l)}}function ps(e){var t;let s=null;WM(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=vM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Kf(e){const t=ps(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function NM(e){return{data:e,error:null}}function jM(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=e,r=LM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function BM(e){return e}function WM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tl=["global","local","others"];var UM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class zM{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=eb(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Tl[0]){if(Tl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tl.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Us})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=UM(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:jM,redirectTo:s?.redirectTo})}catch(s){if(rt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Us})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:BM});if(u.error)throw u.error;const d=await u.json(),h=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);c[`${p}Page`]=m}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(rt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Zn(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Us})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Zn(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Us})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){Zn(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Us})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zn(t.userId);try{const{data:s,error:n}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Zn(t.userId),Zn(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}}function Zf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function VM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gn={debug:!!(globalThis&&tb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class HM extends sb{}async function qM(e,t,s){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new HM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}VM();const JM={url:nM,storageKey:iM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gf(e,t,s){return await s()}const Xn={};class Io{constructor(t){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Io.nextInstanceID,Io.nextInstanceID+=1,this.instanceID>0&&Ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},JM),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zM({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=eb(i.fetch),this.lock=i.lock||Gf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ue()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=qM:this.lock=Gf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:tb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zf(this.memoryStorage)),Ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=Xn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Xn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=wM(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ue()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),dM(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return rt(s)?{error:s}:{error:new Xy("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ps}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,n,i;try{let o;if("email"in t){const{email:u,password:d,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Kn(this.storage,this.storageKey)),o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:g},xform:ps})}else if("phone"in t){const{phone:u,password:d,options:h}=t;o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ps})}else throw new kr("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:r,options:a}=t;s=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else if("phone"in t){const{phone:o,password:r,options:a}=t;s=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else throw new kr("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Sr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,n,i,o,r,a,l,c,u,d,h,f;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{chain:p,wallet:y,statement:b,options:v}=t;let w;if(Ue())if(typeof y=="object")w=y;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))w=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const S=new URL((s=v?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const D=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let E;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")E=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)E=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=v?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=v?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((r=v?.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const D=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=D}}try{const{data:p,error:y}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:bM(m)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ps});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Sr}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(rt(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ps});if(await Ps(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Sr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(rt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=t,a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:ps}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Sr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,o,r;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Kn(this.storage,this.storageKey));const{error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(r=l?.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new kr("You must provide either an email or phone number.")}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,o;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ps});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await Kn(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:NM})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new $s;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(rt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:o}=t,{error:r}=await dt(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:n,type:i,options:o}=t,{data:r,error:a}=await dt(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:r?.message_id},error:a}}throw new kr("You must provide either an email or phone number and a type")}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await gn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<wl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const r=await gn(this.userStorage,this.storageKey+"-user");r?.user?t.user=r.user:t.user=kl()}if(this.storage.isServer&&t.user){let r=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Us}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $s}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Us})})}catch(s){if(rt(s))return uM(s)&&(await this._removeSession(),await Ps(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new $s;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Kn(this.storage,this.storageKey));const{data:c,error:u}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:Us});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $s;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Sl(t.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(rt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:r,error:a}=s;if(a)throw a;t=(n=r.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new $s;const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Ue())throw new Tr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Tr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Uf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Uf("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!r||!c)throw new Tr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:m,error:p}=await this._getUser(o);if(p)throw p;const y={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:r,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(rt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,t);if(a&&!(cM(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ps(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=_M(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Kn(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,u;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ue()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(rt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await kM(async i=>(i>0&&await SM(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ps})),(i,o)=>{const r=200*Math.pow(2,i);return o&&xl(o)&&Date.now()+r-n<si})}catch(n){if(this._debug(s,"error",n),rt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Ue()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await gn(this.storage,this.storageKey);if(i&&this.userStorage){let r=await gn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await ni(this.userStorage,this.storageKey+"-user",r)),i.user=(t=r?.user)!==null&&t!==void 0?t:kl()}else if(i&&!i.user&&!i.user){const r=await gn(this.storage,this.storageKey+"-user");r&&r?.user?(i.user=r.user,await Ps(this.storage,this.storageKey+"-user"),await ni(this.storage,this.storageKey,i)):i.user=kl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<wl;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${wl}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),xl(r)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:a}=await this._getUser(i.access_token);!a&&r?.user?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new $s;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new La;const{data:o,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!o.session)throw new $s;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),rt(o)){const r={session:null,error:o};return xl(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await ni(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=Jf(i);await ni(this.storage,this.storageKey,o)}else{const i=Jf(s);await ni(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ps(this.storage,this.storageKey),await Ps(this.storage,this.storageKey+"-code-verifier"),await Ps(this.storage,this.storageKey+"-user"),this.userStorage&&await Ps(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ue()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),si);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/si);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${si}ms, refresh threshold is ${wc} ticks`),i<=wc&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ue()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await Kn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=t?.factors||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Sl(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+aM>i)return n;const{data:o,error:r}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,s={}){try{let n=t;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};n=f.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Sl(n);s?.allowExpired||AM(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:i,signature:r},error:null}}const u=IM(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,r,yM(`${a}.${l}`)))throw new kc("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}}Io.nextInstanceID=0;const YM=Io;class KM extends YM{constructor(t){super(t)}}var ZM=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class GM{constructor(t,s,n){var i,o,r;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=eM(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:JC,realtime:KC,auth:Object.assign(Object.assign({},YC),{storageKey:c}),global:qC},d=sM(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=QC(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new fC(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zC(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new QD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return ZM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KM({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new EC(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const XM=(e,t,s)=>new GM(e,t,s);function QM(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}QM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tE="https://ydjtxdquehaeglieozpz.supabase.co",eE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkanR4ZHF1ZWhhZWdsaWVvenB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0OTc2MzEsImV4cCI6MjA3MTA3MzYzMX0.zRO6-nChPo9eiVIWc44XYCojP8DYrxaRFHsZzbnxVD4",Qt=XM(tE,eE);async function sE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchNotesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("notes").select("id, text, start_time, end_time, tags").gte("start_time",s).lt("start_time",n).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,text:r.text??"",timestamp:O.fromISO(r.start_time).toJSDate(),startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,tags:Array.isArray(r.tags)?r.tags:[]}))}async function Xf({limit:e=10,anchor:t,query:s="",tags:n=[]}={}){let i=Qt.from("notes").select("id, text, start_time, end_time, tags",{count:"exact"}).order("start_time",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.startISO&&t?.id&&(i=i.or([`and(start_time.lt.${t.startISO})`,`and(start_time.eq.${t.startISO},id.lt.${t.id})`].join(",")));const o=(s||"").trim(),r=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);if(o.startsWith("#")){const f=o.slice(1).trim();f&&r.push(f)}else o.length>0&&(i=i.ilike("text",`%${o}%`));r.length>0&&(i=i.contains("tags",r));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,text:f.text??"",timestamp:O.fromISO(f.start_time).toJSDate(),startTime:O.fromISO(f.start_time).toJSDate(),endTime:f.end_time?O.fromISO(f.end_time).toJSDate():null,tags:Array.isArray(f.tags)?f.tags:[]})),d=u[u.length-1],h=d?{startISO:O.fromJSDate(d.startTime).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function nE(){const{data:e,error:t}=await Qt.rpc("all_note_tags");if(t)throw t;return(e??[]).map(s=>s.tag)}const iE={class:"all-notes"},oE={class:"search"},rE={key:0,class:"results-bar"},aE={key:0},lE={key:0},cE={key:1},uE={class:"tag-cloud"},dE=["onClick"],hE={key:1,class:"empty"},fE=["onClick"],gE={class:"note-log-body"},mE=["innerHTML"],pE={key:0,class:"note-tags"},yE={class:"load-more"},bE={key:1},vE={key:2},_E={__name:"AllNotesTab",emits:["note-click"],setup(e,{emit:t}){const s=t,n=gt([]),i=gt(null),o=gt(!1),r=gt(null),a=gt(""),l=gt([]),c=gt([]);function u(y){return c.value.includes(y)}function d(y){const b=c.value.indexOf(y);b>=0?c.value.splice(b,1):c.value.push(y),o.value=!0,n.value=[],i.value=null}function h(){a.value="",c.value=[]}async function f(){o.value=!0;try{const{items:y,nextAnchor:b,totalMatchingFilter:v}=await Xf({limit:10,query:a.value,tags:c.value});n.value=y,i.value=b,r.value=v}catch(y){console.error("[AllNotesTab] first page failed:",y),n.value=[],i.value=null,r.value=0}finally{o.value=!1}}async function g(){if(!(!i.value||o.value)){o.value=!0;try{const{items:y,nextAnchor:b}=await Xf({limit:10,query:a.value,tags:c.value,anchor:i.value});n.value.push(...y),i.value=b}catch(y){console.error("[AllNotesTab] next page failed:",y)}finally{o.value=!1}}}function m(y){Ms(y.timestamp,"all-notes"),s("note-click",y.timestamp)}Ce([a,()=>c.value.join("|")],async()=>{o.value=!0,n.value=[],i.value=null,r.value=null,await f()});async function p(){try{l.value=await nE()}catch(y){console.error("[AllNotesTab] loadAllTags failed:",y),l.value=[]}}return Ye(async()=>{await p(),await f()}),(y,b)=>(T(),C("section",iE,[_("div",oE,[Fc(_("input",{"onUpdate:modelValue":b[0]||(b[0]=v=>a.value=v),type:"text",placeholder:"Search notes  (#tag or text)"},null,512),[[hm,a.value]]),a.value||c.value.length?(T(),C("button",{key:0,class:"clear-btn",type:"button",onClick:h}," Clear Search ")):Y("",!0),ht(JD,null,{default:Il(()=>b[1]||(b[1]=[_("div",null,[_("div",null,[J("To filter by tag, prefix tag name with "),_("code",null,"#"),J("or click on the tags listed below.")]),_("div",null,[J("To filter by note number, prefix note number with "),_("code",null,"#"),J(".")]),_("div",null,"Or you can just search the content by entering a word.")],-1)])),_:1,__:[1]})]),o.value?Y("",!0):(T(),C("div",rE,[(r.value??0)>0?(T(),C("span",aE,[J(P(r.value)+" result",1),r.value!==1?(T(),C("span",lE,"s")):Y("",!0)])):(T(),C("span",cE,"No results"))])),_("div",uE,[(T(!0),C(ft,null,Ut(l.value,v=>(T(),C("button",{key:v,class:tt(["tag-chip",{selected:u(v)}]),type:"button",onClick:w=>d(v)},P(v),11,dE))),128))]),o.value?(T(),C("div",hE,"Loading")):(T(),De(x0,{key:2,name:"list",tag:"div",class:"notes-list"},{default:Il(()=>[(T(!0),C(ft,null,Ut(n.value,v=>(T(),C("div",{key:v.id??v.timestamp+"-"+(v.text||"").slice(0,10),class:"note-log-block clickable-row",onClick:w=>m(v),role:"button",tabindex:"0"},[_("div",gE,[_("div",null,[_("strong",null,P(bt(Xl)(v.timestamp)),1),b[2]||(b[2]=J("  ",-1)),_("span",{innerHTML:(v.text||"").replace(/\n/g,"<br>")},null,8,mE)])]),v.tags?.length?(T(),C("div",pE,[(T(!0),C(ft,null,Ut(v.tags,w=>(T(),C("span",{key:w,class:"note-tag"},P(w),1))),128))])):Y("",!0)],8,fE))),128))]),_:1})),_("div",yE,[i.value&&!o.value?(T(),C("button",{key:0,type:"button",onClick:g}," Load more ")):o.value?(T(),C("div",bE,"Loading")):n.value.length>0?(T(),C("div",vE,"No more results.")):Y("",!0)])]))}},wE=Ft(_E,[["__scopeId","data-v-5015ded6"]]),xE={class:"daily-section"},SE={key:0,class:"loading-row"},kE={key:1},TE={key:2},OE={__name:"NotesTab",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Xt(s.selectedDate);return s.notes.filter(r=>{const a=r.timestamp instanceof Date?r.timestamp:at(r.timestamp);return a>=i&&a<o}).sort((r,a)=>{const l=(r.timestamp instanceof Date?r.timestamp:at(r.timestamp)).getTime(),c=(a.timestamp instanceof Date?a.timestamp:at(a.timestamp)).getTime();return l-c})});return(i,o)=>(T(),C("div",xE,[e.loading?(T(),C("div",SE,o[0]||(o[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading notes",-1)]))):n.value.length===0?(T(),C("div",kE,"No notes for this day.")):(T(),C("div",TE,[(T(!0),C(ft,null,Ut(n.value,r=>(T(),De(Fy,{key:(r.timestamp?.getTime?.()??r.timestamp)+"-"+(r.noteNumber??""),note:r,onClick:a=>bt(Ms)(r.timestamp,"notes"),class:"clickable-row"},null,8,["note","onClick"]))),128))]))]))}},DE={class:"daily-section"},CE={key:0},ME={key:1},EE={class:"fast-label"},AE={key:0,class:"fast-notes"},IE={__name:"FastsTab",props:{fasts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:r,endOfDay:a}=Xt(s.selectedDate);return s.fasts.filter(l=>{const c=l.startTime instanceof Date?l.startTime:at(l.startTime),u=l.endTime?l.endTime instanceof Date?l.endTime:at(l.endTime):null;return c<a&&(!u||u>r)}).sort((l,c)=>{const u=(l.startTime instanceof Date?l.startTime:at(l.startTime)).getTime(),d=(c.startTime instanceof Date?c.startTime:at(c.startTime)).getTime();return u-d})});function i(r){const a=r.startTime instanceof Date?r.startTime:at(r.startTime),l=r.endTime?r.endTime instanceof Date?r.endTime:at(r.endTime):null,c=mp(a,l,s.selectedDate);return Bs(c)}function o(r){const a=s.selectedDate,l=r.startTime,c=r.endTime;return rr(l,a)&&c&&rr(c,a)?"Started and Ended":rr(l,a)?"Started fast:":c&&rr(c,a)?"Ended fast:":"Continued"}return(r,a)=>(T(),C("div",DE,[n.value.length===0?(T(),C("div",CE,"No fasts for this day.")):(T(),C("div",ME,[(T(!0),C(ft,null,Ut(n.value,l=>(T(),C("div",{key:(l.startTime?.getTime?.()??l.startTime)+"-"+(l.endTime?.getTime?.()??"ongoing"),class:"fast-block",role:"button",tabindex:"0"},[_("div",EE,P(o(l)),1),_("div",null,[a[0]||(a[0]=_("strong",null,"Duration:",-1)),J(" "+P(i(l)),1)]),_("div",null,[a[1]||(a[1]=_("strong",null,"Start:",-1)),J(" "+P(bt(Xl)(l.startTime)),1)]),_("div",null,[a[2]||(a[2]=_("strong",null,"End:",-1)),J(" "+P(l.endTime?bt(Xl)(l.endTime):"Ongoing"),1)]),l.notes?(T(),C("div",AE," "+P(l.notes),1)):Y("",!0)]))),128))]))]))}},PE=Ft(IE,[["__scopeId","data-v-ad5edd99"]]);async function LE(e,t){const{data:s,error:n}=await Qt.rpc("total_fast_overlap_seconds",{s:e,e:t});if(n)throw n;return s??0}async function RE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFastsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("fasts").select("id, start_time, end_time, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,notes:r.notes??""}))}const $E={class:"stats-card"},FE={class:"row"},NE={class:"pickers"},jE=["value"],BE=["value"],WE={class:"metric"},UE={key:0,class:"err"},zE={__name:"FastStatsTab",setup(e){gt(O.local().setZone("Australia/Sydney").toJSDate());const t=O.local().setZone("Australia/Sydney").startOf("day"),s=gt(t.minus({days:6}).toJSDate()),n=gt(t.toJSDate());G(()=>{const y=b=>b.setZone("Australia/Sydney").toFormat("d LLL yyyy");return`${y(O.fromJSDate(s.value))}  ${y(O.fromJSDate(n.value))}`});const i=G(()=>O.fromJSDate(s.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd")),o=G(()=>O.fromJSDate(n.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function r(y){const b=O.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");s.value=b.toJSDate()}function a(y){const b=O.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");n.value=b.toJSDate()}const l=gt(!1),c=gt(""),u=gt("");function d(y){if(y==null)return"";const b=Math.round(y/60);return Bs(b)}async function h(){l.value=!0,c.value="";try{const{startUtcISO:y,endUtcISO:b}=Zc(s.value,n.value),v=await LE(y,b),w=O.fromISO(y),S=O.fromISO(b),D=Math.max(1,S.diff(w,"days").days),E=v/D;u.value=d(E)}catch(y){console.error("[FastStatsTab] load failed:",y),c.value="Failed to load.",u.value=""}finally{l.value=!1}}Ce([s,n],()=>{h()});function f(){const y=O.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),b=O.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day"),v=Math.floor(b.diff(y,"days").days);return Math.max(1,v)}function g(y){const b=O.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),v=O.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day");s.value=b.plus({days:y}).toJSDate(),n.value=v.plus({days:y}).toJSDate()}function m(){g(-f())}function p(){g(f())}return h(),(y,b)=>(T(),C("div",$E,[_("div",FE,[_("button",{type:"button",onClick:m}," Prev"),_("div",NE,[_("input",{type:"date",value:i.value,onChange:r},null,40,jE),b[0]||(b[0]=_("span",null,"",-1)),_("input",{type:"date",value:o.value,onChange:a},null,40,BE)]),_("button",{type:"button",onClick:p},"Next ")]),_("div",WE,[b[1]||(b[1]=_("div",{class:"title"},"Average Fasting Duration Per 24 Hours",-1)),_("div",{class:tt(["value",{dim:l.value}])},P(u.value),3),c.value?(T(),C("div",UE,P(c.value),1)):Y("",!0)])]))}},VE=Ft(zE,[["__scopeId","data-v-91e14c32"]]),HE={class:"daily-section"},qE={key:0},JE={key:1,class:"glucose-list"},YE=["onClick","aria-label"],KE={class:"time"},ZE={class:"value"},GE={__name:"GlucoseTab",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Xt(t.selectedDate);return t.glucoseReadings.filter(r=>{const a=r.timestamp instanceof Date?r.timestamp:at(r.timestamp);return a>=i&&a<o}).map(r=>({...r,ts:r.timestamp instanceof Date?r.timestamp:at(r.timestamp)})).sort((r,a)=>r.ts-a.ts)});function n(i){const o=Number(i);return o<4?"is-low":o<=6?"is-inrange":o<=10?"is-elevated":"is-high"}return(i,o)=>(T(),C("div",HE,[s.value.length===0?(T(),C("div",qE,"No glucose readings for this day.")):(T(),C("div",JE,[(T(!0),C(ft,null,Ut(s.value,r=>(T(),C("div",{key:r.ts.getTime()+"-"+r.value,class:tt(["glucose-row clickable-row",n(r.value)]),onClick:a=>bt(Ms)(r.ts,"bg"),"aria-label":`BG ${Number(r.value).toFixed(2)} at ${bt(Oo)(r.ts)}`},[_("span",KE,P(bt(Oo)(r.ts)),1),_("span",ZE,P(Number(r.value).toFixed(2)),1),o[0]||(o[0]=_("span",{class:"unit"},"mmol/L",-1))],10,YE))),128))]))]))}},XE=Ft(GE,[["__scopeId","data-v-882bf5e4"]]),QE={class:"daily-section"},tA={key:0,class:"loading-row"},eA={key:1},sA={key:2},nA={__name:"FoodLogsTab",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,s)=>(T(),C("div",QE,[e.loading?(T(),C("div",tA,s[0]||(s[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading food logs",-1)]))):e.foodLogs.length===0?(T(),C("div",eA,"No food logs.")):(T(),C("div",sA,[(T(!0),C(ft,null,Ut(e.foodLogs,n=>(T(),De(wu,{key:n.id,log:n,onClick:i=>bt(Ms)(n.timestamp,"foodLogs"),class:"clickable-row"},null,8,["log","onClick"]))),128))]))]))}},iA={class:"daily-section"},oA={key:0},rA={key:1},aA={__name:"WorkoutsTab",props:{workouts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=Xt(t.selectedDate);return t.workouts.filter(o=>{const r=o.start instanceof Date?o.start:at(o.start);return r>=n&&r<i}).sort((o,r)=>{const a=(o.start instanceof Date?o.start:at(o.start)).getTime(),l=(r.start instanceof Date?r.start:at(r.start)).getTime();return a-l})});return(n,i)=>(T(),C("div",iA,[s.value.length===0?(T(),C("div",oA,"No workouts for this day.")):(T(),C("div",rA,[(T(!0),C(ft,null,Ut(s.value,o=>(T(),De(Ny,{key:(o.start?.getTime?.()??o.start)+"-"+(o.name||""),workout:o,onClick:r=>bt(Ms)(o.start,"workout"),class:"clickable-row"},null,8,["workout","onClick"]))),128))]))]))}},lA={class:"daily-section"},cA={key:0,class:"loading-row"},uA={key:1},dA={__name:"BolusTab",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){const t=e,s=G(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=Xt(t.selectedDate);return t.boluses.filter(o=>{const r=o.timestamp instanceof Date?o.timestamp:at(o.timestamp);return r>=n&&r<i}).sort((o,r)=>{const a=(o.timestamp instanceof Date?o.timestamp:at(o.timestamp)).getTime(),l=(r.timestamp instanceof Date?r.timestamp:at(r.timestamp)).getTime();return a-l})});return(n,i)=>(T(),C("div",lA,[e.loading?(T(),C("div",cA,i[0]||(i[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading boluses",-1)]))):s.value.length===0?(T(),C("div",uA,"No bolus doses for this day.")):(T(!0),C(ft,{key:2},Ut(s.value,o=>(T(),De($y,{key:(o.timestamp?.getTime?.()??o.timestamp)+"-"+(o.amount??""),dose:o,onClick:r=>bt(Ms)(o.timestamp,"bolus"),class:"clickable-row"},null,8,["dose","onClick"]))),128))]))}},hA={class:"daily-section"},fA={key:0,class:"loading-row"},gA={key:1},mA={key:2},pA=["onClick"],yA={class:"log-details"},bA={key:1},vA={__name:"BasalTab",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){function t(){console.log("[Basal Debug] Total entries:",s.basalEntries.length);const i=s.basalEntries.filter(o=>!o.endTime);console.log("[Basal Debug] Entries with null endTime:",i.length),s.basalEntries.forEach((o,r)=>{console.log(`#${r} start: ${o.startTime}, end: ${o.endTime??"null"}, rate: ${o.rate}`)})}Ye(()=>{t()});const s=e,n=G(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Xt(s.selectedDate);return s.basalEntries.filter(r=>{const a=r.startTime instanceof Date?r.startTime:at(r.startTime),l=r.endTime?r.endTime instanceof Date?r.endTime:at(r.endTime):null;return a<o&&(!l||l>i)}).sort((r,a)=>{const l=(r.startTime instanceof Date?r.startTime:at(r.startTime)).getTime(),c=(a.startTime instanceof Date?a.startTime:at(a.startTime)).getTime();return l-c})});return(i,o)=>(T(),C("div",hA,[e.loading?(T(),C("div",fA,o[0]||(o[0]=[_("span",{class:"spinner","aria-hidden":"true"},null,-1),_("span",null,"Loading basal",-1)]))):n.value.length===0?(T(),C("div",gA," No basal entries for this day. ")):(T(),C("div",mA,[(T(!0),C(ft,null,Ut(n.value,r=>(T(),C("div",{key:(r.startTime?.getTime?.()??r.startTime)+"-"+(r.endTime?.getTime?.()??"ongoing")+"-"+(r.rate??""),class:"log-block clickable-row",role:"button",tabindex:"0",onClick:a=>bt(Ms)(r.startTime,"basal")},[_("div",null,[_("strong",null,P(bt(uo)(r.startTime)),1),o[1]||(o[1]=J("  ",-1)),_("strong",null,P(r.endTime?bt(uo)(r.endTime):"Ongoing"),1)]),_("div",null,[o[2]||(o[2]=_("strong",null,"Duration:",-1)),J(" "+P(bt($w)(bt(mp)(r.startTime,r.endTime,e.selectedDate))),1)]),_("div",yA,[_("span",null," Rate: "+P(r.rate)+" U/hr",1),r.mode?(T(),C("span",{key:0,class:tt(["mode-chip",{"chip-control-iq":r.mode==="ControlIQ","chip-manual":r.mode==="Manual","chip-suspended":r.mode==="Suspended"}])},P(r.mode),3)):Y("",!0),r.notes?(T(),C("span",bA," "+P(r.notes),1)):Y("",!0)])],8,pA))),128))]))]))}},_A=Ft(vA,[["__scopeId","data-v-5bd58bd6"]]),wA={class:"basal-by-hour"},xA={class:"summary"},SA={class:"table-wrap"},kA={class:"hour-table"},TA={class:"hour-label"},OA={class:"units"},DA={__name:"BasalByHourTab",props:{basalEntries:{type:Array,default:()=>[]},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){const t=e,s=G(()=>Array.isArray(t.hourlyBasalTotals)&&t.hourlyBasalTotals.length===24?t.hourlyBasalTotals:new Array(24).fill(0)),n=G(()=>{const o=[],r=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day");for(let a=0;a<24;a++){const l=r.plus({hours:a}),c=l.plus({hours:1});o.push({hour:a,label:`${l.toFormat("h:mm a")}  ${c.toFormat("h:mm a")}`,units:s.value[a]})}return o}),i=G(()=>s.value.reduce((o,r)=>o+r,0));return(o,r)=>(T(),C("section",wA,[r[2]||(r[2]=_("h3",{class:"title"},"Basal Delivered by Hour",-1)),_("div",xA,[_("div",null,[r[0]||(r[0]=_("strong",null,"Total basal for the day:",-1)),J(" "+P(i.value.toFixed(2))+" U",1)])]),_("div",SA,[_("table",kA,[r[1]||(r[1]=_("thead",null,[_("tr",null,[_("th",null,"Hour"),_("th",null,"Units")])],-1)),_("tbody",null,[(T(!0),C(ft,null,Ut(n.value,a=>(T(),C("tr",{key:a.hour},[_("td",TA,P(a.label),1),_("td",OA,P(a.units.toFixed(3)),1)]))),128))])])])]))}},CA=Ft(DA,[["__scopeId","data-v-9e5f6077"]]),MA={class:"stat-grid"},EA={class:"card"},AA={class:"card"},IA={class:"card"},PA={class:"card"},LA={class:"card"},RA={__name:"InsulinStatsTab",props:{selectedDate:{type:Date,required:!0},bolusDoses:{type:Array,default:()=>[]},basalEntries:{type:Array,default:()=>[]},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:l,endOfDay:c}=Xt(t.selectedDate);return t.bolusDoses.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:at(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d.amount??0),0)}),n=G(()=>{const{startOfDay:l,endOfDay:c}=Xt(t.selectedDate),u=t.basalEntries.map(h=>({startTime:h.startTime instanceof Date?h.startTime:at(h.startTime),endTime:h.endTime?h.endTime instanceof Date?h.endTime:at(h.endTime):null,rate:Number(h.rate??0)})).filter(h=>h.startTime<c&&(!h.endTime||h.endTime>l)).sort((h,f)=>h.startTime-f.startTime);let d=0;for(const h of u){const f=new Date(Math.max(h.startTime.getTime(),l.getTime())),m=(new Date(Math.min((h.endTime??c).getTime(),c.getTime()))-f)/6e4;m>0&&(d+=h.rate*(m/60))}return d}),i=G(()=>s.value+n.value),o=G(()=>{const{startOfDay:l,endOfDay:c}=Xt(t.selectedDate);return t.foodLogs.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:at(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d?.netCarbs??0),0)}),r=G(()=>{const l=o.value,c=s.value;return l>0&&c>0?`${(l/c).toFixed(2)}`:"N/A"}),a=G(()=>{const l=o.value,c=i.value;return c>0?`${(l/c).toFixed(2)}`:"N/A"});return(l,c)=>(T(),C("div",MA,[_("div",EA,[c[0]||(c[0]=J(" Bolus ",-1)),_("strong",null,P(s.value.toFixed(2))+"U",1)]),_("div",AA,[c[1]||(c[1]=J(" Basal ",-1)),_("strong",null,P(n.value.toFixed(2))+"U",1)]),_("div",IA,[c[2]||(c[2]=J(" Total Insulin ",-1)),_("strong",null,P(i.value.toFixed(2))+"U",1)]),_("div",PA,[c[3]||(c[3]=J(" Net Carbs / Bolus ",-1)),_("strong",null,P(r.value),1)]),_("div",LA,[c[4]||(c[4]=J(" Net Carbs / Total Insulin ",-1)),_("strong",null,P(a.value),1)])]))}},$A=Ft(RA,[["__scopeId","data-v-868c365a"]]),FA={class:"stat-grid"},NA={class:"card"},jA={class:"value"},BA={class:"card"},WA={class:"value"},UA={class:"card"},zA={class:"value"},VA=["data-status"],HA={class:"value"},qA={class:"target-bar"},JA=["title"],YA={class:"ticks-row"},KA={class:"card"},ZA={class:"value"},GA={class:"card"},XA={class:"value"},QA={__name:"NutritionStatsTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:h,endOfDay:f}=Xt(t.selectedDate);return t.foodLogs.map(g=>({...g,timestamp:g.timestamp instanceof Date?g.timestamp:at(g.timestamp)})).filter(g=>g.timestamp>=h&&g.timestamp<f)}),n=G(()=>{const h=f=>s.value.reduce((g,m)=>g+Number(m?.[f]??0),0);return{netCarbs:h("netCarbs"),totalCarbs:h("totalCarbs"),fat:h("fat"),protein:h("protein"),fibre:h("fibre"),calories:h("calories")}}),i=G(()=>{const h=(Number(n.value.fat)||0)*9,f=Number(n.value.calories)||0;return f<=0?0:h/f*100}),o=G(()=>{const h=Number(i.value)||0;return Math.max(15,h)}),r=G(()=>`${Math.max(0,Number(i.value)||0)/o.value*100}%`),a=G(()=>r.value),l=G(()=>{const h=10/o.value*100,f=5/o.value*100;return{left:`${h}%`,width:`${f}%`}}),c=G(()=>`${10/o.value*100}%`),u=G(()=>`${15/o.value*100}%`),d=G(()=>{const h=Number(i.value)||0;return h<10?"below":h>15?"above":"in"});return(h,f)=>(T(),C("div",FA,[_("div",NA,[f[0]||(f[0]=J(" Net Carbs ",-1)),_("span",jA,P(n.value.netCarbs.toFixed(1))+"g",1)]),_("div",BA,[f[1]||(f[1]=J(" Total Carbs ",-1)),_("span",WA,P(n.value.totalCarbs.toFixed(1))+"g",1)]),_("div",UA,[f[2]||(f[2]=_("span",null," Fat",-1)),f[3]||(f[3]=J()),_("span",zA,P(n.value.fat.toFixed(1))+"g",1)]),_("div",{class:"card fat-pct","data-status":d.value},[f[5]||(f[5]=_("span",{class:"label"}," % Calories from Fat",-1)),_("span",HA,P(i.value.toFixed(1))+"%",1),_("div",qA,[f[4]||(f[4]=_("div",{class:"bar"},null,-1)),_("div",{class:"target-band",style:Te({left:l.value.left,width:l.value.width})},null,4),_("div",{class:"fill",style:Te({width:a.value})},null,4),_("div",{class:"tick",style:Te({left:c.value}),"aria-hidden":"true"},null,4),_("div",{class:"tick",style:Te({left:u.value}),"aria-hidden":"true"},null,4),_("div",{class:"marker",style:Te({left:r.value}),title:i.value.toFixed(1)+"%"},null,12,JA)]),_("div",YA,[_("div",{class:"tick-label",style:Te({left:c.value})},"10",4),_("div",{class:"tick-label",style:Te({left:u.value})},"15",4),_("div",{class:"tick-label value-label",style:Te({left:r.value})},P(i.value.toFixed(1)),5)])],8,VA),f[8]||(f[8]=_("div",{class:"card"},[J(" Protein "),_("span",{class:"value"},"Not tracked yet...")],-1)),_("div",KA,[f[6]||(f[6]=J(" Fibre ",-1)),_("span",ZA,P(n.value.fibre.toFixed(1))+"g",1)]),_("div",GA,[f[7]||(f[7]=J(" Calories ",-1)),_("span",XA,P(n.value.calories.toFixed(0)),1)])]))}},tI=Ft(QA,[["__scopeId","data-v-7397306a"]]),eI={class:"weekly-table"},sI={class:"num"},nI={class:"num"},iI={class:"num"},oI={key:0,class:tt(["delta","neutral"])},rI={class:"num"},aI={class:"num"},lI={key:0},Qf=2.2046226218,cI={__name:"WeeklyCaloriesTab",props:{foodLogs:{type:Array,default:()=>[]},weekStartsOn:{type:String,default:"monday"},tz:{type:String,default:"Australia/Sydney"},weights:{type:Array,default:()=>[]},dailyActivity:{type:Array,default:()=>[]}},setup(e){const t=e;function s(c,u){let d=0,h=0,f=0,g=0,m=0,p=0,y=0,b=0;for(const v of t.dailyActivity){const w=O.fromFormat(v.sydney_date,"yyyy-LL-dd",{zone:t.tz});if(!w.isValid||w<c||w>=u)continue;const S=Number(v.active_calories);Number.isFinite(S)&&(d+=S,h+=1);const D=Number(v.resting_calories);Number.isFinite(D)&&(f+=D,g+=1);const E=Number(v.total_calories);Number.isFinite(E)&&(m+=E,p+=1);const R=Number(v.exercise_minutes);Number.isFinite(R)&&(y+=R,b+=1)}return{avgActive:h?d/h:null,avgResting:g?f/g:null,avgTotalEnergy:p?m/p:null,avgExerciseMin:b?y/b:null}}function n(c,u){let d=0,h=0;for(const f of t.weights){const g=at(f.timestamp),m=O.fromJSDate(g,{zone:t.tz});if(m.isValid&&m>=c&&m<u){const p=Number(f.value);Number.isFinite(p)&&(d+=p,h+=1)}}return h?d/h:null}function i(c,u){if(u==="monday")return c.startOf("week");const d=c.weekday%7;return c.minus({days:d}).startOf("day")}function o(c){return c.plus({days:7})}function r(c,u){const d=o(c).minus({seconds:1});return`${c.setZone(u).toFormat("ccc d LLL")}  ${d.setZone(u).toFormat("ccc d LLL")}`}const a=G(()=>{const c=new Map;for(const u of t.foodLogs){const d=at(u.timestamp),h=O.fromJSDate(d,{zone:t.tz});if(!h?.isValid)continue;const f=h.toFormat("yyyy-LL-dd"),g=Number(u.calories??u.kcal??0);Number.isFinite(g)&&c.set(f,(c.get(f)??0)+g)}return c});G(()=>[...a.value.entries()].map(([c,u])=>({day:c,kcal:u})).sort((c,u)=>c.day.localeCompare(u.day)));const l=G(()=>{const c=[...a.value.keys()].sort();if(!c.length)return[];const u=O.fromFormat(c[0],"yyyy-LL-dd",{zone:t.tz}),d=O.fromFormat(c[c.length-1],"yyyy-LL-dd",{zone:t.tz});let h=i(u,t.weekStartsOn);const f=o(i(d,t.weekStartsOn)),g=O.now().setZone(t.tz).startOf("day"),m=[];for(;h<f;){const p=h,y=o(h),v=Array.from({length:7},(M,W)=>p.plus({days:W}).toFormat("yyyy-LL-dd")).map(M=>a.value.get(M)??0),w=v.reduce((M,W)=>M+W,0),S=p<=g&&g<y,D=v.filter(M=>M>0).length,R=w/(S?D||1:7),I=n(p,y),B=I!=null?I*Qf:null,L=s(p,y);m.push({weekStart:p,weekEnd:y,label:r(p,t.tz),total:w,avgPerDay:R,avgWeight:I,avgWeightLb:B,avgActive:L.avgActive,avgResting:L.avgResting,avgTotalEnergy:L.avgTotalEnergy,avgExerciseMin:L.avgExerciseMin}),h=y}for(let p=0;p<m.length;p++){const y=p>0?m[p-1]:null;m[p].deltaAvg=y?m[p].avgPerDay-y.avgPerDay:null,m[p].deltaTotal=y?m[p].total-y.total:null,m[p].deltaWeight=y&&m[p].avgWeight!=null&&y.avgWeight!=null?m[p].avgWeight-y.avgWeight:null,m[p].deltaWeightLb=m[p].deltaWeight!=null?m[p].deltaWeight*Qf:null,m[p].deltaActive=y&&m[p].avgActive!=null&&y.avgActive!=null?m[p].avgActive-y.avgActive:null,m[p].deltaResting=y&&m[p].avgResting!=null&&y.avgResting!=null?m[p].avgResting-y.avgResting:null,m[p].deltaTotalEnergy=y&&m[p].avgTotalEnergy!=null&&y.avgTotalEnergy!=null?m[p].avgTotalEnergy-y.avgTotalEnergy:null,m[p].deltaExerciseMin=y&&m[p].avgExerciseMin!=null&&y.avgExerciseMin!=null?m[p].avgExerciseMin-y.avgExerciseMin:null}return m.reverse()});return(c,u)=>(T(),C("div",eI,[_("table",null,[u[1]||(u[1]=_("thead",null,[_("tr",null,[_("th",null,"Week"),_("th",{class:"num"},"Avg kcal/day"),_("th",{class:"num"},"Total kcal"),_("th",{class:"num"},"Avg active (kcal/day)"),_("th",{class:"num"},"Avg weight (kg)"),_("th",{class:"num"},"Avg weight (lb)")])],-1)),_("tbody",null,[(T(!0),C(ft,null,Ut(l.value,d=>(T(),C("tr",{key:d.weekStart.toISO()},[_("td",null,P(d.label),1),_("td",sI,[J(P(Math.round(d.avgPerDay).toLocaleString("en-AU"))+" ",1),d.deltaAvg!=null?(T(),C("span",{key:0,class:tt(["delta",d.deltaAvg>=0?"up":"down"])},P(d.deltaAvg>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaAvg)).toLocaleString("en-AU"))+") ",3)):Y("",!0)]),_("td",nI,[J(P(Math.round(d.total).toLocaleString("en-AU"))+" ",1),d.deltaTotal!=null?(T(),C("span",{key:0,class:tt(["delta",d.deltaTotal>=0?"up":"down"])},P(d.deltaTotal>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaTotal)).toLocaleString("en-AU"))+") ",3)):Y("",!0)]),_("td",iI,[J(P(d.avgActive!=null?Math.round(d.avgActive).toLocaleString("en-AU"):"")+" ",1),d.deltaActive!=null?(T(),C("span",oI,P(d.deltaActive>=0?"":"")+" ("+P(Math.abs(Math.round(d.deltaActive)).toLocaleString("en-AU"))+") ",1)):Y("",!0)]),_("td",rI,[J(P(d.avgWeight!=null?d.avgWeight.toFixed(2):"")+" ",1),d.deltaWeight!=null?(T(),C("span",{key:0,class:tt(["delta",d.deltaWeight>=0?"up":"down"])},P(d.deltaWeight>=0?"":"")+" ("+P(Math.abs(d.deltaWeight).toFixed(2))+") ",3)):Y("",!0)]),_("td",aI,[J(P(d.avgWeightLb!=null?d.avgWeightLb.toFixed(2):"")+" ",1),d.deltaWeightLb!=null?(T(),C("span",{key:0,class:tt(["delta",d.deltaWeightLb>=0?"up":"down"])},P(d.deltaWeightLb>=0?"":"")+" ("+P(Math.abs(d.deltaWeightLb).toFixed(2))+") ",3)):Y("",!0)])]))),128)),l.value.length?Y("",!0):(T(),C("tr",lI,u[0]||(u[0]=[_("td",{colspan:"3",class:"empty"},"No data",-1)])))])])]))}},uI=Ft(cI,[["__scopeId","data-v-24683c06"]]),dI={class:"bg-grid"},hI={class:"row green"},fI={class:"right"},gI={class:"chip chip-green"},mI={class:"row green"},pI={class:"right"},yI={class:"chip chip-green"},bI={class:"row red"},vI={class:"row amber"},_I={class:"row red"},wI={class:"row red"},xI={key:0,class:"secondary"},SI={class:"row red"},kI={key:0,class:"secondary"},TI={class:"row grey"},OI={key:0,class:"secondary"},DI={class:"foot"},CI={__name:"BgStatsTab",props:{selectedDate:{type:Date,required:!0},glucoseReadings:{type:Array,default:()=>[]}},setup(e){const t=e,s=G(()=>{const{startOfDay:n,endOfDay:i}=Xt(t.selectedDate),o=t.glucoseReadings.map(v=>({timestamp:v.timestamp instanceof Date?v.timestamp:at(v.timestamp),value:Number(v.value)})).filter(v=>v.timestamp>=n&&v.timestamp<i).sort((v,w)=>v.timestamp-w.timestamp);let r=0,a=0,l=0,c=0,u=0,d=0,h=1/0,f=-1/0,g=0;for(let v=0;v<o.length;v++){const w=o[v],S=o[v+1],D=w.timestamp,E=S?S.timestamp:new Date(Math.min(i,w.timestamp.getTime()+300*1e3)),R=Math.max(0,(E-D)/6e4);d+=R;const I=w.value;I<4&&(r+=R),I>=4&&I<=6&&(a+=R),I>=4&&I<=10&&(l+=R),I>8&&(c+=R),I>10&&(u+=R),Number.isFinite(I)&&I<h&&(h=I),Number.isFinite(I)&&I>f&&(f=I),Number.isFinite(I)&&(g+=I*R)}const m=Math.max(d,1),p=Number.isFinite(h)?h:null,y=Number.isFinite(f)?f:null,b=d>0&&Number.isFinite(g)?g/d:null;return{timeBelow4:r,timeBetween4and6:a,timeBetween4and10:l,timeAbove8:c,timeAbove10:u,totalCoveredMinutes:d,uncoveredMinutes:Math.max(0,1440-d),pct4to6:a/m*100,pct4to10:l/m*100,lowestBG:p,highestBG:y,averageBG:b}});return(n,i)=>(T(),C("div",dI,[_("div",hI,[i[0]||(i[0]=_("span",null,"In range (410)",-1)),_("div",fI,[_("span",gI,P(s.value.pct4to10.toFixed(1))+"%",1),_("strong",null,P(bt(Bs)(s.value.timeBetween4and10)),1)])]),_("div",mI,[i[1]||(i[1]=_("span",null,"In range, stricter (46)",-1)),_("div",pI,[_("span",yI,P(s.value.pct4to6.toFixed(1))+"%",1),_("strong",null,P(bt(Bs)(s.value.timeBetween4and6)),1)])]),_("div",bI,[i[2]||(i[2]=_("span",null,"High (above 10)",-1)),_("strong",null,P(bt(Bs)(s.value.timeAbove10)),1)]),_("div",vI,[i[3]||(i[3]=_("span",null,"Above 8",-1)),_("strong",null,P(bt(Bs)(s.value.timeAbove8)),1)]),_("div",_I,[i[4]||(i[4]=_("span",null,"Low (below 4)",-1)),_("strong",null,P(bt(Bs)(s.value.timeBelow4)),1)]),_("div",wI,[i[5]||(i[5]=_("span",null,"Lowest BG",-1)),_("strong",null,[J(P(s.value.lowestBG!=null?s.value.lowestBG.toFixed(2)+" ":"")+" ",1),s.value.lowestBG!=null?(T(),C("span",xI," ("+P((s.value.lowestBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",SI,[i[6]||(i[6]=_("span",null,"Highest BG",-1)),_("strong",null,[J(P(s.value.highestBG!=null?s.value.highestBG.toFixed(2)+" ":"")+" ",1),s.value.highestBG!=null?(T(),C("span",kI," ("+P((s.value.highestBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",TI,[i[7]||(i[7]=_("span",null,"Average BG",-1)),_("strong",null,[J(P(s.value.averageBG!=null?s.value.averageBG.toFixed(2)+" ":"")+" ",1),s.value.averageBG!=null?(T(),C("span",OI," ("+P((s.value.averageBG*18).toFixed(0))+" mg/dL) ",1)):Y("",!0)])]),_("div",DI,[i[8]||(i[8]=J(" Time not covered in the calculations: ",-1)),_("strong",null,P(bt(Bs)(s.value.uncoveredMinutes)),1)])]))}},MI=Ft(CI,[["__scopeId","data-v-2625d06e"]]);async function tg({limit:e=20,anchor:t,foodName:s="",tags:n=[]}={}){let i=Qt.from("food_logs").select("id, timestamp, food_name, quantity, net_carbs, calories, fat, protein, total_carbs, fibre, is_unfinished, resumed_at, food_tags",{count:"exact"}).order("timestamp",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.tsISO&&t?.id&&(i=i.or([`and(timestamp.lt.${t.tsISO})`,`and(timestamp.eq.${t.tsISO},id.lt.${t.id})`].join(",")));const o=(s||"").trim();o&&(i=i.ilike("food_name",o));const r=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);r.length>0&&(i=i.contains("food_tags",r));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,timestamp:O.fromISO(f.timestamp).toJSDate(),foodName:f.food_name??"",quantity:Number(f.quantity??0),netCarbs:Number(f.net_carbs??0),calories:Number(f.calories??0),fat:Number(f.fat??0),protein:Number(f.protein??0),totalCarbs:Number(f.total_carbs??0),fibre:Number(f.fibre??0),isUnfinished:!!f.is_unfinished,resumedAt:f.resumed_at?O.fromISO(f.resumed_at).toJSDate():null,foodTags:Array.isArray(f.food_tags)?f.food_tags:[]})),d=u[u.length-1],h=d?{tsISO:O.fromJSDate(d.timestamp).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function EI({foodName:e="",tags:t=[]}={}){const{data:s,error:n}=await Qt.rpc("food_history_summary",{p_food_name:(e||"").trim()||null,p_tags:Array.isArray(t)&&t.length?t:null});if(n)throw n;const i=(s??[])[0];if(!i)return{totalQuantity:0,totalCount:0,durationDays:0,averagePerDay:0};const o=i.min_ts?O.fromISO(i.min_ts):null,r=i.max_ts?O.fromISO(i.max_ts):null,a=Number(i.total_qty??0),l=Number(i.total_count??0);let c=0;if(o&&r){const d=Math.max(0,r.toMillis()-o.toMillis());c=Math.max(1,Math.ceil(d/(24*3600*1e3)))}const u=c?a/c:0;return{totalQuantity:a,totalCount:l,durationDays:c,averagePerDay:u}}const AI={class:"daily-section"},II={class:"search-box"},PI={key:2,class:"suggestions"},LI=["onMousedown"],RI={class:"tag-cloud"},$I=["onClick"],FI={key:0,class:"hint"},NI={key:1},jI={key:0,class:"results-bar"},BI={key:0},WI={key:0},UI={key:1},zI={key:1,class:"summary pretty"},VI={class:"stat-row"},HI={class:"right"},qI={class:"chip"},JI={class:"stat-row"},YI={class:"right"},KI={class:"chip"},ZI={class:"stat-row"},GI={class:"right"},XI={class:"chip"},QI={key:2,class:"empty"},tP={key:3,class:"empty"},eP={key:0,class:"empty"},sP={class:"date-heading"},nP={class:"load-more"},iP={key:1},oP={__name:"FoodHistorySearchTab",props:{foods:{type:Array,default:()=>[]},loading:{type:Object,default:()=>({})}},setup(e){const t=gt(""),s=gt(""),n=gt(!1),i=gt([]),o=e,r=gt(null),a=G(()=>{const L=new Set((o.foods??[]).map(M=>(M.name??"").trim()).filter(Boolean));return Array.from(L).sort((M,W)=>M.localeCompare(W,void 0,{sensitivity:"base"}))}),l=G(()=>{const L=t.value.trim().toLowerCase();return L?a.value.filter(M=>M.toLowerCase().includes(L)).slice(0,20):a.value.slice(0,20)}),c=G(()=>{const L=new Set;for(const M of o.foods??[])for(const W of Array.isArray(M.tags)?M.tags:[]){const et=String(W).trim();et&&L.add(et)}return Array.from(L).sort((M,W)=>M.localeCompare(W,void 0,{sensitivity:"accent"}))});function u(){t.value="",s.value="",n.value=!1,r.value?.focus()}function d(L){const M=i.value.indexOf(L);M>=0?i.value.splice(M,1):i.value.push(L),g.value=!0,p.value=[],y.value=null,b.value=null}function h(L){return i.value.includes(L)}function f(L){s.value=L,t.value=L,n.value=!1,g.value=!0,p.value=[],y.value=null,b.value=null}const g=gt(!1),m=gt(!1),p=gt([]),y=gt(null),b=gt(null),v=gt(0),w=gt(0),S=gt(0);async function D(){g.value=!0;try{const{items:L,nextAnchor:M,totalMatchingFilter:W}=await tg({limit:20,foodName:s.value,tags:i.value});p.value=L,y.value=M,b.value=W}catch(L){console.error("[FoodHistory] first page failed:",L),p.value=[],y.value=null,b.value=0}finally{g.value=!1}}async function E(){if(!(!y.value||g.value)){g.value=!0;try{const{items:L,nextAnchor:M}=await tg({limit:20,foodName:s.value,tags:i.value,anchor:y.value});p.value.push(...L),y.value=M}catch(L){console.error("[FoodHistory] next page failed:",L)}finally{g.value=!1}}}async function R(){m.value=!0;try{const L=await EI({foodName:s.value,tags:i.value});v.value=L.totalQuantity,w.value=L.durationDays,S.value=L.averagePerDay}catch(L){console.error("[FoodHistory] summary failed:",L),v.value=0,w.value=0,S.value=0}finally{m.value=!1}}function I(L){Ms(L,"food-history")}Ce([()=>s.value,()=>i.value.join("|")],async()=>{g.value=!0,p.value=[],y.value=null,b.value=null,await Promise.all([D(),R()])});function B(L){const M=new Map;for(const W of L){const et=O.fromJSDate(W.timestamp,{zone:"Australia/Sydney"}),nt=et.toISODate(),ot=et.toFormat("EEE d LLL yyyy");M.has(nt)||M.set(nt,{label:ot,items:[]}),M.get(nt).items.push(W)}return Array.from(M.entries()).sort((W,et)=>et[0].localeCompare(W[0])).map(([,W])=>W)}return(L,M)=>(T(),C("div",AI,[_("div",II,[Fc(_("input",{ref_key:"inputEl",ref:r,"onUpdate:modelValue":M[0]||(M[0]=W=>t.value=W),type:"text",class:"search-input",placeholder:"Search foods (e.g., apple)",onFocus:M[1]||(M[1]=W=>n.value=!0),onBlur:M[2]||(M[2]=W=>n.value=!1),onKeydown:[M[3]||(M[3]=ud(W=>n.value=!1,["esc"])),M[4]||(M[4]=ud(Ya(W=>f((l.value[0]||t.value)??""),["prevent"]),["enter"]))]},null,544),[[hm,t.value]]),t.value||s.value?(T(),C("button",{key:0,class:"clear-btn",type:"button",onMousedown:M[5]||(M[5]=Ya(()=>{},["prevent"])),onClick:u,"aria-label":"Clear search"},"",32)):Y("",!0),i.value.length||s.value?(T(),C("button",{key:1,class:"clear-btn",type:"button",onClick:M[6]||(M[6]=()=>{i.value.splice(0),u()}),"aria-label":"Clear tag & name filters",style:{"margin-left":"0.5rem"}},"Clear Filters")):Y("",!0),n.value&&l.value.length&&t.value.trim().length?(T(),C("ul",PI,[(T(!0),C(ft,null,Ut(l.value,W=>(T(),C("li",{key:W,class:"suggestion",onMousedown:Ya(et=>f(W),["prevent"])},P(W),41,LI))),128))])):Y("",!0)]),_("div",RI,[(T(!0),C(ft,null,Ut(c.value,W=>(T(),C("button",{key:W,class:tt(["tag-chip",{selected:h(W)}]),type:"button",onClick:et=>d(W)},P(W),11,$I))),128))]),!s.value&&i.value.length===0?(T(),C("div",FI," Search for a food, select it, then browse the history and click any row to jump the charts. ")):Y("",!0),s.value||i.value.length?(T(),C("div",NI,[g.value?Y("",!0):(T(),C("div",jI,[(b.value??0)>0?(T(),C("span",BI,[J(P(b.value)+" result",1),b.value!==1?(T(),C("span",WI,"s")):Y("",!0)])):(T(),C("span",UI,"No results"))])),!m.value&&b.value?(T(),C("div",zI,[_("div",VI,[M[7]||(M[7]=_("span",{class:"label"},"Total consumed",-1)),_("span",HI,[_("span",qI,P(v.value)+"g",1)])]),_("div",JI,[M[8]||(M[8]=_("span",{class:"label"},"Days covered",-1)),_("span",YI,[_("span",KI,P(w.value),1)])]),_("div",ZI,[M[9]||(M[9]=_("span",{class:"label"},"Avg per day",-1)),_("span",GI,[_("span",XI,P(S.value.toFixed(1))+"g",1)])])])):m.value?(T(),C("div",QI,"Calculating summary")):Y("",!0),g.value?(T(),C("div",tP,"Loading")):(T(),C(ft,{key:4},[p.value.length===0?(T(),C("div",eP,"No logs found.")):(T(),C(ft,{key:1},[(T(!0),C(ft,null,Ut(B(p.value),(W,et)=>(T(),C(ft,{key:et},[_("h4",sP,P(W.label),1),(T(!0),C(ft,null,Ut(W.items,nt=>(T(),De(wu,{key:nt.id,log:nt,onClick:ot=>I(nt.timestamp)},null,8,["log","onClick"]))),128))],64))),128)),_("div",nP,[y.value?(T(),C("button",{key:0,type:"button",onClick:E},"Load more")):p.value.length>0?(T(),C("div",iP,"No more results.")):Y("",!0)])],64))],64))])):Y("",!0)]))}},rP=Ft(oP,[["__scopeId","data-v-db37e84c"]]),aP={class:"tab-section"},lP={class:"tab-bar"},cP={class:"daily-section"},uP={__name:"Tabs",props:{data:{type:Object,required:!0},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Object,default:()=>({})}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=t,i=gt("combined");function o(r){i.value=r}return(r,a)=>(T(),C("section",aP,[_("div",lP,[_("button",{class:tt(["tab-button",{active:i.value==="combined"}]),onClick:a[0]||(a[0]=l=>o("combined"))}," Combined",2),_("button",{class:tt(["tab-button",{active:i.value==="notes"}]),onClick:a[1]||(a[1]=l=>o("notes"))}," Notes",2),_("button",{class:tt(["tab-button",{active:i.value==="foodLogs"}]),onClick:a[2]||(a[2]=l=>o("foodLogs"))}," Food",2),_("button",{class:tt(["tab-button",{active:i.value==="bolus"}]),onClick:a[3]||(a[3]=l=>o("bolus"))}," Bolus",2),_("button",{class:tt(["tab-button",{active:i.value==="fasts"}]),onClick:a[4]||(a[4]=l=>o("fasts"))}," Fasts",2),_("button",{class:tt(["tab-button",{active:i.value==="fast-stats"}]),onClick:a[5]||(a[5]=l=>o("fast-stats"))}," Fast Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="workouts"}]),onClick:a[6]||(a[6]=l=>o("workouts"))}," Workouts",2),_("button",{class:tt(["tab-button",{active:i.value==="basal"}]),onClick:a[7]||(a[7]=l=>o("basal"))}," Basal",2),_("button",{class:tt(["tab-button",{active:i.value==="basal-by-hour"}]),onClick:a[8]||(a[8]=l=>o("basal-by-hour"))}," Hourly Basal",2),_("button",{class:tt(["tab-button",{active:i.value==="glucose"}]),onClick:a[9]||(a[9]=l=>o("glucose"))}," BG",2),_("button",{class:tt(["tab-button",{active:i.value==="all-notes"}]),onClick:a[10]||(a[10]=l=>o("all-notes"))}," All Notes",2),_("button",{class:tt(["tab-button",{active:i.value==="insulin-stats"}]),onClick:a[11]||(a[11]=l=>o("insulin-stats"))}," Insulin Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="nutrition-stats"}]),onClick:a[12]||(a[12]=l=>o("nutrition-stats"))}," Nutrition Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="bg-stats"}]),onClick:a[13]||(a[13]=l=>o("bg-stats"))}," BG Stats",2),_("button",{class:tt(["tab-button",{active:i.value==="food-history"}]),onClick:a[14]||(a[14]=l=>o("food-history"))}," Food History",2),_("button",{class:tt(["tab-button",{active:i.value==="weekly-calories"}]),onClick:a[15]||(a[15]=l=>o("weekly-calories"))}," Weight Analysis",2)]),_("div",{class:tt(["tab-content",{"active-tab":i.value==="combined"}])},[ht(UD,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs,boluses:e.data.boluses,notes:e.data.notes,workouts:e.data.workouts},null,8,["selected-date","food-logs","boluses","notes","workouts"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="notes"}])},[ht(OE,{notes:e.data.notes,"selected-date":e.selectedDate,loading:s.loading?.notes===!0},null,8,["notes","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="foodLogs"}])},[ht(nA,{"food-logs":e.data.foodLogs,"selected-date":e.selectedDate,loading:s.loading?.foodLogs===!0},null,8,["food-logs","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="bolus"}])},[ht(dA,{boluses:e.data.boluses,"selected-date":e.selectedDate,loading:s.loading?.boluses===!0},null,8,["boluses","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="fasts"}])},[ht(PE,{fasts:e.data.fasts,"selected-date":e.selectedDate},null,8,["fasts","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="fast-stats"}])},[ht(VE)],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="workouts"}])},[ht(aA,{workouts:e.data.workouts,"selected-date":e.selectedDate},null,8,["workouts","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="basal"}])},[ht(_A,{"basal-entries":e.data.basalEntries,"selected-date":e.selectedDate,loading:s.loading?.basal===!0},null,8,["basal-entries","selected-date","loading"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="basal-by-hour"}])},[ht(CA,{"basal-entries":e.data.basalEntries,"hourly-basal-totals":e.hourlyBasalTotals,"selected-date":e.selectedDate},null,8,["basal-entries","hourly-basal-totals","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="glucose"}])},[ht(XE,{"glucose-readings":e.data.glucoseReadings,"selected-date":e.selectedDate},null,8,["glucose-readings","selected-date"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="all-notes"}])},[_("div",cP,[ht(wE,{notes:e.data.notes,onNoteClick:a[16]||(a[16]=l=>n("note-click",l))},null,8,["notes"])])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="insulin-stats"}])},[ht($A,{"selected-date":e.selectedDate,"bolus-doses":e.data.boluses,"basal-entries":e.data.basalEntries,"food-logs":e.data.foodLogs},null,8,["selected-date","bolus-doses","basal-entries","food-logs"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="nutrition-stats"}])},[ht(tI,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs},null,8,["selected-date","food-logs"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="bg-stats"}])},[ht(MI,{"selected-date":e.selectedDate,"glucose-readings":e.data.glucoseReadings},null,8,["selected-date","glucose-readings"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="food-history"}])},[ht(rP,{"all-food-logs":e.data.foodLogs,foods:e.data.foods},null,8,["all-food-logs","foods"])],2),_("div",{class:tt(["tab-content",{"active-tab":i.value==="weekly-calories"}])},[ht(uI,{"food-logs":e.data.weeklyFoodLogs,weights:e.data.weeklyWeights,"week-starts-on":"monday","daily-activity":e.data.dailyActivity,tz:"Australia/Sydney"},null,8,["food-logs","weights","daily-activity"])],2)]))}},dP=Ft(uP,[["__scopeId","data-v-51372b80"]]),hP={class:"row"},fP={class:"row"},gP={class:"row"},mP={key:0,class:"row"},pP={key:1,class:"row"},yP={key:0},bP={key:2,class:"row note-row"},vP={class:"note-text"},_P={key:3,class:"food-log-block"},wP={class:"food-label"},xP={class:"carbs-label"},SP={class:"food-list"},kP={__name:"CustomTooltip",props:{visible:{type:Boolean,default:!1},time:{type:String,default:""},bg:{type:[Number,null],default:null},basal:{type:[Number,null],default:null},left:{type:Number,default:8},top:{type:Number,default:8},hourlyBasalUnits:{type:[Number,null],default:null},hourlyBasalLabel:{type:String,default:""},bolus:{type:[Object,null],default:null},note:{type:[Object,null],default:null},foodLogs:{type:[Object,null],default:null}},setup(e){return(t,s)=>Fc((T(),C("div",{class:"tooltip",style:Te({left:e.left+"px",top:e.top+"px"}),role:"status","aria-live":"polite"},[_("div",hP,[_("strong",null,P(e.time),1)]),_("div",fP,[s[0]||(s[0]=J(" BG: ",-1)),_("span",null,P(e.bg!=null?e.bg.toFixed(2)+" mmol/L":"")+" ("+P((e.bg*18).toFixed(2))+" mg/dL) ",1)]),_("div",gP,[s[1]||(s[1]=J("Basal Rate: ",-1)),_("span",null,P(e.basal!=null?e.basal.toFixed(3)+" U/hr":""),1)]),e.hourlyBasalUnits!=null?(T(),C("div",mP,[J(" Total basal from "+P(e.hourlyBasalLabel)+": ",1),_("strong",null,P(Number(e.hourlyBasalUnits).toFixed(2)),1),s[2]||(s[2]=J(" units ",-1))])):Y("",!0),e.bolus?(T(),C("div",pP,[s[3]||(s[3]=J(" Bolus: ",-1)),_("strong",null,P(Number(e.bolus.amount).toFixed(2)),1),s[4]||(s[4]=J(" units ",-1)),e.bolus.type?(T(),C("span",yP," ("+P(e.bolus.type)+")",1)):Y("",!0)])):Y("",!0),e.note?(T(),C("div",bP,[s[5]||(s[5]=_("span",{class:"note-symbol"},"",-1)),_("div",vP,P(e.note.text),1)])):Y("",!0),e.foodLogs?(T(),C("div",_P,[_("div",wP,[s[6]||(s[6]=_("span",{class:"food-symbol"},"",-1)),s[7]||(s[7]=_("strong",null,"Foods",-1)),_("span",xP,"("+P(e.foodLogs.netCarbs.toFixed(1))+"g net carbs)",1)]),s[8]||(s[8]=_("span",null,"Occasionally foods should be in mLs not grams, such as almond milk.",-1)),_("ul",SP,[(T(!0),C(ft,null,Ut(e.foodLogs.logs,(n,i)=>(T(),C("li",{key:i},[_("span",null,P(n.quantity)+"g",1),J(" "+P(n.name),1)]))),128))])])):Y("",!0)],4)),[[r0,e.visible]])}},TP=Ft(kP,[["__scopeId","data-v-e680271e"]]);async function OP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBolusesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("boluses").select("timestamp, amount, type, notes").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:O.fromISO(r.timestamp).toJSDate(),amount:Number(r.amount??0),type:r.type??null,notes:r.notes??null}))}async function DP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchGlucoseReadingsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("glucose_readings").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:O.fromISO(r.timestamp).toJSDate(),value:Number(r.value??0)}))}async function CP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBasalEntriesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("basal_entries").select("start_time, end_time, rate, mode, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,rate:Number(r.rate??0),mode:r.mode??null,notes:r.notes??null}))}function MP(e,t,s){const n=O.fromJSDate(t).setZone("Australia/Sydney"),i=n.startOf("day").toJSDate(),o=n.endOf("day").toJSDate(),r=s?O.fromJSDate(s):null,a=r?r.toJSDate():null,l=[];for(const c of e){const u=c.endTime??a,d=c.startTime<i?i:c.startTime,h=u?u>o?o:u:o;d<h&&l.push({...c,startTime:d,endTime:u?h:null})}return l}async function EP(e,t,s="Australia/Sydney"){const{startUtcISO:n,endUtcISO:i,startSydney:o,endSydney:r}=Zc(e,t,{withMillis:!0});console.log("[weekly fetch] Sydney window:",o.toISO(),"",r.toISO(),"(exclusive)"),console.log("[weekly fetch] UTC filter   :",n,"",i,"(exclusive)");const a=1e3;let l=0,c=a-1,u=[];for(;;){const{data:d,error:h}=await Qt.from("food_logs").select("timestamp, calories").gte("timestamp",n).lt("timestamp",i).order("timestamp",{ascending:!0}).range(l,c);if(h)throw h;const f=d??[];if(u=u.concat(f),console.log("[weekly fetch] page",`${l}-${c}`,"rows:",f.length),f.length<a)break;l+=a,c+=a}return u.length?console.log("[weekly fetch] total rows:",u.length,"first:",u[0].timestamp,"last:",u[u.length-1].timestamp):console.log("[weekly fetch] total rows: 0"),u.map(d=>({timestamp:d.timestamp,calories:Number(d.calories??0)}))}async function AP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFoodLogsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("food_logs").select(`
      id,
      food_name,
      timestamp,
      quantity,
      net_carbs,
      calories,
      fat,
      protein,
      total_carbs,
      fibre,
      is_unfinished,
      resumed_at,
      food_tags
    `).gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,foodName:r.food_name??"Unknown",timestamp:O.fromISO(r.timestamp).toJSDate(),quantity:r.quantity,netCarbs:r.net_carbs,calories:r.calories,fat:r.fat,protein:r.protein,totalCarbs:r.total_carbs,fibre:r.fibre,isUnfinished:!!r.is_unfinished,resumedAt:r.resumed_at?O.fromISO(r.resumed_at).toJSDate():null,foodTags:Array.isArray(r.food_tags)?r.food_tags:[]}))}async function IP(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchWorkoutsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await Qt.from("workouts").select(`
      id,
      start_time,
      end_time,
      elapsed_time,
      duration,
      type,
      name,
      notes,
      distance,
      active_calories,
      average_heart_rate,
      max_heart_rate,
      minutes_per_km,
      km_per_hour,
      tags
    `).lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,start:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,elapsedTime:Number(r.elapsed_time??0),duration:Number(r.duration??0),type:String(r.type??""),name:String(r.name??""),notes:String(r.notes??""),distance:Number(r.distance??0),activeCalories:Number(r.active_calories??0),averageHeartRate:Number(r.average_heart_rate??0),maxHeartRate:Number(r.max_heart_rate??0),minutesPerKm:Number(r.minutes_per_km??0),kmPerHour:Number(r.km_per_hour??0),tags:String(r.tags??"")}))}async function PP(){const{data:e,error:t}=await Qt.from("app_settings").select("pump_upload_time").eq("id",1).single();if(t&&t.code!=="PGRST116")throw t;const s=e?.pump_upload_time??null;return{pumpUploadTime:s?new Date(s):null}}async function LP(e,t,s){t.boluses=!0;try{e.boluses=await OP(s)}catch(n){console.error("[dayLoadersUI] boluses failed:",n),e.boluses=[]}finally{t.boluses=!1}}async function RP(e,t,s){t.bg=!0;try{e.glucoseReadings=await DP(s)}catch(n){console.error("[dayLoadersUI] BG failed:",n),e.glucoseReadings=[]}finally{t.bg=!1}}async function $P(e,t,s){t.basal=!0;try{const[n,i]=await Promise.all([CP(s),PP()]),o=i?.pumpUploadTime?new Date(i.pumpUploadTime):null;o&&console.log("[dayLoadersUI] Pump upload time:",Lw(o)),e.basalEntries=MP(n,s,o)}catch(n){console.error("[dayLoadersUI] basal failed:",n),e.basalEntries=[]}finally{t.basal=!1}}async function FP(e,t,s){t.notes=!0;try{e.notes=await sE(s)}catch(n){console.error("[dayLoadersUI] notes failed:",n),e.notes=[]}finally{t.notes=!1}}async function NP(e,t,s){t.foodLogs=!0;try{e.foodLogs=await AP(s)}catch(n){console.error("[dayLoadersUI] food logs failed:",n),e.foodLogs=[]}finally{t.foodLogs=!1}}async function jP(e,t,s){t.fasts=!0;try{e.fasts=await RE(s)}catch(n){console.error("[dayLoadersUI] fasts failed:",n),e.fasts=[]}finally{t.fasts=!1}}async function BP(e,t,s){t.workouts=!0;try{e.workouts=await IP(s)}catch(n){console.error("[dayLoadersUI] workouts failed:",n),e.workouts=[]}finally{t.workouts=!1}}async function WP(e,t,s){await Promise.allSettled([LP(e,t,s),RP(e,t,s),$P(e,t,s),FP(e,t,s),NP(e,t,s),jP(e,t,s),BP(e,t,s)])}async function UP(){const{data:e,error:t}=await Qt.from("foods").select("id, name, tags").order("name",{ascending:!0});if(t)throw t;return(e??[]).map(s=>({id:s.id,name:s.name??"",tags:Array.isArray(s.tags)?s.tags:[]}))}async function zP(e,t){const{startUtcISO:s,endUtcISO:n}=Zc(e,t),{data:i,error:o}=await Qt.from("weights").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:r.timestamp,value:Number(r.value)}))}function eg(e){return e instanceof Date?e:new Date(e)}async function VP(e,t,s="Australia/Sydney"){const n=O.fromJSDate(eg(e),{zone:s}).toFormat("yyyy-LL-dd"),i=O.fromJSDate(eg(t),{zone:s}).toFormat("yyyy-LL-dd"),{data:o,error:r}=await Qt.from("daily_activity").select("sydney_date, active_calories, resting_calories, total_calories, exercise_minutes").gte("sydney_date",n).lt("sydney_date",i).order("sydney_date",{ascending:!0});if(r)throw r;return(o??[]).map(a=>({sydney_date:a.sydney_date,active_calories:a.active_calories==null?null:Number(a.active_calories),resting_calories:a.resting_calories==null?null:Number(a.resting_calories),total_calories:a.total_calories==null?null:Number(a.total_calories),exercise_minutes:a.exercise_minutes==null?null:Number(a.exercise_minutes)}))}const HP={style:{padding:"1rem"}},qP={class:"dashboard-grid"},JP={class:"left-rail"},YP={class:"chart-box bg-box"},KP={class:"chart-box notes-box"},ZP={class:"chart-box food-logs-box"},GP={class:"chart-box basal-box"},XP={class:"chart-box hourly-basal-box"},QP={class:"chart-box bolus-box"},t2={class:"right-rail"},e2={__name:"App",setup(e){const t=ai({notes:[],filteredNotes:[],filteredNotesCursor:null,foods:[],glucoseReadings:[],foodLogs:[],fasts:[],workouts:[],basalEntries:[],boluses:[],weeklyFoodLogs:[],weeklyWeights:[],dailyActivity:[]}),s=ai({boluses:!1,bg:!1,basal:!1,filteredNotes:!1,foodLogs:!1,foods:!1,fasts:!1,workouts:!1}),n=gt(gp()),i=gt(null),o=ai({visible:!1,time:"",bg:null,basal:null,left:12,locked:!1,hourlyBasalUnits:null,hourlyBasalLabel:"",bolus:null,note:null}),r=b=>b instanceof Date?b:typeof b=="number"?new Date(b):typeof b=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(b)?O.fromISO(b):O.fromISO(b,{zone:"Australia/Sydney"})).toJSDate():null,a=G(()=>{const b=new Array(24).fill(0);if(!n.value||!Array.isArray(t.basalEntries))return b;const v=n.value instanceof Date?n.value:r(n.value);let w=O.fromJSDate(v,{zone:"Australia/Sydney"}).startOf("day");const S=w.plus({days:1});for(const D of t.basalEntries){const E=D.startTime instanceof Date?D.startTime:r(D.startTime),R=D.endTime?D.endTime instanceof Date?D.endTime:r(D.endTime):null;if(!E||!R||R<=E)continue;const I=Number(D.rate);if(!Number.isFinite(I)||I<=0)continue;let B=O.fromJSDate(E,{zone:"Australia/Sydney"}),L=O.fromJSDate(R,{zone:"Australia/Sydney"});if(!(L<=w||B>=S))for(B<w&&(B=w),L>S&&(L=S);B<L;){const M=B.startOf("hour").plus({hours:1}),W=L<M?L:M,et=Math.max(0,W.toSeconds()-B.toSeconds());if(et>0){const nt=B.hour;b[nt]+=I*(et/3600)}B=W}}return b.map(D=>Math.round(D*1e3)/1e3)});function l(b,v,w){return Math.max(v,Math.min(b,w))}function c(b,v="any"){let w;if(b instanceof Date)w=O.fromJSDate(b);else if(typeof b=="number")w=O.fromMillis(b);else if(typeof b=="string")w=/Z|[+\-]\d{2}:?\d{2}$/.test(b)?O.fromISO(b):O.fromISO(b,{zone:"Australia/Sydney"});else return;const S=w.setZone("Australia/Sydney");n.value=S.startOf("day").toJSDate();const D=S.toMillis();window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:D,px:null,source:v}})),console.log("[goToTimestamp] jumped to",S.toISO(),"source:",v)}const u=b=>{const v=b?.detail?.at,w=b?.detail?.source??"any";c(v,w)};async function d(){s.foods=!0;try{t.foods=await UP()}catch(b){console.error("[App] fetchAllFoods failed:",b),t.foods=[]}finally{s.foods=!1}}async function h(b=26,v="Australia/Sydney"){const w=O.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),D=w.plus({days:1}).startOf("day").toJSDate();try{t.dailyActivity=await VP(S,D,v),console.log("[daily activity range]","start=",S.toISOString(),"endExclusive=",D.toISOString(),"rows=",t.dailyActivity.length)}catch(E){console.error("[loadDailyActivity] failed:",E),t.dailyActivity=[]}}async function f(b=26,v="Australia/Sydney"){const w=O.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),D=w.plus({days:1}).startOf("day").toJSDate();s.weights=!0;try{t.weeklyWeights=await zP(S,D);const E=t.weeklyWeights[0]?.timestamp??"-",R=t.weeklyWeights.at(-1)?.timestamp??"-";console.log("[weekly weights] rows=",t.weeklyWeights.length,"first=",E,"last=",R)}catch(E){console.error("[loadWeeklyWeights] failed:",E),t.weeklyWeights=[]}finally{s.weights=!1}}async function g(b=26,v="Australia/Sydney"){const w=O.now().setZone(v),S=w.minus({weeks:b}).startOf("week").toJSDate(),D=w.plus({days:1}).startOf("day").toJSDate();try{t.weeklyFoodLogs=await EP(S,D,v),console.log("[weekly range]","start=",S.toISOString(),"endExclusive=",D.toISOString(),"rows=",t.weeklyFoodLogs.length)}catch(E){console.error("[loadFoodLogsWeekly] failed:",E),t.weeklyFoodLogs=[]}}function m(b){const{x:v,px:w,source:S,hide:D,bolus:E,note:R,foodLogs:I}=b?.detail??{};if(console.log("[handleChartHover] x value:",v,"type:",typeof v),D){o.visible=!1,o.locked=!1,o.hourlyBasalUnits=null,o.hourlyBasalLabel="",o.bolus=null,o.note=null,o.foodLogs=null;return}const B=v!=null?new Date(v):null;if(!B){o.locked||(o.visible=!1);return}const L=i.value?.getBoundingClientRect();if(L&&typeof w=="number"){const he=w-90;o.left=l(he,8,L.width-180-8)}const M=O.fromMillis(Number(v)).setZone("Australia/Sydney"),W=M.hour,et=M.startOf("hour"),nt=et.plus({hours:1}),ot=ut=>ut.toFormat("h a").toLowerCase().replace(" ","");o.hourlyBasalLabel=`${ot(et)}${ot(nt)}`,o.hourlyBasalUnits=Number(a.value?.[W]??0),o.locked=S==="combined",o.visible=!0,o.time=O.fromMillis(Number(v)).setZone("Australia/Sydney").toFormat("h:mma"),o.bg=p(B),o.basal=y(B),S==="bolus"&&E?.amount!=null?o.bolus={amount:Number(E.amount),type:E.type??null}:o.bolus=null,S==="note"&&R?.text?o.note=R:o.note=null,S==="foodLogs"&&I?.logs?.length?o.foodLogs={logs:I.logs,netCarbs:Number(I.netCarbs??0)}:o.foodLogs=null}function p(b){if(!t.glucoseReadings.length||!b)return null;const v=b instanceof Date?b:new Date(b);let w=null,S=null;for(const D of t.glucoseReadings){const E=r(D.timestamp);E<=v&&(w===null||E>w)&&(w=E,S=Number(D.value))}return S}function y(b){if(!t.basalEntries.length||!b)return null;const v=b instanceof Date?b:new Date(b);for(const w of t.basalEntries){const S=w.startTime instanceof Date?w.startTime:r(w.startTime),D=w.endTime?w.endTime instanceof Date?w.endTime:r(w.endTime):null;if(S<=v&&(D===null||v<D))return Number(w.rate??0)}return null}return Ce(n,b=>{WP(t,s,b)},{immediate:!0}),Cs(()=>{window.removeEventListener("jump-to-time",u),window.removeEventListener("chart-hover",m)}),Ye(async()=>{window.addEventListener("jump-to-time",u),window.addEventListener("chart-hover",m),await d(),await g(26),await f(26),await h(26);try{console.log("[App:onMounted] loaded",{glucose:t.glucoseReadings.length,foodLogs:t.foodLogs.length,notes:t.notes.length,fasts:t.fasts.length,workouts:t.workouts.length,basalEntries:t.basalEntries.length,boluses:t.boluses.length})}catch(b){console.error("[App:onMounted] failed to load data:",b)}}),(b,v)=>(T(),C("main",HP,[_("section",qP,[_("aside",JP,[ht(Uw,{selectedDate:n.value,"onUpdate:selectedDate":v[0]||(v[0]=w=>n.value=w)},null,8,["selectedDate"]),_("div",{ref_key:"stageRef",ref:i,class:"chart-stage"},[ht(TP,{visible:o.visible,time:o.time,bg:o.bg,basal:o.basal,left:o.left,top:8,"hourly-basal-units":o.hourlyBasalUnits,"hourly-basal-label":o.hourlyBasalLabel,bolus:o.bolus,note:o.note,foodLogs:o.foodLogs},null,8,["visible","time","bg","basal","left","hourly-basal-units","hourly-basal-label","bolus","note","foodLogs"]),_("div",YP,[ht(RO,{"glucose-readings":t.glucoseReadings,"selected-date":n.value},null,8,["glucose-readings","selected-date"])]),_("div",KP,[ht($O,{notes:t.notes,"selected-date":n.value,"note-icon-url":"/note-icon.png"},null,8,["notes","selected-date"])]),_("div",ZP,[ht(HO,{"food-logs":t.foodLogs,"selected-date":n.value},null,8,["food-logs","selected-date"])]),_("div",GP,[ht(NO,{"basal-entries":t.basalEntries,"selected-date":n.value},null,8,["basal-entries","selected-date"])]),_("div",XP,[ht(zO,{"hourly-totals":a.value,"selected-date":n.value},null,8,["hourly-totals","selected-date"])]),_("div",QP,[ht(BO,{boluses:t.boluses,"selected-date":n.value},null,8,["boluses","selected-date"])])],512)]),_("main",t2,[ht(dP,{data:t,"hourly-basal-totals":a.value,"selected-date":n.value,loading:s},null,8,["data","hourly-basal-totals","selected-date","loading"])])])]))}},s2=Ft(e2,[["__scopeId","data-v-7566dfed"]]);P0(s2).mount("#app");
