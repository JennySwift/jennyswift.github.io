(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kc(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ct={},ii=[],rs=()=>{},Ky=()=>!1,sa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Tc=e=>e.startsWith("onUpdate:"),Vt=Object.assign,Oc=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Gy=Object.prototype.hasOwnProperty,_t=(e,t)=>Gy.call(e,t),G=Array.isArray,ri=e=>na(e)==="[object Map]",Qf=e=>na(e)==="[object Set]",rt=e=>typeof e=="function",Nt=e=>typeof e=="string",Ts=e=>typeof e=="symbol",Pt=e=>e!==null&&typeof e=="object",tg=e=>(Pt(e)||rt(e))&&rt(e.then)&&rt(e.catch),eg=Object.prototype.toString,na=e=>eg.call(e),Zy=e=>na(e).slice(8,-1),sg=e=>na(e)==="[object Object]",Dc=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,er=kc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ia=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Xy=/-(\w)/g,Ks=ia(e=>e.replace(Xy,(t,s)=>s?s.toUpperCase():"")),Qy=/\B([A-Z])/g,Xs=ia(e=>e.replace(Qy,"-$1").toLowerCase()),ng=ia(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ra=ia(e=>e?`on${ng(e)}`:""),Vs=(e,t)=>!Object.is(e,t),xo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Tl=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Ol=e=>{const t=parseFloat(e);return isNaN(t)?e:t},tb=e=>{const t=Nt(e)?Number(e):NaN;return isNaN(t)?e:t};let Eu;const ra=()=>Eu||(Eu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xe(e){if(G(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Nt(n)?ib(n):xe(n);if(i)for(const r in i)t[r]=i[r]}return t}else if(Nt(e)||Pt(e))return e}const eb=/;(?![^(]*\))/g,sb=/:([^]+)/,nb=/\/\*[^]*?\*\//g;function ib(e){const t={};return e.replace(nb,"").split(eb).forEach(s=>{if(s){const n=s.split(sb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function dt(e){let t="";if(Nt(e))t=e;else if(G(e))for(let s=0;s<e.length;s++){const n=dt(e[s]);n&&(t+=n+" ")}else if(Pt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const rb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ob=kc(rb);function ig(e){return!!e||e===""}const rg=e=>!!(e&&e.__v_isRef===!0),N=e=>Nt(e)?e:e==null?"":G(e)||Pt(e)&&(e.toString===eg||!rt(e.toString))?rg(e)?N(e.value):JSON.stringify(e,og,2):String(e),og=(e,t)=>rg(t)?og(e,t.value):ri(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],r)=>(s[$a(n,r)+" =>"]=i,s),{})}:Qf(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>$a(s))}:Ts(t)?$a(t):Pt(t)&&!G(t)&&!sg(t)?String(t):t,$a=(e,t="")=>{var s;return Ts(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fe;class ab{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fe,!t&&fe&&(this.index=(fe.scopes||(fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=fe;try{return fe=this,t()}finally{fe=s}}}on(){++this._on===1&&(this.prevScope=fe,fe=this)}off(){this._on>0&&--this._on===0&&(fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function lb(){return fe}let At;const Na=new WeakSet;class ag{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fe&&fe.active&&fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Na.has(this)&&(Na.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Au(this),ug(this);const t=At,s=He;At=this,He=!0;try{return this.fn()}finally{dg(this),At=t,He=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ec(t);this.deps=this.depsTail=void 0,Au(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Na.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dl(this)&&this.run()}get dirty(){return Dl(this)}}let lg=0,sr,nr;function cg(e,t=!1){if(e.flags|=8,t){e.next=nr,nr=e;return}e.next=sr,sr=e}function Cc(){lg++}function Mc(){if(--lg>0)return;if(nr){let t=nr;for(nr=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;sr;){let t=sr;for(sr=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function ug(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function dg(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Ec(n),cb(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Dl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(hg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function hg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pr)||(e.globalVersion=pr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Dl(e))))return;e.flags|=2;const t=e.dep,s=At,n=He;At=e,He=!0;try{ug(e);const i=e.fn(e._value);(t.version===0||Vs(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{At=s,He=n,dg(e),e.flags&=-3}}function Ec(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Ec(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function cb(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let He=!0;const fg=[];function ws(){fg.push(He),He=!1}function xs(){const e=fg.pop();He=e===void 0?!0:e}function Au(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=At;At=void 0;try{t()}finally{At=s}}}let pr=0;class ub{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ac{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!He||At===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==At)s=this.activeLink=new ub(At,this),At.deps?(s.prevDep=At.depsTail,At.depsTail.nextDep=s,At.depsTail=s):At.deps=At.depsTail=s,gg(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=At.depsTail,s.nextDep=void 0,At.depsTail.nextDep=s,At.depsTail=s,At.deps===s&&(At.deps=n)}return s}trigger(t){this.version++,pr++,this.notify(t)}notify(t){Cc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Mc()}}}function gg(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)gg(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Cl=new WeakMap,vn=Symbol(""),Ml=Symbol(""),yr=Symbol("");function Qt(e,t,s){if(He&&At){let n=Cl.get(e);n||Cl.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new Ac),i.map=n,i.key=s),i.track()}}function vs(e,t,s,n,i,r){const o=Cl.get(e);if(!o){pr++;return}const a=l=>{l&&l.trigger()};if(Cc(),t==="clear")o.forEach(a);else{const l=G(e),c=l&&Dc(s);if(l&&s==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===yr||!Ts(h)&&h>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(yr)),t){case"add":l?c&&a(o.get("length")):(a(o.get(vn)),ri(e)&&a(o.get(Ml)));break;case"delete":l||(a(o.get(vn)),ri(e)&&a(o.get(Ml)));break;case"set":ri(e)&&a(o.get(vn));break}}Mc()}function Rn(e){const t=vt(e);return t===e?t:(Qt(t,"iterate",yr),$e(e)?t:t.map(Jt))}function oa(e){return Qt(e=vt(e),"iterate",yr),e}const db={__proto__:null,[Symbol.iterator](){return Fa(this,Symbol.iterator,Jt)},concat(...e){return Rn(this).concat(...e.map(t=>G(t)?Rn(t):t))},entries(){return Fa(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return us(this,"every",e,t,void 0,arguments)},filter(e,t){return us(this,"filter",e,t,s=>s.map(Jt),arguments)},find(e,t){return us(this,"find",e,t,Jt,arguments)},findIndex(e,t){return us(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return us(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return us(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return us(this,"forEach",e,t,void 0,arguments)},includes(...e){return ja(this,"includes",e)},indexOf(...e){return ja(this,"indexOf",e)},join(e){return Rn(this).join(e)},lastIndexOf(...e){return ja(this,"lastIndexOf",e)},map(e,t){return us(this,"map",e,t,void 0,arguments)},pop(){return Pi(this,"pop")},push(...e){return Pi(this,"push",e)},reduce(e,...t){return Iu(this,"reduce",e,t)},reduceRight(e,...t){return Iu(this,"reduceRight",e,t)},shift(){return Pi(this,"shift")},some(e,t){return us(this,"some",e,t,void 0,arguments)},splice(...e){return Pi(this,"splice",e)},toReversed(){return Rn(this).toReversed()},toSorted(e){return Rn(this).toSorted(e)},toSpliced(...e){return Rn(this).toSpliced(...e)},unshift(...e){return Pi(this,"unshift",e)},values(){return Fa(this,"values",Jt)}};function Fa(e,t,s){const n=oa(e),i=n[t]();return n!==e&&!$e(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=s(r.value)),r}),i}const hb=Array.prototype;function us(e,t,s,n,i,r){const o=oa(e),a=o!==e&&!$e(e),l=o[t];if(l!==hb[t]){const d=l.apply(e,r);return a?Jt(d):d}let c=s;o!==e&&(a?c=function(d,h){return s.call(this,Jt(d),h,e)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,e)}));const u=l.call(o,c,n);return a&&i?i(u):u}function Iu(e,t,s,n){const i=oa(e);let r=s;return i!==e&&($e(e)?s.length>3&&(r=function(o,a,l){return s.call(this,o,a,l,e)}):r=function(o,a,l){return s.call(this,o,Jt(a),l,e)}),i[t](r,...n)}function ja(e,t,s){const n=vt(e);Qt(n,"iterate",yr);const i=n[t](...s);return(i===-1||i===!1)&&Lc(s[0])?(s[0]=vt(s[0]),n[t](...s)):i}function Pi(e,t,s=[]){ws(),Cc();const n=vt(e)[t].apply(e,s);return Mc(),xs(),n}const fb=kc("__proto__,__v_isRef,__isVue"),mg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ts));function gb(e){Ts(e)||(e=String(e));const t=vt(this);return Qt(t,"has",e),t.hasOwnProperty(e)}class pg{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?kb:_g:r?vg:bg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=G(t);if(!i){let l;if(o&&(l=db[s]))return l;if(s==="hasOwnProperty")return gb}const a=Reflect.get(t,s,se(t)?t:n);return(Ts(s)?mg.has(s):fb(s))||(i||Qt(t,"get",s),r)?a:se(a)?o&&Dc(s)?a:a.value:Pt(a)?i?wg(a):oi(a):a}}class yg extends pg{constructor(t=!1){super(!1,t)}set(t,s,n,i){let r=t[s];if(!this._isShallow){const l=Gs(r);if(!$e(n)&&!Gs(n)&&(r=vt(r),n=vt(n)),!G(t)&&se(r)&&!se(n))return l?!1:(r.value=n,!0)}const o=G(t)&&Dc(s)?Number(s)<t.length:_t(t,s),a=Reflect.set(t,s,n,se(t)?t:i);return t===vt(i)&&(o?Vs(n,r)&&vs(t,"set",s,n):vs(t,"add",s,n)),a}deleteProperty(t,s){const n=_t(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&vs(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Ts(s)||!mg.has(s))&&Qt(t,"has",s),n}ownKeys(t){return Qt(t,"iterate",G(t)?"length":vn),Reflect.ownKeys(t)}}class mb extends pg{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const pb=new yg,yb=new mb,bb=new yg(!0);const El=e=>e,qr=e=>Reflect.getPrototypeOf(e);function vb(e,t,s){return function(...n){const i=this.__v_raw,r=vt(i),o=ri(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...n),u=s?El:t?Io:Jt;return!t&&Qt(r,"iterate",l?Ml:vn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Yr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function _b(e,t){const s={get(i){const r=this.__v_raw,o=vt(r),a=vt(i);e||(Vs(i,a)&&Qt(o,"get",i),Qt(o,"get",a));const{has:l}=qr(o),c=t?El:e?Io:Jt;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Qt(vt(i),"iterate",vn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=vt(r),a=vt(i);return e||(Vs(i,a)&&Qt(o,"has",i),Qt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=vt(a),c=t?El:e?Io:Jt;return!e&&Qt(l,"iterate",vn),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Vt(s,e?{add:Yr("add"),set:Yr("set"),delete:Yr("delete"),clear:Yr("clear")}:{add(i){!t&&!$e(i)&&!Gs(i)&&(i=vt(i));const r=vt(this);return qr(r).has.call(r,i)||(r.add(i),vs(r,"add",i,i)),this},set(i,r){!t&&!$e(r)&&!Gs(r)&&(r=vt(r));const o=vt(this),{has:a,get:l}=qr(o);let c=a.call(o,i);c||(i=vt(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Vs(r,u)&&vs(o,"set",i,r):vs(o,"add",i,r),this},delete(i){const r=vt(this),{has:o,get:a}=qr(r);let l=o.call(r,i);l||(i=vt(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&vs(r,"delete",i,void 0),c},clear(){const i=vt(this),r=i.size!==0,o=i.clear();return r&&vs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=vb(i,e,t)}),s}function Ic(e,t){const s=_b(e,t);return(n,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(_t(s,i)&&i in n?s:n,i,r)}const wb={get:Ic(!1,!1)},xb={get:Ic(!1,!0)},Sb={get:Ic(!0,!1)};const bg=new WeakMap,vg=new WeakMap,_g=new WeakMap,kb=new WeakMap;function Tb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ob(e){return e.__v_skip||!Object.isExtensible(e)?0:Tb(Zy(e))}function oi(e){return Gs(e)?e:Pc(e,!1,pb,wb,bg)}function Db(e){return Pc(e,!1,bb,xb,vg)}function wg(e){return Pc(e,!0,yb,Sb,_g)}function Pc(e,t,s,n,i){if(!Pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ob(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?n:s);return i.set(e,a),a}function ai(e){return Gs(e)?ai(e.__v_raw):!!(e&&e.__v_isReactive)}function Gs(e){return!!(e&&e.__v_isReadonly)}function $e(e){return!!(e&&e.__v_isShallow)}function Lc(e){return e?!!e.__v_raw:!1}function vt(e){const t=e&&e.__v_raw;return t?vt(t):e}function Cb(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&Tl(e,"__v_skip",!0),e}const Jt=e=>Pt(e)?oi(e):e,Io=e=>Pt(e)?wg(e):e;function se(e){return e?e.__v_isRef===!0:!1}function Dt(e){return Mb(e,!1)}function Mb(e,t){return se(e)?e:new Eb(e,t)}class Eb{constructor(t,s){this.dep=new Ac,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:vt(t),this._value=s?t:Jt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||$e(t)||Gs(t);t=n?t:vt(t),Vs(t,s)&&(this._rawValue=t,this._value=n?t:Jt(t),this.dep.trigger())}}function pt(e){return se(e)?e.value:e}const Ab={get:(e,t,s)=>t==="__v_raw"?e:pt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return se(i)&&!se(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function xg(e){return ai(e)?e:new Proxy(e,Ab)}class Ib{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ac(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return cg(this,!0),!0}get value(){const t=this.dep.track();return hg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Pb(e,t,s=!1){let n,i;return rt(e)?n=e:(n=e.get,i=e.set),new Ib(n,i,s)}const Jr={},Po=new WeakMap;let dn;function Lb(e,t=!1,s=dn){if(s){let n=Po.get(s);n||Po.set(s,n=[]),n.push(e)}}function Rb(e,t,s=Ct){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=s,c=x=>i?x:$e(x)||i===!1||i===0?_s(x,1):_s(x);let u,d,h,f,m=!1,g=!1;if(se(e)?(d=()=>e.value,m=$e(e)):ai(e)?(d=()=>c(e),m=!0):G(e)?(g=!0,m=e.some(x=>ai(x)||$e(x)),d=()=>e.map(x=>{if(se(x))return x.value;if(ai(x))return c(x);if(rt(x))return l?l(x,2):x()})):rt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){ws();try{h()}finally{xs()}}const x=dn;dn=u;try{return l?l(e,3,[f]):e(f)}finally{dn=x}}:d=rs,t&&i){const x=d,k=i===!0?1/0:i;d=()=>_s(x(),k)}const p=lb(),y=()=>{u.stop(),p&&p.active&&Oc(p.effects,u)};if(r&&t){const x=t;t=(...k)=>{x(...k),y()}}let _=g?new Array(e.length).fill(Jr):Jr;const b=x=>{if(!(!(u.flags&1)||!u.dirty&&!x))if(t){const k=u.run();if(i||m||(g?k.some((A,E)=>Vs(A,_[E])):Vs(k,_))){h&&h();const A=dn;dn=u;try{const E=[k,_===Jr?void 0:g&&_[0]===Jr?[]:_,f];_=k,l?l(t,3,E):t(...E)}finally{dn=A}}}else u.run()};return a&&a(b),u=new ag(d),u.scheduler=o?()=>o(b,!1):b,f=x=>Lb(x,!1,u),h=u.onStop=()=>{const x=Po.get(u);if(x){if(l)l(x,4);else for(const k of x)k();Po.delete(u)}},t?n?b(!0):_=u.run():o?o(b.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function _s(e,t=1/0,s){if(t<=0||!Pt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,se(e))_s(e.value,t,s);else if(G(e))for(let n=0;n<e.length;n++)_s(e[n],t,s);else if(Qf(e)||ri(e))e.forEach(n=>{_s(n,t,s)});else if(sg(e)){for(const n in e)_s(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&_s(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Er(e,t,s,n){try{return n?e(...n):e()}catch(i){aa(i,t,s)}}function Ve(e,t,s,n){if(rt(e)){const i=Er(e,t,s,n);return i&&tg(i)&&i.catch(r=>{aa(r,t,s)}),i}if(G(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Ve(e[r],t,s,n));return i}}function aa(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ct;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(r){ws(),Er(r,null,10,[e,l,c]),xs();return}}$b(e,s,i,n,o)}function $b(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const re=[];let ts=-1;const li=[];let $s=null,Xn=0;const Sg=Promise.resolve();let Lo=null;function Nb(e){const t=Lo||Sg;return e?t.then(this?e.bind(this):e):t}function Fb(e){let t=ts+1,s=re.length;for(;t<s;){const n=t+s>>>1,i=re[n],r=br(i);r<e||r===e&&i.flags&2?t=n+1:s=n}return t}function Rc(e){if(!(e.flags&1)){const t=br(e),s=re[re.length-1];!s||!(e.flags&2)&&t>=br(s)?re.push(e):re.splice(Fb(t),0,e),e.flags|=1,kg()}}function kg(){Lo||(Lo=Sg.then(Og))}function jb(e){G(e)?li.push(...e):$s&&e.id===-1?$s.splice(Xn+1,0,e):e.flags&1||(li.push(e),e.flags|=1),kg()}function Pu(e,t,s=ts+1){for(;s<re.length;s++){const n=re[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;re.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Tg(e){if(li.length){const t=[...new Set(li)].sort((s,n)=>br(s)-br(n));if(li.length=0,$s){$s.push(...t);return}for($s=t,Xn=0;Xn<$s.length;Xn++){const s=$s[Xn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}$s=null,Xn=0}}const br=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Og(e){try{for(ts=0;ts<re.length;ts++){const t=re[ts];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Er(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ts<re.length;ts++){const t=re[ts];t&&(t.flags&=-2)}ts=-1,re.length=0,Tg(),Lo=null,(re.length||li.length)&&Og()}}let ee=null,Dg=null;function Ro(e){const t=ee;return ee=e,Dg=e&&e.type.__scopeId||null,t}function Al(e,t=ee,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Uu(-1);const r=Ro(t);let o;try{o=e(...i)}finally{Ro(r),n._d&&Uu(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function $c(e,t){if(ee===null)return e;const s=da(ee),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Ct]=t[i];r&&(rt(r)&&(r={mounted:r,updated:r}),r.deep&&_s(o),n.push({dir:r,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function en(e,t,s,n){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(ws(),Ve(l,s,8,[e.el,a,e,t]),xs())}}const Bb=Symbol("_vte"),Wb=e=>e.__isTeleport,$n=Symbol("_leaveCb"),Kr=Symbol("_enterCb");function Ub(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ds(()=>{e.isMounted=!0}),Cn(()=>{e.isUnmounting=!0}),e}const Me=[Function,Array],zb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Me,onEnter:Me,onAfterEnter:Me,onEnterCancelled:Me,onBeforeLeave:Me,onLeave:Me,onAfterLeave:Me,onLeaveCancelled:Me,onBeforeAppear:Me,onAppear:Me,onAfterAppear:Me,onAppearCancelled:Me};function Hb(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Il(e,t,s,n,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:p,onAppear:y,onAfterAppear:_,onAppearCancelled:b}=t,x=String(e.key),k=Hb(s,e),A=(I,V)=>{I&&Ve(I,n,9,V)},E=(I,V)=>{const P=V[1];A(I,V),G(I)?I.every(O=>O.length<=1)&&P():I.length<=1&&P()},L={mode:o,persisted:a,beforeEnter(I){let V=l;if(!s.isMounted)if(r)V=p||l;else return;I[$n]&&I[$n](!0);const P=k[x];P&&Qn(e,P)&&P.el[$n]&&P.el[$n](),A(V,[I])},enter(I){let V=c,P=u,O=d;if(!s.isMounted)if(r)V=y||c,P=_||u,O=b||d;else return;let z=!1;const it=I[Kr]=ot=>{z||(z=!0,ot?A(O,[I]):A(P,[I]),L.delayedLeave&&L.delayedLeave(),I[Kr]=void 0)};V?E(V,[I,it]):it()},leave(I,V){const P=String(e.key);if(I[Kr]&&I[Kr](!0),s.isUnmounting)return V();A(h,[I]);let O=!1;const z=I[$n]=it=>{O||(O=!0,V(),it?A(g,[I]):A(m,[I]),I[$n]=void 0,k[P]===e&&delete k[P])};k[P]=e,f?E(f,[I,z]):z()},clone(I){return Il(I,t,s,n)}};return L}function vr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Cg(e,t=!1,s){let n=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===ft?(o.patchFlag&128&&i++,n=n.concat(Cg(o.children,t,a))):(t||o.type!==ls)&&n.push(a!=null?xn(o,{key:a}):o)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Mg(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ir(e,t,s,n,i=!1){if(G(e)){e.forEach((m,g)=>ir(m,t&&(G(t)?t[g]:t),s,n,i));return}if(ci(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ir(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?da(n.component):n.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Ct?a.refs={}:a.refs,d=a.setupState,h=vt(d),f=d===Ct?()=>!1:m=>_t(h,m);if(c!=null&&c!==l&&(Nt(c)?(u[c]=null,f(c)&&(d[c]=null)):se(c)&&(c.value=null)),rt(l))Er(l,a,12,[o,u]);else{const m=Nt(l),g=se(l);if(m||g){const p=()=>{if(e.f){const y=m?f(l)?d[l]:u[l]:l.value;i?G(y)&&Oc(y,r):G(y)?y.includes(r)||y.push(r):m?(u[l]=[r],f(l)&&(d[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else m?(u[l]=o,f(l)&&(d[l]=o)):g&&(l.value=o,e.k&&(u[e.k]=o))};o?(p.id=-1,_e(p,s)):p()}}}ra().requestIdleCallback;ra().cancelIdleCallback;const ci=e=>!!e.type.__asyncLoader,Eg=e=>e.type.__isKeepAlive;function Vb(e,t){Ag(e,"a",t)}function qb(e,t){Ag(e,"da",t)}function Ag(e,t,s=oe){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(la(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Eg(i.parent.vnode)&&Yb(n,t,s,i),i=i.parent}}function Yb(e,t,s,n){const i=la(t,e,n,!0);Pg(()=>{Oc(n[t],i)},s)}function la(e,t,s=oe,n=!1){if(s){const i=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...o)=>{ws();const a=Ar(s),l=Ve(t,s,e,o);return a(),xs(),l});return n?i.unshift(r):i.push(r),r}}const Os=e=>(t,s=oe)=>{(!wr||e==="sp")&&la(e,(...n)=>t(...n),s)},Jb=Os("bm"),Ds=Os("m"),Kb=Os("bu"),Ig=Os("u"),Cn=Os("bum"),Pg=Os("um"),Gb=Os("sp"),Zb=Os("rtg"),Xb=Os("rtc");function Qb(e,t=oe){la("ec",e,t)}const t0=Symbol.for("v-ndc");function Kt(e,t,s,n){let i;const r=s,o=G(e);if(o||Nt(e)){const a=o&&ai(e);let l=!1,c=!1;a&&(l=!$e(e),c=Gs(e),e=oa(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?Io(Jt(e[u])):Jt(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Pt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}function e0(e,t,s={},n,i){if(ee.ce||ee.parent&&ci(ee.parent)&&ee.parent.ce)return T(),ke(ft,null,[mt("slot",s,n&&n())],64);let r=e[t];r&&r._c&&(r._d=!1),T();const o=r&&Lg(r(s)),a=s.key||o&&o.key,l=ke(ft,{key:(a&&!Ts(a)?a:`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function Lg(e){return e.some(t=>jc(t)?!(t.type===ls||t.type===ft&&!Lg(t.children)):!0)?e:null}const Pl=e=>e?em(e)?da(e):Pl(e.parent):null,rr=Vt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pl(e.parent),$root:e=>Pl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$g(e),$forceUpdate:e=>e.f||(e.f=()=>{Rc(e.update)}),$nextTick:e=>e.n||(e.n=Nb.bind(e.proxy)),$watch:e=>S0.bind(e)}),Ba=(e,t)=>e!==Ct&&!e.__isScriptSetup&&_t(e,t),s0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return r[t]}else{if(Ba(n,t))return o[t]=1,n[t];if(i!==Ct&&_t(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&_t(c,t))return o[t]=3,r[t];if(s!==Ct&&_t(s,t))return o[t]=4,s[t];Ll&&(o[t]=0)}}const u=rr[t];let d,h;if(u)return t==="$attrs"&&Qt(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Ct&&_t(s,t))return o[t]=4,s[t];if(h=l.config.globalProperties,_t(h,t))return h[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:r}=e;return Ba(i,t)?(i[t]=s,!0):n!==Ct&&_t(n,t)?(n[t]=s,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!s[o]||e!==Ct&&_t(e,o)||Ba(t,o)||(a=r[0])&&_t(a,o)||_t(n,o)||_t(rr,o)||_t(i.config.globalProperties,o)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_t(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Lu(e){return G(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ll=!0;function n0(e){const t=$g(e),s=e.proxy,n=e.ctx;Ll=!1,t.beforeCreate&&Ru(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:p,beforeDestroy:y,beforeUnmount:_,destroyed:b,unmounted:x,render:k,renderTracked:A,renderTriggered:E,errorCaptured:L,serverPrefetch:I,expose:V,inheritAttrs:P,components:O,directives:z,filters:it}=t;if(c&&i0(c,n,null),o)for(const ut in o){const yt=o[ut];rt(yt)&&(n[ut]=yt.bind(s))}if(i){const ut=i.call(s,s);Pt(ut)&&(e.data=oi(ut))}if(Ll=!0,r)for(const ut in r){const yt=r[ut],De=rt(yt)?yt.bind(s,s):rt(yt.get)?yt.get.bind(s,s):rs,Fe=!rt(yt)&&rt(yt.set)?yt.set.bind(s):rs,Ce=tt({get:De,set:Fe});Object.defineProperty(n,ut,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Yt=>Ce.value=Yt})}if(a)for(const ut in a)Rg(a[ut],n,s,ut);if(l){const ut=rt(l)?l.call(s):l;Reflect.ownKeys(ut).forEach(yt=>{u0(yt,ut[yt])})}u&&Ru(u,e,"c");function at(ut,yt){G(yt)?yt.forEach(De=>ut(De.bind(s))):yt&&ut(yt.bind(s))}if(at(Jb,d),at(Ds,h),at(Kb,f),at(Ig,m),at(Vb,g),at(qb,p),at(Qb,L),at(Xb,A),at(Zb,E),at(Cn,_),at(Pg,x),at(Gb,I),G(V))if(V.length){const ut=e.exposed||(e.exposed={});V.forEach(yt=>{Object.defineProperty(ut,yt,{get:()=>s[yt],set:De=>s[yt]=De,enumerable:!0})})}else e.exposed||(e.exposed={});k&&e.render===rs&&(e.render=k),P!=null&&(e.inheritAttrs=P),O&&(e.components=O),z&&(e.directives=z),I&&Mg(e)}function i0(e,t,s=rs){G(e)&&(e=Rl(e));for(const n in e){const i=e[n];let r;Pt(i)?"default"in i?r=So(i.from||n,i.default,!0):r=So(i.from||n):r=So(i),se(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function Ru(e,t,s){Ve(G(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Rg(e,t,s,n){let i=n.includes(".")?Kg(s,n):()=>s[n];if(Nt(e)){const r=t[e];rt(r)&&os(i,r)}else if(rt(e))os(i,e.bind(s));else if(Pt(e))if(G(e))e.forEach(r=>Rg(r,t,s,n));else{const r=rt(e.handler)?e.handler.bind(s):t[e.handler];rt(r)&&os(i,r,e)}}function $g(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>$o(l,c,o,!0)),$o(l,t,o)),Pt(t)&&r.set(t,l),l}function $o(e,t,s,n=!1){const{mixins:i,extends:r}=t;r&&$o(e,r,s,!0),i&&i.forEach(o=>$o(e,o,s,!0));for(const o in t)if(!(n&&o==="expose")){const a=r0[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const r0={data:$u,props:Nu,emits:Nu,methods:qi,computed:qi,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:qi,directives:qi,watch:a0,provide:$u,inject:o0};function $u(e,t){return t?e?function(){return Vt(rt(e)?e.call(this,this):e,rt(t)?t.call(this,this):t)}:t:e}function o0(e,t){return qi(Rl(e),Rl(t))}function Rl(e){if(G(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function qi(e,t){return e?Vt(Object.create(null),e,t):t}function Nu(e,t){return e?G(e)&&G(t)?[...new Set([...e,...t])]:Vt(Object.create(null),Lu(e),Lu(t??{})):t}function a0(e,t){if(!e)return t;if(!t)return e;const s=Vt(Object.create(null),e);for(const n in t)s[n]=ie(e[n],t[n]);return s}function Ng(){return{app:null,config:{isNativeTag:Ky,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let l0=0;function c0(e,t){return function(n,i=null){rt(n)||(n=Vt({},n)),i!=null&&!Pt(i)&&(i=null);const r=Ng(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:l0++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:z0,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&rt(u.install)?(o.add(u),u.install(c,...d)):rt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||mt(n,i);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,da(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Ve(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=ui;ui=c;try{return u()}finally{ui=d}}};return c}}let ui=null;function u0(e,t){if(oe){let s=oe.provides;const n=oe.parent&&oe.parent.provides;n===s&&(s=oe.provides=Object.create(n)),s[e]=t}}function So(e,t,s=!1){const n=tm();if(n||ui){let i=ui?ui._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&rt(t)?t.call(n&&n.proxy):t}}const Fg={},jg=()=>Object.create(Fg),Bg=e=>Object.getPrototypeOf(e)===Fg;function d0(e,t,s,n=!1){const i={},r=jg();e.propsDefaults=Object.create(null),Wg(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);s?e.props=n?i:Db(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function h0(e,t,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=vt(i),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ca(e.emitsOptions,h))continue;const f=t[h];if(l)if(_t(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const m=Ks(h);i[m]=$l(l,a,m,f,e,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{Wg(e,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!_t(t,d)&&((u=Xs(d))===d||!_t(t,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(i[d]=$l(l,a,d,void 0,e,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!_t(t,d))&&(delete r[d],c=!0)}c&&vs(e.attrs,"set","")}function Wg(e,t,s,n){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(er(l))continue;const c=t[l];let u;i&&_t(i,u=Ks(l))?!r||!r.includes(u)?s[u]=c:(a||(a={}))[u]=c:ca(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=vt(s),c=a||Ct;for(let u=0;u<r.length;u++){const d=r[u];s[d]=$l(i,l,d,c[d],e,!_t(c,d))}}return o}function $l(e,t,s,n,i,r){const o=e[s];if(o!=null){const a=_t(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rt(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Ar(i);n=c[s]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===Xs(s))&&(n=!0))}return n}const f0=new WeakMap;function Ug(e,t,s=!1){const n=s?f0:t.propsCache,i=n.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!rt(e)){const u=d=>{l=!0;const[h,f]=Ug(d,t,!0);Vt(o,h),f&&a.push(...f)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Pt(e)&&n.set(e,ii),ii;if(G(r))for(let u=0;u<r.length;u++){const d=Ks(r[u]);Fu(d)&&(o[d]=Ct)}else if(r)for(const u in r){const d=Ks(u);if(Fu(d)){const h=r[u],f=o[d]=G(h)||rt(h)?{type:h}:Vt({},h),m=f.type;let g=!1,p=!0;if(G(m))for(let y=0;y<m.length;++y){const _=m[y],b=rt(_)&&_.name;if(b==="Boolean"){g=!0;break}else b==="String"&&(p=!1)}else g=rt(m)&&m.name==="Boolean";f[0]=g,f[1]=p,(g||_t(f,"default"))&&a.push(d)}}const c=[o,a];return Pt(e)&&n.set(e,c),c}function Fu(e){return e[0]!=="$"&&!er(e)}const Nc=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",Fc=e=>G(e)?e.map(is):[is(e)],g0=(e,t,s)=>{if(t._n)return t;const n=Al((...i)=>Fc(t(...i)),s);return n._c=!1,n},zg=(e,t,s)=>{const n=e._ctx;for(const i in e){if(Nc(i))continue;const r=e[i];if(rt(r))t[i]=g0(i,r,n);else if(r!=null){const o=Fc(r);t[i]=()=>o}}},Hg=(e,t)=>{const s=Fc(t);e.slots.default=()=>s},Vg=(e,t,s)=>{for(const n in t)(s||!Nc(n))&&(e[n]=t[n])},m0=(e,t,s)=>{const n=e.slots=jg();if(e.vnode.shapeFlag&32){const i=t.__;i&&Tl(n,"__",i,!0);const r=t._;r?(Vg(n,t,s),s&&Tl(n,"_",r,!0)):zg(t,n)}else t&&Hg(e,t)},p0=(e,t,s)=>{const{vnode:n,slots:i}=e;let r=!0,o=Ct;if(n.shapeFlag&32){const a=t._;a?s&&a===1?r=!1:Vg(i,t,s):(r=!t.$stable,zg(t,i)),o=t}else t&&(Hg(e,t),o={default:1});if(r)for(const a in i)!Nc(a)&&o[a]==null&&delete i[a]},_e=E0;function y0(e){return b0(e)}function b0(e,t){const s=ra();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=rs,insertStaticContent:m}=e,g=(w,S,M,F=null,R=null,$=null,H=void 0,W=null,B=!!S.dynamicChildren)=>{if(w===S)return;w&&!Qn(w,S)&&(F=Vr(w),Yt(w,R,$,!0),w=null),S.patchFlag===-2&&(B=!1,S.dynamicChildren=null);const{type:j,ref:J,shapeFlag:q}=S;switch(j){case ua:p(w,S,M,F);break;case ls:y(w,S,M,F);break;case Ua:w==null&&_(S,M,F,H);break;case ft:O(w,S,M,F,R,$,H,W,B);break;default:q&1?k(w,S,M,F,R,$,H,W,B):q&6?z(w,S,M,F,R,$,H,W,B):(q&64||q&128)&&j.process(w,S,M,F,R,$,H,W,B,Ai)}J!=null&&R?ir(J,w&&w.ref,$,S||w,!S):J==null&&w&&w.ref!=null&&ir(w.ref,null,$,w,!0)},p=(w,S,M,F)=>{if(w==null)n(S.el=a(S.children),M,F);else{const R=S.el=w.el;S.children!==w.children&&c(R,S.children)}},y=(w,S,M,F)=>{w==null?n(S.el=l(S.children||""),M,F):S.el=w.el},_=(w,S,M,F)=>{[w.el,w.anchor]=m(w.children,S,M,F,w.el,w.anchor)},b=({el:w,anchor:S},M,F)=>{let R;for(;w&&w!==S;)R=h(w),n(w,M,F),w=R;n(S,M,F)},x=({el:w,anchor:S})=>{let M;for(;w&&w!==S;)M=h(w),i(w),w=M;i(S)},k=(w,S,M,F,R,$,H,W,B)=>{S.type==="svg"?H="svg":S.type==="math"&&(H="mathml"),w==null?A(S,M,F,R,$,H,W,B):I(w,S,R,$,H,W,B)},A=(w,S,M,F,R,$,H,W)=>{let B,j;const{props:J,shapeFlag:q,transition:Y,dirs:Q}=w;if(B=w.el=o(w.type,$,J&&J.is,J),q&8?u(B,w.children):q&16&&L(w.children,B,null,F,R,Wa(w,$),H,W),Q&&en(w,null,F,"created"),E(B,w,w.scopeId,H,F),J){for(const Mt in J)Mt!=="value"&&!er(Mt)&&r(B,Mt,null,J[Mt],$,F);"value"in J&&r(B,"value",null,J.value,$),(j=J.onVnodeBeforeMount)&&Ge(j,F,w)}Q&&en(w,null,F,"beforeMount");const ht=v0(R,Y);ht&&Y.beforeEnter(B),n(B,S,M),((j=J&&J.onVnodeMounted)||ht||Q)&&_e(()=>{j&&Ge(j,F,w),ht&&Y.enter(B),Q&&en(w,null,F,"mounted")},R)},E=(w,S,M,F,R)=>{if(M&&f(w,M),F)for(let $=0;$<F.length;$++)f(w,F[$]);if(R){let $=R.subTree;if(S===$||Zg($.type)&&($.ssContent===S||$.ssFallback===S)){const H=R.vnode;E(w,H,H.scopeId,H.slotScopeIds,R.parent)}}},L=(w,S,M,F,R,$,H,W,B=0)=>{for(let j=B;j<w.length;j++){const J=w[j]=W?Ns(w[j]):is(w[j]);g(null,J,S,M,F,R,$,H,W)}},I=(w,S,M,F,R,$,H)=>{const W=S.el=w.el;let{patchFlag:B,dynamicChildren:j,dirs:J}=S;B|=w.patchFlag&16;const q=w.props||Ct,Y=S.props||Ct;let Q;if(M&&sn(M,!1),(Q=Y.onVnodeBeforeUpdate)&&Ge(Q,M,S,w),J&&en(S,w,M,"beforeUpdate"),M&&sn(M,!0),(q.innerHTML&&Y.innerHTML==null||q.textContent&&Y.textContent==null)&&u(W,""),j?V(w.dynamicChildren,j,W,M,F,Wa(S,R),$):H||yt(w,S,W,null,M,F,Wa(S,R),$,!1),B>0){if(B&16)P(W,q,Y,M,R);else if(B&2&&q.class!==Y.class&&r(W,"class",null,Y.class,R),B&4&&r(W,"style",q.style,Y.style,R),B&8){const ht=S.dynamicProps;for(let Mt=0;Mt<ht.length;Mt++){const xt=ht[Mt],ue=q[xt],de=Y[xt];(de!==ue||xt==="value")&&r(W,xt,ue,de,R,M)}}B&1&&w.children!==S.children&&u(W,S.children)}else!H&&j==null&&P(W,q,Y,M,R);((Q=Y.onVnodeUpdated)||J)&&_e(()=>{Q&&Ge(Q,M,S,w),J&&en(S,w,M,"updated")},F)},V=(w,S,M,F,R,$,H)=>{for(let W=0;W<S.length;W++){const B=w[W],j=S[W],J=B.el&&(B.type===ft||!Qn(B,j)||B.shapeFlag&198)?d(B.el):M;g(B,j,J,null,F,R,$,H,!0)}},P=(w,S,M,F,R)=>{if(S!==M){if(S!==Ct)for(const $ in S)!er($)&&!($ in M)&&r(w,$,S[$],null,R,F);for(const $ in M){if(er($))continue;const H=M[$],W=S[$];H!==W&&$!=="value"&&r(w,$,W,H,R,F)}"value"in M&&r(w,"value",S.value,M.value,R)}},O=(w,S,M,F,R,$,H,W,B)=>{const j=S.el=w?w.el:a(""),J=S.anchor=w?w.anchor:a("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:Q}=S;Q&&(W=W?W.concat(Q):Q),w==null?(n(j,M,F),n(J,M,F),L(S.children||[],M,J,R,$,H,W,B)):q>0&&q&64&&Y&&w.dynamicChildren?(V(w.dynamicChildren,Y,M,R,$,H,W),(S.key!=null||R&&S===R.subTree)&&qg(w,S,!0)):yt(w,S,M,J,R,$,H,W,B)},z=(w,S,M,F,R,$,H,W,B)=>{S.slotScopeIds=W,w==null?S.shapeFlag&512?R.ctx.activate(S,M,F,H,B):it(S,M,F,R,$,H,B):ot(w,S,B)},it=(w,S,M,F,R,$,H)=>{const W=w.component=N0(w,F,R);if(Eg(w)&&(W.ctx.renderer=Ai),F0(W,!1,H),W.asyncDep){if(R&&R.registerDep(W,at,H),!w.el){const B=W.subTree=mt(ls);y(null,B,S,M),w.placeholder=B.el}}else at(W,w,S,M,R,$,H)},ot=(w,S,M)=>{const F=S.component=w.component;if(C0(w,S,M))if(F.asyncDep&&!F.asyncResolved){ut(F,S,M);return}else F.next=S,F.update();else S.el=w.el,F.vnode=S},at=(w,S,M,F,R,$,H)=>{const W=()=>{if(w.isMounted){let{next:q,bu:Y,u:Q,parent:ht,vnode:Mt}=w;{const Je=Yg(w);if(Je){q&&(q.el=Mt.el,ut(w,q,H)),Je.asyncDep.then(()=>{w.isUnmounted||W()});return}}let xt=q,ue;sn(w,!1),q?(q.el=Mt.el,ut(w,q,H)):q=Mt,Y&&xo(Y),(ue=q.props&&q.props.onVnodeBeforeUpdate)&&Ge(ue,ht,q,Mt),sn(w,!0);const de=Bu(w),Ye=w.subTree;w.subTree=de,g(Ye,de,d(Ye.el),Vr(Ye),w,R,$),q.el=de.el,xt===null&&M0(w,de.el),Q&&_e(Q,R),(ue=q.props&&q.props.onVnodeUpdated)&&_e(()=>Ge(ue,ht,q,Mt),R)}else{let q;const{el:Y,props:Q}=S,{bm:ht,m:Mt,parent:xt,root:ue,type:de}=w,Ye=ci(S);sn(w,!1),ht&&xo(ht),!Ye&&(q=Q&&Q.onVnodeBeforeMount)&&Ge(q,xt,S),sn(w,!0);{ue.ce&&ue.ce._def.shadowRoot!==!1&&ue.ce._injectChildStyle(de);const Je=w.subTree=Bu(w);g(null,Je,M,F,w,R,$),S.el=Je.el}if(Mt&&_e(Mt,R),!Ye&&(q=Q&&Q.onVnodeMounted)){const Je=S;_e(()=>Ge(q,xt,Je),R)}(S.shapeFlag&256||xt&&ci(xt.vnode)&&xt.vnode.shapeFlag&256)&&w.a&&_e(w.a,R),w.isMounted=!0,S=M=F=null}};w.scope.on();const B=w.effect=new ag(W);w.scope.off();const j=w.update=B.run.bind(B),J=w.job=B.runIfDirty.bind(B);J.i=w,J.id=w.uid,B.scheduler=()=>Rc(J),sn(w,!0),j()},ut=(w,S,M)=>{S.component=w;const F=w.vnode.props;w.vnode=S,w.next=null,h0(w,S.props,F,M),p0(w,S.children,M),ws(),Pu(w),xs()},yt=(w,S,M,F,R,$,H,W,B=!1)=>{const j=w&&w.children,J=w?w.shapeFlag:0,q=S.children,{patchFlag:Y,shapeFlag:Q}=S;if(Y>0){if(Y&128){Fe(j,q,M,F,R,$,H,W,B);return}else if(Y&256){De(j,q,M,F,R,$,H,W,B);return}}Q&8?(J&16&&be(j,R,$),q!==j&&u(M,q)):J&16?Q&16?Fe(j,q,M,F,R,$,H,W,B):be(j,R,$,!0):(J&8&&u(M,""),Q&16&&L(q,M,F,R,$,H,W,B))},De=(w,S,M,F,R,$,H,W,B)=>{w=w||ii,S=S||ii;const j=w.length,J=S.length,q=Math.min(j,J);let Y;for(Y=0;Y<q;Y++){const Q=S[Y]=B?Ns(S[Y]):is(S[Y]);g(w[Y],Q,M,null,R,$,H,W,B)}j>J?be(w,R,$,!0,!1,q):L(S,M,F,R,$,H,W,B,q)},Fe=(w,S,M,F,R,$,H,W,B)=>{let j=0;const J=S.length;let q=w.length-1,Y=J-1;for(;j<=q&&j<=Y;){const Q=w[j],ht=S[j]=B?Ns(S[j]):is(S[j]);if(Qn(Q,ht))g(Q,ht,M,null,R,$,H,W,B);else break;j++}for(;j<=q&&j<=Y;){const Q=w[q],ht=S[Y]=B?Ns(S[Y]):is(S[Y]);if(Qn(Q,ht))g(Q,ht,M,null,R,$,H,W,B);else break;q--,Y--}if(j>q){if(j<=Y){const Q=Y+1,ht=Q<J?S[Q].el:F;for(;j<=Y;)g(null,S[j]=B?Ns(S[j]):is(S[j]),M,ht,R,$,H,W,B),j++}}else if(j>Y)for(;j<=q;)Yt(w[j],R,$,!0),j++;else{const Q=j,ht=j,Mt=new Map;for(j=ht;j<=Y;j++){const ve=S[j]=B?Ns(S[j]):is(S[j]);ve.key!=null&&Mt.set(ve.key,j)}let xt,ue=0;const de=Y-ht+1;let Ye=!1,Je=0;const Ii=new Array(de);for(j=0;j<de;j++)Ii[j]=0;for(j=Q;j<=q;j++){const ve=w[j];if(ue>=de){Yt(ve,R,$,!0);continue}let Ke;if(ve.key!=null)Ke=Mt.get(ve.key);else for(xt=ht;xt<=Y;xt++)if(Ii[xt-ht]===0&&Qn(ve,S[xt])){Ke=xt;break}Ke===void 0?Yt(ve,R,$,!0):(Ii[Ke-ht]=j+1,Ke>=Je?Je=Ke:Ye=!0,g(ve,S[Ke],M,null,R,$,H,W,B),ue++)}const Du=Ye?_0(Ii):ii;for(xt=Du.length-1,j=de-1;j>=0;j--){const ve=ht+j,Ke=S[ve],Cu=S[ve+1],Mu=ve+1<J?Cu.el||Cu.placeholder:F;Ii[j]===0?g(null,Ke,M,Mu,R,$,H,W,B):Ye&&(xt<0||j!==Du[xt]?Ce(Ke,M,Mu,2):xt--)}}},Ce=(w,S,M,F,R=null)=>{const{el:$,type:H,transition:W,children:B,shapeFlag:j}=w;if(j&6){Ce(w.component.subTree,S,M,F);return}if(j&128){w.suspense.move(S,M,F);return}if(j&64){H.move(w,S,M,Ai);return}if(H===ft){n($,S,M);for(let q=0;q<B.length;q++)Ce(B[q],S,M,F);n(w.anchor,S,M);return}if(H===Ua){b(w,S,M);return}if(F!==2&&j&1&&W)if(F===0)W.beforeEnter($),n($,S,M),_e(()=>W.enter($),R);else{const{leave:q,delayLeave:Y,afterLeave:Q}=W,ht=()=>{w.ctx.isUnmounted?i($):n($,S,M)},Mt=()=>{q($,()=>{ht(),Q&&Q()})};Y?Y($,ht,Mt):Mt()}else n($,S,M)},Yt=(w,S,M,F=!1,R=!1)=>{const{type:$,props:H,ref:W,children:B,dynamicChildren:j,shapeFlag:J,patchFlag:q,dirs:Y,cacheIndex:Q}=w;if(q===-2&&(R=!1),W!=null&&(ws(),ir(W,null,M,w,!0),xs()),Q!=null&&(S.renderCache[Q]=void 0),J&256){S.ctx.deactivate(w);return}const ht=J&1&&Y,Mt=!ci(w);let xt;if(Mt&&(xt=H&&H.onVnodeBeforeUnmount)&&Ge(xt,S,w),J&6)tn(w.component,M,F);else{if(J&128){w.suspense.unmount(M,F);return}ht&&en(w,null,S,"beforeUnmount"),J&64?w.type.remove(w,S,M,Ai,F):j&&!j.hasOnce&&($!==ft||q>0&&q&64)?be(j,S,M,!1,!0):($===ft&&q&384||!R&&J&16)&&be(B,S,M),F&&Ms(w)}(Mt&&(xt=H&&H.onVnodeUnmounted)||ht)&&_e(()=>{xt&&Ge(xt,S,w),ht&&en(w,null,S,"unmounted")},M)},Ms=w=>{const{type:S,el:M,anchor:F,transition:R}=w;if(S===ft){cs(M,F);return}if(S===Ua){x(w);return}const $=()=>{i(M),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(w.shapeFlag&1&&R&&!R.persisted){const{leave:H,delayLeave:W}=R,B=()=>H(M,$);W?W(w.el,$,B):B()}else $()},cs=(w,S)=>{let M;for(;w!==S;)M=h(w),i(w),w=M;i(S)},tn=(w,S,M)=>{const{bum:F,scope:R,job:$,subTree:H,um:W,m:B,a:j,parent:J,slots:{__:q}}=w;ju(B),ju(j),F&&xo(F),J&&G(q)&&q.forEach(Y=>{J.renderCache[Y]=void 0}),R.stop(),$&&($.flags|=8,Yt(H,w,S,M)),W&&_e(W,S),_e(()=>{w.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},be=(w,S,M,F=!1,R=!1,$=0)=>{for(let H=$;H<w.length;H++)Yt(w[H],S,M,F,R)},Vr=w=>{if(w.shapeFlag&6)return Vr(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const S=h(w.anchor||w.el),M=S&&S[Bb];return M?h(M):S};let La=!1;const Ou=(w,S,M)=>{w==null?S._vnode&&Yt(S._vnode,null,null,!0):g(S._vnode||null,w,S,null,null,null,M),S._vnode=w,La||(La=!0,Pu(),Tg(),La=!1)},Ai={p:g,um:Yt,m:Ce,r:Ms,mt:it,mc:L,pc:yt,pbc:V,n:Vr,o:e};return{render:Ou,hydrate:void 0,createApp:c0(Ou)}}function Wa({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function sn({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function v0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function qg(e,t,s=!1){const n=e.children,i=t.children;if(G(n)&&G(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ns(i[r]),a.el=o.el),!s&&a.patchFlag!==-2&&qg(o,a)),a.type===ua&&(a.el=o.el),a.type===ls&&!a.el&&(a.el=o.el)}}function _0(e){const t=e.slice(),s=[0];let n,i,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)a=r+o>>1,e[s[a]]<c?r=a+1:o=a;c<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=t[o];return s}function Yg(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Yg(t)}function ju(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const w0=Symbol.for("v-scx"),x0=()=>So(w0);function os(e,t,s){return Jg(e,t,s)}function Jg(e,t,s=Ct){const{immediate:n,deep:i,flush:r,once:o}=s,a=Vt({},s),l=t&&n||!t&&r!=="post";let c;if(wr){if(r==="sync"){const f=x0();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=rs,f.resume=rs,f.pause=rs,f}}const u=oe;a.call=(f,m,g)=>Ve(f,u,m,g);let d=!1;r==="post"?a.scheduler=f=>{_e(f,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():Rc(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=Rb(e,t,a);return wr&&(c?c.push(h):l&&h()),h}function S0(e,t,s){const n=this.proxy,i=Nt(e)?e.includes(".")?Kg(n,e):()=>n[e]:e.bind(n,n);let r;rt(t)?r=t:(r=t.handler,s=t);const o=Ar(this),a=Jg(i,r.bind(n),s);return o(),a}function Kg(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const k0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ks(t)}Modifiers`]||e[`${Xs(t)}Modifiers`];function T0(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ct;let i=s;const r=t.startsWith("update:"),o=r&&k0(n,t.slice(7));o&&(o.trim&&(i=s.map(u=>Nt(u)?u.trim():u)),o.number&&(i=s.map(Ol)));let a,l=n[a=Ra(t)]||n[a=Ra(Ks(t))];!l&&r&&(l=n[a=Ra(Xs(t))]),l&&Ve(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ve(c,e,6,i)}}function Gg(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!rt(e)){const l=c=>{const u=Gg(c,t,!0);u&&(a=!0,Vt(o,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Pt(e)&&n.set(e,null),null):(G(r)?r.forEach(l=>o[l]=null):Vt(o,r),Pt(e)&&n.set(e,o),o)}function ca(e,t){return!e||!sa(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,Xs(t))||_t(e,t))}function Bu(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:g}=e,p=Ro(e);let y,_;try{if(s.shapeFlag&4){const x=i||n,k=x;y=is(c.call(k,x,u,d,f,h,m)),_=a}else{const x=t;y=is(x.length>1?x(d,{attrs:a,slots:o,emit:l}):x(d,null)),_=t.props?a:O0(a)}}catch(x){or.length=0,aa(x,e,1),y=mt(ls)}let b=y;if(_&&g!==!1){const x=Object.keys(_),{shapeFlag:k}=b;x.length&&k&7&&(r&&x.some(Tc)&&(_=D0(_,r)),b=xn(b,_,!1,!0))}return s.dirs&&(b=xn(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&vr(b,s.transition),y=b,Ro(p),y}const O0=e=>{let t;for(const s in e)(s==="class"||s==="style"||sa(s))&&((t||(t={}))[s]=e[s]);return t},D0=(e,t)=>{const s={};for(const n in e)(!Tc(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function C0(e,t,s){const{props:n,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Wu(n,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!ca(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Wu(n,o,c):!0:!!o;return!1}function Wu(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r]&&!ca(s,r))return!0}return!1}function M0({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Zg=e=>e.__isSuspense;function E0(e,t){t&&t.pendingBranch?G(e)?t.effects.push(...e):t.effects.push(e):jb(e)}const ft=Symbol.for("v-fgt"),ua=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),Ua=Symbol.for("v-stc"),or=[];let Se=null;function T(e=!1){or.push(Se=e?null:[])}function A0(){or.pop(),Se=or[or.length-1]||null}let _r=1;function Uu(e,t=!1){_r+=e,e<0&&Se&&t&&(Se.hasOnce=!0)}function Xg(e){return e.dynamicChildren=_r>0?Se||ii:null,A0(),_r>0&&Se&&Se.push(e),e}function D(e,t,s,n,i,r){return Xg(v(e,t,s,n,i,r,!0))}function ke(e,t,s,n,i){return Xg(mt(e,t,s,n,i,!0))}function jc(e){return e?e.__v_isVNode===!0:!1}function Qn(e,t){return e.type===t.type&&e.key===t.key}const Qg=({key:e})=>e??null,ko=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||se(e)||rt(e)?{i:ee,r:e,k:t,f:!!s}:e:null);function v(e,t=null,s=null,n=0,i=null,r=e===ft?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qg(t),ref:t&&ko(t),scopeId:Dg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ee};return a?(Bc(l,s),r&128&&e.normalize(l)):s&&(l.shapeFlag|=Nt(s)?8:16),_r>0&&!o&&Se&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Se.push(l),l}const mt=I0;function I0(e,t=null,s=null,n=0,i=null,r=!1){if((!e||e===t0)&&(e=ls),jc(e)){const a=xn(e,t,!0);return s&&Bc(a,s),_r>0&&!r&&Se&&(a.shapeFlag&6?Se[Se.indexOf(e)]=a:Se.push(a)),a.patchFlag=-2,a}if(U0(e)&&(e=e.__vccOpts),t){t=P0(t);let{class:a,style:l}=t;a&&!Nt(a)&&(t.class=dt(a)),Pt(l)&&(Lc(l)&&!G(l)&&(l=Vt({},l)),t.style=xe(l))}const o=Nt(e)?1:Zg(e)?128:Wb(e)?64:Pt(e)?4:rt(e)?2:0;return v(e,t,s,n,i,o,r,!0)}function P0(e){return e?Lc(e)||Bg(e)?Vt({},e):e:null}function xn(e,t,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?L0(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Qg(c),ref:t&&t.ref?s&&r?G(r)?r.concat(ko(t)):[r,ko(t)]:ko(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ft?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&xn(e.ssContent),ssFallback:e.ssFallback&&xn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&vr(u,l.clone(u)),u}function K(e=" ",t=0){return mt(ua,null,e,t)}function X(e="",t=!1){return t?(T(),ke(ls,null,e)):mt(ls,null,e)}function is(e){return e==null||typeof e=="boolean"?mt(ls):G(e)?mt(ft,null,e.slice()):jc(e)?Ns(e):mt(ua,null,String(e))}function Ns(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:xn(e)}function Bc(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(G(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Bc(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!Bg(t)?t._ctx=ee:i===3&&ee&&(ee.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else rt(t)?(t={default:t,_ctx:ee},s=32):(t=String(t),n&64?(s=16,t=[K(t)]):s=8);e.children=t,e.shapeFlag|=s}function L0(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=dt([t.class,n.class]));else if(i==="style")t.style=xe([t.style,n.style]);else if(sa(i)){const r=t[i],o=n[i];o&&r!==o&&!(G(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=n[i])}return t}function Ge(e,t,s,n=null){Ve(e,t,7,[s,n])}const R0=Ng();let $0=0;function N0(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||R0,r={uid:$0++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ab(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ug(n,i),emitsOptions:Gg(n,i),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:n.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=T0.bind(null,r),e.ce&&e.ce(r),r}let oe=null;const tm=()=>oe||ee;let No,Nl;{const e=ra(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};No=t("__VUE_INSTANCE_SETTERS__",s=>oe=s),Nl=t("__VUE_SSR_SETTERS__",s=>wr=s)}const Ar=e=>{const t=oe;return No(e),e.scope.on(),()=>{e.scope.off(),No(t)}},zu=()=>{oe&&oe.scope.off(),No(null)};function em(e){return e.vnode.shapeFlag&4}let wr=!1;function F0(e,t=!1,s=!1){t&&Nl(t);const{props:n,children:i}=e.vnode,r=em(e);d0(e,n,r,t),m0(e,i,s||t);const o=r?j0(e,t):void 0;return t&&Nl(!1),o}function j0(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,s0);const{setup:n}=s;if(n){ws();const i=e.setupContext=n.length>1?W0(e):null,r=Ar(e),o=Er(n,e,0,[e.props,i]),a=tg(o);if(xs(),r(),(a||e.sp)&&!ci(e)&&Mg(e),a){if(o.then(zu,zu),t)return o.then(l=>{Hu(e,l)}).catch(l=>{aa(l,e,0)});e.asyncDep=o}else Hu(e,o)}else sm(e)}function Hu(e,t,s){rt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pt(t)&&(e.setupState=xg(t)),sm(e)}function sm(e,t,s){const n=e.type;e.render||(e.render=n.render||rs);{const i=Ar(e);ws();try{n0(e)}finally{xs(),i()}}}const B0={get(e,t){return Qt(e,"get",""),e[t]}};function W0(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,B0),slots:e.slots,emit:e.emit,expose:t}}function da(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xg(Cb(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in rr)return rr[s](e)},has(t,s){return s in t||s in rr}})):e.proxy}function U0(e){return rt(e)&&"__vccOpts"in e}const tt=(e,t)=>Pb(e,t,wr),z0="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fl;const Vu=typeof window<"u"&&window.trustedTypes;if(Vu)try{Fl=Vu.createPolicy("vue",{createHTML:e=>e})}catch{}const nm=Fl?e=>Fl.createHTML(e):e=>e,H0="http://www.w3.org/2000/svg",V0="http://www.w3.org/1998/Math/MathML",ps=typeof document<"u"?document:null,qu=ps&&ps.createElement("template"),q0={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ps.createElementNS(H0,e):t==="mathml"?ps.createElementNS(V0,e):s?ps.createElement(e,{is:s}):ps.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ps.createTextNode(e),createComment:e=>ps.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ps.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,r){const o=s?s.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{qu.innerHTML=nm(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=qu.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Es="transition",Li="animation",gi=Symbol("_vtc"),im={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Y0=Vt({},zb,im),nn=(e,t=[])=>{G(e)?e.forEach(s=>s(...t)):e&&e(...t)},Yu=e=>e?G(e)?e.some(t=>t.length>1):e.length>1:!1;function J0(e){const t={};for(const O in e)O in im||(t[O]=e[O]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=e,m=K0(i),g=m&&m[0],p=m&&m[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:b,onLeave:x,onLeaveCancelled:k,onBeforeAppear:A=y,onAppear:E=_,onAppearCancelled:L=b}=t,I=(O,z,it,ot)=>{O._enterCancelled=ot,Ps(O,z?u:a),Ps(O,z?c:o),it&&it()},V=(O,z)=>{O._isLeaving=!1,Ps(O,d),Ps(O,f),Ps(O,h),z&&z()},P=O=>(z,it)=>{const ot=O?E:_,at=()=>I(z,O,it);nn(ot,[z,at]),Ju(()=>{Ps(z,O?l:r),Xe(z,O?u:a),Yu(ot)||Ku(z,n,g,at)})};return Vt(t,{onBeforeEnter(O){nn(y,[O]),Xe(O,r),Xe(O,o)},onBeforeAppear(O){nn(A,[O]),Xe(O,l),Xe(O,c)},onEnter:P(!1),onAppear:P(!0),onLeave(O,z){O._isLeaving=!0;const it=()=>V(O,z);Xe(O,d),O._enterCancelled?(Xe(O,h),jl()):(jl(),Xe(O,h)),Ju(()=>{O._isLeaving&&(Ps(O,d),Xe(O,f),Yu(x)||Ku(O,n,p,it))}),nn(x,[O,it])},onEnterCancelled(O){I(O,!1,void 0,!0),nn(b,[O])},onAppearCancelled(O){I(O,!0,void 0,!0),nn(L,[O])},onLeaveCancelled(O){V(O),nn(k,[O])}})}function K0(e){if(e==null)return null;if(Pt(e))return[za(e.enter),za(e.leave)];{const t=za(e);return[t,t]}}function za(e){return tb(e)}function Xe(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[gi]||(e[gi]=new Set)).add(t)}function Ps(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[gi];s&&(s.delete(t),s.size||(e[gi]=void 0))}function Ju(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let G0=0;function Ku(e,t,s,n){const i=e._endId=++G0,r=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:a,propCount:l}=rm(e,t);if(!o)return n();const c=o+"end";let u=0;const d=()=>{e.removeEventListener(c,h),r()},h=f=>{f.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,h)}function rm(e,t){const s=window.getComputedStyle(e),n=m=>(s[m]||"").split(", "),i=n(`${Es}Delay`),r=n(`${Es}Duration`),o=Gu(i,r),a=n(`${Li}Delay`),l=n(`${Li}Duration`),c=Gu(a,l);let u=null,d=0,h=0;t===Es?o>0&&(u=Es,d=o,h=r.length):t===Li?c>0&&(u=Li,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?Es:Li:null,h=u?u===Es?r.length:l.length:0);const f=u===Es&&/\b(transform|all)(,|$)/.test(n(`${Es}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Gu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Zu(s)+Zu(e[n])))}function Zu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function jl(){return document.body.offsetHeight}function Z0(e,t,s){const n=e[gi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Fo=Symbol("_vod"),om=Symbol("_vsh"),X0={beforeMount(e,{value:t},{transition:s}){e[Fo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Ri(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Ri(e,!0),n.enter(e)):n.leave(e,()=>{Ri(e,!1)}):Ri(e,t))},beforeUnmount(e,{value:t}){Ri(e,t)}};function Ri(e,t){e.style.display=t?e[Fo]:"none",e[om]=!t}const Q0=Symbol(""),tv=/(^|;)\s*display\s*:/;function ev(e,t,s){const n=e.style,i=Nt(s);let r=!1;if(s&&!i){if(t)if(Nt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&To(n,a,"")}else for(const o in t)s[o]==null&&To(n,o,"");for(const o in s)o==="display"&&(r=!0),To(n,o,s[o])}else if(i){if(t!==s){const o=n[Q0];o&&(s+=";"+o),n.cssText=s,r=tv.test(s)}}else t&&e.removeAttribute("style");Fo in e&&(e[Fo]=r?n.display:"",e[om]&&(n.display="none"))}const Xu=/\s*!important$/;function To(e,t,s){if(G(s))s.forEach(n=>To(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=sv(e,t);Xu.test(s)?e.setProperty(Xs(n),s.replace(Xu,""),"important"):e[n]=s}}const Qu=["Webkit","Moz","ms"],Ha={};function sv(e,t){const s=Ha[t];if(s)return s;let n=Ks(t);if(n!=="filter"&&n in e)return Ha[t]=n;n=ng(n);for(let i=0;i<Qu.length;i++){const r=Qu[i]+n;if(r in e)return Ha[t]=r}return t}const td="http://www.w3.org/1999/xlink";function ed(e,t,s,n,i,r=ob(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(td,t.slice(6,t.length)):e.setAttributeNS(td,t,s):s==null||r&&!ig(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Ts(s)?String(s):s)}function sd(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?nm(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=ig(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(i||t)}function ti(e,t,s,n){e.addEventListener(t,s,n)}function nv(e,t,s,n){e.removeEventListener(t,s,n)}const nd=Symbol("_vei");function iv(e,t,s,n,i=null){const r=e[nd]||(e[nd]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=rv(t);if(n){const c=r[t]=lv(n,i);ti(e,a,c,l)}else o&&(nv(e,a,o,l),r[t]=void 0)}}const id=/(?:Once|Passive|Capture)$/;function rv(e){let t;if(id.test(e)){t={};let n;for(;n=e.match(id);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xs(e.slice(2)),t]}let Va=0;const ov=Promise.resolve(),av=()=>Va||(ov.then(()=>Va=0),Va=Date.now());function lv(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ve(cv(n,s.value),t,5,[n])};return s.value=e,s.attached=av(),s}function cv(e,t){if(G(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const rd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,uv=(e,t,s,n,i,r)=>{const o=i==="svg";t==="class"?Z0(e,n,o):t==="style"?ev(e,s,n):sa(t)?Tc(t)||iv(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dv(e,t,n,o))?(sd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ed(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(n))?sd(e,Ks(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ed(e,t,n,o))};function dv(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&rd(t)&&rt(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return rd(t)&&Nt(s)?!1:t in e}const am=new WeakMap,lm=new WeakMap,jo=Symbol("_moveCb"),od=Symbol("_enterCb"),hv=e=>(delete e.props.mode,e),fv=hv({name:"TransitionGroup",props:Vt({},Y0,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=tm(),n=Ub();let i,r;return Ig(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!bv(i[0].el,s.vnode.el,o)){i=[];return}i.forEach(mv),i.forEach(pv);const a=i.filter(yv);jl(),a.forEach(l=>{const c=l.el,u=c.style;Xe(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[jo]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[jo]=null,Ps(c,o))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const o=vt(e),a=J0(o);let l=o.tag||ft;if(i=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(i.push(u),vr(u,Il(u,a,n,s)),am.set(u,u.el.getBoundingClientRect()))}r=t.default?Cg(t.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&vr(u,Il(u,a,n,s))}return mt(l,null,r)}}}),gv=fv;function mv(e){const t=e.el;t[jo]&&t[jo](),t[od]&&t[od]()}function pv(e){lm.set(e,e.el.getBoundingClientRect())}function yv(e){const t=am.get(e),s=lm.get(e),n=t.left-s.left,i=t.top-s.top;if(n||i){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${n}px,${i}px)`,r.transitionDuration="0s",e}}function bv(e,t,s){const n=e.cloneNode(),i=e[gi];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(n);const{hasTransform:o}=rm(n);return r.removeChild(n),o}const ad=e=>{const t=e.props["onUpdate:modelValue"]||!1;return G(t)?s=>xo(t,s):t};function vv(e){e.target.composing=!0}function ld(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const qa=Symbol("_assign"),cm={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[qa]=ad(i);const r=n||i.props&&i.props.type==="number";ti(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;s&&(a=a.trim()),r&&(a=Ol(a)),e[qa](a)}),s&&ti(e,"change",()=>{e.value=e.value.trim()}),t||(ti(e,"compositionstart",vv),ti(e,"compositionend",ld),ti(e,"change",ld))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},o){if(e[qa]=ad(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ol(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},_v=["ctrl","shift","alt","meta"],wv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>_v.some(s=>e[`${s}Key`]&&!t.includes(s))},Ya=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=wv[t[o]];if(a&&a(i,t))return}return e(i,...r)})},xv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cd=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const r=Xs(i.key);if(t.some(o=>o===r||xv[o]===r))return e(i)})},Sv=Vt({patchProp:uv},q0);let ud;function kv(){return ud||(ud=y0(Sv))}const Tv=(...e)=>{const t=kv().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=Dv(n);if(!i)return;const r=t._component;!rt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,Ov(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Ov(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Dv(e){return Nt(e)?document.querySelector(e):e}class Mn extends Error{}class Cv extends Mn{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Mv extends Mn{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Ev extends Mn{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ni extends Mn{}class um extends Mn{constructor(t){super(`Invalid unit ${t}`)}}class Xt extends Mn{}class As extends Mn{constructor(){super("Zone is an abstract class")}}const U="numeric",qe="short",Te="long",Bo={year:U,month:U,day:U},dm={year:U,month:qe,day:U},Av={year:U,month:qe,day:U,weekday:qe},hm={year:U,month:Te,day:U},fm={year:U,month:Te,day:U,weekday:Te},gm={hour:U,minute:U},mm={hour:U,minute:U,second:U},pm={hour:U,minute:U,second:U,timeZoneName:qe},ym={hour:U,minute:U,second:U,timeZoneName:Te},bm={hour:U,minute:U,hourCycle:"h23"},vm={hour:U,minute:U,second:U,hourCycle:"h23"},_m={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:qe},wm={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:Te},xm={year:U,month:U,day:U,hour:U,minute:U},Sm={year:U,month:U,day:U,hour:U,minute:U,second:U},km={year:U,month:qe,day:U,hour:U,minute:U},Tm={year:U,month:qe,day:U,hour:U,minute:U,second:U},Iv={year:U,month:qe,day:U,weekday:qe,hour:U,minute:U},Om={year:U,month:Te,day:U,hour:U,minute:U,timeZoneName:qe},Dm={year:U,month:Te,day:U,hour:U,minute:U,second:U,timeZoneName:qe},Cm={year:U,month:Te,day:U,weekday:Te,hour:U,minute:U,timeZoneName:Te},Mm={year:U,month:Te,day:U,weekday:Te,hour:U,minute:U,second:U,timeZoneName:Te};class Ir{get type(){throw new As}get name(){throw new As}get ianaName(){return this.name}get isUniversal(){throw new As}offsetName(t,s){throw new As}formatOffset(t,s){throw new As}offset(t){throw new As}equals(t){throw new As}get isValid(){throw new As}}let Ja=null;class ha extends Ir{static get instance(){return Ja===null&&(Ja=new ha),Ja}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return Bm(t,s,n)}formatOffset(t,s){return ar(this.offset(t),s)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const Bl=new Map;function Pv(e){let t=Bl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Bl.set(e,t)),t}const Lv={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Rv(e,t){const s=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,i,r,o,a,l,c,u]=n;return[o,i,r,a,l,c,u]}function $v(e,t){const s=e.formatToParts(t),n=[];for(let i=0;i<s.length;i++){const{type:r,value:o}=s[i],a=Lv[r];r==="era"?n[a]=o:Z(a)||(n[a]=parseInt(o,10))}return n}const Ka=new Map;class Ss extends Ir{static create(t){let s=Ka.get(t);return s===void 0&&Ka.set(t,s=new Ss(t)),s}static resetCache(){Ka.clear(),Bl.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ss.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return Bm(t,s,n,this.name)}formatOffset(t,s){return ar(this.offset(t),s)}offset(t){if(!this.valid)return NaN;const s=new Date(t);if(isNaN(s))return NaN;const n=Pv(this.name);let[i,r,o,a,l,c,u]=n.formatToParts?$v(n,s):Rv(n,s);a==="BC"&&(i=-Math.abs(i)+1);const h=ga({year:i,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+s;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let dd={};function Nv(e,t={}){const s=JSON.stringify([e,t]);let n=dd[s];return n||(n=new Intl.ListFormat(e,t),dd[s]=n),n}const Wl=new Map;function Ul(e,t={}){const s=JSON.stringify([e,t]);let n=Wl.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(e,t),Wl.set(s,n)),n}const zl=new Map;function Fv(e,t={}){const s=JSON.stringify([e,t]);let n=zl.get(s);return n===void 0&&(n=new Intl.NumberFormat(e,t),zl.set(s,n)),n}const Hl=new Map;function jv(e,t={}){const{base:s,...n}=t,i=JSON.stringify([e,n]);let r=Hl.get(i);return r===void 0&&(r=new Intl.RelativeTimeFormat(e,t),Hl.set(i,r)),r}let Yi=null;function Bv(){return Yi||(Yi=new Intl.DateTimeFormat().resolvedOptions().locale,Yi)}const Vl=new Map;function Em(e){let t=Vl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),Vl.set(e,t)),t}const ql=new Map;function Wv(e){let t=ql.get(e);if(!t){const s=new Intl.Locale(e);t="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in t||(t={...Am,...t}),ql.set(e,t)}return t}function Uv(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const s=e.indexOf("-u-");if(s===-1)return[e];{let n,i;try{n=Ul(e).resolvedOptions(),i=e}catch{const l=e.substring(0,s);n=Ul(l).resolvedOptions(),i=l}const{numberingSystem:r,calendar:o}=n;return[i,r,o]}}function zv(e,t,s){return(s||t)&&(e.includes("-u-")||(e+="-u"),s&&(e+=`-ca-${s}`),t&&(e+=`-nu-${t}`)),e}function Hv(e){const t=[];for(let s=1;s<=12;s++){const n=C.utc(2009,s,1);t.push(e(n))}return t}function Vv(e){const t=[];for(let s=1;s<=7;s++){const n=C.utc(2016,11,13+s);t.push(e(n))}return t}function Gr(e,t,s,n){const i=e.listingMode();return i==="error"?null:i==="en"?s(t):n(t)}function qv(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||Em(e.locale).numberingSystem==="latn"}class Yv{constructor(t,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:r,...o}=n;if(!s||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Fv(t,a)}}format(t){if(this.inf){const s=this.floor?Math.floor(t):t;return this.inf.format(s)}else{const s=this.floor?Math.floor(t):Vc(t,3);return Ft(s,this.padTo)}}}class Jv{constructor(t,s,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ss.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||i,this.dtf=Ul(s,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Kv{constructor(t,s,n){this.opts={style:"long",...n},!s&&Fm()&&(this.rtf=jv(t,n))}format(t,s){return this.rtf?this.rtf.format(t,s):y_(s,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,s){return this.rtf?this.rtf.formatToParts(t,s):[]}}const Am={firstDay:1,minimalDays:4,weekend:[6,7]};class wt{static fromOpts(t){return wt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,s,n,i,r=!1){const o=t||Rt.defaultLocale,a=o||(r?"en-US":Bv()),l=s||Rt.defaultNumberingSystem,c=n||Rt.defaultOutputCalendar,u=Jl(i)||Rt.defaultWeekSettings;return new wt(a,l,c,u,o)}static resetCache(){Yi=null,Wl.clear(),zl.clear(),Hl.clear(),Vl.clear(),ql.clear()}static fromObject({locale:t,numberingSystem:s,outputCalendar:n,weekSettings:i}={}){return wt.create(t,s,n,i)}constructor(t,s,n,i,r){const[o,a,l]=Uv(t);this.locale=o,this.numberingSystem=s||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=zv(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=qv(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&s?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:wt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Jl(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,s=!1){return Gr(this,t,zm,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");s&=!n;const i=s?{month:t,day:"numeric"}:{month:t},r=s?"format":"standalone";if(!this.monthsCache[r][t]){const o=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[r][t]=Hv(o)}return this.monthsCache[r][t]})}weekdays(t,s=!1){return Gr(this,t,qm,()=>{const n=s?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=s?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=Vv(r=>this.extract(r,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return Gr(this,void 0,()=>Ym,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[C.utc(2016,11,13,9),C.utc(2016,11,13,19)].map(s=>this.extract(s,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Gr(this,t,Jm,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[C.utc(-40,1,1),C.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[t]})}extract(t,s,n){const i=this.dtFormatter(t,s),r=i.formatToParts(),o=r.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(t={}){return new Yv(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,s={}){return new Jv(t,this.intl,s)}relFormatter(t={}){return new Kv(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Nv(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Em(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:jm()?Wv(this.locale):Am}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Ga=null;class ae extends Ir{static get utcInstance(){return Ga===null&&(Ga=new ae(0)),Ga}static instance(t){return t===0?ae.utcInstance:new ae(t)}static parseSpecifier(t){if(t){const s=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new ae(ma(s[1],s[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ar(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ar(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,s){return ar(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Gv extends Ir{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function js(e,t){if(Z(e)||e===null)return t;if(e instanceof Ir)return e;if(s_(e)){const s=e.toLowerCase();return s==="default"?t:s==="local"||s==="system"?ha.instance:s==="utc"||s==="gmt"?ae.utcInstance:ae.parseSpecifier(s)||Ss.create(e)}else return qs(e)?ae.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Gv(e)}const Wc={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},hd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Zv=Wc.hanidec.replace(/[\[|\]]/g,"").split("");function Xv(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(e[s].search(Wc.hanidec)!==-1)t+=Zv.indexOf(e[s]);else for(const i in hd){const[r,o]=hd[i];n>=r&&n<=o&&(t+=n-r)}}return parseInt(t,10)}else return t}const Yl=new Map;function Qv(){Yl.clear()}function je({numberingSystem:e},t=""){const s=e||"latn";let n=Yl.get(s);n===void 0&&(n=new Map,Yl.set(s,n));let i=n.get(t);return i===void 0&&(i=new RegExp(`${Wc[s]}${t}`),n.set(t,i)),i}let fd=()=>Date.now(),gd="system",md=null,pd=null,yd=null,bd=60,vd,_d=null;class Rt{static get now(){return fd}static set now(t){fd=t}static set defaultZone(t){gd=t}static get defaultZone(){return js(gd,ha.instance)}static get defaultLocale(){return md}static set defaultLocale(t){md=t}static get defaultNumberingSystem(){return pd}static set defaultNumberingSystem(t){pd=t}static get defaultOutputCalendar(){return yd}static set defaultOutputCalendar(t){yd=t}static get defaultWeekSettings(){return _d}static set defaultWeekSettings(t){_d=Jl(t)}static get twoDigitCutoffYear(){return bd}static set twoDigitCutoffYear(t){bd=t%100}static get throwOnInvalid(){return vd}static set throwOnInvalid(t){vd=t}static resetCaches(){wt.resetCache(),Ss.resetCache(),C.resetCache(),Qv()}}class ze{constructor(t,s){this.reason=t,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Im=[0,31,59,90,120,151,181,212,243,273,304,334],Pm=[0,31,60,91,121,152,182,213,244,274,305,335];function Pe(e,t){return new ze("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Uc(e,t,s){const n=new Date(Date.UTC(e,t-1,s));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function Lm(e,t,s){return s+(Pr(e)?Pm:Im)[t-1]}function Rm(e,t){const s=Pr(e)?Pm:Im,n=s.findIndex(r=>r<t),i=t-s[n];return{month:n+1,day:i}}function zc(e,t){return(e-t+7)%7+1}function Wo(e,t=4,s=1){const{year:n,month:i,day:r}=e,o=Lm(n,i,r),a=zc(Uc(n,i,r),s);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=n-1,l=xr(c,t,s)):l>xr(n,t,s)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,...pa(e)}}function wd(e,t=4,s=1){const{weekYear:n,weekNumber:i,weekday:r}=e,o=zc(Uc(n,1,t),s),a=di(n);let l=i*7+r-o-7+t,c;l<1?(c=n-1,l+=di(c)):l>a?(c=n+1,l-=di(n)):c=n;const{month:u,day:d}=Rm(c,l);return{year:c,month:u,day:d,...pa(e)}}function Za(e){const{year:t,month:s,day:n}=e,i=Lm(t,s,n);return{year:t,ordinal:i,...pa(e)}}function xd(e){const{year:t,ordinal:s}=e,{month:n,day:i}=Rm(t,s);return{year:t,month:n,day:i,...pa(e)}}function Sd(e,t){if(!Z(e.localWeekday)||!Z(e.localWeekNumber)||!Z(e.localWeekYear)){if(!Z(e.weekday)||!Z(e.weekNumber)||!Z(e.weekYear))throw new ni("Cannot mix locale-based week fields with ISO-based week fields");return Z(e.localWeekday)||(e.weekday=e.localWeekday),Z(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Z(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function t_(e,t=4,s=1){const n=fa(e.weekYear),i=Le(e.weekNumber,1,xr(e.weekYear,t,s)),r=Le(e.weekday,1,7);return n?i?r?!1:Pe("weekday",e.weekday):Pe("week",e.weekNumber):Pe("weekYear",e.weekYear)}function e_(e){const t=fa(e.year),s=Le(e.ordinal,1,di(e.year));return t?s?!1:Pe("ordinal",e.ordinal):Pe("year",e.year)}function $m(e){const t=fa(e.year),s=Le(e.month,1,12),n=Le(e.day,1,Uo(e.year,e.month));return t?s?n?!1:Pe("day",e.day):Pe("month",e.month):Pe("year",e.year)}function Nm(e){const{hour:t,minute:s,second:n,millisecond:i}=e,r=Le(t,0,23)||t===24&&s===0&&n===0&&i===0,o=Le(s,0,59),a=Le(n,0,59),l=Le(i,0,999);return r?o?a?l?!1:Pe("millisecond",i):Pe("second",n):Pe("minute",s):Pe("hour",t)}function Z(e){return typeof e>"u"}function qs(e){return typeof e=="number"}function fa(e){return typeof e=="number"&&e%1===0}function s_(e){return typeof e=="string"}function n_(e){return Object.prototype.toString.call(e)==="[object Date]"}function Fm(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function jm(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function i_(e){return Array.isArray(e)?e:[e]}function kd(e,t,s){if(e.length!==0)return e.reduce((n,i)=>{const r=[t(i),i];return n&&s(n[0],r[0])===n[0]?n:r},null)[1]}function r_(e,t){return t.reduce((s,n)=>(s[n]=e[n],s),{})}function mi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jl(e){if(e==null)return null;if(typeof e!="object")throw new Xt("Week settings must be an object");if(!Le(e.firstDay,1,7)||!Le(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Le(t,1,7)))throw new Xt("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Le(e,t,s){return fa(e)&&e>=t&&e<=s}function o_(e,t){return e-t*Math.floor(e/t)}function Ft(e,t=2){const s=e<0;let n;return s?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function Fs(e){if(!(Z(e)||e===null||e===""))return parseInt(e,10)}function rn(e){if(!(Z(e)||e===null||e===""))return parseFloat(e)}function Hc(e){if(!(Z(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Vc(e,t,s="round"){const n=10**t;switch(s){case"expand":return e>0?Math.ceil(e*n)/n:Math.floor(e*n)/n;case"trunc":return Math.trunc(e*n)/n;case"round":return Math.round(e*n)/n;case"floor":return Math.floor(e*n)/n;case"ceil":return Math.ceil(e*n)/n;default:throw new RangeError(`Value rounding ${s} is out of range`)}}function Pr(e){return e%4===0&&(e%100!==0||e%400===0)}function di(e){return Pr(e)?366:365}function Uo(e,t){const s=o_(t-1,12)+1,n=e+(t-s)/12;return s===2?Pr(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function ga(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Td(e,t,s){return-zc(Uc(e,1,t),s)+t-1}function xr(e,t=4,s=1){const n=Td(e,t,s),i=Td(e+1,t,s);return(di(e)-n+i)/7}function Kl(e){return e>99?e:e>Rt.twoDigitCutoffYear?1900+e:2e3+e}function Bm(e,t,s,n=null){const i=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(s,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function ma(e,t){let s=parseInt(e,10);Number.isNaN(s)&&(s=0);const n=parseInt(t,10)||0,i=s<0||Object.is(s,-0)?-n:n;return s*60+i}function Wm(e){const t=Number(e);if(typeof e=="boolean"||e===""||!Number.isFinite(t))throw new Xt(`Invalid unit value ${e}`);return t}function zo(e,t){const s={};for(const n in e)if(mi(e,n)){const i=e[n];if(i==null)continue;s[t(n)]=Wm(i)}return s}function ar(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Ft(s,2)}:${Ft(n,2)}`;case"narrow":return`${i}${s}${n>0?`:${n}`:""}`;case"techie":return`${i}${Ft(s,2)}${Ft(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function pa(e){return r_(e,["hour","minute","second","millisecond"])}const a_=["January","February","March","April","May","June","July","August","September","October","November","December"],Um=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l_=["J","F","M","A","M","J","J","A","S","O","N","D"];function zm(e){switch(e){case"narrow":return[...l_];case"short":return[...Um];case"long":return[...a_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Hm=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Vm=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],c_=["M","T","W","T","F","S","S"];function qm(e){switch(e){case"narrow":return[...c_];case"short":return[...Vm];case"long":return[...Hm];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ym=["AM","PM"],u_=["Before Christ","Anno Domini"],d_=["BC","AD"],h_=["B","A"];function Jm(e){switch(e){case"narrow":return[...h_];case"short":return[...d_];case"long":return[...u_];default:return null}}function f_(e){return Ym[e.hour<12?0:1]}function g_(e,t){return qm(t)[e.weekday-1]}function m_(e,t){return zm(t)[e.month-1]}function p_(e,t){return Jm(t)[e.year<0?0:1]}function y_(e,t,s="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(s==="auto"&&r){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${i[e][0]}`;case-1:return d?"yesterday":`last ${i[e][0]}`;case 0:return d?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],u=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Od(e,t){let s="";for(const n of e)n.literal?s+=n.val:s+=t(n.val);return s}const b_={D:Bo,DD:dm,DDD:hm,DDDD:fm,t:gm,tt:mm,ttt:pm,tttt:ym,T:bm,TT:vm,TTT:_m,TTTT:wm,f:xm,ff:km,fff:Om,ffff:Cm,F:Sm,FF:Tm,FFF:Dm,FFFF:Mm};class te{static create(t,s={}){return new te(t,s)}static parseFormat(t){let s=null,n="",i=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?((n.length>0||i)&&r.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),s=null,n="",i=!i):i||a===s?n+=a:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=a,s=a)}return n.length>0&&r.push({literal:i||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(t){return b_[t]}constructor(t,s){this.opts=s,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...s}).format()}dtFormatter(t,s={}){return this.loc.dtFormatter(t,{...this.opts,...s})}formatDateTime(t,s){return this.dtFormatter(t,s).format()}formatDateTimeParts(t,s){return this.dtFormatter(t,s).formatToParts()}formatInterval(t,s){return this.dtFormatter(t.start,s).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,s){return this.dtFormatter(t,s).resolvedOptions()}num(t,s=0,n=void 0){if(this.opts.forceSimple)return Ft(t,s);const i={...this.opts};return s>0&&(i.padTo=s),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,s){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(f,m)=>this.loc.extract(t,f,m),o=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>n?f_(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,m)=>n?m_(t,f):r(m?{month:f}:{month:f,day:"numeric"},"month"),c=(f,m)=>n?g_(t,f):r(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=te.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(t,m):f},d=f=>n?p_(t,f):r({era:f},"era"),h=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?r({day:"numeric"},"day"):this.num(t.day);case"dd":return i?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?r({month:"numeric"},"month"):this.num(t.month);case"MM":return i?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?r({year:"numeric"},"year"):this.num(t.year);case"yy":return i?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(f)}};return Od(te.parseFormat(s),h)}formatDurationFromString(t,s){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},r=(u,d)=>h=>{const f=i(h);if(f){const m=d.isNegativeDuration&&f!==d.largestUnit?n:1;let g;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(u.get(f)*m,h.length,g)}else return h},o=te.parseFormat(s),a=o.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),l=t.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Od(o,r(l,c))}}const Km=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xi(...e){const t=e.reduce((s,n)=>s+n.source,"");return RegExp(`^${t}$`)}function Si(...e){return t=>e.reduce(([s,n,i],r)=>{const[o,a,l]=r(t,i);return[{...s,...o},a||n,l]},[{},null,1]).slice(0,2)}function ki(e,...t){if(e==null)return[null,null];for(const[s,n]of t){const i=s.exec(e);if(i)return n(i)}return[null,null]}function Gm(...e){return(t,s)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=Fs(t[s+i]);return[n,null,s+i]}}const Zm=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,v_=`(?:${Zm.source}?(?:\\[(${Km.source})\\])?)?`,qc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Xm=RegExp(`${qc.source}${v_}`),Yc=RegExp(`(?:[Tt]${Xm.source})?`),__=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,w_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,x_=/(\d{4})-?(\d{3})/,S_=Gm("weekYear","weekNumber","weekDay"),k_=Gm("year","ordinal"),T_=/(\d{4})-(\d\d)-(\d\d)/,Qm=RegExp(`${qc.source} ?(?:${Zm.source}|(${Km.source}))?`),O_=RegExp(`(?: ${Qm.source})?`);function hi(e,t,s){const n=e[t];return Z(n)?s:Fs(n)}function D_(e,t){return[{year:hi(e,t),month:hi(e,t+1,1),day:hi(e,t+2,1)},null,t+3]}function Ti(e,t){return[{hours:hi(e,t,0),minutes:hi(e,t+1,0),seconds:hi(e,t+2,0),milliseconds:Hc(e[t+3])},null,t+4]}function Lr(e,t){const s=!e[t]&&!e[t+1],n=ma(e[t+1],e[t+2]),i=s?null:ae.instance(n);return[{},i,t+3]}function Rr(e,t){const s=e[t]?Ss.create(e[t]):null;return[{},s,t+1]}const C_=RegExp(`^T?${qc.source}$`),M_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function E_(e){const[t,s,n,i,r,o,a,l,c]=e,u=t[0]==="-",d=l&&l[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(rn(s)),months:h(rn(n)),weeks:h(rn(i)),days:h(rn(r)),hours:h(rn(o)),minutes:h(rn(a)),seconds:h(rn(l),l==="-0"),milliseconds:h(Hc(c),d)}]}const A_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Jc(e,t,s,n,i,r,o){const a={year:t.length===2?Kl(Fs(t)):Fs(t),month:Um.indexOf(s)+1,day:Fs(n),hour:Fs(i),minute:Fs(r)};return o&&(a.second=Fs(o)),e&&(a.weekday=e.length>3?Hm.indexOf(e)+1:Vm.indexOf(e)+1),a}const I_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function P_(e){const[,t,s,n,i,r,o,a,l,c,u,d]=e,h=Jc(t,i,n,s,r,o,a);let f;return l?f=A_[l]:c?f=0:f=ma(u,d),[h,new ae(f)]}function L_(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const R_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,$_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,N_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Dd(e){const[,t,s,n,i,r,o,a]=e;return[Jc(t,i,n,s,r,o,a),ae.utcInstance]}function F_(e){const[,t,s,n,i,r,o,a]=e;return[Jc(t,a,s,n,i,r,o),ae.utcInstance]}const j_=xi(__,Yc),B_=xi(w_,Yc),W_=xi(x_,Yc),U_=xi(Xm),tp=Si(D_,Ti,Lr,Rr),z_=Si(S_,Ti,Lr,Rr),H_=Si(k_,Ti,Lr,Rr),V_=Si(Ti,Lr,Rr);function q_(e){return ki(e,[j_,tp],[B_,z_],[W_,H_],[U_,V_])}function Y_(e){return ki(L_(e),[I_,P_])}function J_(e){return ki(e,[R_,Dd],[$_,Dd],[N_,F_])}function K_(e){return ki(e,[M_,E_])}const G_=Si(Ti);function Z_(e){return ki(e,[C_,G_])}const X_=xi(T_,O_),Q_=xi(Qm),tw=Si(Ti,Lr,Rr);function ew(e){return ki(e,[X_,tp],[Q_,tw])}const Cd="Invalid Duration",ep={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},sw={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...ep},Ee=146097/400,Nn=146097/4800,nw={years:{quarters:4,months:12,weeks:Ee/7,days:Ee,hours:Ee*24,minutes:Ee*24*60,seconds:Ee*24*60*60,milliseconds:Ee*24*60*60*1e3},quarters:{months:3,weeks:Ee/28,days:Ee/4,hours:Ee*24/4,minutes:Ee*24*60/4,seconds:Ee*24*60*60/4,milliseconds:Ee*24*60*60*1e3/4},months:{weeks:Nn/7,days:Nn,hours:Nn*24,minutes:Nn*24*60,seconds:Nn*24*60*60,milliseconds:Nn*24*60*60*1e3},...ep},pn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],iw=pn.slice(0).reverse();function ds(e,t,s=!1){const n={values:s?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new gt(n)}function sp(e,t){let s=t.milliseconds??0;for(const n of iw.slice(1))t[n]&&(s+=t[n]*e[n].milliseconds);return s}function Md(e,t){const s=sp(e,t)<0?-1:1;pn.reduceRight((n,i)=>{if(Z(t[i]))return n;if(n){const r=t[n]*s,o=e[i][n],a=Math.floor(r/o);t[i]+=a*s,t[n]-=a*o*s}return i},null),pn.reduce((n,i)=>{if(Z(t[i]))return n;if(n){const r=t[n]%1;t[n]-=r,t[i]+=r*e[n][i]}return i},null)}function Ed(e){const t={};for(const[s,n]of Object.entries(e))n!==0&&(t[s]=n);return t}class gt{constructor(t){const s=t.conversionAccuracy==="longterm"||!1;let n=s?nw:sw;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||wt.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,s){return gt.fromObject({milliseconds:t},s)}static fromObject(t,s={}){if(t==null||typeof t!="object")throw new Xt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new gt({values:zo(t,gt.normalizeUnit),loc:wt.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(t){if(qs(t))return gt.fromMillis(t);if(gt.isDuration(t))return t;if(typeof t=="object")return gt.fromObject(t);throw new Xt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,s){const[n]=K_(t);return n?gt.fromObject(n,s):gt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,s){const[n]=Z_(t);return n?gt.fromObject(n,s):gt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,s=null){if(!t)throw new Xt("need to specify a reason the Duration is invalid");const n=t instanceof ze?t:new ze(t,s);if(Rt.throwOnInvalid)throw new Ev(n);return new gt({invalid:n})}static normalizeUnit(t){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!s)throw new um(t);return s}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?te.create(this.loc,n).formatDurationFromString(this,t):Cd}toHuman(t={}){if(!this.isValid)return Cd;const s=t.showZeros!==!1,n=pn.map(i=>{const r=this.values[i];return Z(r)||r===0&&!s?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Vc(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},C.fromMillis(s,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?sp(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const s=gt.fromDurationLike(t),n={};for(const i of pn)(mi(s.values,i)||mi(this.values,i))&&(n[i]=s.get(i)+this.get(i));return ds(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const s=gt.fromDurationLike(t);return this.plus(s.negate())}mapUnits(t){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=Wm(t(this.values[n],n));return ds(this,{values:s},!0)}get(t){return this[gt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const s={...this.values,...zo(t,gt.normalizeUnit)};return ds(this,{values:s})}reconfigure({locale:t,numberingSystem:s,conversionAccuracy:n,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:s}),matrix:i,conversionAccuracy:n};return ds(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Md(this.matrix,t),ds(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Ed(this.normalize().shiftToAll().toObject());return ds(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>gt.normalizeUnit(o));const s={},n={},i=this.toObject();let r;for(const o of pn)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in n)a+=this.matrix[c][o]*n[c],n[c]=0;qs(i[o])&&(a+=i[o]);const l=Math.trunc(a);s[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else qs(i[o])&&(n[o]=i[o]);for(const o in n)n[o]!==0&&(s[r]+=o===r?n[o]:n[o]/this.matrix[r][o]);return Md(this.matrix,s),ds(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=this.values[s]===0?0:-this.values[s];return ds(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=Ed(this.values);return ds(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function s(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of pn)if(!s(this.values[n],t.values[n]))return!1;return!0}}const Fn="Invalid Interval";function rw(e,t){return!e||!e.isValid?Lt.invalid("missing or invalid start"):!t||!t.isValid?Lt.invalid("missing or invalid end"):t<e?Lt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Lt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,s=null){if(!t)throw new Xt("need to specify a reason the Interval is invalid");const n=t instanceof ze?t:new ze(t,s);if(Rt.throwOnInvalid)throw new Mv(n);return new Lt({invalid:n})}static fromDateTimes(t,s){const n=$i(t),i=$i(s),r=rw(n,i);return r??new Lt({start:n,end:i})}static after(t,s){const n=gt.fromDurationLike(s),i=$i(t);return Lt.fromDateTimes(i,i.plus(n))}static before(t,s){const n=gt.fromDurationLike(s),i=$i(t);return Lt.fromDateTimes(i.minus(n),i)}static fromISO(t,s){const[n,i]=(t||"").split("/",2);if(n&&i){let r,o;try{r=C.fromISO(n,s),o=r.isValid}catch{o=!1}let a,l;try{a=C.fromISO(i,s),l=a.isValid}catch{l=!1}if(o&&l)return Lt.fromDateTimes(r,a);if(o){const c=gt.fromISO(i,s);if(c.isValid)return Lt.after(r,c)}else if(l){const c=gt.fromISO(n,s);if(c.isValid)return Lt.before(a,c)}}return Lt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(t,s);let i;return s?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,s),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:s}={}){return this.isValid?Lt.fromDateTimes(t||this.s,s||this.e):this}splitAt(...t){if(!this.isValid)return[];const s=t.map($i).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:i}=this,r=0;for(;i<this.e;){const o=s[r]||this.e,a=+o>+this.e?this.e:o;n.push(Lt.fromDateTimes(i,a)),i=a,r+=1}return n}splitBy(t){const s=gt.fromDurationLike(t);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,i=1,r;const o=[];for(;n<this.e;){const a=this.start.plus(s.mapUnits(l=>l*i));r=+a>+this.e?this.e:a,o.push(Lt.fromDateTimes(n,r)),n=r,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const s=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return s>=n?null:Lt.fromDateTimes(s,n)}union(t){if(!this.isValid)return this;const s=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Lt.fromDateTimes(s,n)}static merge(t){const[s,n]=t.sort((i,r)=>i.s-r.s).reduce(([i,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[i,r.union(o)]:[i.concat([r]),o]:[i,o],[[],null]);return n&&s.push(n),s}static xor(t){let s=null,n=0;const i=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?s=l.time:(s&&+s!=+l.time&&i.push(Lt.fromDateTimes(s,l.time)),s=null);return Lt.merge(i)}difference(...t){return Lt.xor([this].concat(t)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Fn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Bo,s={}){return this.isValid?te.create(this.s.loc.clone(s),t).formatInterval(this):Fn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Fn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Fn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Fn}toFormat(t,{separator:s="  "}={}){return this.isValid?`${this.s.toFormat(t)}${s}${this.e.toFormat(t)}`:Fn}toDuration(t,s){return this.isValid?this.e.diff(this.s,t,s):gt.invalid(this.invalidReason)}mapEndpoints(t){return Lt.fromDateTimes(t(this.s),t(this.e))}}class Zr{static hasDST(t=Rt.defaultZone){const s=C.now().setZone(t).set({month:12});return!t.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(t){return Ss.isValidZone(t)}static normalizeZone(t){return js(t,Rt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:s=null}={}){return(s||wt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:s=null}={}){return(s||wt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:s=null}={}){return(s||wt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||wt.create(s,n,r)).months(t)}static monthsFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:r="gregory"}={}){return(i||wt.create(s,n,r)).months(t,!0)}static weekdays(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||wt.create(s,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||wt.create(s,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return wt.create(t).meridiems()}static eras(t="short",{locale:s=null}={}){return wt.create(s,null,"gregory").eras(t)}static features(){return{relative:Fm(),localeWeek:jm()}}}function Ad(e,t){const s=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(t)-s(e);return Math.floor(gt.fromMillis(n).as("days"))}function ow(e,t,s){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Ad(l,c);return(u-u%7)/7}],["days",Ad]],i={},r=e;let o,a;for(const[l,c]of n)s.indexOf(l)>=0&&(o=l,i[l]=c(e,t),a=r.plus(i),a>t?(i[l]--,e=r.plus(i),e>t&&(a=e,i[l]--,e=r.plus(i))):e=a);return[e,i,a,o]}function aw(e,t,s,n){let[i,r,o,a]=ow(e,t,s);const l=t-i,c=s.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(r[a]=(r[a]||0)+l/(o-i)));const u=gt.fromObject(r,n);return c.length>0?gt.fromMillis(l,n).shiftTo(...c).plus(u):u}const lw="missing Intl.DateTimeFormat.formatToParts support";function bt(e,t=s=>s){return{regex:e,deser:([s])=>t(Xv(s))}}const cw="",np=`[ ${cw}]`,ip=new RegExp(np,"g");function uw(e){return e.replace(/\./g,"\\.?").replace(ip,np)}function Id(e){return e.replace(/\./g,"").replace(ip," ").toLowerCase()}function Be(e,t){return e===null?null:{regex:RegExp(e.map(uw).join("|")),deser:([s])=>e.findIndex(n=>Id(s)===Id(n))+t}}function Pd(e,t){return{regex:e,deser:([,s,n])=>ma(s,n),groups:t}}function Xr(e){return{regex:e,deser:([t])=>t}}function dw(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hw(e,t){const s=je(t),n=je(t,"{2}"),i=je(t,"{3}"),r=je(t,"{4}"),o=je(t,"{6}"),a=je(t,"{1,2}"),l=je(t,"{1,3}"),c=je(t,"{1,6}"),u=je(t,"{1,9}"),d=je(t,"{2,4}"),h=je(t,"{4,6}"),f=p=>({regex:RegExp(dw(p.val)),deser:([y])=>y,literal:!0}),g=(p=>{if(e.literal)return f(p);switch(p.val){case"G":return Be(t.eras("short"),0);case"GG":return Be(t.eras("long"),0);case"y":return bt(c);case"yy":return bt(d,Kl);case"yyyy":return bt(r);case"yyyyy":return bt(h);case"yyyyyy":return bt(o);case"M":return bt(a);case"MM":return bt(n);case"MMM":return Be(t.months("short",!0),1);case"MMMM":return Be(t.months("long",!0),1);case"L":return bt(a);case"LL":return bt(n);case"LLL":return Be(t.months("short",!1),1);case"LLLL":return Be(t.months("long",!1),1);case"d":return bt(a);case"dd":return bt(n);case"o":return bt(l);case"ooo":return bt(i);case"HH":return bt(n);case"H":return bt(a);case"hh":return bt(n);case"h":return bt(a);case"mm":return bt(n);case"m":return bt(a);case"q":return bt(a);case"qq":return bt(n);case"s":return bt(a);case"ss":return bt(n);case"S":return bt(l);case"SSS":return bt(i);case"u":return Xr(u);case"uu":return Xr(a);case"uuu":return bt(s);case"a":return Be(t.meridiems(),0);case"kkkk":return bt(r);case"kk":return bt(d,Kl);case"W":return bt(a);case"WW":return bt(n);case"E":case"c":return bt(s);case"EEE":return Be(t.weekdays("short",!1),1);case"EEEE":return Be(t.weekdays("long",!1),1);case"ccc":return Be(t.weekdays("short",!0),1);case"cccc":return Be(t.weekdays("long",!0),1);case"Z":case"ZZ":return Pd(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Pd(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return Xr(/[a-z_+-/]{1,256}?/i);case" ":return Xr(/[^\S\n\r]/);default:return f(p)}})(e)||{invalidReason:lw};return g.token=e,g}const fw={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function gw(e,t,s){const{type:n,value:i}=e;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const r=t[n];let o=n;n==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=s.hour12?"hour12":"hour24");let a=fw[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function mw(e){return[`^${e.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,e]}function pw(e,t,s){const n=e.match(t);if(n){const i={};let r=1;for(const o in s)if(mi(s,o)){const a=s[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(r,r+l))),r+=l}return[n,i]}else return[n,{}]}function yw(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return Z(e.z)||(s=Ss.create(e.z)),Z(e.Z)||(s||(s=new ae(e.Z)),n=e.Z),Z(e.q)||(e.M=(e.q-1)*3+1),Z(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Z(e.u)||(e.S=Hc(e.u)),[Object.keys(e).reduce((r,o)=>{const a=t(o);return a&&(r[a]=e[o]),r},{}),s,n]}let Xa=null;function bw(){return Xa||(Xa=C.fromMillis(1555555555555)),Xa}function vw(e,t){if(e.literal)return e;const s=te.macroTokenToFormatOpts(e.val),n=lp(s,t);return n==null||n.includes(void 0)?e:n}function rp(e,t){return Array.prototype.concat(...e.map(s=>vw(s,t)))}class op{constructor(t,s){if(this.locale=t,this.format=s,this.tokens=rp(te.parseFormat(s),t),this.units=this.tokens.map(n=>hw(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=mw(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[s,n]=pw(t,this.regex,this.handlers),[i,r,o]=n?yw(n):[null,null,void 0];if(mi(n,"a")&&mi(n,"H"))throw new ni("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:i,zone:r,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ap(e,t,s){return new op(e,s).explainFromTokens(t)}function _w(e,t,s){const{result:n,zone:i,specificOffset:r,invalidReason:o}=ap(e,t,s);return[n,i,r,o]}function lp(e,t){if(!e)return null;const n=te.create(t,e).dtFormatter(bw()),i=n.formatToParts(),r=n.resolvedOptions();return i.map(o=>gw(o,e,r))}const Qa="Invalid DateTime",Ld=864e13;function Ji(e){return new ze("unsupported zone",`the zone "${e.name}" is not supported`)}function tl(e){return e.weekData===null&&(e.weekData=Wo(e.c)),e.weekData}function el(e){return e.localWeekData===null&&(e.localWeekData=Wo(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function on(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new C({...s,...t,old:s})}function cp(e,t,s){let n=e-t*60*1e3;const i=s.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const r=s.offset(n);return i===r?[n,i]:[e-Math.min(i,r)*60*1e3,Math.max(i,r)]}function Qr(e,t){e+=t*60*1e3;const s=new Date(e);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function Oo(e,t,s){return cp(ga(e),t,s)}function Rd(e,t){const s=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:n,month:i,day:Math.min(e.c.day,Uo(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=gt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ga(r);let[l,c]=cp(a,s,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function jn(e,t,s,n,i,r){const{setZone:o,zone:a}=s;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=C.fromObject(e,{...s,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return C.invalid(new ze("unparsable",`the input "${i}" can't be parsed as ${n}`))}function to(e,t,s=!0){return e.isValid?te.create(wt.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(e,t):null}function sl(e,t,s){const n=e.c.year>9999||e.c.year<0;let i="";if(n&&e.c.year>=0&&(i+="+"),i+=Ft(e.c.year,n?6:4),s==="year")return i;if(t){if(i+="-",i+=Ft(e.c.month),s==="month")return i;i+="-"}else if(i+=Ft(e.c.month),s==="month")return i;return i+=Ft(e.c.day),i}function $d(e,t,s,n,i,r,o){let a=!s||e.c.millisecond!==0||e.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=Ft(e.c.hour),o==="hour")break;if(t){if(l+=":",l+=Ft(e.c.minute),o==="minute")break;a&&(l+=":",l+=Ft(e.c.second))}else{if(l+=Ft(e.c.minute),o==="minute")break;a&&(l+=Ft(e.c.second))}if(o==="second")break;a&&(!n||e.c.millisecond!==0)&&(l+=".",l+=Ft(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&e.offset===0&&!r?l+="Z":e.o<0?(l+="-",l+=Ft(Math.trunc(-e.o/60)),l+=":",l+=Ft(Math.trunc(-e.o%60))):(l+="+",l+=Ft(Math.trunc(e.o/60)),l+=":",l+=Ft(Math.trunc(e.o%60)))),r&&(l+="["+e.zone.ianaName+"]"),l}const up={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},ww={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},xw={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Do=["year","month","day","hour","minute","second","millisecond"],Sw=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],kw=["year","ordinal","hour","minute","second","millisecond"];function Co(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new um(e);return t}function Nd(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Co(e)}}function Tw(e){if(Ki===void 0&&(Ki=Rt.now()),e.type!=="iana")return e.offset(Ki);const t=e.name;let s=Gl.get(t);return s===void 0&&(s=e.offset(Ki),Gl.set(t,s)),s}function Fd(e,t){const s=js(t.zone,Rt.defaultZone);if(!s.isValid)return C.invalid(Ji(s));const n=wt.fromObject(t);let i,r;if(Z(e.year))i=Rt.now();else{for(const l of Do)Z(e[l])&&(e[l]=up[l]);const o=$m(e)||Nm(e);if(o)return C.invalid(o);const a=Tw(s);[i,r]=Oo(e,a,s)}return new C({ts:i,zone:s,loc:n,o:r})}function jd(e,t,s){const n=Z(s.round)?!0:s.round,i=Z(s.rounding)?"trunc":s.rounding,r=(a,l)=>(a=Vc(a,n||s.calendary?0:2,s.calendary?"round":i),t.loc.clone(s).relFormatter(s).format(a,l)),o=a=>s.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a);if(s.unit)return r(o(s.unit),s.unit);for(const a of s.units){const l=o(a);if(Math.abs(l)>=1)return r(l,a)}return r(e>t?-0:0,s.units[s.units.length-1])}function Bd(e){let t={},s;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],s=Array.from(e).slice(0,e.length-1)):s=Array.from(e),[t,s]}let Ki;const Gl=new Map;class C{constructor(t){const s=t.zone||Rt.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new ze("invalid input"):null)||(s.isValid?null:Ji(s));this.ts=Z(t.ts)?Rt.now():t.ts;let i=null,r=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(s))[i,r]=[t.old.c,t.old.o];else{const a=qs(t.o)&&!t.old?t.o:s.offset(this.ts);i=Qr(this.ts,a),n=Number.isNaN(i.year)?new ze("invalid input"):null,i=n?null:i,r=n?null:a}this._zone=s,this.loc=t.loc||wt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=r,this.isLuxonDateTime=!0}static now(){return new C({})}static local(){const[t,s]=Bd(arguments),[n,i,r,o,a,l,c]=s;return Fd({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,s]=Bd(arguments),[n,i,r,o,a,l,c]=s;return t.zone=ae.utcInstance,Fd({year:n,month:i,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,s={}){const n=n_(t)?t.valueOf():NaN;if(Number.isNaN(n))return C.invalid("invalid input");const i=js(s.zone,Rt.defaultZone);return i.isValid?new C({ts:n,zone:i,loc:wt.fromObject(s)}):C.invalid(Ji(i))}static fromMillis(t,s={}){if(qs(t))return t<-Ld||t>Ld?C.invalid("Timestamp out of range"):new C({ts:t,zone:js(s.zone,Rt.defaultZone),loc:wt.fromObject(s)});throw new Xt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,s={}){if(qs(t))return new C({ts:t*1e3,zone:js(s.zone,Rt.defaultZone),loc:wt.fromObject(s)});throw new Xt("fromSeconds requires a numerical input")}static fromObject(t,s={}){t=t||{};const n=js(s.zone,Rt.defaultZone);if(!n.isValid)return C.invalid(Ji(n));const i=wt.fromObject(s),r=zo(t,Nd),{minDaysInFirstWeek:o,startOfWeek:a}=Sd(r,i),l=Rt.now(),c=Z(s.specificOffset)?n.offset(l):s.specificOffset,u=!Z(r.ordinal),d=!Z(r.year),h=!Z(r.month)||!Z(r.day),f=d||h,m=r.weekYear||r.weekNumber;if((f||u)&&m)throw new ni("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new ni("Can't mix ordinal dates with month/day");const g=m||r.weekday&&!f;let p,y,_=Qr(l,c);g?(p=Sw,y=ww,_=Wo(_,o,a)):u?(p=kw,y=xw,_=Za(_)):(p=Do,y=up);let b=!1;for(const V of p){const P=r[V];Z(P)?b?r[V]=y[V]:r[V]=_[V]:b=!0}const x=g?t_(r,o,a):u?e_(r):$m(r),k=x||Nm(r);if(k)return C.invalid(k);const A=g?wd(r,o,a):u?xd(r):r,[E,L]=Oo(A,c,n),I=new C({ts:E,zone:n,o:L,loc:i});return r.weekday&&f&&t.weekday!==I.weekday?C.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${I.toISO()}`):I.isValid?I:C.invalid(I.invalid)}static fromISO(t,s={}){const[n,i]=q_(t);return jn(n,i,s,"ISO 8601",t)}static fromRFC2822(t,s={}){const[n,i]=Y_(t);return jn(n,i,s,"RFC 2822",t)}static fromHTTP(t,s={}){const[n,i]=J_(t);return jn(n,i,s,"HTTP",s)}static fromFormat(t,s,n={}){if(Z(t)||Z(s))throw new Xt("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:r=null}=n,o=wt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=_w(o,t,s);return u?C.invalid(u):jn(a,l,n,`format ${s}`,t,c)}static fromString(t,s,n={}){return C.fromFormat(t,s,n)}static fromSQL(t,s={}){const[n,i]=ew(t);return jn(n,i,s,"SQL",t)}static invalid(t,s=null){if(!t)throw new Xt("need to specify a reason the DateTime is invalid");const n=t instanceof ze?t:new ze(t,s);if(Rt.throwOnInvalid)throw new Cv(n);return new C({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,s={}){const n=lp(t,wt.fromObject(s));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,s={}){return rp(te.parseFormat(t),wt.fromObject(s)).map(i=>i.val).join("")}static resetCache(){Ki=void 0,Gl.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?tl(this).weekYear:NaN}get weekNumber(){return this.isValid?tl(this).weekNumber:NaN}get weekday(){return this.isValid?tl(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?el(this).weekday:NaN}get localWeekNumber(){return this.isValid?el(this).weekNumber:NaN}get localWeekYear(){return this.isValid?el(this).weekYear:NaN}get ordinal(){return this.isValid?Za(this.c).ordinal:NaN}get monthShort(){return this.isValid?Zr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Zr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Zr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Zr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,s=6e4,n=ga(this.c),i=this.zone.offset(n-t),r=this.zone.offset(n+t),o=this.zone.offset(n-i*s),a=this.zone.offset(n-r*s);if(o===a)return[this];const l=n-o*s,c=n-a*s,u=Qr(l,o),d=Qr(c,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[on(this,{ts:l}),on(this,{ts:c})]:[this]}get isInLeapYear(){return Pr(this.year)}get daysInMonth(){return Uo(this.year,this.month)}get daysInYear(){return this.isValid?di(this.year):NaN}get weeksInWeekYear(){return this.isValid?xr(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?xr(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:s,numberingSystem:n,calendar:i}=te.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:i}}toUTC(t=0,s={}){return this.setZone(ae.instance(t),s)}toLocal(){return this.setZone(Rt.defaultZone)}setZone(t,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(t=js(t,Rt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(s||n){const r=t.offset(this.ts),o=this.toObject();[i]=Oo(o,r,t)}return on(this,{ts:i,zone:t})}else return C.invalid(Ji(t))}reconfigure({locale:t,numberingSystem:s,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:s,outputCalendar:n});return on(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const s=zo(t,Nd),{minDaysInFirstWeek:n,startOfWeek:i}=Sd(s,this.loc),r=!Z(s.weekYear)||!Z(s.weekNumber)||!Z(s.weekday),o=!Z(s.ordinal),a=!Z(s.year),l=!Z(s.month)||!Z(s.day),c=a||l,u=s.weekYear||s.weekNumber;if((c||o)&&u)throw new ni("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new ni("Can't mix ordinal dates with month/day");let d;r?d=wd({...Wo(this.c,n,i),...s},n,i):Z(s.ordinal)?(d={...this.toObject(),...s},Z(s.day)&&(d.day=Math.min(Uo(d.year,d.month),d.day))):d=xd({...Za(this.c),...s});const[h,f]=Oo(d,this.o,this.zone);return on(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const s=gt.fromDurationLike(t);return on(this,Rd(this,s))}minus(t){if(!this.isValid)return this;const s=gt.fromDurationLike(t).negate();return on(this,Rd(this,s))}startOf(t,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},i=gt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(s){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(n.weekNumber=this.weekNumber-1),n.weekday=r}else n.weekday=1;if(i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t,s){return this.isValid?this.plus({[t]:1}).startOf(t,s).minus(1):this}toFormat(t,s={}){return this.isValid?te.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,t):Qa}toLocaleString(t=Bo,s={}){return this.isValid?te.create(this.loc.clone(s),t).formatDateTime(this):Qa}toLocaleParts(t={}){return this.isValid?te.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:r=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Co(o);const a=t==="extended";let l=sl(this,a,o);return Do.indexOf(o)>=3&&(l+="T"),l+=$d(this,a,s,n,i,r,o),l}toISODate({format:t="extended",precision:s="day"}={}){return this.isValid?sl(this,t==="extended",Co(s)):null}toISOWeekDate(){return to(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:r=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Co(a),(i&&Do.indexOf(a)>=3?"T":"")+$d(this,o==="extended",s,t,n,r,a)):null}toRFC2822(){return to(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return to(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?sl(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(s||t)&&(n&&(i+=" "),s?i+="z":t&&(i+="ZZ")),to(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Qa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const s={...this.c};return t.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,s="milliseconds",n={}){if(!this.isValid||!t.isValid)return gt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=i_(s).map(gt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=aw(a,l,r,i);return o?c.negate():c}diffNow(t="milliseconds",s={}){return this.diff(C.now(),t,s)}until(t){return this.isValid?Lt.fromDateTimes(this,t):this}hasSame(t,s,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(s,n)<=i&&i<=r.endOf(s,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const s=t.base||C.fromObject({},{zone:this.zone}),n=t.padding?this<s?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(i=t.unit,r=void 0),jd(s,this.plus(n),{...t,numeric:"always",units:i,unit:r})}toRelativeCalendar(t={}){return this.isValid?jd(t.base||C.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(C.isDateTime))throw new Xt("min requires all arguments be DateTimes");return kd(t,s=>s.valueOf(),Math.min)}static max(...t){if(!t.every(C.isDateTime))throw new Xt("max requires all arguments be DateTimes");return kd(t,s=>s.valueOf(),Math.max)}static fromFormatExplain(t,s,n={}){const{locale:i=null,numberingSystem:r=null}=n,o=wt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0});return ap(o,t,s)}static fromStringExplain(t,s,n={}){return C.fromFormatExplain(t,s,n)}static buildFormatParser(t,s={}){const{locale:n=null,numberingSystem:i=null}=s,r=wt.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new op(r,t)}static fromFormatParser(t,s,n={}){if(Z(t)||Z(s))throw new Xt("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:r=null}=n,o=wt.fromOpts({locale:i,numberingSystem:r,defaultToEN:!0});if(!o.equals(s.locale))throw new Xt(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${s.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=s.explainFromTokens(t);return u?C.invalid(u):jn(a,l,n,`format ${s.format}`,t,c)}static get DATE_SHORT(){return Bo}static get DATE_MED(){return dm}static get DATE_MED_WITH_WEEKDAY(){return Av}static get DATE_FULL(){return hm}static get DATE_HUGE(){return fm}static get TIME_SIMPLE(){return gm}static get TIME_WITH_SECONDS(){return mm}static get TIME_WITH_SHORT_OFFSET(){return pm}static get TIME_WITH_LONG_OFFSET(){return ym}static get TIME_24_SIMPLE(){return bm}static get TIME_24_WITH_SECONDS(){return vm}static get TIME_24_WITH_SHORT_OFFSET(){return _m}static get TIME_24_WITH_LONG_OFFSET(){return wm}static get DATETIME_SHORT(){return xm}static get DATETIME_SHORT_WITH_SECONDS(){return Sm}static get DATETIME_MED(){return km}static get DATETIME_MED_WITH_SECONDS(){return Tm}static get DATETIME_MED_WITH_WEEKDAY(){return Iv}static get DATETIME_FULL(){return Om}static get DATETIME_FULL_WITH_SECONDS(){return Dm}static get DATETIME_HUGE(){return Cm}static get DATETIME_HUGE_WITH_SECONDS(){return Mm}}function $i(e){if(C.isDateTime(e))return e;if(e&&e.valueOf&&qs(e.valueOf()))return C.fromJSDate(e);if(e&&typeof e=="object")return C.fromObject(e);throw new Xt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function En(e,{withMillis:t=!1}={}){const s=e instanceof Date?e:new Date(e);if(Number.isNaN(s.getTime()))throw new Error(`sydneyDayRangeUtcISO: invalid date (${String(e)})`);const n=C.fromJSDate(s,{zone:"Australia/Sydney"}).startOf("day"),i=n.plus({days:1}),r=t?{}:{suppressMilliseconds:!0};return{startUtcISO:n.toUTC().toISO(r),endUtcISO:i.toUTC().toISO(r)}}function Ow(e){return C.fromJSDate(Sn(e)).setZone("Australia/Sydney").toFormat("d LLL yyyy, h:mma").toLowerCase()}function dp(){return C.local().setZone("Australia/Sydney").startOf("day").toJSDate()}function lt(e){return e instanceof Date?e:typeof e=="number"?new Date(e):typeof e=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(e)?C.fromISO(e):C.fromISO(e,{zone:"Australia/Sydney"})).toJSDate():null}function Dw(e){return C.fromJSDate(Sn(e)).setZone("Australia/Sydney").toFormat("cccc d LLLL yyyy")}function Sr(e){return C.fromJSDate(Sn(e)).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function le(e){const t=C.fromJSDate(Sn(e)).setZone("Australia/Sydney").startOf("day"),s=t.plus({days:1});return{startOfDay:t.toJSDate(),endOfDay:s.toJSDate()}}function eo(e,t){const s=C.fromJSDate(Sn(e)).setZone("Australia/Sydney"),n=C.fromJSDate(Sn(t)).setZone("Australia/Sydney");return s.hasSame(n,"day")}function lr(e){return Ho(e).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function Zl(e){const t=Ho(e).setZone("Australia/Sydney");return`${t.toFormat("d LLL")}, ${t.toFormat("h:mma").toLowerCase()}`}function Cw(e,t,s){const n=Ho(e),i=t?Ho(t):C.fromJSDate(Sn(s)).setZone("Australia/Sydney").startOf("day").plus({days:1}),r=Math.max(0,i.toMillis()-n.toMillis());return Math.round(r/6e4)}function Bn(e){const t=Math.round(e||0),s=Math.floor(t/60),n=t%60;return s>0&&n>0?`${s}h${n}m`:s>0?`${s}h`:`${n}m`}function Mw(e){const t=Math.max(0,Math.round(e||0)),s=Math.floor(t/60),n=t%60;return s>0?`${s}h ${n}m`:`${n}m`}function Sn(e){if(e instanceof Date)return e;if(typeof e=="number")return new Date(e);if(typeof e=="string"){const t=C.fromISO(e);return t.isValid?t.toJSDate():new Date(e)}return new Date(NaN)}function Ho(e){return e instanceof Date?C.fromJSDate(e):typeof e=="number"?C.fromMillis(e):typeof e=="string"?/Z|[+\-]\d{2}:?\d{2}$/.test(e)?C.fromISO(e):C.fromISO(e,{zone:"utc"}):C.invalid("Unknown input")}const jt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Ew={class:"date-header"},Aw={class:"date-heading"},Iw={class:"date-nav"},Pw=["value"],Lw={__name:"DateHeader",props:{selectedDate:{type:Date,default:()=>dp()}},emits:["update:selectedDate"],setup(e,{emit:t}){const s=e,n=t,i=tt({get:()=>s.selectedDate,set:u=>n("update:selectedDate",u)}),r=tt(()=>Dw(i.value)),o=tt(()=>C.fromJSDate(i.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function a(){const u=C.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.minus({days:1}).startOf("day").toJSDate()}function l(){const u=C.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.plus({days:1}).startOf("day").toJSDate()}function c(u){const d=u.target.value;d&&(i.value=C.fromISO(d,{zone:"Australia/Sydney"}).startOf("day").toJSDate())}return(u,d)=>(T(),D("header",Ew,[v("h1",Aw,N(r.value),1),v("div",Iw,[v("button",{class:"icon-btn",type:"button",onClick:a,"aria-label":"Previous day",title:"Previous day"},d[0]||(d[0]=[v("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[v("path",{d:"M15 6l-6 6 6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),v("input",{class:"date-input",type:"date",value:o.value,onInput:c},null,40,Pw),v("button",{class:"icon-btn",type:"button",onClick:l,"aria-label":"Next day",title:"Next day"},d[1]||(d[1]=[v("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[v("path",{d:"M9 6l6 6-6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]))}},Rw=jt(Lw,[["__scopeId","data-v-f392a69f"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $r(e){return e+.5|0}const Ws=(e,t,s)=>Math.max(Math.min(e,s),t);function Gi(e){return Ws($r(e*2.55),0,255)}function Ys(e){return Ws($r(e*255),0,255)}function bs(e){return Ws($r(e/2.55)/100,0,1)}function Wd(e){return Ws($r(e*100),0,100)}const Ae={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xl=[..."0123456789ABCDEF"],$w=e=>Xl[e&15],Nw=e=>Xl[(e&240)>>4]+Xl[e&15],so=e=>(e&240)>>4===(e&15),Fw=e=>so(e.r)&&so(e.g)&&so(e.b)&&so(e.a);function jw(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Ae[e[1]]*17,g:255&Ae[e[2]]*17,b:255&Ae[e[3]]*17,a:t===5?Ae[e[4]]*17:255}:(t===7||t===9)&&(s={r:Ae[e[1]]<<4|Ae[e[2]],g:Ae[e[3]]<<4|Ae[e[4]],b:Ae[e[5]]<<4|Ae[e[6]],a:t===9?Ae[e[7]]<<4|Ae[e[8]]:255})),s}const Bw=(e,t)=>e<255?t(e):"";function Ww(e){var t=Fw(e)?$w:Nw;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Bw(e.a,t):void 0}const Uw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hp(e,t,s){const n=t*Math.min(s,1-s),i=(r,o=(r+e/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function zw(e,t,s){const n=(i,r=(i+e/60)%6)=>s-s*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Hw(e,t,s){const n=hp(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function Vw(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function Kc(e){const s=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(s,n,i),o=Math.min(s,n,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=Vw(s,n,i,u,r),l=l*60+.5),[l|0,c||0,a]}function Gc(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Ys)}function Zc(e,t,s){return Gc(hp,e,t,s)}function qw(e,t,s){return Gc(Hw,e,t,s)}function Yw(e,t,s){return Gc(zw,e,t,s)}function fp(e){return(e%360+360)%360}function Jw(e){const t=Uw.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?Gi(+t[5]):Ys(+t[5]));const i=fp(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=qw(i,r,o):t[1]==="hsv"?n=Yw(i,r,o):n=Zc(i,r,o),{r:n[0],g:n[1],b:n[2],a:s}}function Kw(e,t){var s=Kc(e);s[0]=fp(s[0]+t),s=Zc(s),e.r=s[0],e.g=s[1],e.b=s[2]}function Gw(e){if(!e)return;const t=Kc(e),s=t[0],n=Wd(t[1]),i=Wd(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${bs(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Ud={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Zw(){const e={},t=Object.keys(zd),s=Object.keys(Ud);let n,i,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],i=0;i<s.length;i++)r=s[i],a=a.replace(r,Ud[r]);r=parseInt(zd[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let no;function Xw(e){no||(no=Zw(),no.transparent=[0,0,0,0]);const t=no[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Qw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tx(e){const t=Qw.exec(e);let s=255,n,i,r;if(t){if(t[7]!==n){const o=+t[7];s=t[8]?Gi(o):Ws(o*255,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Gi(n):Ws(n,0,255)),i=255&(t[4]?Gi(i):Ws(i,0,255)),r=255&(t[6]?Gi(r):Ws(r,0,255)),{r:n,g:i,b:r,a:s}}}function ex(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${bs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const nl=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Wn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function sx(e,t,s){const n=Wn(bs(e.r)),i=Wn(bs(e.g)),r=Wn(bs(e.b));return{r:Ys(nl(n+s*(Wn(bs(t.r))-n))),g:Ys(nl(i+s*(Wn(bs(t.g))-i))),b:Ys(nl(r+s*(Wn(bs(t.b))-r))),a:e.a+s*(t.a-e.a)}}function io(e,t,s){if(e){let n=Kc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=Zc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function gp(e,t){return e&&Object.assign(t||{},e)}function Hd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ys(e[3]))):(t=gp(e,{r:0,g:0,b:0,a:1}),t.a=Ys(t.a)),t}function nx(e){return e.charAt(0)==="r"?tx(e):Jw(e)}class kr{constructor(t){if(t instanceof kr)return t;const s=typeof t;let n;s==="object"?n=Hd(t):s==="string"&&(n=jw(t)||Xw(t)||nx(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=gp(this._rgb);return t&&(t.a=bs(t.a)),t}set rgb(t){this._rgb=Hd(t)}rgbString(){return this._valid?ex(this._rgb):void 0}hexString(){return this._valid?Ww(this._rgb):void 0}hslString(){return this._valid?Gw(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let r;const o=s===r?.5:s,a=2*o-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=sx(this._rgb,t._rgb,s)),this}clone(){return new kr(this.rgb)}alpha(t){return this._rgb.a=Ys(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=$r(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return io(this._rgb,2,t),this}darken(t){return io(this._rgb,2,-t),this}saturate(t){return io(this._rgb,1,t),this}desaturate(t){return io(this._rgb,1,-t),this}rotate(t){return Kw(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function hs(){}const ix=(()=>{let e=0;return()=>e++})();function kt(e){return e==null}function It(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function nt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function qt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ze(e,t){return qt(e)?e:t}function et(e,t){return typeof e>"u"?t:e}const rx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,mp=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ot(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function St(e,t,s,n){let i,r,o;if(It(e))for(r=e.length,i=0;i<r;i++)t.call(s,e[i],i);else if(nt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(s,e[o[i]],o[i])}function Vo(e,t){let s,n,i,r;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],r=t[s],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function qo(e){if(It(e))return e.map(qo);if(nt(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=qo(e[s[i]]);return t}return e}function pp(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ox(e,t,s,n){if(!pp(e))return;const i=t[e],r=s[e];nt(i)&&nt(r)?Tr(i,r,n):t[e]=qo(r)}function Tr(e,t,s){const n=It(t)?t:[t],i=n.length;if(!nt(e))return e;s=s||{};const r=s.merger||ox;let o;for(let a=0;a<i;++a){if(o=n[a],!nt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,s)}return e}function cr(e,t){return Tr(e,t,{merger:ax})}function ax(e,t,s){if(!pp(e))return;const n=t[e],i=s[e];nt(n)&&nt(i)?cr(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=qo(i))}const Vd={"":e=>e,x:e=>e.x,y:e=>e.y};function lx(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function cx(e){const t=lx(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function kn(e,t){return(Vd[t]||(Vd[t]=cx(t)))(e)}function Xc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const pe=e=>typeof e<"u",me=e=>typeof e=="function",qd=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function ux(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Tt=Math.PI,zt=2*Tt,dx=zt+Tt,Yo=Number.POSITIVE_INFINITY,Qc=Tt/180,Gt=Tt/2,Ie=Tt/4,Jo=Tt*2/3,yp=Math.log10,as=Math.sign;function ur(e,t,s){return Math.abs(e-t)<s}function Yd(e){const t=Math.round(e);e=ur(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(yp(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function hx(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,r)=>i-r).pop(),t}function fx(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Tn(e){return!fx(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function gx(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function mx(e,t,s){let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n][s],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ht(e){return e*(Tt/180)}function bp(e){return e*(180/Tt)}function Jd(e){if(!qt(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function Ql(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let r=Math.atan2(n,s);return r<-.5*Tt&&(r+=zt),{angle:r,distance:i}}function pi(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function px(e,t){return(e-t+dx)%zt-Tt}function ns(e){return(e%zt+zt)%zt}function Ko(e,t,s,n){const i=ns(e),r=ns(t),o=ns(s),a=ns(r-i),l=ns(o-i),c=ns(i-r),u=ns(i-o);return i===r||i===o||n&&r===o||a>l&&c<u}function Re(e,t,s){return Math.max(t,Math.min(s,e))}function yx(e){return Re(e,-32768,32767)}function Us(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function tu(e,t,s){s=s||(o=>e[o]<t);let n=e.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,s(r)?i=r:n=r;return{lo:i,hi:n}}const yn=(e,t,s,n)=>tu(e,s,n?i=>{const r=e[i][t];return r<s||r===s&&e[i+1][t]===s}:i=>e[i][t]<s),bx=(e,t,s)=>tu(e,s,n=>e[n][t]>=s);function vx(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const vp=["push","pop","shift","splice","unshift"];function _x(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),vp.forEach(s=>{const n="_onData"+Xc(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function Kd(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(vp.forEach(r=>{delete e[r]}),delete e._chartjs)}function _p(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const wp=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function xp(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,wp.call(window,()=>{n=!1,e.apply(t,s)}))}}function wx(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const Sp=e=>e==="start"?"left":e==="end"?"right":"center",we=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,xx=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function Sx(e,t,s){const n=t.length;let i=0,r=n;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:m}=o.getUserBounds();if(f){if(i=Math.min(yn(l,u,d).lo,s?n:yn(t,u,o.getPixelForValue(d)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(p=>!kt(p[a.axis]));i-=Math.max(0,g)}i=Re(i,0,n-1)}if(m){let g=Math.max(yn(l,o.axis,h,!0).hi+1,s?0:yn(t,u,o.getPixelForValue(h),!0).hi+1);if(c){const p=l.slice(g-1).findIndex(y=>!kt(y[a.axis]));g+=Math.max(0,p)}r=Re(g,i,n)-i}else r=n-i}return{start:i,count:r}}function kx(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),r}const ro=e=>e===0||e===1,Gd=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*zt/s)),Zd=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*zt/s)+1,dr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Gt)+1,easeOutSine:e=>Math.sin(e*Gt),easeInOutSine:e=>-.5*(Math.cos(Tt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ro(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ro(e)?e:Gd(e,.075,.3),easeOutElastic:e=>ro(e)?e:Zd(e,.075,.3),easeInOutElastic(e){return ro(e)?e:e<.5?.5*Gd(e*2,.1125,.45):.5+.5*Zd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-dr.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?dr.easeInBounce(e*2)*.5:dr.easeOutBounce(e*2-1)*.5+.5};function eu(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Xd(e){return eu(e)?e:new kr(e)}function il(e){return eu(e)?e:new kr(e).saturate(.5).darken(.1).hexString()}const Tx=["x","y","borderWidth","radius","tension"],Ox=["color","borderColor","backgroundColor"];function Dx(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Ox},numbers:{type:"number",properties:Tx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Cx(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Qd=new Map;function Mx(e,t){t=t||{};const s=e+JSON.stringify(t);let n=Qd.get(s);return n||(n=new Intl.NumberFormat(e,t),Qd.set(s,n)),n}function su(e,t,s){return Mx(t,s).format(e)}const Ex={values(e){return It(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,r=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=Ax(e,s)}const o=yp(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),su(e,n,l)}};function Ax(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var kp={formatters:Ex};function Ix(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const On=Object.create(null),tc=Object.create(null);function hr(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const r=s[n];e=e[r]||(e[r]=Object.create(null))}return e}function rl(e,t,s){return typeof t=="string"?Tr(hr(e,t),s):Tr(hr(e,""),t)}class Px{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>il(i.backgroundColor),this.hoverBorderColor=(n,i)=>il(i.borderColor),this.hoverColor=(n,i)=>il(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return rl(this,t,s)}get(t){return hr(this,t)}describe(t,s){return rl(tc,t,s)}override(t,s){return rl(On,t,s)}route(t,s,n,i){const r=hr(this,t),o=hr(this,n),a="_"+s;Object.defineProperties(r,{[a]:{value:r[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=o[i];return nt(l)?Object.assign({},c,l):et(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var $t=new Px({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Dx,Cx,Ix]);function Lx(e){return!e||kt(e.size)||kt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function th(e,t,s,n,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,s.push(i)),r>n&&(n=r),n}function an(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function eh(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ec(e,t,s,n){Tp(e,t,s,n,null)}function Tp(e,t,s,n,i){let r,o,a,l,c,u,d,h;const f=t.pointStyle,m=t.rotation,g=t.radius;let p=(m||0)*Qc;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(p),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(s,n,i/2,g,0,0,zt):e.arc(s,n,g,0,zt),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(s+Math.sin(p)*u,n-Math.cos(p)*g),p+=Jo,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*g),p+=Jo,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(p+Ie)*l,d=Math.cos(p+Ie)*(i?i/2-c:l),a=Math.sin(p+Ie)*l,h=Math.sin(p+Ie)*(i?i/2-c:l),e.arc(s-d,n-a,c,p-Tt,p-Gt),e.arc(s+h,n-o,c,p-Gt,p),e.arc(s+d,n+a,c,p,p+Gt),e.arc(s-h,n+o,c,p+Gt,p+Tt),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(s-u,n-l,2*u,2*l);break}p+=Ie;case"rectRot":d=Math.cos(p)*(i?i/2:g),o=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+h,n-o),e.lineTo(s+d,n+a),e.lineTo(s-h,n+o),e.closePath();break;case"crossRot":p+=Ie;case"cross":d=Math.cos(p)*(i?i/2:g),o=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o);break;case"star":d=Math.cos(p)*(i?i/2:g),o=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o),p+=Ie,d=Math.cos(p)*(i?i/2:g),o=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-o),e.lineTo(s-h,n+o);break;case"line":o=i?i/2:Math.cos(p)*g,a=Math.sin(p)*g,e.moveTo(s-o,n-a),e.lineTo(s+o,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(p)*(i?i/2:g),n+Math.sin(p)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Or(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Nr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fr(e){e.restore()}function Rx(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const r=(t.x+s.x)/2;e.lineTo(r,t.y),e.lineTo(r,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function $x(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Nx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),kt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Fx(e,t,s,n,i){if(i.strikethrough||i.underline){const r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function jx(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function Go(e,t,s,n,i,r={}){const o=It(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Nx(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&jx(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),kt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,s,n,r.maxWidth)),e.fillText(c,s,n,r.maxWidth),Fx(e,s,n,c,r),n+=Number(i.lineHeight);e.restore()}function Dr(e,t){const{x:s,y:n,w:i,h:r,radius:o}=t;e.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Tt,Tt,!0),e.lineTo(s,n+r-o.bottomLeft),e.arc(s+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,Tt,Gt,!0),e.lineTo(s+i-o.bottomRight,n+r),e.arc(s+i-o.bottomRight,n+r-o.bottomRight,o.bottomRight,Gt,0,!0),e.lineTo(s+i,n+o.topRight),e.arc(s+i-o.topRight,n+o.topRight,o.topRight,0,-Gt,!0),e.lineTo(s+o.topLeft,n)}const Bx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ux(e,t){const s=(""+e).match(Bx);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const zx=e=>+e||0;function Op(e,t){const s={},n=nt(t),i=n?Object.keys(t):t,r=nt(e)?n?o=>et(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)s[o]=zx(r(o));return s}function Dp(e){return Op(e,{top:"y",right:"x",bottom:"y",left:"x"})}function _n(e){return Op(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ce(e){const t=Dp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Zt(e,t){e=e||{},t=t||$t.font;let s=et(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=et(e.style,t.style);n&&!(""+n).match(Wx)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:et(e.family,t.family),lineHeight:Ux(et(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:et(e.weight,t.weight),string:""};return i.string=Lx(i),i}function oo(e,t,s,n){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function Hx(e,t,s){const{min:n,max:i}=e,r=mp(t,(i-n)/2),o=(a,l)=>s&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(i,r)}}function An(e,t){return Object.assign(Object.create(e),t)}function nu(e,t=[""],s,n,i=()=>e[0]){const r=s||e;typeof n>"u"&&(n=Ap("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:a=>nu([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Mp(a,l,()=>Xx(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return nh(a).includes(l)},ownKeys(a){return nh(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function yi(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Cp(e,n),setContext:r=>yi(e,r,s,n),override:r=>yi(e.override(r),t,s,n)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Mp(r,o,()=>qx(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Cp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:me(s)?s:()=>s,isIndexable:me(n)?n:()=>n}}const Vx=(e,t)=>e?e+Xc(t):t,iu=(e,t)=>nt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Mp(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function qx(e,t,s){const{_proxy:n,_context:i,_subProxy:r,_descriptors:o}=e;let a=n[t];return me(a)&&o.isScriptable(t)&&(a=Yx(t,a,e,s)),It(a)&&a.length&&(a=Jx(t,a,e,o.isIndexable)),iu(t,a)&&(a=yi(a,i,r&&r[t],o)),a}function Yx(e,t,s,n){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),iu(e,l)&&(l=ru(i._scopes,i,e,l)),l}function Jx(e,t,s,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=s;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(nt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=ru(c,i,e,u);t.push(yi(d,r,o&&o[e],a))}}return t}function Ep(e,t,s){return me(e)?e(t,s):e}const Kx=(e,t)=>e===!0?t:typeof e=="string"?kn(t,e):void 0;function Gx(e,t,s,n,i){for(const r of t){const o=Kx(s,r);if(o){e.add(o);const a=Ep(o._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function ru(e,t,s,n){const i=t._rootScopes,r=Ep(t._fallback,s,n),o=[...e,...i],a=new Set;a.add(n);let l=sh(a,o,s,r||s,n);return l===null||typeof r<"u"&&r!==s&&(l=sh(a,o,r,l,n),l===null)?!1:nu(Array.from(a),[""],i,r,()=>Zx(t,s,n))}function sh(e,t,s,n,i){for(;s;)s=Gx(e,t,s,n,i);return s}function Zx(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return It(i)&&nt(s)?s:i||{}}function Xx(e,t,s,n){let i;for(const r of t)if(i=Ap(Vx(r,e),s),typeof i<"u")return iu(e,i)?ru(s,n,e,i):i}function Ap(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function nh(e){let t=e._keys;return t||(t=e._keys=Qx(e._scopes)),t}function Qx(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}const tS=Number.EPSILON||1e-14,bi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ip=e=>e==="x"?"y":"x";function eS(e,t,s,n){const i=e.skip?t:e,r=t,o=s.skip?t:s,a=pi(r,i),l=pi(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=n*c,h=n*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+h*(o.x-i.x),y:r.y+h*(o.y-i.y)}}}function sS(e,t,s){const n=e.length;let i,r,o,a,l,c=bi(e,0);for(let u=0;u<n-1;++u)if(l=c,c=bi(e,u+1),!(!l||!c)){if(ur(t[u],0,tS)){s[u]=s[u+1]=0;continue}i=s[u]/t[u],r=s[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),s[u]=i*o*t[u],s[u+1]=r*o*t[u])}}function nS(e,t,s="x"){const n=Ip(s),i=e.length;let r,o,a,l=bi(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=bi(e,c+1),!a)continue;const u=a[s],d=a[n];o&&(r=(u-o[s])/3,a[`cp1${s}`]=u-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[s]-u)/3,a[`cp2${s}`]=u+r,a[`cp2${n}`]=d+r*t[c])}}function iS(e,t="x"){const s=Ip(t),n=e.length,i=Array(n).fill(0),r=Array(n);let o,a,l,c=bi(e,0);for(o=0;o<n;++o)if(a=l,l=c,c=bi(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[s]-l[s])/u:0}r[o]=a?c?as(i[o-1])!==as(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}sS(e,i,r),nS(e,r,t)}function ao(e,t,s){return Math.max(Math.min(e,s),t)}function rS(e,t){let s,n,i,r,o,a=Or(e[0],t);for(s=0,n=e.length;s<n;++s)o=r,r=a,a=s<n-1&&Or(e[s+1],t),r&&(i=e[s],o&&(i.cp1x=ao(i.cp1x,t.left,t.right),i.cp1y=ao(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=ao(i.cp2x,t.left,t.right),i.cp2y=ao(i.cp2y,t.top,t.bottom)))}function oS(e,t,s,n,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")iS(e,i);else{let c=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=eS(c,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&rS(e,s)}function ou(){return typeof window<"u"&&typeof document<"u"}function au(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Zo(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const ya=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function aS(e,t){return ya(e).getPropertyValue(t)}const lS=["top","right","bottom","left"];function wn(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const r=lS[i];n[r]=parseFloat(e[t+"-"+r+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const cS=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function uS(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:r}=n;let o=!1,a,l;if(cS(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function hn(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=ya(s),r=i.boxSizing==="border-box",o=wn(i,"padding"),a=wn(i,"border","width"),{x:l,y:c,box:u}=uS(e,s),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:m}=t;return r&&(f-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-d)/f*s.width/n),y:Math.round((c-h)/m*s.height/n)}}function dS(e,t,s){let n,i;if(t===void 0||s===void 0){const r=e&&au(e);if(!r)t=e.clientWidth,s=e.clientHeight;else{const o=r.getBoundingClientRect(),a=ya(r),l=wn(a,"border","width"),c=wn(a,"padding");t=o.width-c.width-l.width,s=o.height-c.height-l.height,n=Zo(a.maxWidth,r,"clientWidth"),i=Zo(a.maxHeight,r,"clientHeight")}}return{width:t,height:s,maxWidth:n||Yo,maxHeight:i||Yo}}const lo=e=>Math.round(e*10)/10;function hS(e,t,s,n){const i=ya(e),r=wn(i,"margin"),o=Zo(i.maxWidth,e,"clientWidth")||Yo,a=Zo(i.maxHeight,e,"clientHeight")||Yo,l=dS(e,t,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=wn(i,"border","width"),f=wn(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,n?c/n:u-r.height),c=lo(Math.min(c,o,l.maxWidth)),u=lo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=lo(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=lo(Math.floor(u*n))),{width:c,height:u}}function ih(e,t,s){const n=t||1,i=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=n,o.height=i,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const fS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ou()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function rh(e,t){const s=aS(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function fn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function gS(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function mS(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=fn(e,i,s),a=fn(i,r,s),l=fn(r,t,s),c=fn(o,a,s),u=fn(a,l,s);return fn(c,u,s)}const pS=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},yS=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function fi(e,t,s){return e?pS(t,s):yS()}function Pp(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Lp(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Rp(e){return e==="angle"?{between:Ko,compare:px,normalize:ns}:{between:Us,compare:(t,s)=>t-s,normalize:t=>t}}function oh({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function bS(e,t,s){const{property:n,start:i,end:r}=s,{between:o,normalize:a}=Rp(n),l=t.length;let{start:c,end:u,loop:d}=e,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(t[c%l][n]),i,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function $p(e,t,s){if(!s)return[e];const{property:n,start:i,end:r}=s,o=t.length,{compare:a,between:l,normalize:c}=Rp(n),{start:u,end:d,loop:h,style:f}=bS(e,t,s),m=[];let g=!1,p=null,y,_,b;const x=()=>l(i,b,y)&&a(i,b)!==0,k=()=>a(r,y)===0||l(r,b,y),A=()=>g||x(),E=()=>!g||k();for(let L=u,I=u;L<=d;++L)_=t[L%o],!_.skip&&(y=c(_[n]),y!==b&&(g=l(y,i,r),p===null&&A()&&(p=a(y,i)===0?L:I),p!==null&&E()&&(m.push(oh({start:p,end:L,loop:h,count:o,style:f})),p=null),I=L,b=y));return p!==null&&m.push(oh({start:p,end:d,loop:h,count:o,style:f})),m}function Np(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const r=$p(n[i],e.points,t);r.length&&s.push(...r)}return s}function vS(e,t,s,n){let i=0,r=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function _S(e,t,s,n){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%i,end:(l-1)%i,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:n}),r}function wS(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=vS(s,i,r,n);if(n===!0)return ah(e,[{start:o,end:a,loop:r}],s,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return ah(e,_S(s,o,l,c),s,t)}function ah(e,t,s,n){return!n||!n.setContext||!s?t:xS(e,t,s,n)}function xS(e,t,s,n){const i=e._chart.getContext(),r=lh(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=s.length,c=[];let u=r,d=t[0].start,h=d;function f(m,g,p,y){const _=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=_;for(;s[g%l].skip;)g+=_;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:p,style:y}),u=y,d=g%l)}}for(const m of t){d=a?d:m.start;let g=s[d%l],p;for(h=d+1;h<=m.end;h++){const y=s[h%l];p=lh(n.setContext(An(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),SS(p,u)&&f(d,h-1,m.loop,u),g=y,u=p}d<h-1&&f(d,h-1,m.loop,u)}return c}function lh(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function SS(e,t){if(!t)return!1;const s=[],n=function(i,r){return eu(r)?(s.includes(r)||s.push(r),s.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function co(e,t,s){return e.options.clip?e[s]:t[s]}function kS(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:co(s,t,"left"),right:co(s,t,"right"),top:co(n,t,"top"),bottom:co(n,t,"bottom")}:t}function Fp(e,t){const s=t._clip;if(s.disabled)return!1;const n=kS(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const r=s.listeners[i],o=s.duration;r.forEach(a=>a({chart:t,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=r.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fs=new TS;const ch="transparent",OS={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=Xd(e||ch),i=n.valid&&Xd(t||ch);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class DS{constructor(t,s,n,i){const r=s[n];i=oo([t.to,i,r,t.from]);const o=oo([t.from,r,i]);this._active=!0,this._fn=t.fn||OS[t.type||typeof o],this._easing=dr[t.easing]||dr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=oo([t.to,s,i,t.from]),this._from=oo([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=r;return}l=s/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class lu{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!nt(t))return;const s=Object.keys($t.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!nt(r))return;const o={};for(const a of s)o[a]=r[a];(It(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,s){const n=s.options,i=MS(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&CS(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,s){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(s),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const u=s[c];let d=r[c];const h=n.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=d=new DS(h,t,c,u),i.push(d)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return fs.add(this._chart,n),!0}}function CS(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const r=e[n[i]];r&&r.active()&&s.push(r.wait())}return Promise.all(s)}function MS(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function uh(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,r=s.max===void 0?t:0;return{start:n?r:i,end:n?i:r}}function ES(e,t,s){if(s===!1)return!1;const n=uh(e,s),i=uh(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function AS(e){let t,s,n,i;return nt(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function jp(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=n.length;i<r;++i)s.push(n[i].index);return s}function dh(e,t,s,n={}){const i=e.keys,r=n.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===s){if(u=!0,n.all)continue;break}c=e.values[l],qt(c)&&(r||t===0||as(t)===as(c))&&(t+=c)}return!u&&!n.all?0:t}function IS(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function ol(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function PS(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function LS(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function RS(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function hh(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const r=e[i.index];if(s&&r>0||!s&&r<0)return i.index}return null}function fh(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,u=PS(r,o,n),d=t.length;let h;for(let f=0;f<d;++f){const m=t[f],{[l]:g,[c]:p}=m,y=m._stacks||(m._stacks={});h=y[c]=RS(i,u,g),h[a]=p,h._top=hh(h,o,!0,n.type),h._bottom=hh(h,o,!1,n.type);const _=h._visualValues||(h._visualValues={});_[a]=p}}function al(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function $S(e,t){return An(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function NS(e,t,s){return An(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function Ni(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[n]===void 0||r[n][s]===void 0)return;delete r[n][s],r[n]._visualValues!==void 0&&r[n]._visualValues[s]!==void 0&&delete r[n]._visualValues[s]}}}const ll=e=>e==="reset"||e==="none",gh=(e,t)=>t?e:Object.assign({},e),FS=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:jp(s,!0),values:null};class ba{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ol(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ni(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(d,h,f,m)=>d==="x"?h:d==="r"?m:f,r=s.xAxisID=et(n.xAxisID,al(t,"x")),o=s.yAxisID=et(n.yAxisID,al(t,"y")),a=s.rAxisID=et(n.rAxisID,al(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,r,o,a),u=s.vAxisID=i(l,o,r,a);s.xScale=this.getScaleForId(r),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Kd(this._data,this),t._stacked&&Ni(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(nt(s)){const i=this._cachedMeta;this._data=IS(s,i)}else if(n!==s){if(n){Kd(n,this);const i=this._cachedMeta;Ni(i),i._parsed=[]}s&&Object.isExtensible(s)&&_x(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=s._stacked;s._stacked=ol(s.vScale,s),s.stack!==n.stack&&(i=!0,Ni(s),s.stack=n.stack),this._resyncElements(t),(i||r!==s._stacked)&&(fh(this,s._parsed),s._stacked=ol(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,d,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{It(i[t])?h=this.parseArrayData(n,i,t,s):nt(i[t])?h=this.parseObjectData(n,i,t,s):h=this.parsePrimitiveData(n,i,t,s);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<s;++u)n._parsed[u+t]=d=h[u],l&&(f()&&(l=!1),c=d);n._sorted=l}o&&fh(this,h)}parsePrimitiveData(t,s,n,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let h,f,m;for(h=0,f=i;h<f;++h)m=h+n,d[h]={[a]:u||r.parse(c[m],m),[l]:o.parse(s[m],m)};return d}parseArrayData(t,s,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+n,d=s[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,s,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+n,f=s[h],c[u]={x:r.parse(kn(f,a),h),y:o.parse(kn(f,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,r=this._cachedMeta,o=s[t.axis],a={keys:jp(i,!0),values:s._stacks[t.axis]._visualValues};return dh(a,o,r.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const r=n[s.axis];let o=r===null?NaN:r;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,o=dh(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),l=FS(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=LS(a);let h,f;function m(){f=i[h];const g=f[a.axis];return!qt(f[t.axis])||u>g||d<g}for(h=0;h<o&&!(!m()&&(this.updateRangeFromParsed(c,t,f,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=s.length;i<r;++i)o=s[i][t.axis],qt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=AS(et(this.options.clip,ES(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],r=s.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=NS(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=$S(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!s,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",r=this._cachedDataOpts,o=t+"-"+s,a=r[o],l=this.enableOptionSharing&&pe(n);if(a)return gh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys($t.elements[t]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(h,f,m,d);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(gh(g,l))),g}_resolveAnimations(t,s,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${s}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,n,s))}const c=new lu(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||ll(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(s,r)||r!==i;return this.updateSharedOptions(r,s,n),{sharedOptions:r,includeOptions:o}}updateElement(t,s,n,i){ll(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!ll(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const r=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,r=s.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,s,n=!0){const i=this._cachedMeta,r=i.data,o=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=o;a--)c[a]=c[a-s]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(r,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&Ni(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function jS(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,r=s.length;i<r;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=_p(n.sort((i,r)=>i-r))}return e._cache.$bar}function BS(e){const t=e.iScale,s=jS(t,e.type);let n=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(pe(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(i=0,r=s.length;i<r;++i)o=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return n}function WS(e,t,s,n){const i=s.barThickness;let r,o;return kt(i)?(r=t.min*s.categoryPercentage,o=s.barPercentage):(r=i*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function US(e,t,s,n){const i=t.pixels,r=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:s.barPercentage,start:c}}function zS(e,t,s,n){const i=s.parse(e[0],n),r=s.parse(e[1],n),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function Bp(e,t,s,n){return It(e)?zS(e,t,s,n):t[s.axis]=s.parse(e,n),t}function mh(e,t,s,n){const i=e.iScale,r=e.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,d,h;for(c=s,u=s+n;c<u;++c)h=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(Bp(h,d,r,c));return l}function cl(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function HS(e,t,s){return e!==0?as(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function VS(e){let t,s,n,i,r;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",r="start"):(i="start",r="end"),{start:s,end:n,reverse:t,top:i,bottom:r}}function qS(e,t,s,n){let i=t.borderSkipped;const r={};if(!i){e.borderSkipped=r;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=VS(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(r[ph(u,o,a,l)]=!0,i=c)),r[ph(i,o,a,l)]=!0,e.borderSkipped=r}function ph(e,t,s,n){return n?(e=YS(e,t,s),e=yh(e,s,t)):e=yh(e,t,s),e}function YS(e,t,s){return e===t?s:e===s?t:e}function yh(e,t,s){return e==="start"?t:e==="end"?s:e}function JS(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class KS extends ba{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,s,n,i){return mh(t,s,n,i)}parseArrayData(t,s,n,i){return mh(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,m,g;for(h=n,f=n+i;h<f;++h)g=s[h],m={},m[r.axis]=r.parse(kn(g,c),h),d.push(Bp(kn(g,u),m,o,h));return d}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const r=n._custom;r&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,r=this.getParsed(t),o=r._custom,a=cl(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i);for(let f=s;f<s+n;f++){const m=this.getParsed(f),g=r||kt(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),y=(m._stacks||{})[a.axis],_={horizontal:c,base:g.base,enableBorderRadius:!y||cl(m._custom)||o===y._top||o===y._bottom,x:c?g.head:p.center,y:c?p.center:g.head,height:c?p.size:Math.abs(g.size),width:c?Math.abs(g.size):p.size};h&&(_.options=d||this.resolveDataElementOptions(f,t[f].active?"active":i));const b=_.options||t[f].options;qS(_,b,y,o),JS(_,b,u.ratio),this.updateElement(t[f],f,_,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const d=u._parsed.find(f=>f[n.axis]===l),h=d&&d[u.vScale.axis];if(kt(h)||isNaN(h))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===s).shift()}_getAxis(){const t={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[et(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(t)}_getStackIndex(t,s,n){const i=this._getStacks(t,n),r=s!==void 0?i.indexOf(s):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let r,o;for(r=0,o=s.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||BS(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=cl(c);let d=l[s.axis],h=0,f=n?this.applyStack(s,l,n):d,m,g;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&as(d)!==as(c.barEnd)&&(h=0),h+=d);const p=!kt(r)&&!u?r:h;let y=s.getPixelForValue(p);if(this.chart.getDataVisibility(t)?m=s.getPixelForValue(h+f):m=y,g=m-y,Math.abs(g)<o){g=HS(g,s,a)*o,d===a&&(y-=g/2);const _=s.getPixelForDecimal(0),b=s.getPixelForDecimal(1),x=Math.min(_,b),k=Math.max(_,b);y=Math.max(Math.min(y,k),x),m=y+g,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(y))}if(y===s.getPixelForValue(a)){const _=as(g)*s.getLineWidthForValue(a)/2;y+=_,g-=_}return{size:g,base:y,head:m,center:m+g/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,r=i.skipNull,o=et(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(s.grouped){const u=r?this._getStackCount(t):s.stackCount,d=i.barThickness==="flex"?US(t,s,i,u*c):WS(t,s,i,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(et(h,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+f;a=d.start+d.chunk*m+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[s.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}function GS(e,t,s){let n=1,i=1,r=0,o=0;if(t<zt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(b,x,k)=>Ko(b,a,l,!0)?1:Math.max(x,x*s,k,k*s),m=(b,x,k)=>Ko(b,a,l,!0)?-1:Math.min(x,x*s,k,k*s),g=f(0,c,d),p=f(Gt,u,h),y=m(Tt,c,d),_=m(Tt+Gt,u,h);n=(g-y)/2,i=(p-_)/2,r=-(g+y)/2,o=-(p+_)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:o}}class ZS extends ba{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=l=>+n[l];if(nt(n[t])){const{key:l="value"}=this._parsing;r=c=>+kn(n[c],l)}let o,a;for(o=t,a=t+s;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Ht(this.options.rotation-90)}_getCircumference(){return Ht(this.options.circumference)}_getRotationExtents(){let t=zt,s=-zt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),s=Math.max(s,r+o)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(rx(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:m,offsetY:g}=GS(d,u,l),p=(n.width-o)/h,y=(n.height-o)/f,_=Math.max(Math.min(p,y)/2,0),b=mp(this.options.radius,_),x=Math.max(b*l,0),k=(b-x)/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,i.total=this.calculateTotal(),this.outerRadius=b-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/zt)}updateElements(t,s,n,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=r&&c.animateScale,f=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(s,i);let y=this._getRotation(),_;for(_=0;_<s;++_)y+=this._circumference(_,r);for(_=s;_<s+n;++_){const b=this._circumference(_,r),x=t[_],k={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+b,circumference:b,outerRadius:m,innerRadius:f};p&&(k.options=g||this.resolveDataElementOptions(_,x.active?"active":i)),y+=b,this.updateElement(x,_,k,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?zt*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=su(s._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const r=this.resolveDataElementOptions(n);s=Math.max(s,r.offset||0,r.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(et(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class cu extends ba{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=s,o=this.chart._animationsDisabled;let{start:a,count:l}=Sx(s,i,o);this._drawStart=a,this._drawCount=l,kx(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,i),h=o.axis,f=a.axis,{spanGaps:m,segment:g}=this.options,p=Tn(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",_=s+n,b=t.length;let x=s>0&&this.getParsed(s-1);for(let k=0;k<b;++k){const A=t[k],E=y?A:{};if(k<s||k>=_){E.skip=!0;continue}const L=this.getParsed(k),I=kt(L[f]),V=E[h]=o.getPixelForValue(L[h],k),P=E[f]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,L,l):L[f],k);E.skip=isNaN(V)||isNaN(P)||I,E.stop=k>0&&Math.abs(L[h]-x[h])>p,g&&(E.parsed=L,E.raw=c.data[k]),d&&(E.options=u||this.resolveDataElementOptions(k,A.active?"active":i)),y||this.updateElement(A,k,E,i),x=L}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function ln(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uu{static override(t){Object.assign(uu.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ln()}parse(){return ln()}format(){return ln()}add(){return ln()}diff(){return ln()}startOf(){return ln()}endOf(){return ln()}}var Wp={_date:uu};function XS(e,t,s,n){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?bx:yn;if(n){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const h=c(r,t,s-d),f=c(r,t,s+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(r,t,s);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=e,f=h.slice(0,u.lo+1).reverse().findIndex(g=>!kt(g[d.axis]));u.lo-=Math.max(0,f);const m=h.slice(u.hi).findIndex(g=>!kt(g[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function va(e,t,s,n,i){const r=e.getSortedVisibleDatasetMetas(),o=s[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:h}=XS(r[a],t,o,i);for(let f=d;f<=h;++f){const m=u[f];m.skip||n(m,c,f)}}}function QS(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const r=t?Math.abs(n.x-i.x):0,o=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ul(e,t,s,n,i){const r=[];return!i&&!e.isPointInArea(t)||va(e,s,t,function(a,l,c){!i&&!Or(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function tk(e,t,s,n){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:d}=Ql(o,{x:t.x,y:t.y});Ko(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return va(e,s,t,r),i}function ek(e,t,s,n,i,r){let o=[];const a=QS(s);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(t.x,t.y,i);if(n&&!f)return;const m=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(m))&&!f)return;const p=a(t,m);p<l?(o=[{element:u,datasetIndex:d,index:h}],l=p):p===l&&o.push({element:u,datasetIndex:d,index:h})}return va(e,s,t,c),o}function dl(e,t,s,n,i,r){return!r&&!e.isPointInArea(t)?[]:s==="r"&&!n?tk(e,t,s,i):ek(e,t,s,n,i,r)}function bh(e,t,s,n,i){const r=[],o=s==="x"?"inXRange":"inYRange";let a=!1;return va(e,s,t,(l,c,u)=>{l[o]&&l[o](t[s],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:r}var sk={modes:{index(e,t,s,n){const i=hn(t,e),r=s.axis||"x",o=s.includeInvisible||!1,a=s.intersect?ul(e,i,r,n,o):dl(e,i,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,s,n){const i=hn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;let a=s.intersect?ul(e,i,r,n,o):dl(e,i,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,s,n){const i=hn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return ul(e,i,r,n,o)},nearest(e,t,s,n){const i=hn(t,e),r=s.axis||"xy",o=s.includeInvisible||!1;return dl(e,i,r,s.intersect,n,o)},x(e,t,s,n){const i=hn(t,e);return bh(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=hn(t,e);return bh(e,i,"y",s.intersect,n)}}};const Up=["left","top","right","bottom"];function Fi(e,t){return e.filter(s=>s.pos===t)}function vh(e,t){return e.filter(s=>Up.indexOf(s.pos)===-1&&s.box.axis===t)}function ji(e,t){return e.sort((s,n)=>{const i=t?n:s,r=t?s:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function nk(e){const t=[];let s,n,i,r,o,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function ik(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:r}=s;if(!n||!Up.includes(i))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function rk(e,t){const s=ik(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return s}function ok(e){const t=nk(e),s=ji(t.filter(c=>c.box.fullSize),!0),n=ji(Fi(t,"left"),!0),i=ji(Fi(t,"right")),r=ji(Fi(t,"top"),!0),o=ji(Fi(t,"bottom")),a=vh(t,"x"),l=vh(t,"y");return{fullSize:s,leftAndTop:n.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Fi(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function _h(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function zp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ak(e,t,s,n){const{pos:i,box:r}=s,o=e.maxPadding;if(!nt(i)){s.size&&(e[i]-=s.size);const d=n[s.stack]||{size:0,count:1};d.size=Math.max(d.size,s.horizontal?r.height:r.width),s.size=d.size/d.count,e[i]+=s.size}r.getPadding&&zp(o,r.getPadding());const a=Math.max(0,t.outerWidth-_h(o,e,"left","right")),l=Math.max(0,t.outerHeight-_h(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function lk(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function ck(e,t){const s=t.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],s[o])}),r}return n(e?["left","right"]:["top","bottom"])}function Zi(e,t,s,n){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,ck(a.horizontal,t));const{same:d,other:h}=ak(t,s,a,n);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Zi(i,t,s,n)||u}function uo(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function wh(e,t,s,n){const i=s.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,h=c.size||l.height;pe(c.start)&&(o=c.start),l.fullSize?uo(l,i.left,o,s.outerWidth-i.right-i.left,h):uo(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,h=c.size||l.width;pe(c.start)&&(r=c.start),l.fullSize?uo(l,r,i.top,h,s.outerHeight-i.bottom-i.top):uo(l,r,t.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var zs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=ce(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(s-i.height,0),a=ok(e.boxes),l=a.vertical,c=a.horizontal;St(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,p)=>p.box.options&&p.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);zp(h,ce(n));const f=Object.assign({maxPadding:h,w:r,h:o,x:i.left,y:i.top},i),m=rk(l.concat(c),d);Zi(a.fullSize,f,d,m),Zi(l,f,d,m),Zi(c,f,d,m)&&Zi(l,f,d,m),lk(f),wh(a.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,wh(a.rightAndBottom,f,d,m),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},St(a.chartArea,g=>{const p=g.box;Object.assign(p,e.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Hp{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class uk extends Hp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Mo="$chartjs",dk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xh=e=>e===null||e==="";function hk(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[Mo]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",xh(i)){const r=rh(e,"width");r!==void 0&&(e.width=r)}if(xh(n))if(e.style.height==="")e.height=e.width/(t||2);else{const r=rh(e,"height");r!==void 0&&(e.height=r)}return e}const Vp=fS?{passive:!0}:!1;function fk(e,t,s){e&&e.addEventListener(t,s,Vp)}function gk(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Vp)}function mk(e,t){const s=dk[e.type]||e.type,{x:n,y:i}=hn(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Xo(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function pk(e,t,s){const n=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Xo(a.addedNodes,n),o=o&&!Xo(a.removedNodes,n);o&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function yk(e,t,s){const n=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Xo(a.removedNodes,n),o=o&&!Xo(a.addedNodes,n);o&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Cr=new Map;let Sh=0;function qp(){const e=window.devicePixelRatio;e!==Sh&&(Sh=e,Cr.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function bk(e,t){Cr.size||window.addEventListener("resize",qp),Cr.set(e,t)}function vk(e){Cr.delete(e),Cr.size||window.removeEventListener("resize",qp)}function _k(e,t,s){const n=e.canvas,i=n&&au(n);if(!i)return;const r=xp((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),bk(e,r),o}function hl(e,t,s){s&&s.disconnect(),t==="resize"&&vk(e)}function wk(e,t,s){const n=e.canvas,i=xp(r=>{e.ctx!==null&&s(mk(r,e))},e);return fk(n,t,i),i}class xk extends Hp{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(hk(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[Mo])return!1;const n=s[Mo].initial;["height","width"].forEach(r=>{const o=n[r];kt(o)?s.removeAttribute(r):s.setAttribute(r,o)});const i=n.style||{};return Object.keys(i).forEach(r=>{s.style[r]=i[r]}),s.width=s.width,delete s[Mo],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),o={attach:pk,detach:yk,resize:_k}[s]||wk;i[s]=o(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:hl,detach:hl,resize:hl}[s]||gk)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return hS(t,s,n,i)}isAttached(t){const s=t&&au(t);return!!(s&&s.isConnected)}}function Sk(e){return!ou()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?uk:xk}let ye=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return Tn(this.x)&&Tn(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}};function kk(e,t){const s=e.options.ticks,n=Tk(e),i=Math.min(s.maxTicksLimit||n,n),r=s.major.enabled?Dk(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return Ck(t,c,r,o/i),c;const u=Ok(r,t,i);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(ho(t,c,u,kt(f)?0:a-f,a),d=0,h=o-1;d<h;d++)ho(t,c,u,r[d],r[d+1]);return ho(t,c,u,l,kt(f)?t.length:l+f),c}return ho(t,c,u),c}function Tk(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function Ok(e,t,s){const n=Mk(e),i=t.length/s;if(!n)return Math.max(i,1);const r=hx(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function Dk(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function Ck(e,t,s,n){let i=0,r=s[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=s[i*n])}function ho(e,t,s,n,i){const r=et(n,0),o=Math.min(et(i,e.length),e.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=r;u<0;)a++,u=Math.round(r+a*s);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*s))}function Mk(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const Ek=e=>e==="left"?"right":e==="right"?"left":e,kh=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Th=(e,t)=>Math.min(t||e,e);function Oh(e,t){const s=[],n=e.length/t,i=e.length;let r=0;for(;r<i;r+=n)s.push(e[Math.floor(r)]);return s}function Ak(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function Ik(e,t){St(e,s=>{const n=s.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete s.data[n[r]];n.splice(0,i)}})}function Bi(e){return e.drawTicks?e.tickLength:0}function Dh(e,t){if(!e.display)return 0;const s=Zt(e.font,t),n=ce(e.padding);return(It(e.text)?e.text.length:1)*s.lineHeight+n.height}function Pk(e,t){return An(e,{scale:t,type:"scale"})}function Lk(e,t,s){return An(e,{tick:s,index:t,type:"tick"})}function Rk(e,t,s){let n=Sp(e);return(s&&t!=="right"||!s&&t==="right")&&(n=Ek(n)),n}function $k(e,t,s,n){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,h,f,m;const g=o-i,p=a-r;if(e.isHorizontal()){if(f=we(n,r,a),nt(s)){const y=Object.keys(s)[0],_=s[y];m=u[y].getPixelForValue(_)+g-t}else s==="center"?m=(c.bottom+c.top)/2+g-t:m=kh(e,s,t);h=a-r}else{if(nt(s)){const y=Object.keys(s)[0],_=s[y];f=u[y].getPixelForValue(_)-p+t}else s==="center"?f=(c.left+c.right)/2-p+t:f=kh(e,s,t);m=we(n,o,i),d=s==="left"?-Gt:Gt}return{titleX:f,titleY:m,maxWidth:h,rotation:d}}class jr extends ye{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=Ze(t,Number.POSITIVE_INFINITY),s=Ze(s,Number.NEGATIVE_INFINITY),n=Ze(n,Number.POSITIVE_INFINITY),i=Ze(i,Number.NEGATIVE_INFINITY),{min:Ze(t,n),max:Ze(s,i),minDefined:qt(t),maxDefined:qt(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,o.min)),r||(n=Math.max(n,o.max));return s=r&&s>n?n:s,n=i&&s>n?s:n,{min:Ze(s,Ze(n,s)),max:Ze(n,Ze(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ot(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hx(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Oh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ot(this.options.afterUpdate,[this])}beforeSetDimensions(){Ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ot(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ot(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Ot(s.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Th(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,r=s.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!s.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Re(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-Bi(t.grid)-s.padding-Dh(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=bp(Math.min(Math.asin(Re((u.highest.height+6)/a,-1,1)),Math.asin(Re(l/c,-1,1))-Math.asin(Re(h/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ot(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Dh(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=Bi(r)+l):(t.height=this.maxHeight,t.width=Bi(r)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=n.padding*2,m=Ht(this.labelRotation),g=Math.cos(m),p=Math.sin(m);if(a){const y=n.mirror?0:p*d.width+g*h.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=n.mirror?0:g*d.width+p*h.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,u,p,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*t.width,f=n*s.height):(h=n*t.height,f=i*s.width):r==="start"?f=s.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,f=s.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=s.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=s.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ot(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)kt(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Oh(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(s/Th(s,n));let c=0,u=0,d,h,f,m,g,p,y,_,b,x,k;for(d=0;d<s;d+=l){if(m=t[d].label,g=this._resolveTickFontOptions(d),i.font=p=g.string,y=r[p]=r[p]||{data:{},gc:[]},_=g.lineHeight,b=x=0,!kt(m)&&!It(m))b=th(i,y.data,y.gc,b,m),x=_;else if(It(m))for(h=0,f=m.length;h<f;++h)k=m[h],!kt(k)&&!It(k)&&(b=th(i,y.data,y.gc,b,k),x+=_);o.push(b),a.push(x),c=Math.max(b,c),u=Math.max(x,u)}Ik(r,s);const A=o.indexOf(c),E=a.indexOf(u),L=I=>({width:o[I]||0,height:a[I]||0});return{first:L(0),last:L(s-1),widest:L(A),highest:L(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return yx(this._alignToPixels?an(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=Lk(this.getContext(),t,n))}return this.$context||(this.$context=Pk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ht(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Bi(r),f=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,p=g/2,y=function(at){return an(n,at,g)};let _,b,x,k,A,E,L,I,V,P,O,z;if(o==="top")_=y(this.bottom),E=this.bottom-h,I=_-p,P=y(t.top)+p,z=t.bottom;else if(o==="bottom")_=y(this.top),P=t.top,z=y(t.bottom)-p,E=_+p,I=this.top+h;else if(o==="left")_=y(this.right),A=this.right-h,L=_-p,V=y(t.left)+p,O=t.right;else if(o==="right")_=y(this.left),V=t.left,O=y(t.right)-p,A=_+p,L=this.left+h;else if(s==="x"){if(o==="center")_=y((t.top+t.bottom)/2+.5);else if(nt(o)){const at=Object.keys(o)[0],ut=o[at];_=y(this.chart.scales[at].getPixelForValue(ut))}P=t.top,z=t.bottom,E=_+p,I=E+h}else if(s==="y"){if(o==="center")_=y((t.left+t.right)/2);else if(nt(o)){const at=Object.keys(o)[0],ut=o[at];_=y(this.chart.scales[at].getPixelForValue(ut))}A=_-p,L=A-h,V=t.left,O=t.right}const it=et(i.ticks.maxTicksLimit,d),ot=Math.max(1,Math.ceil(d/it));for(b=0;b<d;b+=ot){const at=this.getContext(b),ut=r.setContext(at),yt=a.setContext(at),De=ut.lineWidth,Fe=ut.color,Ce=yt.dash||[],Yt=yt.dashOffset,Ms=ut.tickWidth,cs=ut.tickColor,tn=ut.tickBorderDash||[],be=ut.tickBorderDashOffset;x=Ak(this,b,l),x!==void 0&&(k=an(n,x,De),c?A=L=V=O=k:E=I=P=z=k,f.push({tx1:A,ty1:E,tx2:L,ty2:I,x1:V,y1:P,x2:O,y2:z,width:De,color:Fe,borderDash:Ce,borderDashOffset:Yt,tickWidth:Ms,tickColor:cs,tickBorderDash:tn,tickBorderDashOffset:be}))}return this._ticksLength=d,this._borderValue=_,f}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=Bi(n.grid),f=h+u,m=d?-u:f,g=-Ht(this.labelRotation),p=[];let y,_,b,x,k,A,E,L,I,V,P,O,z="middle";if(i==="top")A=this.bottom-m,E=this._getXAxisLabelAlignment();else if(i==="bottom")A=this.top+m,E=this._getXAxisLabelAlignment();else if(i==="left"){const ot=this._getYAxisLabelAlignment(h);E=ot.textAlign,k=ot.x}else if(i==="right"){const ot=this._getYAxisLabelAlignment(h);E=ot.textAlign,k=ot.x}else if(s==="x"){if(i==="center")A=(t.top+t.bottom)/2+f;else if(nt(i)){const ot=Object.keys(i)[0],at=i[ot];A=this.chart.scales[ot].getPixelForValue(at)+f}E=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")k=(t.left+t.right)/2-f;else if(nt(i)){const ot=Object.keys(i)[0],at=i[ot];k=this.chart.scales[ot].getPixelForValue(at)}E=this._getYAxisLabelAlignment(h).textAlign}s==="y"&&(l==="start"?z="top":l==="end"&&(z="bottom"));const it=this._getLabelSizes();for(y=0,_=a.length;y<_;++y){b=a[y],x=b.label;const ot=r.setContext(this.getContext(y));L=this.getPixelForTick(y)+r.labelOffset,I=this._resolveTickFontOptions(y),V=I.lineHeight,P=It(x)?x.length:1;const at=P/2,ut=ot.color,yt=ot.textStrokeColor,De=ot.textStrokeWidth;let Fe=E;o?(k=L,E==="inner"&&(y===_-1?Fe=this.options.reverse?"left":"right":y===0?Fe=this.options.reverse?"right":"left":Fe="center"),i==="top"?c==="near"||g!==0?O=-P*V+V/2:c==="center"?O=-it.highest.height/2-at*V+V:O=-it.highest.height+V/2:c==="near"||g!==0?O=V/2:c==="center"?O=it.highest.height/2-at*V:O=it.highest.height-P*V,d&&(O*=-1),g!==0&&!ot.showLabelBackdrop&&(k+=V/2*Math.sin(g))):(A=L,O=(1-P)*V/2);let Ce;if(ot.showLabelBackdrop){const Yt=ce(ot.backdropPadding),Ms=it.heights[y],cs=it.widths[y];let tn=O-Yt.top,be=0-Yt.left;switch(z){case"middle":tn-=Ms/2;break;case"bottom":tn-=Ms;break}switch(E){case"center":be-=cs/2;break;case"right":be-=cs;break;case"inner":y===_-1?be-=cs:y>0&&(be-=cs/2);break}Ce={left:be,top:tn,width:cs+Yt.width,height:Ms+Yt.height,color:ot.backdropColor}}p.push({label:x,font:I,textOffset:O,options:{rotation:g,color:ut,strokeColor:yt,strokeWidth:De,textAlign:Fe,textBaseline:z,translation:[k,A],backdrop:Ce}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ht(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return s==="left"?i?(u=this.right+r,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+r,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:r,height:o}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(r=0,o=i.length;r<o;++r){const l=i[r];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=an(t,this.left,o)-o/2,u=an(t,this.right,a)+a/2,d=h=l):(d=an(t,this.top,o)-o/2,h=an(t,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.beginPath(),s.moveTo(c,d),s.lineTo(u,h),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Nr(n,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Go(n,c,0,u,l,a)}i&&Fr(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const r=Zt(n.font),o=ce(n.padding),a=n.align;let l=r.lineHeight/2;s==="bottom"||s==="center"||nt(s)?(l+=o.bottom,It(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=$k(this,l,s,a);Go(t,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:h,textAlign:Rk(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=et(t.grid&&t.grid.z,-1),i=et(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==jr.prototype.draw?[{z:s,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=s.length;r<o;++r){const a=s[r];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return Zt(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class fo{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;jk(s)&&(n=this.register(s));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Nk(t,o,n),this.override&&$t.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in $t[i]&&(delete $t[i][n],this.override&&delete On[n])}}function Nk(e,t,s){const n=Tr(Object.create(null),[s?$t.get(s):{},$t.get(t),e.defaults]);$t.set(t,n),e.defaultRoutes&&Fk(t,e.defaultRoutes),e.descriptors&&$t.describe(t,e.descriptors)}function Fk(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),r=[e].concat(n).join("."),o=t[s].split("."),a=o.pop(),l=o.join(".");$t.route(r,i,l,a)})}function jk(e){return"id"in e&&"defaults"in e}class Bk{constructor(){this.controllers=new fo(ba,"datasets",!0),this.elements=new fo(ye,"elements"),this.plugins=new fo(Object,"plugins"),this.scales=new fo(jr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):St(i,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,s,n){const i=Xc(t);Ot(n["before"+i],[],n),s[t](n),Ot(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var es=new Bk;class Wk{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,s,n);return s==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,s,n,i){i=i||{};for(const r of t){const o=r.plugin,a=o[n],l=[s,i,r.options];if(Ot(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=et(n.options&&n.options.plugins,{}),r=Uk(n);return i===!1&&!s?[]:Hk(t,r,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function Uk(e){const t={},s=[],n=Object.keys(es.plugins.items);for(let r=0;r<n.length;r++)s.push(es.getPlugin(n[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];s.indexOf(o)===-1&&(s.push(o),t[o.id]=!0)}return{plugins:s,localIds:t}}function zk(e,t){return!t&&e===!1?null:e===!0?{}:e}function Hk(e,{plugins:t,localIds:s},n,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=zk(n[l],i);c!==null&&r.push({plugin:a,options:Vk(e.config,{plugin:a,local:s[l]},c,o)})}return r}function Vk(e,{plugin:t,local:s},n,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return s&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sc(e,t){const s=$t.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function qk(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function Yk(e,t){return e===t?"_index_":"_value_"}function Ch(e){if(e==="x"||e==="y"||e==="r")return e}function Jk(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function nc(e,...t){if(Ch(e))return e;for(const s of t){const n=s.axis||Jk(s.position)||e.length>1&&Ch(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Mh(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function Kk(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Mh(e,"x",s[0])||Mh(e,"y",s[0])}return{}}function Gk(e,t){const s=On[e.type]||{scales:{}},n=t.scales||{},i=sc(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!nt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=nc(o,a,Kk(o,e),$t.scales[a.type]),c=Yk(l,i),u=s.scales||{};r[o]=cr(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||sc(a,t),u=(On[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=qk(d,l),f=o[h+"AxisID"]||h;r[f]=r[f]||Object.create(null),cr(r[f],[{axis:h},n[f],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];cr(a,[$t.scales[a.type],$t.scale])}),r}function Yp(e){const t=e.options||(e.options={});t.plugins=et(t.plugins,{}),t.scales=Gk(e,t)}function Jp(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Zk(e){return e=e||{},e.data=Jp(e.data),Yp(e),e}const Eh=new Map,Kp=new Set;function go(e,t){let s=Eh.get(e);return s||(s=t(),Eh.set(e,s),Kp.add(s)),s}const Wi=(e,t,s)=>{const n=kn(t,s);n!==void 0&&e.add(n)};class Xk{constructor(t){this._config=Zk(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Jp(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Yp(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return go(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return go(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return go(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return go(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(s);if(a)return a;const l=new Set;s.forEach(u=>{t&&(l.add(t),u.forEach(d=>Wi(l,t,d))),u.forEach(d=>Wi(l,i,d)),u.forEach(d=>Wi(l,On[r]||{},d)),u.forEach(d=>Wi(l,$t,d)),u.forEach(d=>Wi(l,tc,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Kp.has(s)&&o.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,On[s]||{},$t.datasets[s]||{},{type:s},$t,tc]}resolveNamedOptions(t,s,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ah(this._resolverCache,t,i);let l=o;if(tT(o,s)){r.$shared=!1,n=me(n)?n():n;const c=this.createResolver(t,n,a);l=yi(o,n,c)}for(const c of s)r[c]=l[c];return r}createResolver(t,s,n=[""],i){const{resolver:r}=Ah(this._resolverCache,t,n);return nt(s)?yi(r,s,void 0,i):r}}function Ah(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let r=n.get(i);return r||(r={resolver:nu(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,r)),r}const Qk=e=>nt(e)&&Object.getOwnPropertyNames(e).some(t=>me(e[t]));function tT(e,t){const{isScriptable:s,isIndexable:n}=Cp(e);for(const i of t){const r=s(i),o=n(i),a=(o||r)&&e[i];if(r&&(me(a)||Qk(a))||o&&It(a))return!0}return!1}var eT="4.5.0";const sT=["top","bottom","left","right","chartArea"];function Ih(e,t){return e==="top"||e==="bottom"||sT.indexOf(e)===-1&&t==="x"}function Ph(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Lh(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),Ot(s&&s.onComplete,[e],t)}function nT(e){const t=e.chart,s=t.options.animation;Ot(s&&s.onProgress,[e],t)}function Gp(e){return ou()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Eo={},Rh=e=>{const t=Gp(e);return Object.values(Eo).filter(s=>s.canvas===t).pop()};function iT(e,t,s){const n=Object.keys(e);for(const i of n){const r=+i;if(r>=t){const o=e[i];delete e[i],(s>0||r>t)&&(e[r+s]=o)}}}function rT(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class Ne{static defaults=$t;static instances=Eo;static overrides=On;static registry=es;static version=eT;static getChart=Rh;static register(...t){es.add(...t),$h()}static unregister(...t){es.remove(...t),$h()}constructor(t,s){const n=this.config=new Xk(s),i=Gp(t),r=Rh(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Sk(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ix(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wx(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Eo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}fs.listen(this,"complete",Lh),fs.listen(this,"progress",nT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:r}=this;return kt(t)?s&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ih(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eh(this.canvas,this.ctx),this}stop(){return fs.stop(this),this}resize(t,s){fs.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,s,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ih(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ot(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};St(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];s&&(r=r.concat(Object.keys(s).map(o=>{const a=s[o],l=nc(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),St(r,o=>{const a=o.options,l=a.id,c=nc(l,a),u=et(a.type,o.dtype);(a.position===void 0||Ih(a.position,c)!==Ih(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in n&&n[l].type===u)d=n[l];else{const h=es.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),St(i,(o,a)=>{o||delete n[a]}),St(n,o=>{zs.configure(this,o,o.options),zs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,r)=>i.index-r.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort(Ph("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const r=s[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||sc(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=es.getController(a),{datasetElementType:c,dataElementType:u}=$t.datasets[a];Object.assign(l,{dataElementType:es.getElement(u),datasetElementType:c&&es.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){St(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||St(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ph("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){St(this.scales,t=>{zs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!qd(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of s){const o=n==="_removeElements"?-r:r;iT(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=n(0);for(let r=1;r<s;r++)if(!qd(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zs.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],St(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,me(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fs.has(this)?this.attached&&!fs.running(this)&&fs.start(this):(this.draw(),Lh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,r;for(i=0,r=s.length;i<r;++i){const o=s[i];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Fp(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Nr(s,i),t.controller.draw(),i&&Fr(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Or(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const r=sk.modes[s];return typeof r=="function"?r(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(r=>r&&r._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=An(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);pe(s)?(r.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),fs.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eh(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Eo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(r,o)=>{s.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};St(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():o()}unbindEvents(){St(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},St(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let r,o,a,l;for(s==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Vo(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(s,t),a=n?t:r(t,s);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:r}=this,o=s,a=this._getActiveElements(t,i,n,o),l=ux(t),c=rT(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Ot(r.onHover,[t,a,this],this),l&&Ot(r.onClick,[t,a,this],this));const u=!Vo(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function $h(){return St(Ne.instances,e=>e._plugins.invalidate())}function Zp(e,t,s=t){e.lineCap=et(s.borderCapStyle,t.borderCapStyle),e.setLineDash(et(s.borderDash,t.borderDash)),e.lineDashOffset=et(s.borderDashOffset,t.borderDashOffset),e.lineJoin=et(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=et(s.borderWidth,t.borderWidth),e.strokeStyle=et(s.borderColor,t.borderColor)}function oT(e,t,s){e.lineTo(s.x,s.y)}function aT(e){return e.stepped?Rx:e.tension||e.cubicInterpolationMode==="monotone"?$x:oT}function Xp(e,t,s={}){const n=e.length,{start:i=0,end:r=n-1}=s,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function lT(e,t,s,n){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Xp(i,s,n),u=aT(r);let{move:d=!0,reverse:h}=n||{},f,m,g;for(f=0;f<=c;++f)m=i[(a+(h?c-f:f))%o],!m.skip&&(d?(e.moveTo(m.x,m.y),d=!1):u(e,g,m,h,r.stepped),g=m);return l&&(m=i[(a+(h?c:0))%o],u(e,g,m,h,r.stepped)),!!l}function cT(e,t,s,n){const i=t.points,{count:r,start:o,ilen:a}=Xp(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,d=0,h,f,m,g,p,y;const _=x=>(o+(c?a-x:x))%r,b=()=>{g!==p&&(e.lineTo(u,p),e.lineTo(u,g),e.lineTo(u,y))};for(l&&(f=i[_(0)],e.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[_(h)],f.skip)continue;const x=f.x,k=f.y,A=x|0;A===m?(k<g?g=k:k>p&&(p=k),u=(d*u+x)/++d):(b(),e.lineTo(x,k),m=A,d=0,g=p=k),y=k}b()}function ic(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?cT:lT}function uT(e){return e.stepped?gS:e.tension||e.cubicInterpolationMode==="monotone"?mS:fn}function dT(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),Zp(e,t.options),e.stroke(i)}function hT(e,t,s,n){const{segments:i,options:r}=t,o=ic(t);for(const a of i)Zp(e,r,a.style),e.beginPath(),o(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const fT=typeof Path2D=="function";function gT(e,t,s,n){fT&&!t.options.segment?dT(e,t,s,n):hT(e,t,s,n)}class Oi extends ye{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;oS(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wS(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],r=this.points,o=Np(this,{property:s,start:i,end:i});if(!o.length)return;const a=[],l=uT(n);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=r[d],m=r[h];if(f===m){a.push(f);continue}const g=Math.abs((i-f[s])/(m[s]-f[s])),p=l(f,m,g,n.stepped);p[s]=t[s],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,s,n){return ic(this)(t,this,s,n)}path(t,s,n){const i=this.segments,r=ic(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)o&=r(t,this,a,{start:s,end:s+n-1});return!!o}draw(t,s,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),gT(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Nh(e,t,s,n){const i=e.options,{[s]:r}=e.getProps([s],n);return Math.abs(t-r)<i.radius+i.hitRadius}class du extends ye{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(s-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,s){return Nh(this,t,"x",s)}inYRange(t,s){return Nh(this,t,"y",s)}getCenterPoint(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const n=s&&t.borderWidth||0;return(s+n)*2}draw(t,s){const n=this.options;this.skip||n.radius<.1||!Or(this,s,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,ec(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Qp(e,t){const{x:s,y:n,base:i,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(s,i),l=Math.max(s,i),c=n-d,u=n+d):(d=r/2,a=s-d,l=s+d,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function Hs(e,t,s,n){return e?0:Re(t,s,n)}function mT(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,r=Dp(n);return{t:Hs(i.top,r.top,0,s),r:Hs(i.right,r.right,0,t),b:Hs(i.bottom,r.bottom,0,s),l:Hs(i.left,r.left,0,t)}}function pT(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,r=_n(i),o=Math.min(t,s),a=e.borderSkipped,l=n||nt(i);return{topLeft:Hs(!l||a.top||a.left,r.topLeft,0,o),topRight:Hs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Hs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Hs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function yT(e){const t=Qp(e),s=t.right-t.left,n=t.bottom-t.top,i=mT(e,s/2,n/2),r=pT(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function fl(e,t,s,n){const i=t===null,r=s===null,a=e&&!(i&&r)&&Qp(e,n);return a&&(i||Us(t,a.left,a.right))&&(r||Us(s,a.top,a.bottom))}function bT(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function vT(e,t){e.rect(t.x,t.y,t.w,t.h)}function gl(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,r=(e.x+e.w!==s.x+s.w?t:0)-n,o=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+r,h:e.h+o,radius:e.radius}}class _T extends ye{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=yT(this),a=bT(o.radius)?Dr:vT;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,gl(o,s,r)),t.clip(),a(t,gl(r,-s,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,gl(r,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return fl(this,t,s,n)}inXRange(t,s){return fl(this,t,null,s)}inYRange(t,s){return fl(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(s+i)/2:s,y:r?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function wT(e,t,s){const n=e.segments,i=e.points,r=t.points,o=[];for(const a of n){let{start:l,end:c}=a;c=_a(l,c,i);const u=rc(s,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=Np(t,u);for(const h of d){const f=rc(s,r[h.start],r[h.end],h.loop),m=$p(a,i,f);for(const g of m)o.push({source:g,target:h,start:{[s]:Fh(u,f,"start",Math.max)},end:{[s]:Fh(u,f,"end",Math.min)}})}}return o}function rc(e,t,s,n){if(n)return;let i=t[e],r=s[e];return e==="angle"&&(i=ns(i),r=ns(r)),{property:e,start:i,end:r}}function xT(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=_a(o,a,i);const l=i[o],c=i[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):s!==null&&(r.push({x:s,y:l.y}),r.push({x:s,y:c.y}))}),r}function _a(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Fh(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function ty(e,t){let s=[],n=!1;return It(e)?(n=!0,s=e):s=xT(e,t),s.length?new Oi({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function jh(e){return e&&e.fill!==!1}function ST(e,t,s){let i=e[t].fill;const r=[t];let o;if(!s)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!qt(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function kT(e,t,s){const n=CT(e);if(nt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return qt(i)&&Math.floor(i)===i?TT(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function TT(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function OT(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:nt(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function DT(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:nt(e)?n=e.value:n=t.getBaseValue(),n}function CT(e){const t=e.options,s=t.fill;let n=et(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function MT(e){const{scale:t,index:s,line:n}=e,i=[],r=n.segments,o=n.points,a=ET(t,s);a.push(ty({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)AT(i,o[u],a)}return new Oi({points:i,options:{}})}function ET(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===t)break;r.hidden||s.unshift(r.dataset)}return s}function AT(e,t,s){const n=[];for(let i=0;i<s.length;i++){const r=s[i],{first:o,last:a,point:l}=IT(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function IT(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],r=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][s],h=o[u.end][s];if(Us(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:n}}class ey{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:r,radius:o}=this;return s=s||{start:0,end:zt},t.arc(i,r,o,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,r=t.angle;return{x:s+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function PT(e){const{chart:t,fill:s,line:n}=e;if(qt(s))return LT(t,s);if(s==="stack")return MT(e);if(s==="shape")return!0;const i=RT(e);return i instanceof ey?i:ty(i,n)}function LT(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function RT(e){return(e.scale||{}).getPointPositionForValue?NT(e):$T(e)}function $T(e){const{scale:t={},fill:s}=e,n=OT(s,t);if(qt(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function NT(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,r=n.reverse?t.max:t.min,o=DT(s,t,r),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,r);return new ey({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function ml(e,t,s){const n=PT(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},m=i.getDatasetMeta(r),g=Fp(i,m);n&&o.points.length&&(Nr(e,s),FT(e,{line:o,target:n,above:h,below:f,area:s,scale:a,axis:l,clip:g}),Fr(e))}function FT(e,t){const{line:s,target:n,above:i,below:r,area:o,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save();let u=r;r!==i&&(c==="x"?(Bh(e,n,o.top),pl(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Bh(e,n,o.bottom)):c==="y"&&(Wh(e,n,o.left),pl(e,{line:s,target:n,color:r,scale:a,property:c,clip:l}),e.restore(),e.save(),Wh(e,n,o.right),u=i)),pl(e,{line:s,target:n,color:u,scale:a,property:c,clip:l}),e.restore()}function Bh(e,t,s){const{segments:n,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[_a(l,c,i)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,s),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Wh(e,t,s){const{segments:n,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[_a(l,c,i)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(s,u.y),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(s,d.y)}e.lineTo(s,t.first().y),e.closePath(),e.clip()}function pl(e,t){const{line:s,target:n,property:i,color:r,scale:o,clip:a}=t,l=wT(s,n,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=r}={}}=c,m=n!==!0;e.save(),e.fillStyle=f,jT(e,o,a,m&&rc(i,d,h)),e.beginPath();const g=!!s.pathSegment(e,c);let p;if(m){g?e.closePath():Uh(e,n,h,i);const y=!!n.pathSegment(e,u,{move:g,reverse:!0});p=g&&y,p||Uh(e,n,d,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function jT(e,t,s,n){const i=t.chart.chartArea,{property:r,start:o,end:a}=n||{};if(r==="x"||r==="y"){let l,c,u,d;r==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),e.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),d=Math.min(d,s.bottom)),e.rect(l,c,u-l,d-c),e.clip()}}function Uh(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var hu={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<n;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Oi&&(l={visible:e.isDatasetVisible(o),index:o,fill:kT(a,o,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<n;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=ST(i,o,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&ml(e.ctx,a,r))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;jh(r)&&ml(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!jh(n)||s.drawTime!=="beforeDatasetDraw"||ml(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zh=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},BT=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Hh extends ye{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=Ot(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=Zt(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=zh(n,r);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((m,g)=>{const p=n+s/2+r.measureText(m.text).width;(g===0||c[c.length-1]+p+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:p,height:i},c[c.length-1]+=p+a}),d}_fitCols(t,s,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,h=0,f=0,m=0,g=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:_,itemHeight:b}=WT(n,s,r,p,i);y>0&&f+b+2*a>u&&(d+=h+a,c.push({width:h,height:f}),m+=h+a,g++,h=f=0),l[y]={left:m,top:f,col:g,width:_,height:b},h=Math.max(h,_),f+=b+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:r}}=this,o=fi(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=we(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=we(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=we(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=we(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Nr(t,this),this._draw(),Fr(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=$t.color,l=fi(t.rtl,this.left,this.width),c=Zt(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:p}=zh(o,d),y=function(A,E,L){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const I=et(L.lineWidth,1);if(i.fillStyle=et(L.fillStyle,a),i.lineCap=et(L.lineCap,"butt"),i.lineDashOffset=et(L.lineDashOffset,0),i.lineJoin=et(L.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=et(L.strokeStyle,a),i.setLineDash(et(L.lineDash,[])),o.usePointStyle){const V={radius:g*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:I},P=l.xPlus(A,m/2),O=E+h;Tp(i,V,P,O,o.pointStyleWidth&&m)}else{const V=E+Math.max((d-g)/2,0),P=l.leftForLtr(A,m),O=_n(L.borderRadius);i.beginPath(),Object.values(O).some(z=>z!==0)?Dr(i,{x:P,y:V,w:m,h:g,radius:O}):i.rect(P,V,m,g),i.fill(),I!==0&&i.stroke()}i.restore()},_=function(A,E,L){Go(i,L.text,A,E+p/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},b=this.isHorizontal(),x=this._computeTitleHeight();b?f={x:we(r,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:we(r,this.top+x+u,this.bottom-s[0].height),line:0},Pp(this.ctx,t.textDirection);const k=p+u;this.legendItems.forEach((A,E)=>{i.strokeStyle=A.fontColor,i.fillStyle=A.fontColor;const L=i.measureText(A.text).width,I=l.textAlign(A.textAlign||(A.textAlign=o.textAlign)),V=m+h+L;let P=f.x,O=f.y;l.setWidth(this.width),b?E>0&&P+V+u>this.right&&(O=f.y+=k,f.line++,P=f.x=we(r,this.left+u,this.right-n[f.line])):E>0&&O+k>this.bottom&&(P=f.x=P+s[f.line].width+u,f.line++,O=f.y=we(r,this.top+x+u,this.bottom-s[f.line].height));const z=l.x(P);if(y(z,O,A),P=xx(I,P+m+h,b?P+V:this.right,t.rtl),_(l.x(P),O,A),b)f.x+=V+u;else if(typeof A.text!="string"){const it=c.lineHeight;f.y+=sy(A,it)+u}else f.y+=k}),Lp(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=Zt(s.font),i=ce(s.padding);if(!s.display)return;const r=fi(t.rtl,this.left,this.width),o=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=we(t.align,d,this.right-h);else{const m=this.columnSizes.reduce((g,p)=>Math.max(g,p.height),0);u=c+we(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const f=we(a,d,d+h);o.textAlign=r.textAlign(Sp(a)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Go(o,s.text,f,u,n)}_computeTitleHeight(){const t=this.options.title,s=Zt(t.font),n=ce(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,r;if(Us(t,this.left,this.right)&&Us(s,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Us(t,i.left,i.left+i.width)&&Us(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!HT(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=BT(i,n);i&&!r&&Ot(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Ot(s.onHover,[t,n,this],this)}else n&&Ot(s.onClick,[t,n,this],this)}}function WT(e,t,s,n,i){const r=UT(n,e,t,s),o=zT(i,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function UT(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+s.size/2+n.measureText(i).width}function zT(e,t,s){let n=e;return typeof t.text!="string"&&(n=sy(t,s)),n}function sy(e,t){const s=e.text?e.text.length:0;return t*s}function HT(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var wa={id:"legend",_element:Hh,start(e,t,s){const n=e.legend=new Hh({ctx:e.ctx,options:s,chart:e});zs.configure(e,n,s),zs.addBox(e,n)},stop(e){zs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;zs.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=ce(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Xi={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,r=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=pi(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Qe(e,t){return t&&(It(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function gs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function VT(e,t){const{element:s,datasetIndex:n,index:i}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Vh(e,t){const s=e.chart.ctx,{body:n,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Zt(t.bodyFont),c=Zt(t.titleFont),u=Zt(t.footerFont),d=r.length,h=i.length,f=n.length,m=ce(t.padding);let g=m.height,p=0,y=n.reduce((x,k)=>x+k.before.length+k.lines.length+k.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const x=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*x+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let _=0;const b=function(x){p=Math.max(p,s.measureText(x).width+_)};return s.save(),s.font=c.string,St(e.title,b),s.font=l.string,St(e.beforeBody.concat(e.afterBody),b),_=t.displayColors?o+2+t.boxPadding:0,St(n,x=>{St(x.before,b),St(x.lines,b),St(x.after,b)}),_=0,s.font=u.string,St(e.footer,b),s.restore(),p+=m.width,{width:p,height:g}}function qT(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function YT(e,t,s,n){const{x:i,width:r}=n,o=s.caretSize+s.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function JT(e,t,s,n){const{x:i,width:r}=s,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),YT(c,e,t,s)&&(c="center"),c}function qh(e,t,s){const n=s.yAlign||t.yAlign||qT(e,s);return{xAlign:s.xAlign||t.xAlign||JT(e,t,s,n),yAlign:n}}function KT(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function GT(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function Yh(e,t,s,n){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=s,c=i+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=_n(o);let m=KT(t,a);const g=GT(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,h)+i:a==="right"&&(m+=Math.max(d,f)+i),{x:Re(m,0,n.width-t.width),y:Re(g,0,n.height-t.height)}}function mo(e,t,s){const n=ce(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Jh(e){return Qe([],gs(e))}function ZT(e,t,s){return An(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function Kh(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const ny={beforeTitle:hs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:hs,beforeBody:hs,beforeLabel:hs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return kt(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:hs,afterBody:hs,beforeFooter:hs,footer:hs,afterFooter:hs};function he(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?ny[t].call(s,n):i}let Gh=class extends ye{static positioners=Xi;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,r=new lu(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ZT(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=he(n,"beforeTitle",this,t),r=he(n,"title",this,t),o=he(n,"afterTitle",this,t);let a=[];return a=Qe(a,gs(i)),a=Qe(a,gs(r)),a=Qe(a,gs(o)),a}getBeforeBody(t,s){return Jh(he(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return St(t,r=>{const o={before:[],lines:[],after:[]},a=Kh(n,r);Qe(o.before,gs(he(a,"beforeLabel",this,r))),Qe(o.lines,he(a,"label",this,r)),Qe(o.after,gs(he(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,s){return Jh(he(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=he(n,"beforeFooter",this,t),r=he(n,"footer",this,t),o=he(n,"afterFooter",this,t);let a=[];return a=Qe(a,gs(i)),a=Qe(a,gs(r)),a=Qe(a,gs(o)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(VT(this.chart,s[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,n))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,n))),St(a,u=>{const d=Kh(t.callbacks,u);i.push(he(d,"labelColor",this,u)),r.push(he(d,"labelPointStyle",this,u)),o.push(he(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Xi[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=Vh(this,n),c=Object.assign({},a,l),u=qh(this.chart,n,c),d=Yh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const r=this.getCaretPosition(t,n,i);s.lineTo(r.x1,r.y1),s.lineTo(r.x2,r.y2),s.lineTo(r.x3,r.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=_n(a),{x:h,y:f}=t,{width:m,height:g}=s;let p,y,_,b,x,k;return r==="center"?(x=f+g/2,i==="left"?(p=h,y=p-o,b=x+o,k=x-o):(p=h+m,y=p+o,b=x-o,k=x+o),_=p):(i==="left"?y=h+Math.max(l,u)+o:i==="right"?y=h+m-Math.max(c,d)-o:y=this.caretX,r==="top"?(b=f,x=b-o,p=y-o,_=y+o):(b=f+g,x=b+o,p=y+o,_=y-o),k=b),{x1:p,x2:y,x3:_,y1:b,y2:x,y3:k}}drawTitle(t,s,n){const i=this.title,r=i.length;let o,a,l;if(r){const c=fi(n.rtl,this.x,this.width);for(t.x=mo(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",o=Zt(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,l=0;l<r;++l)s.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,u=Zt(r.bodyFont),d=mo(this,"left",r),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=s.y+f;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(h,c)+c/2,y=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ec(t,g,p,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ec(t,g,p,y)}else{t.lineWidth=nt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(h,c),p=i.leftForLtr(i.xPlus(h,1),c-2),y=_n(o.borderRadius);Object.values(y).some(_=>_!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Dr(t,{x:g,y:m,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Dr(t,{x:p,y:m+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(g,m,c,l),t.strokeRect(g,m,c,l),t.fillStyle=o.backgroundColor,t.fillRect(p,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,d=Zt(n.bodyFont);let h=d.lineHeight,f=0;const m=fi(n.rtl,this.x,this.width),g=function(L){s.fillText(L,m.x(t.x+f),t.y+h/2),t.y+=h+r},p=m.textAlign(o);let y,_,b,x,k,A,E;for(s.textAlign=o,s.textBaseline="middle",s.font=d.string,t.x=mo(this,p,n),s.fillStyle=n.bodyColor,St(this.beforeBody,g),f=a&&p!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,A=i.length;x<A;++x){for(y=i[x],_=this.labelTextColors[x],s.fillStyle=_,St(y.before,g),b=y.lines,a&&b.length&&(this._drawColorBox(s,t,x,m,n),h=Math.max(d.lineHeight,l)),k=0,E=b.length;k<E;++k)g(b[k]),h=d.lineHeight;St(y.after,g)}f=0,h=d.lineHeight,St(this.afterBody,g),t.y-=r}drawFooter(t,s,n){const i=this.footer,r=i.length;let o,a;if(r){const l=fi(n.rtl,this.x,this.width);for(t.x=mo(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",o=Zt(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,a=0;a<r;++a)s.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=_n(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+d,l),o==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-h,l),s.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+u-m),s.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+f,l+u),s.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+d),s.quadraticCurveTo(a,l,a+d,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const o=Xi[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Vh(this,t),l=Object.assign({},o,this._size),c=qh(s,t,l),u=Yh(t,l,c,s);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ce(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,s),Pp(t,s.textDirection),r.y+=o.top,this.drawTitle(r,t,s),this.drawBody(r,t,s),this.drawFooter(r,t,s),Lp(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Vo(n,i),o=this._positionChanged(i,s);(r||o)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,s,n),a=this._positionChanged(o,t),l=s||!Vo(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,s){const{caretX:n,caretY:i,options:r}=this,o=Xi[r.position].call(this,t,s);return o!==!1&&(n!==o.x||i!==o.y)}};var xa={id:"tooltip",_element:Gh,positioners:Xi,afterInit(e,t,s){s&&(e.tooltip=new Gh({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ny},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function XT(e,t){const s=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,f=r||1,m=u-1,{min:g,max:p}=t,y=!kt(o),_=!kt(a),b=!kt(c),x=(p-g)/(d+1);let k=Yd((p-g)/m/f)*f,A,E,L,I;if(k<1e-14&&!y&&!_)return[{value:g},{value:p}];I=Math.ceil(p/k)-Math.floor(g/k),I>m&&(k=Yd(I*k/m/f)*f),kt(l)||(A=Math.pow(10,l),k=Math.ceil(k*A)/A),i==="ticks"?(E=Math.floor(g/k)*k,L=Math.ceil(p/k)*k):(E=g,L=p),y&&_&&r&&gx((a-o)/r,k/1e3)?(I=Math.round(Math.min((a-o)/k,u)),k=(a-o)/I,E=o,L=a):b?(E=y?o:E,L=_?a:L,I=c-1,k=(L-E)/I):(I=(L-E)/k,ur(I,Math.round(I),k/1e3)?I=Math.round(I):I=Math.ceil(I));const V=Math.max(Jd(k),Jd(E));A=Math.pow(10,kt(l)?V:l),E=Math.round(E*A)/A,L=Math.round(L*A)/A;let P=0;for(y&&(h&&E!==o?(s.push({value:o}),E<o&&P++,ur(Math.round((E+P*k)*A)/A,o,Zh(o,x,e))&&P++):E<o&&P++);P<I;++P){const O=Math.round((E+P*k)*A)/A;if(_&&O>a)break;s.push({value:O})}return _&&h&&L!==a?s.length&&ur(s[s.length-1].value,a,Zh(a,x,e))?s[s.length-1].value=a:s.push({value:a}):(!_||L===a)&&s.push({value:L}),s}function Zh(e,t,{horizontal:s,minRotation:n}){const i=Ht(n),r=(s?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class QT extends jr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=s?i:l,a=l=>r=n?r:l;if(t){const l=as(i),c=as(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},r=this._range||this,o=XT(i,r);return t.bounds==="ticks"&&mx(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return su(t,this.chart.options.locale,this.options.ticks.format)}}class Sa extends QT{static id="linear";static defaults={ticks:{callback:kp.formatters.numeric}};determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=qt(t)?t:0,this.max=qt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=Ht(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ka={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ge=Object.keys(ka);function Xh(e,t){return e-t}function Qh(e,t){if(kt(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),qt(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(i&&(o=i==="week"&&(Tn(r)||r===!0)?s.startOf(o,"isoWeek",r):s.startOf(o,i)),+o)}function tf(e,t,s,n){const i=ge.length;for(let r=ge.indexOf(e);r<i-1;++r){const o=ka[ge[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-t)/(a*o.size))<=n)return ge[r]}return ge[i-1]}function t1(e,t,s,n,i){for(let r=ge.length-1;r>=ge.indexOf(s);r--){const o=ge[r];if(ka[o].common&&e._adapter.diff(i,n,o)>=t-1)return o}return ge[s?ge.indexOf(s):0]}function e1(e){for(let t=ge.indexOf(e)+1,s=ge.length;t<s;++t)if(ka[ge[t]].common)return ge[t]}function ef(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=tu(s,t),r=s[n]>=t?s[n]:s[i];e[r]=!0}}function s1(e,t,s,n){const i=e._adapter,r=+i.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function sf(e,t,s){const n=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,n.push({value:a,major:!1});return r===0||!s?n:s1(e,n,i,s)}class vi extends jr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new Wp._date(t.adapters.date);i.init(s),cr(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:Qh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=qt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),r=qt(r)&&!isNaN(r)?r:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=vx(i,r,o);return this._unit=s.unit||(n.autoSkip?tf(s.minUnit,this.min,this.max,this._getLabelCapacity(r)):t1(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:e1(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),sf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=Re(s,0,o),n=Re(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||tf(r.minUnit,s,n,this._getLabelCapacity(s)),a=et(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Tn(l)||l===!0,u={};let d=s,h,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(n,s,o)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<n;h=+t.add(h,a,o),f++)ef(u,h,m);return(h===n||i.bounds==="ticks"||f===1)&&ef(u,h,m),Object.keys(u).sort(Xh).map(g=>+g)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,r=this._unit,o=s||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,s,n,i){const r=this.options,o=r.ticks.callback;if(o)return Ot(o,[t,s,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=n[s],f=c&&d&&h&&h.major;return this._adapter.format(t,i||(f?d:u))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=Ht(this.isHorizontal()?s.maxRotation:s.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,r=this._tickFormatFunction(t,0,sf(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(Qh(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _p(t.sort(Xh))}}function po(e,t,s){let n=0,i=e.length-1,r,o,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=yn(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=yn(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class xP extends vi{static id="timeseries";static defaults=vi.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=po(s,this.min),this._tableRange=po(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(po(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return po(this._table,n*this._tableRange+this._minPos,!0)}}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const n1={datetime:C.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:C.TIME_WITH_SECONDS,minute:C.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Wp._date.override({_id:"luxon",_create:function(e){return C.fromMillis(e,this.options)},init(e){this.options.locale||(this.options.locale=e.locale)},formats:function(){return n1},parse:function(e,t){const s=this.options,n=typeof e;return e===null||n==="undefined"?null:(n==="number"?e=this._create(e):n==="string"?typeof t=="string"?e=C.fromFormat(e,t,s):e=C.fromISO(e,s):e instanceof Date?e=C.fromJSDate(e,s):n==="object"&&!(e instanceof C)&&(e=C.fromObject(e,s)),e.isValid?e.valueOf():null)},format:function(e,t){const s=this._create(e);return typeof t=="string"?s.toFormat(t):s.toLocaleString(t)},add:function(e,t,s){const n={};return n[s]=t,this._create(e).plus(n).valueOf()},diff:function(e,t,s){return this._create(e).diff(this._create(t)).as(s).valueOf()},startOf:function(e,t,s){if(t==="isoWeek"){s=Math.trunc(Math.min(Math.max(0,s),6));const n=this._create(e);return n.minus({days:(n.weekday-s+7)%7}).startOf("day").valueOf()}return t?this._create(e).startOf(t).valueOf():e},endOf:function(e,t){return this._create(e).endOf(t).valueOf()}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const nf={modes:{point(e,t){return Ao(e,t,{intersect:!0})},nearest(e,t,s){return o1(e,t,s)},x(e,t,s){return Ao(e,t,{intersect:s.intersect,axis:"x"})},y(e,t,s){return Ao(e,t,{intersect:s.intersect,axis:"y"})}}};function fu(e,t,s){return(nf.modes[s.mode]||nf.modes.nearest)(e,t,s)}function i1(e,t,s){return s!=="x"&&s!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,s,!0)}function r1(e,t,s){return s==="x"?{x:e.x,y:t.y}:s==="y"?{x:t.x,y:e.y}:t}function Ao(e,t,s){return e.filter(n=>s.intersect?n.inRange(t.x,t.y):i1(n,t,s.axis))}function o1(e,t,s){let n=Number.POSITIVE_INFINITY;return Ao(e,t,s).reduce((i,r)=>{const o=r.getCenterPoint(),a=r1(t,o,s.axis),l=pi(t,a);return l<n?(i=[r],n=l):l===n&&i.push(r),i},[]).sort((i,r)=>i._index-r._index).slice(0,1)}function In(e,t,s){const n=Math.cos(s),i=Math.sin(s),r=t.x,o=t.y;return{x:r+n*(e.x-r)-i*(e.y-o),y:o+i*(e.x-r)+n*(e.y-o)}}const a1=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,bn=.001,Ta=(e,t,s)=>Math.min(s,Math.max(t,e)),iy=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function l1(e,t,s){for(const n of Object.keys(e))e[n]=Ta(e[n],t,s);return e}function c1(e,t,s,n){return!e||!t||s<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(s+n,2)}function ry(e,{x:t,y:s,x2:n,y2:i},r,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=e.x>=t-l-bn&&e.x<=n+l+bn,u=e.y>=s-l-bn&&e.y<=i+l+bn;return r==="x"?c:(r==="y"||c)&&u}function oy(e,{rect:t,center:s},n,{rotation:i,borderWidth:r,hitTolerance:o}){const a=In(e,s,Ht(-i));return ry(a,t,n,{borderWidth:r,hitTolerance:o})}function Pn(e,t){const{centerX:s,centerY:n}=e.getProps(["centerX","centerY"],t);return{x:s,y:n}}function u1(e,t,s,n=!0){const i=s.split(".");let r=0;for(const o of t.split(".")){const a=i[r++];if(parseInt(o,10)<parseInt(a,10))break;if(a1(a,o)){if(n)throw new Error(`${e} v${s} is not supported. v${t} or newer is required.`);return!1}}return!0}const ay=e=>typeof e=="string"&&e.endsWith("%"),ly=e=>parseFloat(e)/100,cy=e=>Ta(ly(e),0,1),Ui=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),d1={box:e=>Ui(e.centerX,e.centerY),doughnutLabel:e=>Ui(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>Ui(e.centerX,e.centerY),line:e=>Ui(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>Ui(e.centerX,e.centerY)};function gu(e,t){return t==="start"?0:t==="end"?e:ay(t)?cy(t)*e:e/2}function Zs(e,t,s=!0){return typeof t=="number"?t:ay(t)?(s?cy(t):ly(t))*e:e}function h1(e,t){const{x:s,width:n}=e,i=t.textAlign;return i==="center"?s+n/2:i==="end"||i==="right"?s+n:s}function uy(e,t,{borderWidth:s,position:n,xAdjust:i,yAdjust:r},o){const a=nt(o),l=t.width+(a?o.width:0)+s,c=t.height+(a?o.height:0)+s,u=mu(n),d=rf(e.x,l,i,u.x),h=rf(e.y,c,r,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function mu(e,t="center"){return nt(e)?{x:et(e.x,t),y:et(e.y,t)}:(e=et(e,t),{x:e,y:e})}const dy=(e,t)=>e&&e.autoFit&&t<1;function hy(e,t){const s=e.font,n=It(s)?s:[s];return dy(e,t)?n.map(function(i){const r=Zt(i);return r.size=Math.floor(i.size*t),r.lineHeight=i.lineHeight,Zt(r)}):n.map(i=>Zt(i))}function fy(e){return e&&(pe(e.xValue)||pe(e.yValue))}function rf(e,t,s=0,n){return e-gu(t,n)+s}function Di(e,t,s){const n=s.init;if(n){if(n===!0)return my(t,s)}else return;return f1(e,t,s)}function gy(e,t,s){let n=!1;return t.forEach(i=>{me(e[i])?(n=!0,s[i]=e[i]):pe(s[i])&&delete s[i]}),n}function my(e,t){const s=t.type||"line";return d1[s](e)}function f1(e,t,s){const n=Ot(s.init,[{chart:e,properties:t,options:s}]);if(n===!0)return my(t,s);if(nt(n))return n}const yl=new Map,g1=e=>isNaN(e)||e<=0,m1=e=>e.reduce(function(t,s){return t+=s.string,t},"");function Oa(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Da(e,{x:t,y:s},n){n&&(e.translate(t,s),e.rotate(Ht(n)),e.translate(-t,-s))}function ks(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Ci(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function Ca(e,t){const s=t.content;if(Oa(s))return{width:Zs(s.width,t.width),height:Zs(s.height,t.height)};const n=hy(t),i=t.textStrokeWidth,r=It(s)?s:[s],o=r.join()+m1(n)+i+(e._measureText?"-spriting":"");return yl.has(o)||yl.set(o,v1(e,r,n,i)),yl.get(o)}function py(e,t,s){const{x:n,y:i,width:r,height:o}=t;e.save(),Ci(e,s);const a=ks(e,s);e.fillStyle=s.backgroundColor,e.beginPath(),Dr(e,{x:n,y:i,w:r,h:o,radius:l1(_n(s.borderRadius),0,Math.min(r,o)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}function yy(e,t,s,n){const i=s.content;if(Oa(i)){e.save(),e.globalAlpha=x1(s.opacity,i.style.opacity),e.drawImage(i,t.x,t.y,t.width,t.height),e.restore();return}const r=It(i)?i:[i],o=hy(s,n),a=s.color,l=It(a)?a:[a],c=h1(t,s),u=t.y+s.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=s.textAlign,p1(e,s)&&_1(e,{x:c,y:u},r,o),w1(e,{x:c,y:u},r,{fonts:o,colors:l}),e.restore()}function p1(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function y1(e,t,s,n){const{radius:i,options:r}=t,o=r.pointStyle,a=r.rotation;let l=(a||0)*Qc;if(Oa(o)){e.save(),e.translate(s,n),e.rotate(l),e.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),e.restore();return}g1(i)||b1(e,{x:s,y:n,radius:i,rotation:a,style:o,rad:l})}function b1(e,{x:t,y:s,radius:n,rotation:i,style:r,rad:o}){let a,l,c,u;switch(e.beginPath(),r){default:e.arc(t,s,n,0,zt),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(o)*n,s-Math.cos(o)*n),o+=Jo,e.lineTo(t+Math.sin(o)*n,s-Math.cos(o)*n),o+=Jo,e.lineTo(t+Math.sin(o)*n,s-Math.cos(o)*n),e.closePath();break;case"rectRounded":u=n*.516,c=n-u,a=Math.cos(o+Ie)*c,l=Math.sin(o+Ie)*c,e.arc(t-a,s-l,u,o-Tt,o-Gt),e.arc(t+l,s-a,u,o-Gt,o),e.arc(t+a,s+l,u,o,o+Gt),e.arc(t-l,s+a,u,o+Gt,o+Tt),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*n,e.rect(t-c,s-c,2*c,2*c);break}o+=Ie;case"rectRot":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+l,s-a),e.lineTo(t+a,s+l),e.lineTo(t-l,s+a),e.closePath();break;case"crossRot":o+=Ie;case"cross":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"star":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a),o+=Ie,a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"line":a=Math.cos(o)*n,l=Math.sin(o)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l);break;case"dash":e.moveTo(t,s),e.lineTo(t+Math.cos(o)*n,s+Math.sin(o)*n);break}e.fill()}function v1(e,t,s,n){e.save();const i=t.length;let r=0,o=n;for(let a=0;a<i;a++){const l=s[Math.min(a,s.length-1)];e.font=l.string;const c=t[a];r=Math.max(r,e.measureText(c).width+n),o+=l.lineHeight}return e.restore(),{width:r,height:o}}function _1(e,{x:t,y:s},n,i){e.beginPath();let r=0;n.forEach(function(o,a){const l=i[Math.min(a,i.length-1)],c=l.lineHeight;e.font=l.string,e.strokeText(o,t,s+c/2+r),r+=c}),e.stroke()}function w1(e,{x:t,y:s},n,{fonts:i,colors:r}){let o=0;n.forEach(function(a,l){const c=r[Math.min(l,r.length-1)],u=i[Math.min(l,i.length-1)],d=u.lineHeight;e.beginPath(),e.font=u.string,e.fillStyle=c,e.fillText(a,t,s+d/2+o),o+=d,e.fill()})}function x1(e,t){const s=Tn(e)?e:t;return Tn(s)?Ta(s,0,1):1}const by=["left","bottom","top","right"];function S1(e,t){const{pointX:s,pointY:n,options:i}=t,r=i.callout,o=r&&r.display&&C1(t,r);if(!o||E1(t,r,o))return;if(e.save(),e.beginPath(),!ks(e,r))return e.restore();const{separatorStart:l,separatorEnd:c}=k1(t,o),{sideStart:u,sideEnd:d}=O1(t,o,l);(r.margin>0||i.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(c.x,c.y)),e.moveTo(u.x,u.y),e.lineTo(d.x,d.y);const h=In({x:s,y:n},t.getCenterPoint(),Ht(-t.rotation));e.lineTo(h.x,h.y),e.stroke(),e.restore()}function k1(e,t){const{x:s,y:n,x2:i,y2:r}=e,o=T1(e,t);let a,l;return t==="left"||t==="right"?(a={x:s+o,y:n},l={x:a.x,y:r}):(a={x:s,y:n+o},l={x:i,y:a.y}),{separatorStart:a,separatorEnd:l}}function T1(e,t){const{width:s,height:n,options:i}=e,r=i.callout.margin+i.borderWidth/2;return t==="right"?s+r:t==="bottom"?n+r:-r}function O1(e,t,s){const{y:n,width:i,height:r,options:o}=e,a=o.callout.start,l=D1(t,o.callout);let c,u;return t==="left"||t==="right"?(c={x:s.x,y:n+Zs(r,a)},u={x:c.x+l,y:c.y}):(c={x:s.x+Zs(i,a),y:s.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function D1(e,t){const s=t.side;return e==="left"||e==="top"?-s:s}function C1(e,t){const s=t.position;return by.includes(s)?s:M1(e,t)}function M1(e,t){const{x:s,y:n,x2:i,y2:r,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=e,f={x:u,y:d},m=t.start,g=Zs(o,m),p=Zs(a,m),y=[s,s+g,s+g,i],_=[n+p,r,n,r],b=[];for(let x=0;x<4;x++){const k=In({x:y[x],y:_[x]},f,Ht(h));b.push({position:by[x],distance:pi(k,{x:l,y:c})})}return b.sort((x,k)=>x.distance-k.distance)[0].position}function E1(e,t,s){const{pointX:n,pointY:i}=e,r=t.margin;let o=n,a=i;return s==="left"?o+=r:s==="right"?o-=r:s==="top"?a+=r:s==="bottom"&&(a-=r),e.inRange(o,a)}const of={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function _i(e,t,s){return t=typeof t=="number"?t:e.parse(t),qt(t)?e.getPixelForValue(t):s}function Dn(e,t,s){const n=t[s];if(n||s==="scaleID")return n;const i=s.charAt(0),r=Object.values(e).filter(o=>o.axis&&o.axis===i);return r.length?r[0].id:i}function vy(e,t){if(e){const s=e.options.reverse,n=_i(e,t.min,s?t.end:t.start),i=_i(e,t.max,s?t.start:t.end);return{start:n,end:i}}}function _y(e,t){const{chartArea:s,scales:n}=e,i=n[Dn(n,t,"xScaleID")],r=n[Dn(n,t,"yScaleID")];let o=s.width/2,a=s.height/2;return i&&(o=_i(i,t.xValue,i.left+i.width/2)),r&&(a=_i(r,t.yValue,r.top+r.height/2)),{x:o,y:a}}function pu(e,t){const s=e.scales,n=s[Dn(s,t,"xScaleID")],i=s[Dn(s,t,"yScaleID")];if(!n&&!i)return{};let{left:r,right:o}=n||e.chartArea,{top:a,bottom:l}=i||e.chartArea;const c=af(n,{min:t.xMin,max:t.xMax,start:r,end:o});r=c.start,o=c.end;const u=af(i,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:r,y:a,x2:o,y2:l,width:o-r,height:l-a,centerX:r+(o-r)/2,centerY:a+(l-a)/2}}function wy(e,t){if(!fy(t)){const s=pu(e,t);let n=t.radius;(!n||isNaN(n))&&(n=Math.min(s.width,s.height)/2,t.radius=n);const i=n*2,r=s.centerX+t.xAdjust,o=s.centerY+t.yAdjust;return{x:r-n,y:o-n,x2:r+n,y2:o+n,centerX:r,centerY:o,width:i,height:i,radius:n}}return I1(e,t)}function A1(e,t){const{scales:s,chartArea:n}=e,i=s[t.scaleID],r={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return i?P1(i,r,t):L1(s,r,t),r}function xy(e,t){const s=pu(e,t);return s.initProperties=Di(e,s,t),s.elements=[{type:"label",optionScope:"label",properties:N1(e,s,t),initProperties:s.initProperties}],s}function I1(e,t){const s=_y(e,t),n=t.radius*2;return{x:s.x-t.radius+t.xAdjust,y:s.y-t.radius+t.yAdjust,x2:s.x+t.radius+t.xAdjust,y2:s.y+t.radius+t.yAdjust,centerX:s.x+t.xAdjust,centerY:s.y+t.yAdjust,radius:t.radius,width:n,height:n}}function af(e,t){const s=vy(e,t)||t;return{start:Math.min(s.start,s.end),end:Math.max(s.start,s.end)}}function P1(e,t,s){const n=_i(e,s.value,NaN),i=_i(e,s.endValue,n);e.isHorizontal()?(t.x=n,t.x2=i):(t.y=n,t.y2=i)}function L1(e,t,s){for(const n of Object.keys(of)){const i=e[Dn(e,s,n)];if(i){const{min:r,max:o,start:a,end:l,startProp:c,endProp:u}=of[n],d=vy(i,{min:s[r],max:s[o],start:i[a],end:i[l]});t[c]=d.start,t[u]=d.end}}}function R1({properties:e,options:t},s,n,i){const{x:r,x2:o,width:a}=e;return Sy({start:r,end:o,borderWidth:t.borderWidth},{position:n.x,padding:{start:i.left,end:i.right},adjust:t.label.xAdjust,size:s.width})}function $1({properties:e,options:t},s,n,i){const{y:r,y2:o,height:a}=e;return Sy({start:r,end:o,borderWidth:t.borderWidth},{position:n.y,padding:{start:i.top,end:i.bottom},adjust:t.label.yAdjust,size:s.height})}function Sy(e,t){const{start:s,end:n,borderWidth:i}=e,{position:r,padding:{start:o,end:a},adjust:l}=t,c=n-i-s-o-a-t.size;return s+i/2+l+gu(c,r)}function N1(e,t,s){const n=s.label;n.backgroundColor="transparent",n.callout.display=!1;const i=mu(n.position),r=ce(n.padding),o=Ca(e.ctx,n),a=R1({properties:t,options:s},o,i,r),l=$1({properties:t,options:s},o,i,r),c=o.width+r.width,u=o.height+r.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:n.rotation}}const oc=["enter","leave"],yu=oc.concat("click");function F1(e,t,s){t.listened=gy(s,yu,t.listeners),t.moveListened=!1,oc.forEach(n=>{me(s[n])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(n=>{!t.listened&&me(n.click)&&(t.listened=!0),t.moveListened||oc.forEach(i=>{me(n[i])&&(t.listened=!0,t.moveListened=!0)})})}function j1(e,t,s){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return B1(e,t,s);case"click":return W1(e,t,s)}}function B1(e,t,s){if(!e.moveListened)return;let n;t.type==="mousemove"?n=fu(e.visibleElements,t,s.interaction):n=[];const i=e.hovered;e.hovered=n;const r={state:e,event:t};let o=lf(r,"leave",i,n);return lf(r,"enter",n,i)||o}function lf({state:e,event:t},s,n,i){let r;for(const o of n)i.indexOf(o)<0&&(r=ky(o.options[s]||e.listeners[s],o,t)||r);return r}function W1(e,t,s){const n=e.listeners,i=fu(e.visibleElements,t,s.interaction);let r;for(const o of i)r=ky(o.options.click||n.click,o,t)||r;return r}function ky(e,t,s){return Ot(e,[t.$context,s])===!0}const Qo=["afterDraw","beforeDraw"];function U1(e,t,s){const n=t.visibleElements;t.hooked=gy(s,Qo,t.hooks),t.hooked||n.forEach(i=>{t.hooked||Qo.forEach(r=>{me(i.options[r])&&(t.hooked=!0)})})}function cf(e,t,s){if(e.hooked){const n=t.options[s]||e.hooks[s];return Ot(n,[t.$context])}}function z1(e,t,s){const n=J1(e.scales,t,s);let i=uf(t,n,"min","suggestedMin");i=uf(t,n,"max","suggestedMax")||i,i&&me(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function H1(e,t){for(const s of e)q1(s,t)}function uf(e,t,s,n){if(qt(t[s])&&!V1(e.options,s,n)){const i=e[s]!==t[s];return e[s]=t[s],i}}function V1(e,t,s){return pe(e[t])||pe(e[s])}function q1(e,t){for(const s of["scaleID","xScaleID","yScaleID"]){const n=Dn(t,e,s);n&&!t[n]&&Y1(e,s)&&console.warn(`No scale found with id '${n}' for annotation '${e.id}'`)}}function Y1(e,t){if(t==="scaleID")return!0;const s=t.charAt(0);for(const n of["Min","Max","Value"])if(pe(e[s+n]))return!0;return!1}function J1(e,t,s){const n=t.axis,i=t.id,r=n+"ScaleID",o={min:et(t.min,Number.NEGATIVE_INFINITY),max:et(t.max,Number.POSITIVE_INFINITY)};for(const a of s)a.scaleID===i?df(a,t,["value","endValue"],o):Dn(e,a,r)===i&&df(a,t,[n+"Min",n+"Max",n+"Value"],o);return o}function df(e,t,s,n){for(const i of s){const r=e[i];if(pe(r)){const o=t.parse(r);n.min=Math.min(n.min,o),n.max=Math.max(n.max,o)}}}class Mi extends ye{inRange(t,s,n,i){const{x:r,y:o}=In({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation));return ry({x:r,y:o},this.getProps(["x","y","x2","y2"],i),n,this.options)}getCenterPoint(t){return Pn(this,t)}draw(t){t.save(),Da(t,this.getCenterPoint(),this.options.rotation),py(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return xy(t,s)}}Mi.id="boxAnnotation";Mi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Mi.defaultRoutes={borderColor:"color",backgroundColor:"color"};Mi.descriptors={label:{_fallback:!0}};class Ma extends ye{inRange(t,s,n,i){return oy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Pn(this,t)}draw(t){const s=this.options;!s.display||!s.content||(tO(t,this),t.save(),Da(t,this.getCenterPoint(),this.rotation),yy(t,this,s,this._fitRatio),t.restore())}resolveElementProperties(t,s){const n=K1(t,s);if(!n)return{};const{controllerMeta:i,point:r,radius:o}=Z1(t,s,n);let a=Ca(t.ctx,s);const l=X1(a,o);dy(s,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=s,h=uy(r,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Di(t,h,s),...h,...i,rotation:s.rotation,_fitRatio:l}}}Ma.id="doughnutLabelAnnotation";Ma.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Ma.defaultRoutes={};function K1(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(s,n){const i=n.controller;return i instanceof ZS&&G1(e,t,n.data)&&(!s||i.innerRadius<s.controller.innerRadius)&&i.options.circumference>=90?n:s},void 0)}function G1(e,t,s){if(!t.autoHide)return!0;for(let n=0;n<s.length;n++)if(!s[n].hidden&&e.getDataVisibility(n))return!0}function Z1({chartArea:e},t,s){const{left:n,top:i,right:r,bottom:o}=e,{innerRadius:a,offsetX:l,offsetY:c}=s.controller,u=(n+r)/2+l,d=(i+o)/2+c,h={left:Math.max(u-a,n),right:Math.min(u+a,r),top:Math.max(d-a,i),bottom:Math.min(d+a,o)},f={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},m=t.spacing+t.borderWidth/2,g=a-m,p=f.y>d,y=p?i+m:o-m,_=Q1(y,u,d,g);return{controllerMeta:{_centerX:u,_centerY:d,_radius:g,_counterclockwise:p,..._},point:f,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function X1({width:e,height:t},s){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return s*2/n}function Q1(e,t,s,n){const i=Math.pow(s-e,2),r=Math.pow(n,2),o=t*-2,a=Math.pow(t,2)+i-r,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:zt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:Ql({x:t,y:s},{x:c,y:e}).angle,_endAngle:Ql({x:t,y:s},{x:u,y:e}).angle}}function tO(e,t){const{_centerX:s,_centerY:n,_radius:i,_startAngle:r,_endAngle:o,_counterclockwise:a,options:l}=t;e.save();const c=ks(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(s,n,i,r,o,a),e.closePath(),e.fill(),c&&e.stroke(),e.restore()}class Br extends ye{inRange(t,s,n,i){return oy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Pn(this,t)}draw(t){const s=this.options,n=!pe(this._visible)||this._visible;!s.display||!s.content||!n||(t.save(),Da(t,this.getCenterPoint(),this.rotation),S1(t,this),py(t,this,s),yy(t,eO(this),s),t.restore())}resolveElementProperties(t,s){let n;if(fy(s))n=_y(t,s);else{const{centerX:a,centerY:l}=pu(t,s);n={x:a,y:l}}const i=ce(s.padding),r=Ca(t.ctx,s),o=uy(n,r,s,i);return{initProperties:Di(t,o,s),pointX:n.x,pointY:n.y,...o,rotation:s.rotation}}}Br.id="labelAnnotation";Br.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Br.defaultRoutes={borderColor:"color"};function eO({x:e,y:t,width:s,height:n,options:i}){const r=i.borderWidth/2,o=ce(i.padding);return{x:e+o.left+r,y:t+o.top+r,width:s-o.left-o.right-i.borderWidth,height:n-o.top-o.bottom-i.borderWidth}}const bu=(e,t,s)=>({x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}),ac=(e,t,s)=>bu(t,s,Math.abs((e-t.y)/(s.y-t.y))).x,hf=(e,t,s)=>bu(t,s,Math.abs((e-t.x)/(s.x-t.x))).y,Qi=e=>e*e,sO=(e,t,{x:s,y:n,x2:i,y2:r},o)=>o==="y"?{start:Math.min(n,r),end:Math.max(n,r),value:t}:{start:Math.min(s,i),end:Math.max(s,i),value:e},ff=(e,t,s,n)=>(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*s,lc=(e,t,s,n)=>({x:ff(e.x,t.x,s.x,n),y:ff(e.y,t.y,s.y,n)}),gf=(e,t,s,n)=>2*(1-n)*(t-e)+2*n*(s-t),mf=(e,t,s,n)=>-Math.atan2(gf(e.x,t.x,s.x,n),gf(e.y,t.y,s.y,n))+.5*Tt;class Wr extends ye{inRange(t,s,n,i){const r=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const o={mouseX:t,mouseY:s},{path:a,ctx:l}=this;if(a){ks(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=t*u.currentDevicePixelRatio,h=s*u.currentDevicePixelRatio,f=l.isPointInStroke(a,d,h)||cc(this,o,i);return l.restore(),f}const c=Qi(r);return oO(this,o,c,i)||cc(this,o,i)}return nO(this,{mouseX:t,mouseY:s},n,{hitSize:r,useFinalPosition:i})}getCenterPoint(t){return Pn(this,t)}draw(t){const{x:s,y:n,x2:i,y2:r,cp:o,options:a}=this;if(t.save(),!ks(t,a))return t.restore();Ci(t,a);const l=Math.sqrt(Math.pow(i-s,2)+Math.pow(r-n,2));if(a.curve&&o)return gO(t,this,o,l),t.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ty(this),f=Math.atan2(r-n,i-s);t.translate(s,n),t.rotate(f),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-h,0),t.shadowColor=a.borderShadowColor,t.stroke(),uc(t,0,d,c),uc(t,l,-h,u),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){const n=A1(t,s),{x:i,y:r,x2:o,y2:a}=n,l=iO(n,t.chartArea),c=l?rO({x:i,y:r},{x:o,y:a},t.chartArea):{x:i,y:r,x2:o,y2:a,width:Math.abs(o-i),height:Math.abs(a-r)};if(c.centerX=(o+i)/2,c.centerY=(a+r)/2,c.initProperties=Di(t,c,s),s.curve){const d={x:c.x,y:c.y},h={x:c.x2,y:c.y2};c.cp=fO(c,s,pi(d,h))}const u=aO(t,c,s.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Wr.id="lineAnnotation";const pf={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Wr.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},pf),fill:!1,length:12,start:Object.assign({},pf),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Br.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Wr.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Wr.defaultRoutes={borderColor:"color"};function nO(e,{mouseX:t,mouseY:s},n,{hitSize:i,useFinalPosition:r}){const o=sO(t,s,e.getProps(["x","y","x2","y2"],r),n);return iy(o,i)||cc(e,{mouseX:t,mouseY:s},r,n)}function iO({x:e,y:t,x2:s,y2:n},{top:i,right:r,bottom:o,left:a}){return!(e<a&&s<a||e>r&&s>r||t<i&&n<i||t>o&&n>o)}function yf({x:e,y:t},s,{top:n,right:i,bottom:r,left:o}){return e<o&&(t=hf(o,{x:e,y:t},s),e=o),e>i&&(t=hf(i,{x:e,y:t},s),e=i),t<n&&(e=ac(n,{x:e,y:t},s),t=n),t>r&&(e=ac(r,{x:e,y:t},s),t=r),{x:e,y:t}}function rO(e,t,s){const{x:n,y:i}=yf(e,t,s),{x:r,y:o}=yf(t,e,s);return{x:n,y:i,x2:r,y2:o,width:Math.abs(r-n),height:Math.abs(o-i)}}function oO(e,{mouseX:t,mouseY:s},n=bn,i){const{x:r,y:o,x2:a,y2:l}=e.getProps(["x","y","x2","y2"],i),c=a-r,u=l-o,d=Qi(c)+Qi(u),h=d===0?-1:((t-r)*c+(s-o)*u)/d;let f,m;return h<0?(f=r,m=o):h>1?(f=a,m=l):(f=r+h*c,m=o+h*u),Qi(t-f)+Qi(s-m)<=n}function cc(e,{mouseX:t,mouseY:s},n,i){const r=e.label;return r.options.display&&r.inRange(t,s,i,n)}function aO(e,t,s){const n=s.borderWidth,i=ce(s.padding),r=Ca(e.ctx,s),o=r.width+i.width+n,a=r.height+i.height+n;return cO(t,s,{width:o,height:a,padding:i},e.chartArea)}function lO(e){const{x:t,y:s,x2:n,y2:i}=e,r=Math.atan2(i-s,n-t);return r>Tt/2?r-Tt:r<Tt/-2?r+Tt:r}function cO(e,t,s,n){const{width:i,height:r,padding:o}=s,{xAdjust:a,yAdjust:l}=t,c={x:e.x,y:e.y},u={x:e.x2,y:e.y2},d=t.rotation==="auto"?lO(e):Ht(t.rotation),h=uO(i,r,d),f=dO(e,t,{labelSize:h,padding:o},n),m=e.cp?lc(c,e.cp,u,f):bu(c,u,f),g={size:h.w,min:n.left,max:n.right,padding:o.left},p={size:h.h,min:n.top,max:n.bottom,padding:o.top},y=vf(m.x,g)+a,_=vf(m.y,p)+l;return{x:y-i/2,y:_-r/2,x2:y+i/2,y2:_+r/2,centerX:y,centerY:_,pointX:m.x,pointY:m.y,width:i,height:r,rotation:bp(d)}}function uO(e,t,s){const n=Math.cos(s),i=Math.sin(s);return{w:Math.abs(e*n)+Math.abs(t*i),h:Math.abs(e*i)+Math.abs(t*n)}}function dO(e,t,s,n){let i;const r=hO(e,n);return t.position==="start"?i=bf({w:e.x2-e.x,h:e.y2-e.y},s,t,r):t.position==="end"?i=1-bf({w:e.x-e.x2,h:e.y-e.y2},s,t,r):i=gu(1,t.position),i}function bf(e,t,s,n){const{labelSize:i,padding:r}=t,o=e.w*n.dx,a=e.h*n.dy,l=o>0&&(i.w/2+r.left-n.x)/o,c=a>0&&(i.h/2+r.top-n.y)/a;return Ta(Math.max(l,c),0,.25)}function hO(e,t){const{x:s,x2:n,y:i,y2:r}=e,o=Math.min(i,r)-t.top,a=Math.min(s,n)-t.left,l=t.bottom-Math.max(i,r),c=t.right-Math.max(s,n);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function vf(e,t){const{size:s,min:n,max:i,padding:r}=t,o=s/2;return s>i-n?(i+n)/2:(n>=e-r-o&&(e=n+r+o),i<=e+r+o&&(e=i-r-o),e)}function Ty(e){const t=e.options,s=t.arrowHeads&&t.arrowHeads.start,n=t.arrowHeads&&t.arrowHeads.end;return{startOpts:s,endOpts:n,startAdjust:_f(e,s),endAdjust:_f(e,n)}}function _f(e,t){if(!t||!t.display)return 0;const{length:s,width:n}=t,i=e.options.borderWidth/2,r={x:s,y:n+i};return Math.abs(ac(0,r,{x:0,y:i}))}function uc(e,t,s,n){if(!n||!n.display)return;const{length:i,width:r,fill:o,backgroundColor:a,borderColor:l}=n,c=Math.abs(t-i)+s;e.beginPath(),Ci(e,n),ks(e,n),e.moveTo(c,-r),e.lineTo(t+s,0),e.lineTo(c,r),o===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=n.borderShadowColor,e.stroke()}function fO(e,t,s){const{x:n,y:i,x2:r,y2:o,centerX:a,centerY:l}=e,c=Math.atan2(o-i,r-n),u=mu(t.controlPoint,0),d={x:a+Zs(s,u.x,!1),y:l+Zs(s,u.y,!1)};return In(d,{x:a,y:l},c)}function wf(e,{x:t,y:s},{angle:n,adjust:i},r){!r||!r.display||(e.save(),e.translate(t,s),e.rotate(n),uc(e,0,-i,r),e.restore())}function gO(e,t,s,n){const{x:i,y:r,x2:o,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ty(t),f={x:i,y:r},m={x:o,y:a},g=mf(f,s,m,0),p=mf(f,s,m,1)-Tt,y=lc(f,s,m,d/n),_=lc(f,s,m,1-h/n),b=new Path2D;e.beginPath(),b.moveTo(y.x,y.y),b.quadraticCurveTo(s.x,s.y,_.x,_.y),e.shadowColor=l.borderShadowColor,e.stroke(b),t.path=b,t.ctx=e,wf(e,y,{angle:g,adjust:d},c),wf(e,_,{angle:p,adjust:h},u)}class Ur extends ye{inRange(t,s,n,i){const r=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return mO({x:t,y:s},this.getProps(["width","height","centerX","centerY"],i),r,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],i),d=n==="y"?{start:l,end:u}:{start:a,end:c},h=In({x:t,y:s},this.getCenterPoint(i),Ht(-r));return h[n]>=d.start-o-bn&&h[n]<=d.end+o+bn}getCenterPoint(t){return Pn(this,t)}draw(t){const{width:s,height:n,centerX:i,centerY:r,options:o}=this;t.save(),Da(t,this.getCenterPoint(),o.rotation),Ci(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;const a=ks(t,o);t.ellipse(i,r,n/2,s/2,Tt/2,0,2*Tt),t.fill(),a&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return xy(t,s)}}Ur.id="ellipseAnnotation";Ur.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Mi.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ur.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ur.descriptors={label:{_fallback:!0}};function mO(e,t,s,n){const{width:i,height:r,centerX:o,centerY:a}=t,l=i/2,c=r/2;if(l<=0||c<=0)return!1;const u=Ht(s||0),d=Math.cos(u),h=Math.sin(u),f=Math.pow(d*(e.x-o)+h*(e.y-a),2),m=Math.pow(h*(e.x-o)-d*(e.y-a),2);return f/Math.pow(l+n,2)+m/Math.pow(c+n,2)<=1.0001}class Ea extends ye{inRange(t,s,n,i){const{x:r,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?c1({x:t,y:s},this.getCenterPoint(i),c/2,u):iy(n==="y"?{start:o,end:l,value:s}:{start:r,end:a,value:t},u)}getCenterPoint(t){return Pn(this,t)}draw(t){const s=this.options,n=s.borderWidth;if(s.radius<.1)return;t.save(),t.fillStyle=s.backgroundColor,Ci(t,s);const i=ks(t,s);y1(t,this,this.centerX,this.centerY),i&&!Oa(s.pointStyle)&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore(),s.borderWidth=n}resolveElementProperties(t,s){const n=wy(t,s);return n.initProperties=Di(t,n,s),n}}Ea.id="pointAnnotation";Ea.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ea.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Aa extends ye{inRange(t,s,n,i){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&yO(this.elements,t,s,i);const r=In({x:t,y:s},this.getCenterPoint(i),Ht(-this.options.rotation)),o=this.elements.map(c=>n==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return r[n]>=a&&r[n]<=l}getCenterPoint(t){return Pn(this,t)}draw(t){const{elements:s,options:n}=this;t.save(),t.beginPath(),t.fillStyle=n.backgroundColor,Ci(t,n);const i=ks(t,n);let r=!0;for(const o of s)r?(t.moveTo(o.x,o.y),r=!1):t.lineTo(o.x,o.y);t.closePath(),t.fill(),i&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,s){const n=wy(t,s),{sides:i,rotation:r}=s,o=[],a=2*Tt/i;let l=r*Qc;for(let c=0;c<i;c++,l+=a){const u=pO(n,s,l);u.initProperties=Di(t,n,s),o.push(u)}return n.elements=o,n}}Aa.id="polygonAnnotation";Aa.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Aa.defaultRoutes={borderColor:"color",backgroundColor:"color"};function pO({centerX:e,centerY:t},{radius:s,borderWidth:n,hitTolerance:i},r){const o=(n+i)/2,a=Math.sin(r),l=Math.cos(r),c={x:e+a*s,y:t-l*s};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:e+a*(s+o),bY:t-l*(s+o)}}}function yO(e,t,s,n){let i=!1,r=e[e.length-1].getProps(["bX","bY"],n);for(const o of e){const a=o.getProps(["bX","bY"],n);a.bY>s!=r.bY>s&&t<(r.bX-a.bX)*(s-a.bY)/(r.bY-a.bY)+a.bX&&(i=!i),r=a}return i}const Js={box:Mi,doughnutLabel:Ma,ellipse:Ur,label:Br,line:Wr,point:Ea,polygon:Aa};Object.keys(Js).forEach(e=>{$t.describe(`elements.${Js[e].id}`,{_fallback:"plugins.annotation.common"})});const bO={update:Object.assign},vO=yu.concat(Qo),xf=(e,t)=>nt(t)?hc(e,t):e,dc=e=>e==="color"||e==="font";function vu(e="line"){return Js[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function _O(e,t,s,n){const i=xO(e,s.animations,n),r=t.annotations,o=TO(t.elements,r);for(let a=0;a<r.length;a++){const l=r[a],c=Oy(o,a,l.type),u=l.setContext(kO(e,c,o,l)),d=c.resolveElementProperties(e,u);d.skip=wO(d),"elements"in d&&(SO(c,d.elements,u,i),delete d.elements),pe(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=Dy(u),i.update(c,d)}}function wO(e){return isNaN(e.x)||isNaN(e.y)}function xO(e,t,s){return s==="reset"||s==="none"||s==="resize"?bO:new lu(e,t)}function SO(e,t,s,n){const i=e.elements||(e.elements=[]);i.length=t.length;for(let r=0;r<t.length;r++){const o=t[r],a=o.properties,l=Oy(i,r,o.type,o.initProperties),c=s[o.optionScope].override(o);a.options=Dy(c),n.update(l,a)}}function Oy(e,t,s,n){const i=Js[vu(s)];let r=e[t];return(!r||!(r instanceof i))&&(r=e[t]=new i,Object.assign(r,n)),r}function Dy(e){const t=Js[vu(e.type)],s={};s.id=e.id,s.type=e.type,s.drawTime=e.drawTime,Object.assign(s,hc(e,t.defaults),hc(e,t.defaultRoutes));for(const n of vO)s[n]=e[n];return s}function hc(e,t){const s={};for(const n of Object.keys(t)){const i=t[n],r=e[n];dc(n)&&It(r)?s[n]=r.map(o=>xf(o,i)):s[n]=xf(r,i)}return s}function kO(e,t,s,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return s.filter(i=>i&&i.options)},id:n.id,type:"annotation"}))}function TO(e,t){const s=t.length,n=e.length;if(n<s){const i=s-n;e.splice(n,0,...new Array(i))}else n>s&&e.splice(s,n-s);return e}var OO="3.1.0";const Ls=new Map,Sf=e=>e.type!=="doughnutLabel",DO=yu.concat(Qo);var Ia={id:"annotation",version:OO,beforeRegister(){u1("chart.js","4.0",Ne.version)},afterRegister(){Ne.register(Js)},afterUnregister(){Ne.unregister(Js)},beforeInit(e){Ls.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,s){const n=Ls.get(e),i=n.annotations=[];let r=s.annotations;nt(r)?Object.keys(r).forEach(o=>{const a=r[o];nt(a)&&(a.id=o,i.push(a))}):It(r)&&i.push(...r),H1(i.filter(Sf),e.scales)},afterDataLimits(e,t){const s=Ls.get(e);z1(e,t.scale,s.annotations.filter(Sf).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(e,t,s){const n=Ls.get(e);F1(e,n,s),_O(e,n,s,t.mode),n.visibleElements=n.elements.filter(i=>!i.skip&&i.options.display),U1(e,n,s)},beforeDatasetsDraw(e,t,s){zi(e,"beforeDatasetsDraw",s.clip)},afterDatasetsDraw(e,t,s){zi(e,"afterDatasetsDraw",s.clip)},beforeDatasetDraw(e,t,s){zi(e,t.index,s.clip)},beforeDraw(e,t,s){zi(e,"beforeDraw",s.clip)},afterDraw(e,t,s){zi(e,"afterDraw",s.clip)},beforeEvent(e,t,s){const n=Ls.get(e);j1(n,t.event,s)&&(t.changed=!0)},afterDestroy(e){Ls.delete(e)},getAnnotations(e){const t=Ls.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,s){return fu(e,t,s)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!DO.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Js[vu(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:dc,_fallback:!0},_indexable:dc}},additionalOptionScopes:[""]};function zi(e,t,s){const{ctx:n,chartArea:i}=e,r=Ls.get(e);s&&Nr(n,i);const o=CO(r.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)MO(n,i,r,a);s&&Fr(n)}function CO(e,t){const s=[];for(const n of e)if(n.options.drawTime===t&&s.push({element:n,main:!0}),n.elements&&n.elements.length)for(const i of n.elements)i.options.display&&i.options.drawTime===t&&s.push({element:i});return s}function MO(e,t,s,n){const i=n.element;n.main?(cf(s,i,"beforeDraw"),i.draw(e,t),cf(s,i,"afterDraw")):i.draw(e,t)}const EO={class:"chartContainer"},AO={__name:"BgChart",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Ne.register(cu,Oi,du,Sa,vi,xa,wa,hu,Ia);const t=e,s=Dt(null);let n=null,i=null;const r=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:f,endOfDay:m}=le(t.selectedDate);return t.glucoseReadings.filter(g=>{const p=typeof g.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(g.timestamp)?C.fromISO(g.timestamp):C.fromISO(g.timestamp,{zone:"Australia/Sydney"})).toJSDate():g.timestamp instanceof Date?g.timestamp:new Date(Number(g.timestamp));return p>=f&&p<m}).map(g=>({x:typeof g.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(g.timestamp)?C.fromISO(g.timestamp):C.fromISO(g.timestamp,{zone:"Australia/Sydney"})).toMillis():g.timestamp instanceof Date?g.timestamp.getTime():Number(g.timestamp),y:Number(g.value)})).sort((g,p)=>g.x-p.x)});function o(f){return{label:"BG (mmol/L)",data:f,pointRadius:0,pointHoverRadius:6,borderColor:"rgba(80, 80, 80, 0.9)",borderWidth:3,tension:.15,fill:!1}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bg"}}))}function l(f){if(!n)return;const m=f?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=m,n.update("none"))}function c(f){if(!f.length)return{min:4,max:10};const m=f.map(y=>y.y),g=Math.floor(Math.min(...m)),p=Math.ceil(Math.max(...m));return{min:Math.min(4,g),max:Math.max(10,p)}}function u(f,m){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,p,y)=>{const _=y.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(_.length){const{datasetIndex:b,index:x}=_[0],k=y.data.datasets[b].data[x].x;y.options.plugins.annotation.annotations.dynamicLine.value=k,y.update("none");const A=y.canvas.getBoundingClientRect(),L=(g?.native?.clientX??g.clientX)-A.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:k,px:L,source:"bg"}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>C.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:f?.min,max:f?.max},y:{min:m.min,max:m.max,grid:{color:"#888",lineWidth:1},ticks:{stepSize:2},title:{display:!0,text:"mmol/L"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{inRangeBand:{type:"box",yMin:4,yMax:6,backgroundColor:"rgba(100, 149, 237, 0.5)",borderWidth:0},dynamicLine:{type:"line",scaleID:"x",value:i,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function d(){if(!s.value)return;const f=s.value.getContext("2d"),m=r.value,g=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=g+864e5,y=c(m);n=new Ne(f,{type:"line",data:{datasets:[o(m)]},options:u({min:g,max:p},y)})}function h(){if(!n)return;const f=r.value,m=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=c(f);n.data.datasets=[o(f)],n.options.scales.x.min=m,n.options.scales.x.max=g,n.options.scales.y.min=p.min,n.options.scales.y.max=p.max,n.update("none")}return Ds(()=>{d(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),Cn(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),os([()=>t.selectedDate,r],h),(f,m)=>(T(),D("div",EO,[v("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Blood glucose chart"},null,512)]))}},IO={class:"chartContainer"},PO={__name:"BasalChart",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Ne.register(cu,Oi,du,Sa,vi,xa,wa,hu,Ia);const t=e,s=Dt(null);let n=null;const i=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:h,endOfDay:f}=le(t.selectedDate),m=t.basalEntries.filter(p=>{const y=p.startTime instanceof Date?p.startTime:lt(p.startTime),_=p.endTime?p.endTime instanceof Date?p.endTime:lt(p.endTime):null;return y<f&&(!_||_>h)}).sort((p,y)=>{const _=(p.startTime instanceof Date?p.startTime:lt(p.startTime)).getTime(),b=(y.startTime instanceof Date?y.startTime:lt(y.startTime)).getTime();return _-b}),g=[];for(const p of m){const y=p.startTime instanceof Date?p.startTime:lt(p.startTime),_=p.endTime?p.endTime instanceof Date?p.endTime:lt(p.endTime):null,b=y<h?h:y,x=_?_>f?f:_:f,k=Number(p.rate??0);g.push({x:b.getTime(),y:k,_segStart:b.getTime(),_segEnd:x.getTime(),_rate:k}),g.push({x:x.getTime(),y:k,_segStart:b.getTime(),_segEnd:x.getTime(),_rate:k})}return g});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal"}}))}function o(h){if(!n)return;const f=h?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(g=>g.y));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (U/hr)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,g,p)=>{const y=p.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:_,index:b}=y[0],x=p.data.datasets[_].data[b].x;p.options.plugins.annotation.annotations.dynamicLine.value=x,p.update("none");const k=p.canvas.getBoundingClientRect(),E=(m?.native?.clientX??m.clientX)-k.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x,px:E,source:"basal"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>C.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Basal Rate"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,m=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=a(f);n=new Ne(h,{type:"line",data:{datasets:[l(f)]},options:c({min:m,max:g},p)})}function d(){if(!n)return;const h=i.value,f=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=m,n.options.scales.y.min=g.min,n.options.scales.y.max=g.max,n.update("none")}return Ds(()=>{u(),window.addEventListener("chart-hover",o),s.value?.addEventListener("mouseleave",r)}),Cn(()=>{window.removeEventListener("chart-hover",o),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),os([()=>t.selectedDate,i],d),(h,f)=>(T(),D("div",IO,[v("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Basal rate chart"},null,512)]))}},LO={class:"chartContainer"},RO={__name:"BolusChart",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Ne.register(KS,_T,Sa,vi,xa,wa,Ia);const t=e,s=Dt(null);let n=null;function i(f,m){return getComputedStyle(document.documentElement).getPropertyValue(f).trim()||m}const r=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:f,endOfDay:m}=le(t.selectedDate);return(t.boluses||[]).map(g=>({ts:g.timestamp instanceof Date?g.timestamp:new Date(g.timestamp),amt:Number(g.amount??0)})).filter(g=>g.ts>=f&&g.ts<m&&g.amt>0).sort((g,p)=>g.ts-p.ts).map(g=>({x:g.ts.getTime(),y:g.amt}))});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bolus",bolusAmount:null}}))}function a(f){if(!n)return;const m=f?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=m,n.update("none"))}function l(f){if(!f.length)return{min:0,max:1};const m=Math.max(0,...f.map(p=>p.y));return{min:0,max:Math.max(1,Math.ceil(m+.2))}}function c(f){const m=i("--color-bolus","#ef4444");return{label:"Bolus (U)",data:f,type:"bar",borderWidth:0,borderRadius:2,barPercentage:.95,categoryPercentage:1,backgroundColor:m,barThickness:10}}function u(f,m){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,p,y)=>{const _=y.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(_.length){const{datasetIndex:b,index:x}=_[0],k=y.data.datasets[b].data[x],A=k.x,E=typeof k.y=="number"?k.y:Number(k.amt??0);y.options.plugins.annotation.annotations.dynamicLine.value=A,y.update("none");const L=y.canvas.getBoundingClientRect(),V=(g?.native?.clientX??g.clientX)-L.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:A,px:V,source:"bolus",bolusAmount:E}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>C.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:f?.min,max:f?.max},y:{min:m.min,max:m.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:1},title:{display:!0,text:"Bolus (U)"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function d(){if(!s.value)return;const f=s.value.getContext("2d"),m=r.value,g=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=g+864e5,y=l(m);n=new Ne(f,{type:"bar",data:{datasets:[c(m)]},options:u({min:g,max:p},y)})}function h(){if(!n)return;const f=r.value,m=C.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=l(f);n.data.datasets=[c(f)],n.options.scales.x.min=m,n.options.scales.x.max=g,n.options.scales.y.min=p.min,n.options.scales.y.max=p.max,n.update("none")}return Ds(()=>{d(),window.addEventListener("chart-hover",a),s.value?.addEventListener("mouseleave",o)}),Cn(()=>{window.removeEventListener("chart-hover",a),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),os([()=>t.selectedDate,()=>t.boluses],h),(f,m)=>(T(),D("div",LO,[v("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Bolus chart"},null,512)]))}},$O={class:"chartContainer"},NO={__name:"HourlyBasalChart",props:{hourlyTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){Ne.register(cu,Oi,du,Sa,vi,xa,wa,hu,Ia);const t=e,s=Dt(null);let n=null;const i=tt(()=>{if(!t.selectedDate||!Array.isArray(t.hourlyTotals))return[];const h=t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate),f=C.fromJSDate(h).setZone("Australia/Sydney").startOf("day"),m=[];for(let g=0;g<24;g++){const p=Number(t.hourlyTotals[g]??0),y=f.plus({hours:g}).toMillis(),_=f.plus({hours:g+1}).toMillis();m.push({x:y,y:p,_segStart:y,_segEnd:_,_val:p}),m.push({x:_,y:p,_segStart:y,_segEnd:_,_val:p})}return m});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal-hourly"}}))}function o(h){if(!n)return;const f=h?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(g=>Number(g.y)||0));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (units/hour bucket)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:"rgba(100, 149, 237, 0.5)",borderColor:"rgba(100, 149, 237, 0.7)",fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,g,p)=>{const y=p.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:_,index:b}=y[0],x=p.data.datasets[_].data[b].x;p.options.plugins.annotation.annotations.dynamicLine.value=x,p.update("none");const k=p.canvas.getBoundingClientRect(),E=(m?.native?.clientX??m.clientX)-k.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x,px:E,source:"basal-hourly"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>C.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Units / Hour"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,m=C.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=a(f);n=new Ne(h,{type:"line",data:{datasets:[l(f)]},options:c({min:m,max:g},p)})}function d(){if(!n)return;const h=i.value,f=C.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=m,n.options.scales.y.min=g.min,n.options.scales.y.max=g.max,n.update("none")}return Ds(()=>{u(),window.addEventListener("chart-hover",o),s.value?.addEventListener("mouseleave",r)}),Cn(()=>{window.removeEventListener("chart-hover",o),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),os([()=>t.selectedDate,i],d),(h,f)=>(T(),D("div",$O,[v("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Hourly basal (totals) chart"},null,512)]))}},FO=jt(NO,[["__scopeId","data-v-a3f397d7"]]),jO=["role","tabindex"],BO={class:"log-title"},WO={class:"log-details"},UO={key:0},zO={key:1},HO={key:2},VO={key:3},qO={key:4},YO={key:5},JO={__name:"FoodLogRow",props:{log:{type:Object,required:!0},asButton:{type:Boolean,default:!0}},setup(e){const t=e,s=tt(()=>t.log.timestamp instanceof Date?t.log.timestamp:lt(t.log.timestamp));return(n,i)=>(T(),D("div",{class:"food-row clickable-row",role:e.asButton?"button":void 0,tabindex:e.asButton?0:void 0},[v("div",BO,[v("strong",null,N(pt(Sr)(s.value)),1),K(": "+N(e.log.foodName||"Food"),1)]),v("div",WO,[e.log.quantity!=null?(T(),D("span",UO," Grams (or mLs): "+N(e.log.quantity),1)):X("",!0),e.log.netCarbs!=null?(T(),D("span",zO," Net Carbs: "+N(e.log.netCarbs)+"g",1)):X("",!0),e.log.totalCarbs!=null?(T(),D("span",HO," Total Carbs: "+N(e.log.totalCarbs)+"g",1)):X("",!0),e.log.fat!=null?(T(),D("span",VO," Fat: "+N(e.log.fat)+"g",1)):X("",!0),e.log.fibre!=null?(T(),D("span",qO," Fibre: "+N(e.log.fibre)+"g",1)):X("",!0),e.log.calories!=null?(T(),D("span",YO," Calories: "+N(e.log.calories),1)):X("",!0)])],8,jO))}},_u=jt(JO,[["__scopeId","data-v-2c52b607"]]),KO={class:"bolus-row",role:"button",tabindex:"0"},GO={class:"line"},ZO={class:"time"},XO={class:"amount-pill"},QO={class:"meta"},tD={key:1},eD={key:2},sD={key:3},nD={__name:"BolusRow",props:{dose:{type:Object,required:!0}},setup(e){const t=e,s=tt(()=>{const i=t.dose?.timestamp;return i instanceof Date?i:lt(i)}),n=tt(()=>{const i=Number(t.dose?.amount??0);return isFinite(i)?i.toFixed(2):"0.00"});return(i,r)=>(T(),D("div",KO,[v("div",GO,[v("strong",ZO,N(pt(Sr)(s.value)),1),v("span",XO,[K(N(n.value)+"U ",1),r[0]||(r[0]=v("span",{class:"icon","aria-hidden":"true"},"",-1))])]),v("div",QO,[e.dose?.type?(T(),D("span",{key:0,class:dt(["badge",{"badge-meal":e.dose.type==="meal","badge-correction":e.dose.type==="correction","badge-other":e.dose.type!=="meal"&&e.dose.type!=="correction"}])},N(e.dose.type),3)):X("",!0),e.dose?.carbRatioUsed?(T(),D("span",tD,"Ratio: 1:"+N(e.dose.carbRatioUsed),1)):X("",!0),e.dose?.duration?(T(),D("span",eD,"Duration: "+N(e.dose.duration)+"s",1)):X("",!0),e.dose?.notes?(T(),D("span",sD," "+N(e.dose.notes),1)):X("",!0)])]))}},Cy=jt(nD,[["__scopeId","data-v-aad944b7"]]),iD={class:"note-body"},rD={key:0,class:"note-title"},oD={class:"note-line"},aD={key:0},lD={key:1},cD=["innerHTML"],uD={key:0,class:"note-tags"},dD={__name:"NoteRow",props:{note:{type:Object,required:!0}},setup(e){const t=e,s=tt(()=>t.note.timestamp instanceof Date?t.note.timestamp:lt(t.note.timestamp));return(n,i)=>(T(),D("div",{class:"note-row",role:"button",tabindex:"0",onClick:i[0]||(i[0]=(...r)=>n.onClick&&n.onClick(...r))},[v("div",iD,[e.note.title?(T(),D("div",rD,[v("strong",null,N(e.note.title),1)])):X("",!0),v("div",oD,[e.note.noteNumber?(T(),D("strong",aD,"#"+N(e.note.noteNumber),1)):X("",!0),e.note.noteNumber?(T(),D("span",lD,"  ")):X("",!0),v("strong",null,N(pt(Sr)(s.value)),1),i[1]||(i[1]=K(": ",-1)),v("span",{class:"note-text",innerHTML:(e.note.text||"").replace(/\n/g,"<br>")},null,8,cD)])]),e.note.tags?.length?(T(),D("div",uD,[(T(!0),D(ft,null,Kt(e.note.tags,r=>(T(),D("span",{key:r,class:"note-tag"},"#"+N(r),1))),128))])):X("",!0)]))}},My=jt(dD,[["__scopeId","data-v-0cda799b"]]);function hD(e){const t=Math.floor(e),s=Math.round((e-t)*60);return`${t} min ${s.toString().padStart(2,"0")} sec/km`}function fD(e){return`${e.toFixed(1)} km/h`}function gD(e){return`${(e/1e3).toFixed(2)} km`}const mD={class:"log-title"},pD={class:"time"},yD={class:"log-details"},bD={key:0},vD={key:1},_D={key:2},wD={key:3},xD={key:4},SD={key:5},kD={key:6},TD={key:7},OD={key:8},DD={__name:"WorkoutRow",props:{workout:{type:Object,required:!0}},emits:["workout-click"],setup(e,{emit:t}){const s=e,n=t;function i(){n("workout-click",s.workout)}function r(a){return Math.round(Number(a??0)/60)}function o(a){return Math.round(Number(a??0))}return(a,l)=>(T(),D("div",{class:"log-block",role:"button",tabindex:"0",onClick:i},[v("div",mD,[v("strong",null,N(e.workout.name??e.workout.type??"Workout"),1),v("span",pD,"  "+N(pt(lr)(e.workout.start)),1)]),v("div",yD,[e.workout.duration!=null?(T(),D("span",bD,[l[0]||(l[0]=v("strong",null,"Duration:",-1)),K(" "+N(r(e.workout.duration))+" min",1)])):X("",!0),e.workout.averageHeartRate!=null?(T(),D("span",vD,[l[1]||(l[1]=v("strong",null,"Avg HR:",-1)),K(" "+N(o(e.workout.averageHeartRate))+" bpm",1)])):X("",!0),e.workout.maxHeartRate!=null?(T(),D("span",_D,[l[2]||(l[2]=v("strong",null,"Max HR:",-1)),K(" "+N(o(e.workout.maxHeartRate))+" bpm",1)])):X("",!0),e.workout.activeCalories!=null?(T(),D("span",wD,[l[3]||(l[3]=v("strong",null,"Calories:",-1)),K(" "+N(o(e.workout.activeCalories)),1)])):X("",!0),v("span",null,[l[4]||(l[4]=v("strong",null,"Start:",-1)),K(" "+N(pt(lr)(e.workout.start)),1)]),v("span",null,[l[5]||(l[5]=v("strong",null,"End:",-1)),K(" "+N(e.workout.endTime?pt(lr)(e.workout.endTime):""),1)]),e.workout.elapsedTime!=null?(T(),D("span",xD,[l[6]||(l[6]=v("strong",null,"Elapsed:",-1)),K(" "+N(r(e.workout.elapsedTime))+" min",1)])):X("",!0),e.workout.distance!=null?(T(),D("span",SD,[l[7]||(l[7]=v("strong",null,"Distance:",-1)),K(" "+N(pt(gD)(e.workout.distance)),1)])):X("",!0),e.workout.kmPerHour!=null?(T(),D("span",kD,[l[8]||(l[8]=v("strong",null,"Speed:",-1)),K(" "+N(pt(fD)(e.workout.kmPerHour)),1)])):X("",!0),e.workout.minutesPerKm!=null?(T(),D("span",TD,[l[9]||(l[9]=v("strong",null,"Pace:",-1)),K(" "+N(pt(hD)(e.workout.minutesPerKm)),1)])):X("",!0),e.workout.notes?(T(),D("span",OD,[l[10]||(l[10]=v("strong",null,"Notes:",-1)),K(" "+N(e.workout.notes),1)])):X("",!0)])]))}},Ey=jt(DD,[["__scopeId","data-v-2e8e572c"]]);function Cs(e,t="any"){window.dispatchEvent(new CustomEvent("jump-to-time",{detail:{at:e,source:t}})),console.log("[jumpToTime] dispatched",{at:e,source:t})}const CD={class:"combined-list"},MD={key:0,class:"empty"},ED={key:1,class:"stack"},AD=["onClick"],ID={class:"type-badge","aria-hidden":"true"},PD={class:"content"},LD={__name:"CombinedTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]},boluses:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},workouts:{type:Array,default:()=>[]}},setup(e){const t=e,s={food:{icon:"",cssVar:"--color-food"},bolus:{icon:"",cssVar:"--color-bolus"},note:{icon:"",cssVar:"--color-note"},workout:{icon:"",cssVar:"--color-workout"}};function n(o){return s[o]?.icon??""}function i(o){return`var(${s[o]?.cssVar||"--color-border"})`}const r=tt(()=>{const{startOfDay:o,endOfDay:a}=le(t.selectedDate),l=t.foodLogs.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:lt(h.timestamp);return f>=o&&f<a?{type:"food",ts:f,payload:h}:null}).filter(Boolean),c=t.boluses.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:lt(h.timestamp);return f>=o&&f<a?{type:"bolus",ts:f,payload:h}:null}).filter(Boolean),u=t.notes.map(h=>{const f=h.timestamp??h.startTime,m=f instanceof Date?f:lt(f);return m>=o&&m<a?{type:"note",ts:m,payload:{...h,timestamp:m}}:null}).filter(Boolean),d=t.workouts.map(h=>{const f=h.start instanceof Date?h.start:lt(h.start);return f>=o&&f<a?{type:"workout",ts:f,payload:h}:null}).filter(Boolean);return[...l,...c,...u,...d].sort((h,f)=>h.ts-f.ts)});return(o,a)=>(T(),D("div",CD,[r.value.length===0?(T(),D("div",MD,"No activity for this day.")):(T(),D("div",ED,[(T(!0),D(ft,null,Kt(r.value,(l,c)=>(T(),D("div",{key:l.type+"-"+l.ts.getTime()+"-"+c,class:"feed-item clickable-row",style:xe({"--accent":i(l.type)}),onClick:u=>pt(Cs)(l.ts,"combined")},[v("div",ID,N(n(l.type)),1),v("div",PD,[l.type==="food"?(T(),ke(_u,{key:0,log:l.payload},null,8,["log"])):l.type==="bolus"?(T(),ke(Cy,{key:1,dose:l.payload},null,8,["dose"])):l.type==="note"?(T(),ke(My,{key:2,note:l.payload},null,8,["note"])):l.type==="workout"?(T(),ke(Ey,{key:3,workout:l.payload},null,8,["workout"])):X("",!0)])],12,AD))),128))]))]))}},RD=jt(LD,[["__scopeId","data-v-a9480cf9"]]),$D={class:"htp-root",tabindex:"0","aria-haspopup":"true","aria-expanded":"false"},ND={class:"htp-box",role:"tooltip"},FD={class:"htp-fallback"},jD={__name:"HelpTooltip",props:{Message:{type:String,default:""}},setup(e){return(t,s)=>(T(),D("span",$D,[s[0]||(s[0]=K(" ? ",-1)),v("span",ND,[e0(t.$slots,"default",{},()=>[v("span",FD,N(e.Message),1)])])]))}},BD=jt(jD,[["__scopeId","data-v-65e5884a"]]),WD="modulepreload",UD=function(e){return"/"+e},kf={},zr=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(s.map(u=>{if(u=UD(u),u in kf)return;kf[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":WD,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},zD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>zr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class wu extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class HD extends wu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tf extends wu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Of extends wu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fc||(fc={}));var VD=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class qD{constructor(t,{headers:s={},customFetch:n,region:i=fc.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=zD(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return VD(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(g=>{throw new HD(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Tf(d);if(!d.ok)throw new Of(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Of||i instanceof Tf?i.context:void 0}}})}}function YD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var Ut={},Un={},zn={},Hn={},Vn={},qn={},KD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wi=KD();const GD=wi.fetch,Ay=wi.fetch.bind(wi),Iy=wi.Headers,ZD=wi.Request,XD=wi.Response,Ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:Iy,Request:ZD,Response:XD,default:Ay,fetch:GD},Symbol.toStringTag,{value:"Module"})),QD=JD(Ei);var yo={},Df;function Py(){if(Df)return yo;Df=1,Object.defineProperty(yo,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return yo.default=e,yo}var Cf;function Ly(){if(Cf)return qn;Cf=1;var e=qn&&qn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qn,"__esModule",{value:!0});const t=e(QD),s=e(Py());class n{constructor(r){this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=r.headers,this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=r.shouldThrowOnError,this.signal=r.signal,this.isMaybeSingle=r.isMaybeSingle,r.fetch?this.fetch=r.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,o){return this.headers=Object.assign({},this.headers),this.headers[r]=o,this}then(r,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,m=null,g=null,p=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=k:m=JSON.parse(k))}const b=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),x=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");b&&x&&x.length>1&&(g=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,p=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const b=await c.text();try{f=JSON.parse(b),Array.isArray(f)&&c.status===404&&(m=[],f=null,p=200,y="OK")}catch{c.status===404&&b===""?(p=204,y="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((h=f?.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,p=200,y="OK"),f&&this.shouldThrowOnError)throw new s.default(f)}return{error:f,data:m,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(r,o)}returns(){return this}overrideTypes(){return this}}return qn.default=n,qn}var Mf;function Ry(){if(Mf)return Vn;Mf=1;var e=Vn&&Vn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vn,"__esModule",{value:!0});const t=e(Ly());class s extends t.default{select(i){let r=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:r=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:o=r}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,r,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:r=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,r?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Vn.default=s,Vn}var Ef;function xu(){if(Ef)return Hn;Ef=1;var e=Hn&&Hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hn,"__esModule",{value:!0});const t=e(Ry());class s extends t.default{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}in(i,r){const o=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${r}`),this}match(i){return Object.entries(i).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(i,r,o){return this.url.searchParams.append(i,`not.${r}.${o}`),this}or(i,{foreignTable:r,referencedTable:o=r}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,r,o){return this.url.searchParams.append(i,`${r}.${o}`),this}}return Hn.default=s,Hn}var Af;function $y(){if(Af)return zn;Af=1;var e=zn&&zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zn,"__esModule",{value:!0});const t=e(xu());class s{constructor(i,{headers:r={},schema:o,fetch:a}){this.url=i,this.headers=r,this.schema=o,this.fetch=a}select(i,{head:r=!1,count:o}={}){const a=r?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:r,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:r,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:r}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const r="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return zn.default=s,zn}var Hi={},Vi={},If;function tC(){return If||(If=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.version=void 0,Vi.version="0.0.0-automated"),Vi}var Pf;function eC(){if(Pf)return Hi;Pf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.DEFAULT_HEADERS=void 0;const e=tC();return Hi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Hi}var Lf;function sC(){if(Lf)return Un;Lf=1;var e=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});const t=e($y()),s=e(xu()),n=eC();class i{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{h.searchParams.append(g,p)})):(d="POST",f=a);const m=Object.assign({},this.headers);return u&&(m.Prefer=`count=${u}`),new s.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return Un.default=i,Un}var Rf;function nC(){if(Rf)return Ut;Rf=1;var e=Ut&&Ut.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const t=e(sC());Ut.PostgrestClient=t.default;const s=e($y());Ut.PostgrestQueryBuilder=s.default;const n=e(xu());Ut.PostgrestFilterBuilder=n.default;const i=e(Ry());Ut.PostgrestTransformBuilder=i.default;const r=e(Ly());Ut.PostgrestBuilder=r.default;const o=e(Py());return Ut.PostgrestError=o.default,Ut.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:r.default,PostgrestError:o.default},Ut}var iC=nC();const rC=YD(iC),{PostgrestClient:oC,PostgrestQueryBuilder:SP,PostgrestFilterBuilder:kP,PostgrestTransformBuilder:TP,PostgrestBuilder:OP,PostgrestError:DP}=rC;class aC{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const n=this.getWebSocketConstructor();return new n(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const lC="2.15.1",cC=`realtime-js/${lC}`,uC="1.0.0",gc=1e4,dC=1e3,hC=100;var fr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fr||(fr={}));var Bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bt||(Bt={}));var Ue;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ue||(Ue={}));var mc;(function(e){e.websocket="websocket"})(mc||(mc={}));var mn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mn||(mn={}));class fC{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),r=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+i));o=o+i;const l=n.decode(t.slice(o,o+r));o=o+r;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Ny{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const $f=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((r,o)=>(r[o]=gC(o,e,t,i),r),{})},gC=(e,t,s,n)=>{const i=t.find(a=>a.name===e),r=i?.type,o=s[e];return r&&!n.includes(r)?Fy(r,o):pc(o)},Fy=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return bC(t,s)}switch(e){case Et.bool:return mC(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return pC(t);case Et.json:case Et.jsonb:return yC(t);case Et.timestamp:return vC(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return pc(t);default:return pc(t)}},pc=e=>e,mC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},bC=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let r;const o=e.slice(1,s);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>Fy(t,a))}return e},vC=e=>typeof e=="string"?e.replace(" ","T"):e,jy=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class bl{constructor(t,s,n={},i=gc){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nf||(Nf={}));class gr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gr.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=gr.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=gr.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const r=this.cloneDeep(t),o=this.transformState(s),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=r[c];if(d){const h=u.map(p=>p.presence_ref),f=d.map(p=>p.presence_ref),m=u.filter(p=>f.indexOf(p.presence_ref)<0),g=d.filter(p=>h.indexOf(p.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:r,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ff;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ff||(Ff={}));var mr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mr||(mr={}));var ys;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class Su{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new bl(this,Ue.join,this.params,this.timeout),this.rejoinTimer=new Ny(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ue.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new gr(this),this.broadcastEndpointURL=jy(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[mr.PRESENCE]&&this.bindings[mr.PRESENCE].length>0,u={},d={broadcast:r,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(ys.CHANNEL_ERROR,h)),this._onClose(()=>t?.(ys.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){t?.(ys.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(f=m?.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<g;y++){const _=m[y],{filter:{event:b,schema:x,table:k,filter:A}}=_,E=h&&h[y];if(E&&E.event===b&&E.schema===x&&E.table===k&&E.filter===A)p.push(Object.assign(Object.assign({},_),{id:E.id}));else{this.unsubscribe(),this.state=Bt.errored,t?.(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(ys.SUBSCRIBED);return}}).receive("error",h=>{this.state=Bt.errored,t?.(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===Bt.joined&&t===mr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:r,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ue.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new bl(this,Ue.leave,{},t),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,s,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(r),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bl(this,t,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>hC){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,r;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ue;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,g,p;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((p=(g=f.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var m,g,p,y,_,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,k=(m=f.filter)===null||m===void 0?void 0:m.event;return x&&((g=s.ids)===null||g===void 0?void 0:g.includes(x))&&(k==="*"||k?.toLocaleLowerCase()===((p=s.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const x=(_=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return x==="*"||x===((b=s?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:p,commit_timestamp:y,type:_,errors:b}=m;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:y,eventType:_,new:{},old:{},errors:b}),this._getPayloadRecords(m))}f.callback(h,n)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),r={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Su.isEqual(i.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ue.close,{},t)}_onError(t){this._on(Ue.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=$f(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=$f(t.columns,t.old_record)),s}}const jf=()=>{},bo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_C=[1e3,2e3,5e3,1e4],wC=1e4,xC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SC{constructor(t,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gc,this.transport=null,this.heartbeatIntervalMs=bo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jf,this.ref=0,this.reconnectTimer=null,this.logger=jf,this.conn=null,this.sendBuffer=[],this.serializer=new fC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...o)=>zr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ei);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...o)=>r(...o)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${mc.websocket}`,this.httpEndpoint=jy(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aC.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uC}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fr.connecting:return mn.Connecting;case fr.open:return mn.Open;case fr.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new Su(`realtime:${t}`,s,this);return this.channels.push(r),r}}push(t){const{topic:s,event:n,payload:i,ref:r}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(dC,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},bo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:r,ref:o}=s,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),r),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,r,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ue.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([xC],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:cC};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ue.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ny(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,n,i,r,o,a,l,c;if(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:gc,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:bo.HEARTBEAT_INTERVAL,this.worker=(r=t?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t?.reconnectAfterMs)!==null&&a!==void 0?a:u=>_C[u-1]||wC,this.encode=(l=t?.encode)!==null&&l!==void 0?l:(u,d)=>d(JSON.stringify(u)),this.decode=(c=t?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class ku extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class kC extends ku{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yc extends ku{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var TC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const By=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>zr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},OC=()=>TC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zr(()=>Promise.resolve().then(()=>Ei),void 0)).Response:Response}),bc=e=>{if(Array.isArray(e))return e.map(s=>bc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=bc(n)}),t},DC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ln=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CC=(e,t,s)=>Ln(void 0,void 0,void 0,function*(){const n=yield OC();e instanceof n&&!s?.noResolveJson?e.json().then(i=>{const r=e.status||500,o=i?.statusCode||r+"";t(new kC(vl(i),r,o))}).catch(i=>{t(new yc(vl(i),i))}):t(new yc(vl(e),e))}),MC=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(DC(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s))};function Hr(e,t,s,n,i,r){return Ln(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(s,MC(t,n,i,r)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>CC(l,a,n))})})}function ta(e,t,s,n){return Ln(this,void 0,void 0,function*(){return Hr(e,"GET",t,s,n)})}function ss(e,t,s,n,i){return Ln(this,void 0,void 0,function*(){return Hr(e,"POST",t,n,i,s)})}function vc(e,t,s,n,i){return Ln(this,void 0,void 0,function*(){return Hr(e,"PUT",t,n,i,s)})}function EC(e,t,s,n){return Ln(this,void 0,void 0,function*(){return Hr(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Wy(e,t,s,n,i){return Ln(this,void 0,void 0,function*(){return Hr(e,"DELETE",t,n,i,s)})}var ne=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const AC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IC{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=By(i)}uploadOrUpdate(t,s,n,i){return ne(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},Bf),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(t=="PUT"?vc:ss)(this.fetch,`${this.url}/object/${u}`,r,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}upload(t,s,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return ne(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Bf.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield vc(this.fetch,a.toString(),l,{headers:u});return{data:{path:r,fullPath:d.Key},error:null}}catch(l){if(Wt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s?.upsert&&(i["x-upsert"]="true");const r=yield ss(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new ku("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}update(t,s,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return ne(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}copy(t,s,n){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield ss(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield ss(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return ne(this,void 0,void 0,function*(){try{const i=yield ss(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),r=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}download(t,s){return ne(this,void 0,void 0,function*(){const i=typeof s?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(s?.transform||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ta(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wt(a))return{data:null,error:a};throw a}})}info(t){return ne(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield ta(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:bc(n),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}exists(t){return ne(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield EC(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Wt(n)&&n instanceof yc){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],r=s?.download?`download=${s.download===!0?"":s.download}`:"";r!==""&&i.push(r);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Wy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}list(t,s,n){return ne(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},AC),s),{prefix:t||""});return{data:yield ss(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Wt(i))return{data:null,error:i};throw i}})}listV2(t,s){return ne(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ss(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const PC="2.11.0",LC={"X-Client-Info":`storage-js/${PC}`};var Yn=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class RC{constructor(t,s={},n,i){const r=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href,this.headers=Object.assign(Object.assign({},LC),s),this.fetch=By(n)}listBuckets(){return Yn(this,void 0,void 0,function*(){try{return{data:yield ta(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Wt(t))return{data:null,error:t};throw t}})}getBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield ta(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Yn(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Yn(this,void 0,void 0,function*(){try{return{data:yield vc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Yn(this,void 0,void 0,function*(){try{return{data:yield Wy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}}class $C extends RC{constructor(t,s={},n,i){super(t,s,n,i)}from(t){return new IC(this.url,this.headers,t,this.fetch)}}const NC="2.55.0";let tr="";typeof Deno<"u"?tr="deno":typeof document<"u"?tr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tr="react-native":tr="node";const FC={"X-Client-Info":`supabase-js-${tr}/${NC}`},jC={headers:FC},BC={schema:"public"},WC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UC={};var zC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const HC=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ay:t=fetch,(...s)=>t(...s)},VC=()=>typeof Headers>"u"?Iy:Headers,qC=(e,t,s)=>{const n=HC(s),i=VC();return(r,o)=>zC(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(o?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:c}))})};var YC=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function JC(e){return e.endsWith("/")?e:e+"/"}function KC(e,t){var s,n;const{db:i,auth:r,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>YC(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Uy="2.71.1",ei=30*1e3,_c=3,_l=_c*ei,GC="http://localhost:9999",ZC="supabase.auth.token",XC={"X-Client-Info":`gotrue-js/${Uy}`},wc="X-Supabase-Api-Version",zy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tM=600*1e3;class Tu extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function st(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class eM extends Tu{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function sM(e){return st(e)&&e.name==="AuthApiError"}class Hy extends Tu{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Qs extends Tu{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class Rs extends Qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nM(e){return st(e)&&e.name==="AuthSessionMissingError"}class vo extends Qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _o extends Qs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wo extends Qs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iM(e){return st(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wf extends Qs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xc extends Qs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function wl(e){return st(e)&&e.name==="AuthRetryableFetchError"}class Uf extends Qs{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Sc extends Qs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zf=` 	
\r=`.split(""),rM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zf.length;t+=1)e[zf[t].charCodeAt(0)]=-2;for(let t=0;t<ea.length;t+=1)e[ea[t].charCodeAt(0)]=t;return e})();function Hf(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ea[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(ea[n]),t.queuedBits-=6}}function Vy(e,t,s){const n=rM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Vf(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{lM(o,n,s)};for(let o=0;o<e.length;o+=1)Vy(e.charCodeAt(o),i,r);return t.join("")}function oM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function aM(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}oM(n,t)}}function lM(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function cM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Vy(e.charCodeAt(i),s,n);return new Uint8Array(t)}function uM(e){const t=[];return aM(e,s=>t.push(s)),new Uint8Array(t)}function dM(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Hf(i,s,n)),Hf(null,s,n),t.join("")}function hM(e){return Math.round(Date.now()/1e3)+e}function fM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const We=()=>typeof window<"u"&&typeof document<"u",cn={tested:!1,writable:!1},qy=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cn.tested)return cn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cn.tested=!0,cn.writable=!0}catch{cn.tested=!0,cn.writable=!1}return cn.writable};function gM(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const Yy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>zr(async()=>{const{default:n}=await Promise.resolve().then(()=>Ei);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},mM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",si=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},un=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Is=async(e,t)=>{await e.removeItem(t)};class Pa{constructor(){this.promise=new Pa.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Pa.promiseConstructor=Promise;function xl(e){const t=e.split(".");if(t.length!==3)throw new Sc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!QC.test(t[n]))throw new Sc("JWT not in base64url format");return{header:JSON.parse(Vf(t[0])),payload:JSON.parse(Vf(t[1])),signature:cM(t[2]),raw:{header:t[0],payload:t[1]}}}async function pM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function yM(e,t){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await e(r);if(!t(r,null,o)){n(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function bM(e){return("0"+e.toString(16)).substr(-2)}function vM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let r=0;r<56;r++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,bM).join("")}async function _M(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function wM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await _M(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(e,t,s=!1){const n=vM();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await si(e,`${t}-code-verifier`,i);const r=await wM(n);return[r,n===r?"plain":"s256"]}const xM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SM(e){const t=e.headers.get(wc);if(!t||!t.match(xM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function TM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kn(e){if(!OM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sl(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qf(e){return JSON.parse(JSON.stringify(e))}var DM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const gn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CM=[502,503,504];async function Yf(e){var t;if(!mM(e))throw new xc(gn(e),0);if(CM.includes(e.status))throw new xc(gn(e),e.status);let s;try{s=await e.json()}catch(r){throw new Hy(gn(r),r)}let n;const i=SM(e);if(i&&i.getTime()>=zy["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Uf(gn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Rs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new Uf(gn(s),e.status,s.weak_password.reasons);throw new eM(gn(s),e.status||500,n)}const MM=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function ct(e,t,s,n){var i;const r=Object.assign({},n?.headers);r[wc]||(r[wc]=zy["2024-01-01"].name),n?.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await EM(e,t,s+a,{headers:r,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function EM(e,t,s,n,i,r){const o=MM(t,n,i,r);let a;try{a=await e(s,Object.assign({},o))}catch(l){throw console.error(l),new xc(gn(l),0)}if(a.ok||await Yf(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Yf(l)}}function ms(e){var t;let s=null;LM(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=hM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Jf(e){const t=ms(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function AM(e){return{data:e,error:null}}function IM(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r}=e,o=DM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function PM(e){return e}function LM(e){return e.access_token&&e.refresh_token&&e.expires_in}const kl=["global","local","others"];var RM=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class $M{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=Yy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=kl[0]){if(kl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kl.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Bs})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=RM(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:IM,redirectTo:s?.redirectTo})}catch(s){if(st(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bs})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:PM});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(m.split(";")[1].split("=")[1]);c[`${p}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(st(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Kn(t);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bs})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Kn(t);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Bs})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){Kn(t);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Bs})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Kn(t.userId);try{const{data:s,error:n}=await ct(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Kn(t.userId),Kn(t.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}}function Kf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function NM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gn={debug:!!(globalThis&&qy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FM extends Jy{}async function jM(e,t,s){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gn.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}NM();const BM={url:GC,storageKey:ZC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gf(e,t,s){return await s()}const Zn={};class Mr{constructor(t){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mr.nextInstanceID,Mr.nextInstanceID+=1,this.instanceID>0&&We()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},BM),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new $M({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Yy(i.fetch),this.lock=i.lock||Gf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:We()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=jM:this.lock=Gf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:qy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Kf(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Zn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Uy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=gM(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),We()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(s,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),iM(r)){const l=(t=r.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return st(s)?{error:s}:{error:new Hy("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const r=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ms}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var s,n,i;try{let r;if("email"in t){const{email:u,password:d,options:h}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Jn(this.storage,this.storageKey)),r=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:m},xform:ms})}else if("phone"in t){const{phone:u,password:d,options:h}=t;r=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ms})}else throw new _o("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{let s;if("email"in t){const{email:r,password:o,options:a}=t;s=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Jf})}else if("phone"in t){const{phone:r,password:o,options:a}=t;s=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Jf})}else throw new _o("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new vo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,n,i,r,o,a,l,c,u,d,h,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:y,statement:_,options:b}=t;let x;if(We())if(typeof y=="object")x=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))x=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const k=new URL((s=b?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in x&&x.signIn){const A=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),_?{statement:_}:null));let E;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")E=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)E=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)m=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=b?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=b?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const A=await x.signMessage(new TextEncoder().encode(m),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:p,error:y}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:dM(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ms});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new vo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(st(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const s=await un(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:r,error:o}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ms});if(await Is(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new vo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(st(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:r,nonce:o}=t,a=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:ms}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new vo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,r,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jn(this.storage,this.storageKey));const{error:d}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new _o("You must provide either an email or phone number.")}catch(a){if(st(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,r;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,r=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:ms});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(st(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await Jn(this.storage,this.storageKey)),await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:AM})}catch(r){if(st(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Rs;const{error:i}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(st(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:r}=t,{error:o}=await ct(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:r}=t,{data:o,error:a}=await ct(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new _o("You must provide either an email or phone number and a type")}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<_l:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await un(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Sl()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bs}):await this._useSession(async s=>{var n,i,r;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rs}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Bs})})}catch(s){if(st(s))return nM(s)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new Rs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Jn(this.storage,this.storageKey));const{data:c,error:u}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Bs});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rs;const s=Date.now()/1e3;let n=s,i=!0,r=null;const{payload:o}=xl(t.access_token);if(o.exp&&(n=o.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(s){if(st(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:a}=s;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Rs;const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!We())throw new wo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Wf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wf("No code detected.");const{data:_,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!r||!a||!o||!c)throw new wo("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=ei&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:g,error:p}=await this._getUser(r);if(p)throw p;const y={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(st(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await un(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(sM(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=fM(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:r},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Jn(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(r){if(st(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,c,u;const{data:d,error:h}=r;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return We()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(st(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)throw o;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await yM(async i=>(i>0&&await pM(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ms})),(i,r)=>{const o=200*Math.pow(2,i);return r&&wl(r)&&Date.now()+o-n<ei})}catch(n){if(this._debug(s,"error",n),st(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),We()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await un(this.storage,this.storageKey);if(i&&this.userStorage){let o=await un(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await si(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:Sl()}else if(i&&!i.user&&!i.user){const o=await un(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Is(this.storage,this.storageKey+"-user"),await si(this.storage,this.storageKey,i)):i.user=Sl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<_l;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${_l}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),wl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pa;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new Rs;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),st(r)){const o={session:null,error:r};return wl(r)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await si(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const r=qf(i);await si(this.storage,this.storageKey,r)}else{const i=qf(s);await si(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&We()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ei);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/ei);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ei}ms, refresh threshold is ${_c} ticks`),i<=_c&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await Jn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n?.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await ct(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{data:null,error:r};const{data:o,error:a}=await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(st(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(st(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=t?.factors||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:r}=t;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=xl(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+tM>i)return n;const{data:r,error:o}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,s={}){try{let n=t;if(!n){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};n=f.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=xl(n);s?.allowExpired||kM(r.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:r,header:i,signature:o},error:null}}const u=TM(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,uM(`${a}.${l}`)))throw new Sc("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}}Mr.nextInstanceID=0;const WM=Mr;class UM extends WM{constructor(t){super(t)}}var zM=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class HM{constructor(t,s,n){var i,r,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=JC(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:BC,realtime:UC,auth:Object.assign(Object.assign({},WC),{storageKey:c}),global:jC},d=KC(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=d.global.headers)!==null&&r!==void 0?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=qC(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new oC(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new $C(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new qD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return zM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UM({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:r,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new SC(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VM=(e,t,s)=>new HM(e,t,s);function qM(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}qM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const YM="https://ydjtxdquehaeglieozpz.supabase.co",JM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkanR4ZHF1ZWhhZWdsaWVvenB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0OTc2MzEsImV4cCI6MjA3MTA3MzYzMX0.zRO6-nChPo9eiVIWc44XYCojP8DYrxaRFHsZzbnxVD4",Oe=VM(YM,JM);async function KM(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchNotesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("notes").select("id, text, start_time, end_time, tags").gte("start_time",s).lt("start_time",n).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,text:o.text??"",timestamp:C.fromISO(o.start_time).toJSDate(),startTime:C.fromISO(o.start_time).toJSDate(),endTime:o.end_time?C.fromISO(o.end_time).toJSDate():null,tags:Array.isArray(o.tags)?o.tags:[]}))}async function Zf({limit:e=10,anchor:t,query:s="",tags:n=[]}={}){let i=Oe.from("notes").select("id, text, start_time, end_time, tags",{count:"exact"}).order("start_time",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.startISO&&t?.id&&(i=i.or([`and(start_time.lt.${t.startISO})`,`and(start_time.eq.${t.startISO},id.lt.${t.id})`].join(",")));const r=(s||"").trim(),o=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);if(r.startsWith("#")){const f=r.slice(1).trim();f&&o.push(f)}else r.length>0&&(i=i.ilike("text",`%${r}%`));o.length>0&&(i=i.contains("tags",o));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,text:f.text??"",timestamp:C.fromISO(f.start_time).toJSDate(),startTime:C.fromISO(f.start_time).toJSDate(),endTime:f.end_time?C.fromISO(f.end_time).toJSDate():null,tags:Array.isArray(f.tags)?f.tags:[]})),d=u[u.length-1],h=d?{startISO:C.fromJSDate(d.startTime).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function GM(){const{data:e,error:t}=await Oe.rpc("all_note_tags");if(t)throw t;return(e??[]).map(s=>s.tag)}const ZM={class:"all-notes"},XM={class:"search"},QM={key:0,class:"results-bar"},tE={key:0},eE={key:0},sE={key:1},nE={class:"tag-cloud"},iE=["onClick"],rE={key:1,class:"empty"},oE=["onClick"],aE={class:"note-log-body"},lE=["innerHTML"],cE={key:0,class:"note-tags"},uE={class:"load-more"},dE={key:1},hE={key:2},fE={__name:"AllNotesTab",emits:["note-click"],setup(e,{emit:t}){const s=t,n=Dt([]),i=Dt(null),r=Dt(!1),o=Dt(null),a=Dt(""),l=Dt([]),c=Dt([]);function u(y){return c.value.includes(y)}function d(y){const _=c.value.indexOf(y);_>=0?c.value.splice(_,1):c.value.push(y),r.value=!0,n.value=[],i.value=null}function h(){a.value="",c.value=[]}async function f(){r.value=!0;try{const{items:y,nextAnchor:_,totalMatchingFilter:b}=await Zf({limit:10,query:a.value,tags:c.value});n.value=y,i.value=_,o.value=b}catch(y){console.error("[AllNotesTab] first page failed:",y),n.value=[],i.value=null,o.value=0}finally{r.value=!1}}async function m(){if(!(!i.value||r.value)){r.value=!0;try{const{items:y,nextAnchor:_}=await Zf({limit:10,query:a.value,tags:c.value,anchor:i.value});n.value.push(...y),i.value=_}catch(y){console.error("[AllNotesTab] next page failed:",y)}finally{r.value=!1}}}function g(y){Cs(y.timestamp,"all-notes"),s("note-click",y.timestamp)}os([a,()=>c.value.join("|")],async()=>{r.value=!0,n.value=[],i.value=null,o.value=null,await f()});async function p(){try{l.value=await GM()}catch(y){console.error("[AllNotesTab] loadAllTags failed:",y),l.value=[]}}return Ds(async()=>{await p(),await f()}),(y,_)=>(T(),D("section",ZM,[v("div",XM,[$c(v("input",{"onUpdate:modelValue":_[0]||(_[0]=b=>a.value=b),type:"text",placeholder:"Search notes  (#tag or text)"},null,512),[[cm,a.value]]),a.value||c.value.length?(T(),D("button",{key:0,class:"clear-btn",type:"button",onClick:h}," Clear Search ")):X("",!0),mt(BD,null,{default:Al(()=>_[1]||(_[1]=[v("div",null,[v("div",null,[K("To filter by tag, prefix tag name with "),v("code",null,"#"),K("or click on the tags listed below.")]),v("div",null,[K("To filter by note number, prefix note number with "),v("code",null,"#"),K(".")]),v("div",null,"Or you can just search the content by entering a word.")],-1)])),_:1,__:[1]})]),r.value?X("",!0):(T(),D("div",QM,[(o.value??0)>0?(T(),D("span",tE,[K(N(o.value)+" result",1),o.value!==1?(T(),D("span",eE,"s")):X("",!0)])):(T(),D("span",sE,"No results"))])),v("div",nE,[(T(!0),D(ft,null,Kt(l.value,b=>(T(),D("button",{key:b,class:dt(["tag-chip",{selected:u(b)}]),type:"button",onClick:x=>d(b)},N(b),11,iE))),128))]),r.value?(T(),D("div",rE,"Loading")):(T(),ke(gv,{key:2,name:"list",tag:"div",class:"notes-list"},{default:Al(()=>[(T(!0),D(ft,null,Kt(n.value,b=>(T(),D("div",{key:b.id??b.timestamp+"-"+(b.text||"").slice(0,10),class:"note-log-block clickable-row",onClick:x=>g(b),role:"button",tabindex:"0"},[v("div",aE,[v("div",null,[v("strong",null,N(pt(Zl)(b.timestamp)),1),_[2]||(_[2]=K("  ",-1)),v("span",{innerHTML:(b.text||"").replace(/\n/g,"<br>")},null,8,lE)])]),b.tags?.length?(T(),D("div",cE,[(T(!0),D(ft,null,Kt(b.tags,x=>(T(),D("span",{key:x,class:"note-tag"},N(x),1))),128))])):X("",!0)],8,oE))),128))]),_:1})),v("div",uE,[i.value&&!r.value?(T(),D("button",{key:0,type:"button",onClick:m}," Load more ")):r.value?(T(),D("div",dE,"Loading")):n.value.length>0?(T(),D("div",hE,"No more results.")):X("",!0)])]))}},gE=jt(fE,[["__scopeId","data-v-5015ded6"]]),mE={class:"daily-section"},pE={key:0,class:"loading-row"},yE={key:1},bE={key:2},vE={__name:"NotesTab",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=tt(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:r}=le(s.selectedDate);return s.notes.filter(o=>{const a=o.timestamp instanceof Date?o.timestamp:lt(o.timestamp);return a>=i&&a<r}).sort((o,a)=>{const l=(o.timestamp instanceof Date?o.timestamp:lt(o.timestamp)).getTime(),c=(a.timestamp instanceof Date?a.timestamp:lt(a.timestamp)).getTime();return l-c})});return(i,r)=>(T(),D("div",mE,[e.loading?(T(),D("div",pE,r[0]||(r[0]=[v("span",{class:"spinner","aria-hidden":"true"},null,-1),v("span",null,"Loading notes",-1)]))):n.value.length===0?(T(),D("div",yE,"No notes for this day.")):(T(),D("div",bE,[(T(!0),D(ft,null,Kt(n.value,o=>(T(),ke(My,{key:(o.timestamp?.getTime?.()??o.timestamp)+"-"+(o.noteNumber??""),note:o,onClick:a=>pt(Cs)(o.timestamp,"notes"),class:"clickable-row"},null,8,["note","onClick"]))),128))]))]))}},_E={class:"daily-section"},wE={key:0},xE={key:1},SE={class:"fast-label"},kE={key:0},TE={key:1,class:"fast-notes"},OE={__name:"FastsTab",props:{fasts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=tt(()=>{if(!s.selectedDate)return[];const{startOfDay:r,endOfDay:o}=le(s.selectedDate);return s.fasts.filter(a=>{const l=a.startTime instanceof Date?a.startTime:lt(a.startTime),c=a.endTime?a.endTime instanceof Date?a.endTime:lt(a.endTime):null;return l<o&&(!c||c>r)}).sort((a,l)=>{const c=(a.startTime instanceof Date?a.startTime:lt(a.startTime)).getTime(),u=(l.startTime instanceof Date?l.startTime:lt(l.startTime)).getTime();return c-u})});function i(r){const o=s.selectedDate,a=r.startTime,l=r.endTime;return eo(a,o)&&l&&eo(l,o)?"Started and Ended":eo(a,o)?"Started fast:":l&&eo(l,o)?"Ended fast:":"Continued"}return(r,o)=>(T(),D("div",_E,[n.value.length===0?(T(),D("div",wE,"No fasts for this day.")):(T(),D("div",xE,[(T(!0),D(ft,null,Kt(n.value,a=>(T(),D("div",{key:(a.startTime?.getTime?.()??a.startTime)+"-"+(a.endTime?.getTime?.()??"ongoing"),class:"fast-block",role:"button",tabindex:"0"},[v("div",SE,N(i(a)),1),a.duration?(T(),D("div",kE,[o[0]||(o[0]=v("strong",null,"Duration:",-1)),K(" "+N(Math.floor(a.duration/3600))+"h "+N(Math.floor(a.duration%3600/60))+"m ",1)])):X("",!0),v("div",null,[o[1]||(o[1]=v("strong",null,"Start:",-1)),K(" "+N(pt(Zl)(a.startTime)),1)]),v("div",null,[o[2]||(o[2]=v("strong",null,"End:",-1)),K(" "+N(a.endTime?pt(Zl)(a.endTime):"Ongoing"),1)]),a.notes?(T(),D("div",TE," "+N(a.notes),1)):X("",!0)]))),128))]))]))}},DE=jt(OE,[["__scopeId","data-v-c07900b9"]]),CE={class:"daily-section"},ME={key:0},EE={key:1,class:"glucose-list"},AE=["onClick","aria-label"],IE={class:"time"},PE={class:"value"},LE={__name:"GlucoseTab",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:i,endOfDay:r}=le(t.selectedDate);return t.glucoseReadings.filter(o=>{const a=o.timestamp instanceof Date?o.timestamp:lt(o.timestamp);return a>=i&&a<r}).map(o=>({...o,ts:o.timestamp instanceof Date?o.timestamp:lt(o.timestamp)})).sort((o,a)=>o.ts-a.ts)});function n(i){const r=Number(i);return r<4?"is-low":r<=6?"is-inrange":r<=10?"is-elevated":"is-high"}return(i,r)=>(T(),D("div",CE,[s.value.length===0?(T(),D("div",ME,"No glucose readings for this day.")):(T(),D("div",EE,[(T(!0),D(ft,null,Kt(s.value,o=>(T(),D("div",{key:o.ts.getTime()+"-"+o.value,class:dt(["glucose-row clickable-row",n(o.value)]),onClick:a=>pt(Cs)(o.ts,"bg"),"aria-label":`BG ${Number(o.value).toFixed(2)} at ${pt(Sr)(o.ts)}`},[v("span",IE,N(pt(Sr)(o.ts)),1),v("span",PE,N(Number(o.value).toFixed(2)),1),r[0]||(r[0]=v("span",{class:"unit"},"mmol/L",-1))],10,AE))),128))]))]))}},RE=jt(LE,[["__scopeId","data-v-882bf5e4"]]),$E={class:"daily-section"},NE={key:0,class:"loading-row"},FE={key:1},jE={key:2},BE={__name:"FoodLogsTab",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,s)=>(T(),D("div",$E,[e.loading?(T(),D("div",NE,s[0]||(s[0]=[v("span",{class:"spinner","aria-hidden":"true"},null,-1),v("span",null,"Loading food logs",-1)]))):e.foodLogs.length===0?(T(),D("div",FE,"No food logs.")):(T(),D("div",jE,[(T(!0),D(ft,null,Kt(e.foodLogs,n=>(T(),ke(_u,{key:n.id,log:n,onClick:i=>pt(Cs)(n.timestamp,"foodLogs"),class:"clickable-row"},null,8,["log","onClick"]))),128))]))]))}},WE={class:"daily-section"},UE={key:0},zE={key:1},HE={__name:"WorkoutsTab",props:{workouts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=le(t.selectedDate);return t.workouts.filter(r=>{const o=r.start instanceof Date?r.start:lt(r.start);return o>=n&&o<i}).sort((r,o)=>{const a=(r.start instanceof Date?r.start:lt(r.start)).getTime(),l=(o.start instanceof Date?o.start:lt(o.start)).getTime();return a-l})});return(n,i)=>(T(),D("div",WE,[s.value.length===0?(T(),D("div",UE,"No workouts for this day.")):(T(),D("div",zE,[(T(!0),D(ft,null,Kt(s.value,r=>(T(),ke(Ey,{key:(r.start?.getTime?.()??r.start)+"-"+(r.name||""),workout:r,onClick:o=>pt(Cs)(r.start,"workout"),class:"clickable-row"},null,8,["workout","onClick"]))),128))]))]))}},VE={class:"daily-section"},qE={key:0,class:"loading-row"},YE={key:1},JE={__name:"BolusTab",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){const t=e,s=tt(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=le(t.selectedDate);return t.boluses.filter(r=>{const o=r.timestamp instanceof Date?r.timestamp:lt(r.timestamp);return o>=n&&o<i}).sort((r,o)=>{const a=(r.timestamp instanceof Date?r.timestamp:lt(r.timestamp)).getTime(),l=(o.timestamp instanceof Date?o.timestamp:lt(o.timestamp)).getTime();return a-l})});return(n,i)=>(T(),D("div",VE,[e.loading?(T(),D("div",qE,i[0]||(i[0]=[v("span",{class:"spinner","aria-hidden":"true"},null,-1),v("span",null,"Loading boluses",-1)]))):s.value.length===0?(T(),D("div",YE,"No bolus doses for this day.")):(T(!0),D(ft,{key:2},Kt(s.value,r=>(T(),ke(Cy,{key:(r.timestamp?.getTime?.()??r.timestamp)+"-"+(r.amount??""),dose:r,onClick:o=>pt(Cs)(r.timestamp,"bolus"),class:"clickable-row"},null,8,["dose","onClick"]))),128))]))}},KE={class:"daily-section"},GE={key:0,class:"loading-row"},ZE={key:1},XE={key:2},QE=["onClick"],tA={class:"log-details"},eA={key:1},sA={__name:"BasalTab",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){function t(){console.log("[Basal Debug] Total entries:",s.basalEntries.length);const i=s.basalEntries.filter(r=>!r.endTime);console.log("[Basal Debug] Entries with null endTime:",i.length),s.basalEntries.forEach((r,o)=>{console.log(`#${o} start: ${r.startTime}, end: ${r.endTime??"null"}, rate: ${r.rate}`)})}Ds(()=>{t()});const s=e,n=tt(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:r}=le(s.selectedDate);return s.basalEntries.filter(o=>{const a=o.startTime instanceof Date?o.startTime:lt(o.startTime),l=o.endTime?o.endTime instanceof Date?o.endTime:lt(o.endTime):null;return a<r&&(!l||l>i)}).sort((o,a)=>{const l=(o.startTime instanceof Date?o.startTime:lt(o.startTime)).getTime(),c=(a.startTime instanceof Date?a.startTime:lt(a.startTime)).getTime();return l-c})});return(i,r)=>(T(),D("div",KE,[e.loading?(T(),D("div",GE,r[0]||(r[0]=[v("span",{class:"spinner","aria-hidden":"true"},null,-1),v("span",null,"Loading basal",-1)]))):n.value.length===0?(T(),D("div",ZE," No basal entries for this day. ")):(T(),D("div",XE,[(T(!0),D(ft,null,Kt(n.value,o=>(T(),D("div",{key:(o.startTime?.getTime?.()??o.startTime)+"-"+(o.endTime?.getTime?.()??"ongoing")+"-"+(o.rate??""),class:"log-block clickable-row",role:"button",tabindex:"0",onClick:a=>pt(Cs)(o.startTime,"basal")},[v("div",null,[v("strong",null,N(pt(lr)(o.startTime)),1),r[1]||(r[1]=K("  ",-1)),v("strong",null,N(o.endTime?pt(lr)(o.endTime):"Ongoing"),1)]),v("div",null,[r[2]||(r[2]=v("strong",null,"Duration:",-1)),K(" "+N(pt(Mw)(pt(Cw)(o.startTime,o.endTime,e.selectedDate))),1)]),v("div",tA,[v("span",null," Rate: "+N(o.rate)+" U/hr",1),o.mode?(T(),D("span",{key:0,class:dt(["mode-chip",{"chip-control-iq":o.mode==="ControlIQ","chip-manual":o.mode==="Manual","chip-suspended":o.mode==="Suspended"}])},N(o.mode),3)):X("",!0),o.notes?(T(),D("span",eA," "+N(o.notes),1)):X("",!0)])],8,QE))),128))]))]))}},nA=jt(sA,[["__scopeId","data-v-5bd58bd6"]]),iA={class:"basal-by-hour"},rA={class:"summary"},oA={class:"table-wrap"},aA={class:"hour-table"},lA={class:"hour-label"},cA={class:"units"},uA={__name:"BasalByHourTab",props:{basalEntries:{type:Array,default:()=>[]},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){const t=e,s=tt(()=>Array.isArray(t.hourlyBasalTotals)&&t.hourlyBasalTotals.length===24?t.hourlyBasalTotals:new Array(24).fill(0)),n=tt(()=>{const r=[],o=C.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day");for(let a=0;a<24;a++){const l=o.plus({hours:a}),c=l.plus({hours:1});r.push({hour:a,label:`${l.toFormat("h:mm a")}  ${c.toFormat("h:mm a")}`,units:s.value[a]})}return r}),i=tt(()=>s.value.reduce((r,o)=>r+o,0));return(r,o)=>(T(),D("section",iA,[o[2]||(o[2]=v("h3",{class:"title"},"Basal Delivered by Hour",-1)),v("div",rA,[v("div",null,[o[0]||(o[0]=v("strong",null,"Total basal for the day:",-1)),K(" "+N(i.value.toFixed(2))+" U",1)])]),v("div",oA,[v("table",aA,[o[1]||(o[1]=v("thead",null,[v("tr",null,[v("th",null,"Hour"),v("th",null,"Units")])],-1)),v("tbody",null,[(T(!0),D(ft,null,Kt(n.value,a=>(T(),D("tr",{key:a.hour},[v("td",lA,N(a.label),1),v("td",cA,N(a.units.toFixed(3)),1)]))),128))])])])]))}},dA=jt(uA,[["__scopeId","data-v-9e5f6077"]]),hA={class:"stat-grid"},fA={class:"card"},gA={class:"card"},mA={class:"card"},pA={class:"card"},yA={class:"card"},bA={__name:"InsulinStatsTab",props:{selectedDate:{type:Date,required:!0},bolusDoses:{type:Array,default:()=>[]},basalEntries:{type:Array,default:()=>[]},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=tt(()=>{const{startOfDay:l,endOfDay:c}=le(t.selectedDate);return t.bolusDoses.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:lt(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d.amount??0),0)}),n=tt(()=>{const{startOfDay:l,endOfDay:c}=le(t.selectedDate),u=t.basalEntries.map(h=>({startTime:h.startTime instanceof Date?h.startTime:lt(h.startTime),endTime:h.endTime?h.endTime instanceof Date?h.endTime:lt(h.endTime):null,rate:Number(h.rate??0)})).filter(h=>h.startTime<c&&(!h.endTime||h.endTime>l)).sort((h,f)=>h.startTime-f.startTime);let d=0;for(const h of u){const f=new Date(Math.max(h.startTime.getTime(),l.getTime())),g=(new Date(Math.min((h.endTime??c).getTime(),c.getTime()))-f)/6e4;g>0&&(d+=h.rate*(g/60))}return d}),i=tt(()=>s.value+n.value),r=tt(()=>{const{startOfDay:l,endOfDay:c}=le(t.selectedDate);return t.foodLogs.map(u=>({...u,timestamp:u.timestamp instanceof Date?u.timestamp:lt(u.timestamp)})).filter(u=>u.timestamp>=l&&u.timestamp<c).reduce((u,d)=>u+Number(d?.netCarbs??0),0)}),o=tt(()=>{const l=r.value,c=s.value;return l>0&&c>0?`${(l/c).toFixed(2)}`:"N/A"}),a=tt(()=>{const l=r.value,c=i.value;return c>0?`${(l/c).toFixed(2)}`:"N/A"});return(l,c)=>(T(),D("div",hA,[v("div",fA,[c[0]||(c[0]=K(" Bolus ",-1)),v("strong",null,N(s.value.toFixed(2))+"U",1)]),v("div",gA,[c[1]||(c[1]=K(" Basal ",-1)),v("strong",null,N(n.value.toFixed(2))+"U",1)]),v("div",mA,[c[2]||(c[2]=K(" Total Insulin ",-1)),v("strong",null,N(i.value.toFixed(2))+"U",1)]),v("div",pA,[c[3]||(c[3]=K(" Net Carbs / Bolus ",-1)),v("strong",null,N(o.value),1)]),v("div",yA,[c[4]||(c[4]=K(" Net Carbs / Total Insulin ",-1)),v("strong",null,N(a.value),1)])]))}},vA=jt(bA,[["__scopeId","data-v-868c365a"]]),_A={class:"stat-grid"},wA={class:"card"},xA={class:"value"},SA={class:"card"},kA={class:"value"},TA={class:"card"},OA={class:"value"},DA=["data-status"],CA={class:"value"},MA={class:"target-bar"},EA=["title"],AA={class:"ticks-row"},IA={class:"card"},PA={class:"value"},LA={class:"card"},RA={class:"value"},$A={__name:"NutritionStatsTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=tt(()=>{const{startOfDay:h,endOfDay:f}=le(t.selectedDate);return t.foodLogs.map(m=>({...m,timestamp:m.timestamp instanceof Date?m.timestamp:lt(m.timestamp)})).filter(m=>m.timestamp>=h&&m.timestamp<f)}),n=tt(()=>{const h=f=>s.value.reduce((m,g)=>m+Number(g?.[f]??0),0);return{netCarbs:h("netCarbs"),totalCarbs:h("totalCarbs"),fat:h("fat"),protein:h("protein"),fibre:h("fibre"),calories:h("calories")}}),i=tt(()=>{const h=(Number(n.value.fat)||0)*9,f=Number(n.value.calories)||0;return f<=0?0:h/f*100}),r=tt(()=>{const h=Number(i.value)||0;return Math.max(15,h)}),o=tt(()=>`${Math.max(0,Number(i.value)||0)/r.value*100}%`),a=tt(()=>o.value),l=tt(()=>{const h=10/r.value*100,f=5/r.value*100;return{left:`${h}%`,width:`${f}%`}}),c=tt(()=>`${10/r.value*100}%`),u=tt(()=>`${15/r.value*100}%`),d=tt(()=>{const h=Number(i.value)||0;return h<10?"below":h>15?"above":"in"});return(h,f)=>(T(),D("div",_A,[v("div",wA,[f[0]||(f[0]=K(" Net Carbs ",-1)),v("span",xA,N(n.value.netCarbs.toFixed(1))+"g",1)]),v("div",SA,[f[1]||(f[1]=K(" Total Carbs ",-1)),v("span",kA,N(n.value.totalCarbs.toFixed(1))+"g",1)]),v("div",TA,[f[2]||(f[2]=v("span",null," Fat",-1)),f[3]||(f[3]=K()),v("span",OA,N(n.value.fat.toFixed(1))+"g",1)]),v("div",{class:"card fat-pct","data-status":d.value},[f[5]||(f[5]=v("span",{class:"label"}," % Calories from Fat",-1)),v("span",CA,N(i.value.toFixed(1))+"%",1),v("div",MA,[f[4]||(f[4]=v("div",{class:"bar"},null,-1)),v("div",{class:"target-band",style:xe({left:l.value.left,width:l.value.width})},null,4),v("div",{class:"fill",style:xe({width:a.value})},null,4),v("div",{class:"tick",style:xe({left:c.value}),"aria-hidden":"true"},null,4),v("div",{class:"tick",style:xe({left:u.value}),"aria-hidden":"true"},null,4),v("div",{class:"marker",style:xe({left:o.value}),title:i.value.toFixed(1)+"%"},null,12,EA)]),v("div",AA,[v("div",{class:"tick-label",style:xe({left:c.value})},"10",4),v("div",{class:"tick-label",style:xe({left:u.value})},"15",4),v("div",{class:"tick-label value-label",style:xe({left:o.value})},N(i.value.toFixed(1)),5)])],8,DA),f[8]||(f[8]=v("div",{class:"card"},[K(" Protein "),v("span",{class:"value"},"Not tracked yet...")],-1)),v("div",IA,[f[6]||(f[6]=K(" Fibre ",-1)),v("span",PA,N(n.value.fibre.toFixed(1))+"g",1)]),v("div",LA,[f[7]||(f[7]=K(" Calories ",-1)),v("span",RA,N(n.value.calories.toFixed(0)),1)])]))}},NA=jt($A,[["__scopeId","data-v-7397306a"]]),FA={class:"bg-grid"},jA={class:"row green"},BA={class:"right"},WA={class:"chip chip-green"},UA={class:"row green"},zA={class:"right"},HA={class:"chip chip-green"},VA={class:"row red"},qA={class:"row amber"},YA={class:"row red"},JA={class:"row red"},KA={key:0,class:"secondary"},GA={class:"row red"},ZA={key:0,class:"secondary"},XA={class:"row grey"},QA={key:0,class:"secondary"},tI={class:"foot"},eI={__name:"BgStatsTab",props:{selectedDate:{type:Date,required:!0},glucoseReadings:{type:Array,default:()=>[]}},setup(e){const t=e,s=tt(()=>{const{startOfDay:n,endOfDay:i}=le(t.selectedDate),r=t.glucoseReadings.map(b=>({timestamp:b.timestamp instanceof Date?b.timestamp:lt(b.timestamp),value:Number(b.value)})).filter(b=>b.timestamp>=n&&b.timestamp<i).sort((b,x)=>b.timestamp-x.timestamp);let o=0,a=0,l=0,c=0,u=0,d=0,h=1/0,f=-1/0,m=0;for(let b=0;b<r.length;b++){const x=r[b],k=r[b+1],A=x.timestamp,E=k?k.timestamp:new Date(Math.min(i,x.timestamp.getTime()+300*1e3)),L=Math.max(0,(E-A)/6e4);d+=L;const I=x.value;I<4&&(o+=L),I>=4&&I<=6&&(a+=L),I>=4&&I<=10&&(l+=L),I>8&&(c+=L),I>10&&(u+=L),Number.isFinite(I)&&I<h&&(h=I),Number.isFinite(I)&&I>f&&(f=I),Number.isFinite(I)&&(m+=I*L)}const g=Math.max(d,1),p=Number.isFinite(h)?h:null,y=Number.isFinite(f)?f:null,_=d>0&&Number.isFinite(m)?m/d:null;return{timeBelow4:o,timeBetween4and6:a,timeBetween4and10:l,timeAbove8:c,timeAbove10:u,totalCoveredMinutes:d,uncoveredMinutes:Math.max(0,1440-d),pct4to6:a/g*100,pct4to10:l/g*100,lowestBG:p,highestBG:y,averageBG:_}});return(n,i)=>(T(),D("div",FA,[v("div",jA,[i[0]||(i[0]=v("span",null,"In range (410)",-1)),v("div",BA,[v("span",WA,N(s.value.pct4to10.toFixed(1))+"%",1),v("strong",null,N(pt(Bn)(s.value.timeBetween4and10)),1)])]),v("div",UA,[i[1]||(i[1]=v("span",null,"In range, stricter (46)",-1)),v("div",zA,[v("span",HA,N(s.value.pct4to6.toFixed(1))+"%",1),v("strong",null,N(pt(Bn)(s.value.timeBetween4and6)),1)])]),v("div",VA,[i[2]||(i[2]=v("span",null,"High (above 10)",-1)),v("strong",null,N(pt(Bn)(s.value.timeAbove10)),1)]),v("div",qA,[i[3]||(i[3]=v("span",null,"Above 8",-1)),v("strong",null,N(pt(Bn)(s.value.timeAbove8)),1)]),v("div",YA,[i[4]||(i[4]=v("span",null,"Low (below 4)",-1)),v("strong",null,N(pt(Bn)(s.value.timeBelow4)),1)]),v("div",JA,[i[5]||(i[5]=v("span",null,"Lowest BG",-1)),v("strong",null,[K(N(s.value.lowestBG!=null?s.value.lowestBG.toFixed(2)+" ":"")+" ",1),s.value.lowestBG!=null?(T(),D("span",KA," ("+N((s.value.lowestBG*18).toFixed(0))+" mg/dL) ",1)):X("",!0)])]),v("div",GA,[i[6]||(i[6]=v("span",null,"Highest BG",-1)),v("strong",null,[K(N(s.value.highestBG!=null?s.value.highestBG.toFixed(2)+" ":"")+" ",1),s.value.highestBG!=null?(T(),D("span",ZA," ("+N((s.value.highestBG*18).toFixed(0))+" mg/dL) ",1)):X("",!0)])]),v("div",XA,[i[7]||(i[7]=v("span",null,"Average BG",-1)),v("strong",null,[K(N(s.value.averageBG!=null?s.value.averageBG.toFixed(2)+" ":"")+" ",1),s.value.averageBG!=null?(T(),D("span",QA," ("+N((s.value.averageBG*18).toFixed(0))+" mg/dL) ",1)):X("",!0)])]),v("div",tI,[i[8]||(i[8]=K(" Time not covered in the calculations: ",-1)),v("strong",null,N(pt(Bn)(s.value.uncoveredMinutes)),1)])]))}},sI=jt(eI,[["__scopeId","data-v-2625d06e"]]);async function Xf({limit:e=20,anchor:t,foodName:s="",tags:n=[]}={}){let i=Oe.from("food_logs").select("id, timestamp, food_name, quantity, net_carbs, calories, fat, protein, total_carbs, fibre, is_unfinished, resumed_at, food_tags",{count:"exact"}).order("timestamp",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.tsISO&&t?.id&&(i=i.or([`and(timestamp.lt.${t.tsISO})`,`and(timestamp.eq.${t.tsISO},id.lt.${t.id})`].join(",")));const r=(s||"").trim();r&&(i=i.ilike("food_name",r));const o=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);o.length>0&&(i=i.contains("food_tags",o));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,timestamp:C.fromISO(f.timestamp).toJSDate(),foodName:f.food_name??"",quantity:Number(f.quantity??0),netCarbs:Number(f.net_carbs??0),calories:Number(f.calories??0),fat:Number(f.fat??0),protein:Number(f.protein??0),totalCarbs:Number(f.total_carbs??0),fibre:Number(f.fibre??0),isUnfinished:!!f.is_unfinished,resumedAt:f.resumed_at?C.fromISO(f.resumed_at).toJSDate():null,foodTags:Array.isArray(f.food_tags)?f.food_tags:[]})),d=u[u.length-1],h=d?{tsISO:C.fromJSDate(d.timestamp).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function nI({foodName:e="",tags:t=[]}={}){const{data:s,error:n}=await Oe.rpc("food_history_summary",{p_food_name:(e||"").trim()||null,p_tags:Array.isArray(t)&&t.length?t:null});if(n)throw n;const i=(s??[])[0];if(!i)return{totalQuantity:0,totalCount:0,durationDays:0,averagePerDay:0};const r=i.min_ts?C.fromISO(i.min_ts):null,o=i.max_ts?C.fromISO(i.max_ts):null,a=Number(i.total_qty??0),l=Number(i.total_count??0);let c=0;if(r&&o){const d=Math.max(0,o.toMillis()-r.toMillis());c=Math.max(1,Math.ceil(d/(24*3600*1e3)))}const u=c?a/c:0;return{totalQuantity:a,totalCount:l,durationDays:c,averagePerDay:u}}const iI={class:"daily-section"},rI={class:"search-box"},oI={key:2,class:"suggestions"},aI=["onMousedown"],lI={class:"tag-cloud"},cI=["onClick"],uI={key:0,class:"hint"},dI={key:1},hI={key:0,class:"results-bar"},fI={key:0},gI={key:0},mI={key:1},pI={key:1,class:"summary pretty"},yI={class:"stat-row"},bI={class:"right"},vI={class:"chip"},_I={class:"stat-row"},wI={class:"right"},xI={class:"chip"},SI={class:"stat-row"},kI={class:"right"},TI={class:"chip"},OI={key:2,class:"empty"},DI={key:3,class:"empty"},CI={key:0,class:"empty"},MI={class:"date-heading"},EI={class:"load-more"},AI={key:1},II={__name:"FoodHistorySearchTab",props:{foods:{type:Array,default:()=>[]},loading:{type:Object,default:()=>({})}},setup(e){const t=Dt(""),s=Dt(""),n=Dt(!1),i=Dt([]),r=e,o=Dt(null),a=tt(()=>{const P=new Set((r.foods??[]).map(O=>(O.name??"").trim()).filter(Boolean));return Array.from(P).sort((O,z)=>O.localeCompare(z,void 0,{sensitivity:"base"}))}),l=tt(()=>{const P=t.value.trim().toLowerCase();return P?a.value.filter(O=>O.toLowerCase().includes(P)).slice(0,20):a.value.slice(0,20)}),c=tt(()=>{const P=new Set;for(const O of r.foods??[])for(const z of Array.isArray(O.tags)?O.tags:[]){const it=String(z).trim();it&&P.add(it)}return Array.from(P).sort((O,z)=>O.localeCompare(z,void 0,{sensitivity:"accent"}))});function u(){t.value="",s.value="",n.value=!1,o.value?.focus()}function d(P){const O=i.value.indexOf(P);O>=0?i.value.splice(O,1):i.value.push(P),m.value=!0,p.value=[],y.value=null,_.value=null}function h(P){return i.value.includes(P)}function f(P){s.value=P,t.value=P,n.value=!1,m.value=!0,p.value=[],y.value=null,_.value=null}const m=Dt(!1),g=Dt(!1),p=Dt([]),y=Dt(null),_=Dt(null),b=Dt(0),x=Dt(0),k=Dt(0);async function A(){m.value=!0;try{const{items:P,nextAnchor:O,totalMatchingFilter:z}=await Xf({limit:20,foodName:s.value,tags:i.value});p.value=P,y.value=O,_.value=z}catch(P){console.error("[FoodHistory] first page failed:",P),p.value=[],y.value=null,_.value=0}finally{m.value=!1}}async function E(){if(!(!y.value||m.value)){m.value=!0;try{const{items:P,nextAnchor:O}=await Xf({limit:20,foodName:s.value,tags:i.value,anchor:y.value});p.value.push(...P),y.value=O}catch(P){console.error("[FoodHistory] next page failed:",P)}finally{m.value=!1}}}async function L(){g.value=!0;try{const P=await nI({foodName:s.value,tags:i.value});b.value=P.totalQuantity,x.value=P.durationDays,k.value=P.averagePerDay}catch(P){console.error("[FoodHistory] summary failed:",P),b.value=0,x.value=0,k.value=0}finally{g.value=!1}}function I(P){Cs(P,"food-history")}os([()=>s.value,()=>i.value.join("|")],async()=>{m.value=!0,p.value=[],y.value=null,_.value=null,await Promise.all([A(),L()])});function V(P){const O=new Map;for(const z of P){const it=C.fromJSDate(z.timestamp,{zone:"Australia/Sydney"}),ot=it.toISODate(),at=it.toFormat("EEE d LLL yyyy");O.has(ot)||O.set(ot,{label:at,items:[]}),O.get(ot).items.push(z)}return Array.from(O.entries()).sort((z,it)=>it[0].localeCompare(z[0])).map(([,z])=>z)}return(P,O)=>(T(),D("div",iI,[v("div",rI,[$c(v("input",{ref_key:"inputEl",ref:o,"onUpdate:modelValue":O[0]||(O[0]=z=>t.value=z),type:"text",class:"search-input",placeholder:"Search foods (e.g., apple)",onFocus:O[1]||(O[1]=z=>n.value=!0),onBlur:O[2]||(O[2]=z=>n.value=!1),onKeydown:[O[3]||(O[3]=cd(z=>n.value=!1,["esc"])),O[4]||(O[4]=cd(Ya(z=>f((l.value[0]||t.value)??""),["prevent"]),["enter"]))]},null,544),[[cm,t.value]]),t.value||s.value?(T(),D("button",{key:0,class:"clear-btn",type:"button",onMousedown:O[5]||(O[5]=Ya(()=>{},["prevent"])),onClick:u,"aria-label":"Clear search"},"",32)):X("",!0),i.value.length||s.value?(T(),D("button",{key:1,class:"clear-btn",type:"button",onClick:O[6]||(O[6]=()=>{i.value.splice(0),u()}),"aria-label":"Clear tag & name filters",style:{"margin-left":"0.5rem"}},"Clear Filters")):X("",!0),n.value&&l.value.length&&t.value.trim().length?(T(),D("ul",oI,[(T(!0),D(ft,null,Kt(l.value,z=>(T(),D("li",{key:z,class:"suggestion",onMousedown:Ya(it=>f(z),["prevent"])},N(z),41,aI))),128))])):X("",!0)]),v("div",lI,[(T(!0),D(ft,null,Kt(c.value,z=>(T(),D("button",{key:z,class:dt(["tag-chip",{selected:h(z)}]),type:"button",onClick:it=>d(z)},N(z),11,cI))),128))]),!s.value&&i.value.length===0?(T(),D("div",uI," Search for a food, select it, then browse the history and click any row to jump the charts. ")):X("",!0),s.value||i.value.length?(T(),D("div",dI,[m.value?X("",!0):(T(),D("div",hI,[(_.value??0)>0?(T(),D("span",fI,[K(N(_.value)+" result",1),_.value!==1?(T(),D("span",gI,"s")):X("",!0)])):(T(),D("span",mI,"No results"))])),!g.value&&_.value?(T(),D("div",pI,[v("div",yI,[O[7]||(O[7]=v("span",{class:"label"},"Total consumed",-1)),v("span",bI,[v("span",vI,N(b.value)+"g",1)])]),v("div",_I,[O[8]||(O[8]=v("span",{class:"label"},"Days covered",-1)),v("span",wI,[v("span",xI,N(x.value),1)])]),v("div",SI,[O[9]||(O[9]=v("span",{class:"label"},"Avg per day",-1)),v("span",kI,[v("span",TI,N(k.value.toFixed(1))+"g",1)])])])):g.value?(T(),D("div",OI,"Calculating summary")):X("",!0),m.value?(T(),D("div",DI,"Loading")):(T(),D(ft,{key:4},[p.value.length===0?(T(),D("div",CI,"No logs found.")):(T(),D(ft,{key:1},[(T(!0),D(ft,null,Kt(V(p.value),(z,it)=>(T(),D(ft,{key:it},[v("h4",MI,N(z.label),1),(T(!0),D(ft,null,Kt(z.items,ot=>(T(),ke(_u,{key:ot.id,log:ot,onClick:at=>I(ot.timestamp)},null,8,["log","onClick"]))),128))],64))),128)),v("div",EI,[y.value?(T(),D("button",{key:0,type:"button",onClick:E},"Load more")):p.value.length>0?(T(),D("div",AI,"No more results.")):X("",!0)])],64))],64))])):X("",!0)]))}},PI=jt(II,[["__scopeId","data-v-db37e84c"]]),LI={class:"tab-section"},RI={class:"tab-bar"},$I={class:"daily-section"},NI={__name:"Tabs",props:{notes:{type:Array,default:()=>[]},foods:{type:Array,default:()=>[]},foodLogs:{type:Array,default:()=>[]},boluses:{type:Array,default:()=>[]},fasts:{type:Array,default:()=>[]},workouts:{type:Array,default:()=>[]},basalEntries:{type:Array,default:()=>[]},hourlyBasalTotals:{type:Array,default:()=>[]},glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Object,default:()=>({})}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=t,i=Dt("combined");function r(o){i.value=o}return(o,a)=>(T(),D("section",LI,[v("div",RI,[v("button",{class:dt(["tab-button",{active:i.value==="combined"}]),onClick:a[0]||(a[0]=l=>r("combined"))}," Combined",2),v("button",{class:dt(["tab-button",{active:i.value==="notes"}]),onClick:a[1]||(a[1]=l=>r("notes"))}," Notes",2),v("button",{class:dt(["tab-button",{active:i.value==="foodLogs"}]),onClick:a[2]||(a[2]=l=>r("foodLogs"))}," Food",2),v("button",{class:dt(["tab-button",{active:i.value==="bolus"}]),onClick:a[3]||(a[3]=l=>r("bolus"))}," Bolus",2),v("button",{class:dt(["tab-button",{active:i.value==="fasts"}]),onClick:a[4]||(a[4]=l=>r("fasts"))}," Fasts",2),v("button",{class:dt(["tab-button",{active:i.value==="workouts"}]),onClick:a[5]||(a[5]=l=>r("workouts"))}," Workouts",2),v("button",{class:dt(["tab-button",{active:i.value==="basal"}]),onClick:a[6]||(a[6]=l=>r("basal"))}," Basal",2),v("button",{class:dt(["tab-button",{active:i.value==="basal-by-hour"}]),onClick:a[7]||(a[7]=l=>r("basal-by-hour"))}," Hourly Basal",2),v("button",{class:dt(["tab-button",{active:i.value==="glucose"}]),onClick:a[8]||(a[8]=l=>r("glucose"))}," BG",2),v("button",{class:dt(["tab-button",{active:i.value==="all-notes"}]),onClick:a[9]||(a[9]=l=>r("all-notes"))}," All Notes",2),v("button",{class:dt(["tab-button",{active:i.value==="insulin-stats"}]),onClick:a[10]||(a[10]=l=>r("insulin-stats"))}," Insulin Stats",2),v("button",{class:dt(["tab-button",{active:i.value==="nutrition-stats"}]),onClick:a[11]||(a[11]=l=>r("nutrition-stats"))}," Nutrition Stats",2),v("button",{class:dt(["tab-button",{active:i.value==="bg-stats"}]),onClick:a[12]||(a[12]=l=>r("bg-stats"))}," BG Stats",2),v("button",{class:dt(["tab-button",{active:i.value==="food-history"}]),onClick:a[13]||(a[13]=l=>r("food-history"))}," Food History",2)]),v("div",{class:dt(["tab-content",{"active-tab":i.value==="combined"}])},[mt(RD,{"selected-date":e.selectedDate,"food-logs":e.foodLogs,boluses:e.boluses,notes:e.notes,workouts:e.workouts},null,8,["selected-date","food-logs","boluses","notes","workouts"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="notes"}])},[mt(vE,{notes:e.notes,"selected-date":e.selectedDate,loading:s.loading?.notes===!0},null,8,["notes","selected-date","loading"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="foodLogs"}])},[mt(BE,{"food-logs":e.foodLogs,"selected-date":e.selectedDate,loading:s.loading?.foodLogs===!0},null,8,["food-logs","selected-date","loading"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="bolus"}])},[mt(JE,{boluses:e.boluses,"selected-date":e.selectedDate,loading:s.loading?.boluses===!0},null,8,["boluses","selected-date","loading"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="fasts"}])},[mt(DE,{fasts:e.fasts,"selected-date":e.selectedDate},null,8,["fasts","selected-date"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="workouts"}])},[mt(HE,{workouts:e.workouts,"selected-date":e.selectedDate},null,8,["workouts","selected-date"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="basal"}])},[mt(nA,{"basal-entries":e.basalEntries,"selected-date":e.selectedDate,loading:s.loading?.basal===!0},null,8,["basal-entries","selected-date","loading"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="basal-by-hour"}])},[mt(dA,{"basal-entries":e.basalEntries,"hourly-basal-totals":e.hourlyBasalTotals,"selected-date":e.selectedDate},null,8,["basal-entries","hourly-basal-totals","selected-date"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="glucose"}])},[mt(RE,{"glucose-readings":e.glucoseReadings,"selected-date":e.selectedDate},null,8,["glucose-readings","selected-date"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="all-notes"}])},[v("div",$I,[mt(gE,{notes:e.notes,onNoteClick:a[14]||(a[14]=l=>n("note-click",l))},null,8,["notes"])])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="insulin-stats"}])},[mt(vA,{"selected-date":e.selectedDate,"bolus-doses":e.boluses,"basal-entries":e.basalEntries,"food-logs":e.foodLogs},null,8,["selected-date","bolus-doses","basal-entries","food-logs"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="nutrition-stats"}])},[mt(NA,{"selected-date":e.selectedDate,"food-logs":e.foodLogs},null,8,["selected-date","food-logs"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="bg-stats"}])},[mt(sI,{"selected-date":e.selectedDate,"glucose-readings":e.glucoseReadings},null,8,["selected-date","glucose-readings"])],2),v("div",{class:dt(["tab-content",{"active-tab":i.value==="food-history"}])},[mt(PI,{"all-food-logs":e.foodLogs,foods:e.foods},null,8,["all-food-logs","foods"])],2)]))}},FI=jt(NI,[["__scopeId","data-v-0024a7c0"]]),jI={class:"row"},BI={class:"row"},WI={class:"row"},UI={key:0,class:"row"},zI={key:1,class:"row"},HI={__name:"CustomTooltip",props:{visible:{type:Boolean,default:!1},time:{type:String,default:""},bg:{type:[Number,null],default:null},basal:{type:[Number,null],default:null},left:{type:Number,default:8},top:{type:Number,default:8},hourlyBasalUnits:{type:[Number,null],default:null},hourlyBasalLabel:{type:String,default:""},bolusAmount:{type:[Number,null],default:null}},setup(e){return(t,s)=>$c((T(),D("div",{class:"tooltip",style:xe({left:e.left+"px",top:e.top+"px"}),role:"status","aria-live":"polite"},[v("div",jI,[v("strong",null,N(e.time),1)]),v("div",BI,[s[0]||(s[0]=K(" BG: ",-1)),v("span",null,N(e.bg!=null?e.bg.toFixed(2)+" mmol/L":"")+" ("+N((e.bg*18).toFixed(2))+" mg/dL) ",1)]),v("div",WI,[s[1]||(s[1]=K("Basal Rate: ",-1)),v("span",null,N(e.basal!=null?e.basal.toFixed(3)+" U/hr":""),1)]),e.hourlyBasalUnits!=null?(T(),D("div",UI,[K(" Total basal from "+N(e.hourlyBasalLabel)+": ",1),v("strong",null,N(Number(e.hourlyBasalUnits).toFixed(2)),1),s[2]||(s[2]=K(" units ",-1))])):X("",!0),e.bolusAmount!=null?(T(),D("div",zI,[s[3]||(s[3]=K(" Bolus: ",-1)),v("strong",null,N(Number(e.bolusAmount).toFixed(2)),1),s[4]||(s[4]=K(" units ",-1))])):X("",!0)],4)),[[X0,e.visible]])}},VI=jt(HI,[["__scopeId","data-v-928a4e15"]]);async function qI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBolusesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("boluses").select("timestamp, amount, type, notes").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({timestamp:C.fromISO(o.timestamp).toJSDate(),amount:Number(o.amount??0),type:o.type??null,notes:o.notes??null}))}async function YI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchGlucoseReadingsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("glucose_readings").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({timestamp:C.fromISO(o.timestamp).toJSDate(),value:Number(o.value??0)}))}async function JI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBasalEntriesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("basal_entries").select("start_time, end_time, rate, mode, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({startTime:C.fromISO(o.start_time).toJSDate(),endTime:o.end_time?C.fromISO(o.end_time).toJSDate():null,rate:Number(o.rate??0),mode:o.mode??null,notes:o.notes??null}))}function KI(e,t,s){const n=C.fromJSDate(t).setZone("Australia/Sydney"),i=n.startOf("day").toJSDate(),r=n.endOf("day").toJSDate(),o=s?C.fromJSDate(s):null,a=o?o.toJSDate():null,l=[];for(const c of e){const u=c.endTime??a,d=c.startTime<i?i:c.startTime,h=u?u>r?r:u:r;d<h&&l.push({...c,startTime:d,endTime:u?h:null})}return l}async function GI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFoodLogsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("food_logs").select(`
      id,
      food_name,
      timestamp,
      quantity,
      net_carbs,
      calories,
      fat,
      protein,
      total_carbs,
      fibre,
      is_unfinished,
      resumed_at,
      food_tags
    `).gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,foodName:o.food_name??"Unknown",timestamp:C.fromISO(o.timestamp).toJSDate(),quantity:o.quantity,netCarbs:o.net_carbs,calories:o.calories,fat:o.fat,protein:o.protein,totalCarbs:o.total_carbs,fibre:o.fibre,isUnfinished:!!o.is_unfinished,resumedAt:o.resumed_at?C.fromISO(o.resumed_at).toJSDate():null,foodTags:Array.isArray(o.food_tags)?o.food_tags:[]}))}async function ZI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFastsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("fasts").select("id, start_time, end_time, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,startTime:C.fromISO(o.start_time).toJSDate(),endTime:o.end_time?C.fromISO(o.end_time).toJSDate():null,notes:o.notes??""}))}async function XI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchWorkoutsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=En(t),{data:i,error:r}=await Oe.from("workouts").select(`
      id,
      start_time,
      end_time,
      elapsed_time,
      duration,
      type,
      name,
      notes,
      distance,
      active_calories,
      average_heart_rate,
      max_heart_rate,
      minutes_per_km,
      km_per_hour,
      tags
    `).lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(r)throw r;return(i??[]).map(o=>({id:o.id,start:C.fromISO(o.start_time).toJSDate(),endTime:o.end_time?C.fromISO(o.end_time).toJSDate():null,elapsedTime:Number(o.elapsed_time??0),duration:Number(o.duration??0),type:String(o.type??""),name:String(o.name??""),notes:String(o.notes??""),distance:Number(o.distance??0),activeCalories:Number(o.active_calories??0),averageHeartRate:Number(o.average_heart_rate??0),maxHeartRate:Number(o.max_heart_rate??0),minutesPerKm:Number(o.minutes_per_km??0),kmPerHour:Number(o.km_per_hour??0),tags:String(o.tags??"")}))}async function QI(){const{data:e,error:t}=await Oe.from("app_settings").select("pump_upload_time").eq("id",1).single();if(t&&t.code!=="PGRST116")throw t;const s=e?.pump_upload_time??null;return{pumpUploadTime:s?new Date(s):null}}async function tP(e,t,s){t.boluses=!0;try{e.boluses=await qI(s)}catch(n){console.error("[dayLoadersUI] boluses failed:",n),e.boluses=[]}finally{t.boluses=!1}}async function eP(e,t,s){t.bg=!0;try{e.glucoseReadings=await YI(s)}catch(n){console.error("[dayLoadersUI] BG failed:",n),e.glucoseReadings=[]}finally{t.bg=!1}}async function sP(e,t,s){t.basal=!0;try{const[n,i]=await Promise.all([JI(s),QI()]),r=i?.pumpUploadTime?new Date(i.pumpUploadTime):null;r&&console.log("[dayLoadersUI] Pump upload time:",Ow(r)),e.basalEntries=KI(n,s,r)}catch(n){console.error("[dayLoadersUI] basal failed:",n),e.basalEntries=[]}finally{t.basal=!1}}async function nP(e,t,s){t.notes=!0;try{e.notes=await KM(s)}catch(n){console.error("[dayLoadersUI] notes failed:",n),e.notes=[]}finally{t.notes=!1}}async function iP(e,t,s){t.foodLogs=!0;try{e.foodLogs=await GI(s)}catch(n){console.error("[dayLoadersUI] food logs failed:",n),e.foodLogs=[]}finally{t.foodLogs=!1}}async function rP(e,t,s){t.fasts=!0;try{e.fasts=await ZI(s)}catch(n){console.error("[dayLoadersUI] fasts failed:",n),e.fasts=[]}finally{t.fasts=!1}}async function oP(e,t,s){t.workouts=!0;try{e.workouts=await XI(s)}catch(n){console.error("[dayLoadersUI] workouts failed:",n),e.workouts=[]}finally{t.workouts=!1}}async function aP(e,t,s){await Promise.allSettled([tP(e,t,s),eP(e,t,s),sP(e,t,s),nP(e,t,s),iP(e,t,s),rP(e,t,s),oP(e,t,s)])}async function lP(){const{data:e,error:t}=await Oe.from("foods").select("id, name, tags").order("name",{ascending:!0});if(t)throw t;return(e??[]).map(s=>({id:s.id,name:s.name??"",tags:Array.isArray(s.tags)?s.tags:[]}))}const cP={style:{padding:"1rem"}},uP={class:"dashboard-grid"},dP={class:"left-rail"},hP={class:"chart-box bg-box"},fP={class:"chart-box basal-box"},gP={class:"chart-box hourly-basal-box"},mP={class:"chart-box bolus-box"},pP={class:"right-rail"},yP={__name:"App",setup(e){const t=oi({notes:[],filteredNotes:[],filteredNotesCursor:null,foods:[],glucoseReadings:[],foodLogs:[],fasts:[],workouts:[],basalEntries:[],boluses:[]}),s=oi({boluses:!1,bg:!1,basal:!1,filteredNotes:!1,foodLogs:!1,foods:!1,fasts:!1,workouts:!1}),n=Dt(dp()),i=Dt(null),r=oi({visible:!1,time:"",bg:null,basal:null,left:12,locked:!1,hourlyBasalUnits:null,hourlyBasalLabel:"",bolusAmount:null}),o=g=>g instanceof Date?g:typeof g=="number"?new Date(g):typeof g=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(g)?C.fromISO(g):C.fromISO(g,{zone:"Australia/Sydney"})).toJSDate():null,a=tt(()=>{const g=new Array(24).fill(0);if(!n.value||!Array.isArray(t.basalEntries))return g;const p=n.value instanceof Date?n.value:o(n.value);let y=C.fromJSDate(p,{zone:"Australia/Sydney"}).startOf("day");const _=y.plus({days:1});for(const b of t.basalEntries){const x=b.startTime instanceof Date?b.startTime:o(b.startTime),k=b.endTime?b.endTime instanceof Date?b.endTime:o(b.endTime):null;if(!x||!k||k<=x)continue;const A=Number(b.rate);if(!Number.isFinite(A)||A<=0)continue;let E=C.fromJSDate(x,{zone:"Australia/Sydney"}),L=C.fromJSDate(k,{zone:"Australia/Sydney"});if(!(L<=y||E>=_))for(E<y&&(E=y),L>_&&(L=_);E<L;){const I=E.startOf("hour").plus({hours:1}),V=L<I?L:I,P=Math.max(0,V.toSeconds()-E.toSeconds());if(P>0){const O=E.hour;g[O]+=A*(P/3600)}E=V}}return g.map(b=>Math.round(b*1e3)/1e3)});function l(g,p,y){return Math.max(p,Math.min(g,y))}function c(g,p="any"){let y;if(g instanceof Date)y=C.fromJSDate(g);else if(typeof g=="number")y=C.fromMillis(g);else if(typeof g=="string")y=/Z|[+\-]\d{2}:?\d{2}$/.test(g)?C.fromISO(g):C.fromISO(g,{zone:"Australia/Sydney"});else return;const _=y.setZone("Australia/Sydney");n.value=_.startOf("day").toJSDate();const b=_.toMillis();window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:b,px:null,source:p}})),console.log("[goToTimestamp] jumped to",_.toISO(),"source:",p)}const u=g=>{const p=g?.detail?.at,y=g?.detail?.source??"any";c(p,y)};async function d(){s.foods=!0;try{t.foods=await lP()}catch(g){console.error("[App] fetchAllFoods failed:",g),t.foods=[]}finally{s.foods=!1}}function h(g){const{x:p,px:y,source:_,hide:b,bolusAmount:x}=g?.detail??{};if(console.log("[handleChartHover] x value:",p,"type:",typeof p),b){r.visible=!1,r.locked=!1,r.hourlyBasalUnits=null,r.hourlyBasalLabel="",r.bolusAmount=null;return}const k=p!=null?new Date(p):null;if(!k){r.locked||(r.visible=!1);return}const A=i.value?.getBoundingClientRect();if(A&&typeof y=="number"){const it=y-90;r.left=l(it,8,A.width-180-8)}const E=C.fromMillis(Number(p)).setZone("Australia/Sydney"),L=E.hour,I=E.startOf("hour"),V=I.plus({hours:1}),P=O=>O.toFormat("h a").toLowerCase().replace(" ","");r.hourlyBasalLabel=`${P(I)}${P(V)}`,r.hourlyBasalUnits=Number(a.value?.[L]??0),r.locked=_==="combined",r.visible=!0,r.time=C.fromMillis(Number(p)).setZone("Australia/Sydney").toFormat("h:mma"),r.bg=f(k),r.basal=m(k),_==="bolus"?r.bolusAmount=typeof x=="number"?x:null:r.bolusAmount=null}function f(g){if(!t.glucoseReadings.length||!g)return null;const p=g instanceof Date?g:new Date(g);let y=null,_=null;for(const b of t.glucoseReadings){const x=o(b.timestamp);x<=p&&(y===null||x>y)&&(y=x,_=Number(b.value))}return _}function m(g){if(!t.basalEntries.length||!g)return null;const p=g instanceof Date?g:new Date(g);for(const y of t.basalEntries){const _=y.startTime instanceof Date?y.startTime:o(y.startTime),b=y.endTime?y.endTime instanceof Date?y.endTime:o(y.endTime):null;if(_<=p&&(b===null||p<b))return Number(y.rate??0)}return null}return os(n,g=>{aP(t,s,g)},{immediate:!0}),Cn(()=>{window.removeEventListener("jump-to-time",u),window.removeEventListener("chart-hover",h)}),Ds(async()=>{window.addEventListener("jump-to-time",u),window.addEventListener("chart-hover",h),await d();try{console.log("[App:onMounted] loaded",{glucose:t.glucoseReadings.length,foodLogs:t.foodLogs.length,notes:t.notes.length,fasts:t.fasts.length,workouts:t.workouts.length,basalEntries:t.basalEntries.length,boluses:t.boluses.length})}catch(g){console.error("[App:onMounted] failed to load data:",g)}}),(g,p)=>(T(),D("main",cP,[v("section",uP,[v("aside",dP,[mt(Rw,{selectedDate:n.value,"onUpdate:selectedDate":p[0]||(p[0]=y=>n.value=y)},null,8,["selectedDate"]),v("div",{ref_key:"stageRef",ref:i,class:"chart-stage"},[mt(VI,{visible:r.visible,time:r.time,bg:r.bg,basal:r.basal,left:r.left,top:8,"hourly-basal-units":r.hourlyBasalUnits,"hourly-basal-label":r.hourlyBasalLabel,"bolus-amount":r.bolusAmount},null,8,["visible","time","bg","basal","left","hourly-basal-units","hourly-basal-label","bolus-amount"]),v("div",hP,[mt(AO,{"glucose-readings":t.glucoseReadings,"selected-date":n.value},null,8,["glucose-readings","selected-date"])]),v("div",fP,[mt(PO,{"basal-entries":t.basalEntries,"selected-date":n.value},null,8,["basal-entries","selected-date"])]),v("div",gP,[mt(FO,{"hourly-totals":a.value,"selected-date":n.value},null,8,["hourly-totals","selected-date"])]),v("div",mP,[mt(RO,{boluses:t.boluses,"selected-date":n.value},null,8,["boluses","selected-date"])])],512)]),v("main",pP,[mt(FI,{notes:t.notes,foods:t.foods,"food-logs":t.foodLogs,boluses:t.boluses,fasts:t.fasts,workouts:t.workouts,"basal-entries":t.basalEntries,"hourly-basal-totals":a.value,"glucose-readings":t.glucoseReadings,"selected-date":n.value,loading:s},null,8,["notes","foods","food-logs","boluses","fasts","workouts","basal-entries","hourly-basal-totals","glucose-readings","selected-date","loading"])])])]))}},bP=jt(yP,[["__scopeId","data-v-1e9897c9"]]);Tv(bP).mount("#app");
