(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mc(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Mt={},li=[],ls=()=>{},rb=()=>!1,ca=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Cc=e=>e.startsWith("onUpdate:"),Zt=Object.assign,Ec=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ab=Object.prototype.hasOwnProperty,wt=(e,t)=>ab.call(e,t),Q=Array.isArray,ci=e=>ua(e)==="[object Map]",nm=e=>ua(e)==="[object Set]",dt=e=>typeof e=="function",jt=e=>typeof e=="string",Cs=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",im=e=>(Lt(e)||dt(e))&&dt(e.then)&&dt(e.catch),om=Object.prototype.toString,ua=e=>om.call(e),lb=e=>ua(e).slice(8,-1),rm=e=>ua(e)==="[object Object]",Ac=e=>jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,oo=Mc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),da=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},cb=/-(\w)/g,Xs=da(e=>e.replace(cb,(t,s)=>s?s.toUpperCase():"")),ub=/\B([A-Z])/g,nn=da(e=>e.replace(ub,"-$1").toLowerCase()),am=da(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ba=da(e=>e?`on${am(e)}`:""),Ys=(e,t)=>!Object.is(e,t),Cr=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Cl=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},El=e=>{const t=parseFloat(e);return isNaN(t)?e:t},db=e=>{const t=jt(e)?Number(e):NaN;return isNaN(t)?e:t};let Iu;const ha=()=>Iu||(Iu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ee(e){if(Q(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=jt(n)?gb(n):ee(n);if(i)for(const o in i)t[o]=i[o]}return t}else if(jt(e)||Lt(e))return e}const hb=/;(?![^(]*\))/g,fb=/:([^]+)/,mb=/\/\*[^]*?\*\//g;function gb(e){const t={};return e.replace(mb,"").split(hb).forEach(s=>{if(s){const n=s.split(fb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function X(e){let t="";if(jt(e))t=e;else if(Q(e))for(let s=0;s<e.length;s++){const n=X(e[s]);n&&(t+=n+" ")}else if(Lt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const pb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yb=Mc(pb);function lm(e){return!!e||e===""}const cm=e=>!!(e&&e.__v_isRef===!0),A=e=>jt(e)?e:e==null?"":Q(e)||Lt(e)&&(e.toString===om||!dt(e.toString))?cm(e)?A(e.value):JSON.stringify(e,um,2):String(e),um=(e,t)=>cm(t)?um(e,t.value):ci(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],o)=>(s[Wa(n,o)+" =>"]=i,s),{})}:nm(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Wa(s))}:Cs(t)?Wa(t):Lt(t)&&!Q(t)&&!rm(t)?String(t):t,Wa=(e,t="")=>{var s;return Cs(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let be;class bb{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=be,!t&&be&&(this.index=(be.scopes||(be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=be;try{return be=this,t()}finally{be=s}}}on(){++this._on===1&&(this.prevScope=be,be=this)}off(){this._on>0&&--this._on===0&&(be=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function vb(){return be}let At;const Ua=new WeakSet;class dm{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,be&&be.active&&be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ua.has(this)&&(Ua.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pu(this),mm(this);const t=At,s=Je;At=this,Je=!0;try{return this.fn()}finally{gm(this),At=t,Je=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Lc(t);this.deps=this.depsTail=void 0,Pu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ua.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Al(this)&&this.run()}get dirty(){return Al(this)}}let hm=0,ro,ao;function fm(e,t=!1){if(e.flags|=8,t){e.next=ao,ao=e;return}e.next=ro,ro=e}function Ic(){hm++}function Pc(){if(--hm>0)return;if(ao){let t=ao;for(ao=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ro;){let t=ro;for(ro=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function mm(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gm(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Lc(n),_b(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Al(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(pm(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function pm(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xo)||(e.globalVersion=xo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Al(e))))return;e.flags|=2;const t=e.dep,s=At,n=Je;At=e,Je=!0;try{mm(e);const i=e.fn(e._value);(t.version===0||Ys(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{At=s,Je=n,gm(e),e.flags&=-3}}function Lc(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Lc(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function _b(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Je=!0;const ym=[];function ks(){ym.push(Je),Je=!1}function Ts(){const e=ym.pop();Je=e===void 0?!0:e}function Pu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=At;At=void 0;try{t()}finally{At=s}}}let xo=0;class wb{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $c{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!Je||At===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==At)s=this.activeLink=new wb(At,this),At.deps?(s.prevDep=At.depsTail,At.depsTail.nextDep=s,At.depsTail=s):At.deps=At.depsTail=s,bm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=At.depsTail,s.nextDep=void 0,At.depsTail.nextDep=s,At.depsTail=s,At.deps===s&&(At.deps=n)}return s}trigger(t){this.version++,xo++,this.notify(t)}notify(t){Ic();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Pc()}}}function bm(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)bm(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Il=new WeakMap,kn=Symbol(""),Pl=Symbol(""),So=Symbol("");function ne(e,t,s){if(Je&&At){let n=Il.get(e);n||Il.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new $c),i.map=n,i.key=s),i.track()}}function xs(e,t,s,n,i,o){const r=Il.get(e);if(!r){xo++;return}const a=l=>{l&&l.trigger()};if(Ic(),t==="clear")r.forEach(a);else{const l=Q(e),c=l&&Ac(s);if(l&&s==="length"){const u=Number(n);r.forEach((d,h)=>{(h==="length"||h===So||!Cs(h)&&h>=u)&&a(d)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(So)),t){case"add":l?c&&a(r.get("length")):(a(r.get(kn)),ci(e)&&a(r.get(Pl)));break;case"delete":l||(a(r.get(kn)),ci(e)&&a(r.get(Pl)));break;case"set":ci(e)&&a(r.get(kn));break}}Pc()}function Bn(e){const t=_t(e);return t===e?t:(ne(t,"iterate",So),We(e)?t:t.map(Xt))}function fa(e){return ne(e=_t(e),"iterate",So),e}const xb={__proto__:null,[Symbol.iterator](){return za(this,Symbol.iterator,Xt)},concat(...e){return Bn(this).concat(...e.map(t=>Q(t)?Bn(t):t))},entries(){return za(this,"entries",e=>(e[1]=Xt(e[1]),e))},every(e,t){return fs(this,"every",e,t,void 0,arguments)},filter(e,t){return fs(this,"filter",e,t,s=>s.map(Xt),arguments)},find(e,t){return fs(this,"find",e,t,Xt,arguments)},findIndex(e,t){return fs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return fs(this,"findLast",e,t,Xt,arguments)},findLastIndex(e,t){return fs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return fs(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ha(this,"includes",e)},indexOf(...e){return Ha(this,"indexOf",e)},join(e){return Bn(this).join(e)},lastIndexOf(...e){return Ha(this,"lastIndexOf",e)},map(e,t){return fs(this,"map",e,t,void 0,arguments)},pop(){return Fi(this,"pop")},push(...e){return Fi(this,"push",e)},reduce(e,...t){return Lu(this,"reduce",e,t)},reduceRight(e,...t){return Lu(this,"reduceRight",e,t)},shift(){return Fi(this,"shift")},some(e,t){return fs(this,"some",e,t,void 0,arguments)},splice(...e){return Fi(this,"splice",e)},toReversed(){return Bn(this).toReversed()},toSorted(e){return Bn(this).toSorted(e)},toSpliced(...e){return Bn(this).toSpliced(...e)},unshift(...e){return Fi(this,"unshift",e)},values(){return za(this,"values",Xt)}};function za(e,t,s){const n=fa(e),i=n[t]();return n!==e&&!We(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const Sb=Array.prototype;function fs(e,t,s,n,i,o){const r=fa(e),a=r!==e&&!We(e),l=r[t];if(l!==Sb[t]){const d=l.apply(e,o);return a?Xt(d):d}let c=s;r!==e&&(a?c=function(d,h){return s.call(this,Xt(d),h,e)}:s.length>2&&(c=function(d,h){return s.call(this,d,h,e)}));const u=l.call(r,c,n);return a&&i?i(u):u}function Lu(e,t,s,n){const i=fa(e);let o=s;return i!==e&&(We(e)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,e)}):o=function(r,a,l){return s.call(this,r,Xt(a),l,e)}),i[t](o,...n)}function Ha(e,t,s){const n=_t(e);ne(n,"iterate",So);const i=n[t](...s);return(i===-1||i===!1)&&Nc(s[0])?(s[0]=_t(s[0]),n[t](...s)):i}function Fi(e,t,s=[]){ks(),Ic();const n=_t(e)[t].apply(e,s);return Pc(),Ts(),n}const kb=Mc("__proto__,__v_isRef,__isVue"),vm=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Cs));function Tb(e){Cs(e)||(e=String(e));const t=_t(this);return ne(t,"has",e),t.hasOwnProperty(e)}class _m{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?$b:km:o?Sm:xm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=Q(t);if(!i){let l;if(r&&(l=xb[s]))return l;if(s==="hasOwnProperty")return Tb}const a=Reflect.get(t,s,re(t)?t:n);return(Cs(s)?vm.has(s):kb(s))||(i||ne(t,"get",s),o)?a:re(a)?r&&Ac(s)?a:a.value:Lt(a)?i?Tm(a):ui(a):a}}class wm extends _m{constructor(t=!1){super(!1,t)}set(t,s,n,i){let o=t[s];if(!this._isShallow){const l=Qs(o);if(!We(n)&&!Qs(n)&&(o=_t(o),n=_t(n)),!Q(t)&&re(o)&&!re(n))return l?!1:(o.value=n,!0)}const r=Q(t)&&Ac(s)?Number(s)<t.length:wt(t,s),a=Reflect.set(t,s,n,re(t)?t:i);return t===_t(i)&&(r?Ys(n,o)&&xs(t,"set",s,n):xs(t,"add",s,n)),a}deleteProperty(t,s){const n=wt(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&xs(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Cs(s)||!vm.has(s))&&ne(t,"has",s),n}ownKeys(t){return ne(t,"iterate",Q(t)?"length":kn),Reflect.ownKeys(t)}}class Ob extends _m{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Db=new wm,Mb=new Ob,Cb=new wm(!0);const Ll=e=>e,tr=e=>Reflect.getPrototypeOf(e);function Eb(e,t,s){return function(...n){const i=this.__v_raw,o=_t(i),r=ci(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...n),u=s?Ll:t?Br:Xt;return!t&&ne(o,"iterate",l?Pl:kn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function er(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ab(e,t){const s={get(i){const o=this.__v_raw,r=_t(o),a=_t(i);e||(Ys(i,a)&&ne(r,"get",i),ne(r,"get",a));const{has:l}=tr(r),c=t?Ll:e?Br:Xt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&ne(_t(i),"iterate",kn),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=_t(o),a=_t(i);return e||(Ys(i,a)&&ne(r,"has",i),ne(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=_t(a),c=t?Ll:e?Br:Xt;return!e&&ne(l,"iterate",kn),a.forEach((u,d)=>i.call(o,c(u),c(d),r))}};return Zt(s,e?{add:er("add"),set:er("set"),delete:er("delete"),clear:er("clear")}:{add(i){!t&&!We(i)&&!Qs(i)&&(i=_t(i));const o=_t(this);return tr(o).has.call(o,i)||(o.add(i),xs(o,"add",i,i)),this},set(i,o){!t&&!We(o)&&!Qs(o)&&(o=_t(o));const r=_t(this),{has:a,get:l}=tr(r);let c=a.call(r,i);c||(i=_t(i),c=a.call(r,i));const u=l.call(r,i);return r.set(i,o),c?Ys(o,u)&&xs(r,"set",i,o):xs(r,"add",i,o),this},delete(i){const o=_t(this),{has:r,get:a}=tr(o);let l=r.call(o,i);l||(i=_t(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&xs(o,"delete",i,void 0),c},clear(){const i=_t(this),o=i.size!==0,r=i.clear();return o&&xs(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Eb(i,e,t)}),s}function Rc(e,t){const s=Ab(e,t);return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(wt(s,i)&&i in n?s:n,i,o)}const Ib={get:Rc(!1,!1)},Pb={get:Rc(!1,!0)},Lb={get:Rc(!0,!1)};const xm=new WeakMap,Sm=new WeakMap,km=new WeakMap,$b=new WeakMap;function Rb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fb(e){return e.__v_skip||!Object.isExtensible(e)?0:Rb(lb(e))}function ui(e){return Qs(e)?e:Fc(e,!1,Db,Ib,xm)}function Nb(e){return Fc(e,!1,Cb,Pb,Sm)}function Tm(e){return Fc(e,!0,Mb,Lb,km)}function Fc(e,t,s,n,i){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Fb(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?n:s);return i.set(e,a),a}function di(e){return Qs(e)?di(e.__v_raw):!!(e&&e.__v_isReactive)}function Qs(e){return!!(e&&e.__v_isReadonly)}function We(e){return!!(e&&e.__v_isShallow)}function Nc(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function jb(e){return!wt(e,"__v_skip")&&Object.isExtensible(e)&&Cl(e,"__v_skip",!0),e}const Xt=e=>Lt(e)?ui(e):e,Br=e=>Lt(e)?Tm(e):e;function re(e){return e?e.__v_isRef===!0:!1}function ft(e){return Bb(e,!1)}function Bb(e,t){return re(e)?e:new Wb(e,t)}class Wb{constructor(t,s){this.dep=new $c,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:_t(t),this._value=s?t:Xt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||We(t)||Qs(t);t=n?t:_t(t),Ys(t,s)&&(this._rawValue=t,this._value=n?t:Xt(t),this.dep.trigger())}}function bt(e){return re(e)?e.value:e}const Ub={get:(e,t,s)=>t==="__v_raw"?e:bt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return re(i)&&!re(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Om(e){return di(e)?e:new Proxy(e,Ub)}class zb{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new $c(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return fm(this,!0),!0}get value(){const t=this.dep.track();return pm(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Hb(e,t,s=!1){let n,i;return dt(e)?n=e:(n=e.get,i=e.set),new zb(n,i,s)}const sr={},Wr=new WeakMap;let pn;function Vb(e,t=!1,s=pn){if(s){let n=Wr.get(s);n||Wr.set(s,n=[]),n.push(e)}}function qb(e,t,s=Mt){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=w=>i?w:We(w)||i===!1||i===0?Ss(w,1):Ss(w);let u,d,h,f,m=!1,g=!1;if(re(e)?(d=()=>e.value,m=We(e)):di(e)?(d=()=>c(e),m=!0):Q(e)?(g=!0,m=e.some(w=>di(w)||We(w)),d=()=>e.map(w=>{if(re(w))return w.value;if(di(w))return c(w);if(dt(w))return l?l(w,2):w()})):dt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){ks();try{h()}finally{Ts()}}const w=pn;pn=u;try{return l?l(e,3,[f]):e(f)}finally{pn=w}}:d=ls,t&&i){const w=d,x=i===!0?1/0:i;d=()=>Ss(w(),x)}const p=vb(),y=()=>{u.stop(),p&&p.active&&Ec(p.effects,u)};if(o&&t){const w=t;t=(...x)=>{w(...x),y()}}let _=g?new Array(e.length).fill(sr):sr;const v=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const x=u.run();if(i||m||(g?x.some((C,D)=>Ys(C,_[D])):Ys(x,_))){h&&h();const C=pn;pn=u;try{const D=[x,_===sr?void 0:g&&_[0]===sr?[]:_,f];_=x,l?l(t,3,D):t(...D)}finally{pn=C}}}else u.run()};return a&&a(v),u=new dm(d),u.scheduler=r?()=>r(v,!1):v,f=w=>Vb(w,!1,u),h=u.onStop=()=>{const w=Wr.get(u);if(w){if(l)l(w,4);else for(const x of w)x();Wr.delete(u)}},t?n?v(!0):_=u.run():r?r(v.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Ss(e,t=1/0,s){if(t<=0||!Lt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,re(e))Ss(e.value,t,s);else if(Q(e))for(let n=0;n<e.length;n++)Ss(e[n],t,s);else if(nm(e)||ci(e))e.forEach(n=>{Ss(n,t,s)});else if(rm(e)){for(const n in e)Ss(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ss(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ro(e,t,s,n){try{return n?e(...n):e()}catch(i){ma(i,t,s)}}function Ye(e,t,s,n){if(dt(e)){const i=Ro(e,t,s,n);return i&&im(i)&&i.catch(o=>{ma(o,t,s)}),i}if(Q(e)){const i=[];for(let o=0;o<e.length;o++)i.push(Ye(e[o],t,s,n));return i}}function ma(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Mt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(o){ks(),Ro(o,null,10,[e,l,c]),Ts();return}}Jb(e,s,i,n,r)}function Jb(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const ue=[];let ns=-1;const hi=[];let js=null,si=0;const Dm=Promise.resolve();let Ur=null;function Yb(e){const t=Ur||Dm;return e?t.then(this?e.bind(this):e):t}function Zb(e){let t=ns+1,s=ue.length;for(;t<s;){const n=t+s>>>1,i=ue[n],o=ko(i);o<e||o===e&&i.flags&2?t=n+1:s=n}return t}function jc(e){if(!(e.flags&1)){const t=ko(e),s=ue[ue.length-1];!s||!(e.flags&2)&&t>=ko(s)?ue.push(e):ue.splice(Zb(t),0,e),e.flags|=1,Mm()}}function Mm(){Ur||(Ur=Dm.then(Em))}function Kb(e){Q(e)?hi.push(...e):js&&e.id===-1?js.splice(si+1,0,e):e.flags&1||(hi.push(e),e.flags|=1),Mm()}function $u(e,t,s=ns+1){for(;s<ue.length;s++){const n=ue[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Cm(e){if(hi.length){const t=[...new Set(hi)].sort((s,n)=>ko(s)-ko(n));if(hi.length=0,js){js.push(...t);return}for(js=t,si=0;si<js.length;si++){const s=js[si];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}js=null,si=0}}const ko=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Em(e){try{for(ns=0;ns<ue.length;ns++){const t=ue[ns];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ro(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ns<ue.length;ns++){const t=ue[ns];t&&(t.flags&=-2)}ns=-1,ue.length=0,Cm(),Ur=null,(ue.length||hi.length)&&Em()}}let oe=null,Am=null;function zr(e){const t=oe;return oe=e,Am=e&&e.type.__scopeId||null,t}function $l(e,t=oe,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Hu(-1);const o=zr(t);let r;try{r=e(...i)}finally{zr(o),n._d&&Hu(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function ga(e,t){if(oe===null)return e;const s=va(oe),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=Mt]=t[i];o&&(dt(o)&&(o={mounted:o,updated:o}),o.deep&&Ss(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function an(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(ks(),Ye(l,s,8,[e.el,a,e,t]),Ts())}}const Gb=Symbol("_vte"),Xb=e=>e.__isTeleport,Wn=Symbol("_leaveCb"),nr=Symbol("_enterCb");function Qb(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ie(()=>{e.isMounted=!0}),ds(()=>{e.isUnmounting=!0}),e}const Le=[Function,Array],tv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Le,onEnter:Le,onAfterEnter:Le,onEnterCancelled:Le,onBeforeLeave:Le,onLeave:Le,onAfterLeave:Le,onLeaveCancelled:Le,onBeforeAppear:Le,onAppear:Le,onAfterAppear:Le,onAppearCancelled:Le};function ev(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Rl(e,t,s,n,i){const{appear:o,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:p,onAppear:y,onAfterAppear:_,onAppearCancelled:v}=t,w=String(e.key),x=ev(s,e),C=($,U)=>{$&&Ye($,n,9,U)},D=($,U)=>{const L=U[1];C($,U),Q($)?$.every(E=>E.length<=1)&&L():$.length<=1&&L()},P={mode:r,persisted:a,beforeEnter($){let U=l;if(!s.isMounted)if(o)U=p||l;else return;$[Wn]&&$[Wn](!0);const L=x[w];L&&ni(e,L)&&L.el[Wn]&&L.el[Wn](),C(U,[$])},enter($){let U=c,L=u,E=d;if(!s.isMounted)if(o)U=y||c,L=_||u,E=v||d;else return;let R=!1;const et=$[nr]=nt=>{R||(R=!0,nt?C(E,[$]):C(L,[$]),P.delayedLeave&&P.delayedLeave(),$[nr]=void 0)};U?D(U,[$,et]):et()},leave($,U){const L=String(e.key);if($[nr]&&$[nr](!0),s.isUnmounting)return U();C(h,[$]);let E=!1;const R=$[Wn]=et=>{E||(E=!0,U(),et?C(g,[$]):C(m,[$]),$[Wn]=void 0,x[L]===e&&delete x[L])};x[L]=e,f?D(f,[$,R]):R()},clone($){return Rl($,t,s,n)}};return P}function To(e,t){e.shapeFlag&6&&e.component?(e.transition=t,To(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Im(e,t=!1,s){let n=[],i=0;for(let o=0;o<e.length;o++){let r=e[o];const a=s==null?r.key:String(s)+String(r.key!=null?r.key:o);r.type===rt?(r.patchFlag&128&&i++,n=n.concat(Im(r.children,t,a))):(t||r.type!==us)&&n.push(a!=null?Dn(r,{key:a}):r)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function Pm(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function lo(e,t,s,n,i=!1){if(Q(e)){e.forEach((m,g)=>lo(m,t&&(Q(t)?t[g]:t),s,n,i));return}if(fi(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&lo(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?va(n.component):n.el,r=i?null:o,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Mt?a.refs={}:a.refs,d=a.setupState,h=_t(d),f=d===Mt?()=>!1:m=>wt(h,m);if(c!=null&&c!==l&&(jt(c)?(u[c]=null,f(c)&&(d[c]=null)):re(c)&&(c.value=null)),dt(l))Ro(l,a,12,[r,u]);else{const m=jt(l),g=re(l);if(m||g){const p=()=>{if(e.f){const y=m?f(l)?d[l]:u[l]:l.value;i?Q(y)&&Ec(y,o):Q(y)?y.includes(o)||y.push(o):m?(u[l]=[o],f(l)&&(d[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else m?(u[l]=r,f(l)&&(d[l]=r)):g&&(l.value=r,e.k&&(u[e.k]=r))};r?(p.id=-1,De(p,s)):p()}}}ha().requestIdleCallback;ha().cancelIdleCallback;const fi=e=>!!e.type.__asyncLoader,Lm=e=>e.type.__isKeepAlive;function sv(e,t){$m(e,"a",t)}function nv(e,t){$m(e,"da",t)}function $m(e,t,s=de){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(pa(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Lm(i.parent.vnode)&&iv(n,t,s,i),i=i.parent}}function iv(e,t,s,n){const i=pa(t,e,n,!0);Fm(()=>{Ec(n[t],i)},s)}function pa(e,t,s=de,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{ks();const a=Fo(s),l=Ye(t,s,e,r);return a(),Ts(),l});return n?i.unshift(o):i.push(o),o}}const Es=e=>(t,s=de)=>{(!Do||e==="sp")&&pa(e,(...n)=>t(...n),s)},ov=Es("bm"),Ie=Es("m"),rv=Es("bu"),Rm=Es("u"),ds=Es("bum"),Fm=Es("um"),av=Es("sp"),lv=Es("rtg"),cv=Es("rtc");function uv(e,t=de){pa("ec",e,t)}const dv=Symbol.for("v-ndc");function $t(e,t,s,n){let i;const o=s,r=Q(e);if(r||jt(e)){const a=r&&di(e);let l=!1,c=!1;a&&(l=!We(e),c=Qs(e),e=fa(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?Br(Xt(e[u])):Xt(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(Lt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,o)}}else i=[];return i}function hv(e,t,s={},n,i){if(oe.ce||oe.parent&&fi(oe.parent)&&oe.parent.ce)return T(),Ee(rt,null,[ut("slot",s,n&&n())],64);let o=e[t];o&&o._c&&(o._d=!1),T();const r=o&&Nm(o(s)),a=s.key||r&&r.key,l=Ee(rt,{key:(a&&!Cs(a)?a:`_${t}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&e._===1?64:-2);return o&&o._c&&(o._d=!0),l}function Nm(e){return e.some(t=>Uc(t)?!(t.type===us||t.type===rt&&!Nm(t.children)):!0)?e:null}const Fl=e=>e?og(e)?va(e):Fl(e.parent):null,co=Zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fl(e.parent),$root:e=>Fl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Bm(e),$forceUpdate:e=>e.f||(e.f=()=>{jc(e.update)}),$nextTick:e=>e.n||(e.n=Yb.bind(e.proxy)),$watch:e=>Lv.bind(e)}),Va=(e,t)=>e!==Mt&&!e.__isScriptSetup&&wt(e,t),fv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=r[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(Va(n,t))return r[t]=1,n[t];if(i!==Mt&&wt(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&wt(c,t))return r[t]=3,o[t];if(s!==Mt&&wt(s,t))return r[t]=4,s[t];Nl&&(r[t]=0)}}const u=co[t];let d,h;if(u)return t==="$attrs"&&ne(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Mt&&wt(s,t))return r[t]=4,s[t];if(h=l.config.globalProperties,wt(h,t))return h[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return Va(i,t)?(i[t]=s,!0):n!==Mt&&wt(n,t)?(n[t]=s,!0):wt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||e!==Mt&&wt(e,r)||Va(t,r)||(a=o[0])&&wt(a,r)||wt(n,r)||wt(co,r)||wt(i.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:wt(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ru(e){return Q(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Nl=!0;function mv(e){const t=Bm(e),s=e.proxy,n=e.ctx;Nl=!1,t.beforeCreate&&Fu(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:p,beforeDestroy:y,beforeUnmount:_,destroyed:v,unmounted:w,render:x,renderTracked:C,renderTriggered:D,errorCaptured:P,serverPrefetch:$,expose:U,inheritAttrs:L,components:E,directives:R,filters:et}=t;if(c&&gv(c,n,null),r)for(const ht in r){const gt=r[ht];dt(gt)&&(n[ht]=gt.bind(s))}if(i){const ht=i.call(s,s);Lt(ht)&&(e.data=ui(ht))}if(Nl=!0,o)for(const ht in o){const gt=o[ht],ae=dt(gt)?gt.bind(s,s):dt(gt.get)?gt.get.bind(s,s):ls,Pe=!dt(gt)&&dt(gt.set)?gt.set.bind(s):ls,me=Y({get:ae,set:Pe});Object.defineProperty(n,ht,{enumerable:!0,configurable:!0,get:()=>me.value,set:Gt=>me.value=Gt})}if(a)for(const ht in a)jm(a[ht],n,s,ht);if(l){const ht=dt(l)?l.call(s):l;Reflect.ownKeys(ht).forEach(gt=>{wv(gt,ht[gt])})}u&&Fu(u,e,"c");function it(ht,gt){Q(gt)?gt.forEach(ae=>ht(ae.bind(s))):gt&&ht(gt.bind(s))}if(it(ov,d),it(Ie,h),it(rv,f),it(Rm,m),it(sv,g),it(nv,p),it(uv,P),it(cv,C),it(lv,D),it(ds,_),it(Fm,w),it(av,$),Q(U))if(U.length){const ht=e.exposed||(e.exposed={});U.forEach(gt=>{Object.defineProperty(ht,gt,{get:()=>s[gt],set:ae=>s[gt]=ae,enumerable:!0})})}else e.exposed||(e.exposed={});x&&e.render===ls&&(e.render=x),L!=null&&(e.inheritAttrs=L),E&&(e.components=E),R&&(e.directives=R),$&&Pm(e)}function gv(e,t,s=ls){Q(e)&&(e=jl(e));for(const n in e){const i=e[n];let o;Lt(i)?"default"in i?o=Er(i.from||n,i.default,!0):o=Er(i.from||n):o=Er(i),re(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function Fu(e,t,s){Ye(Q(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function jm(e,t,s,n){let i=n.includes(".")?Qm(s,n):()=>s[n];if(jt(e)){const o=t[e];dt(o)&&we(i,o)}else if(dt(e))we(i,e.bind(s));else if(Lt(e))if(Q(e))e.forEach(o=>jm(o,t,s,n));else{const o=dt(e.handler)?e.handler.bind(s):t[e.handler];dt(o)&&we(i,o,e)}}function Bm(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>Hr(l,c,r,!0)),Hr(l,t,r)),Lt(t)&&o.set(t,l),l}function Hr(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&Hr(e,o,s,!0),i&&i.forEach(r=>Hr(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const a=pv[r]||s&&s[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const pv={data:Nu,props:ju,emits:ju,methods:Ki,computed:Ki,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:Ki,directives:Ki,watch:bv,provide:Nu,inject:yv};function Nu(e,t){return t?e?function(){return Zt(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function yv(e,t){return Ki(jl(e),jl(t))}function jl(e){if(Q(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function Ki(e,t){return e?Zt(Object.create(null),e,t):t}function ju(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:Zt(Object.create(null),Ru(e),Ru(t??{})):t}function bv(e,t){if(!e)return t;if(!t)return e;const s=Zt(Object.create(null),e);for(const n in t)s[n]=ce(e[n],t[n]);return s}function Wm(){return{app:null,config:{isNativeTag:rb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vv=0;function _v(e,t){return function(n,i=null){dt(n)||(n=Zt({},n)),i!=null&&!Lt(i)&&(i=null);const o=Wm(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:vv++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:e0,get config(){return o.config},set config(u){},use(u,...d){return r.has(u)||(u&&dt(u.install)?(r.add(u),u.install(c,...d)):dt(u)&&(r.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ut(n,i);return f.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,va(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Ye(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=mi;mi=c;try{return u()}finally{mi=d}}};return c}}let mi=null;function wv(e,t){if(de){let s=de.provides;const n=de.parent&&de.parent.provides;n===s&&(s=de.provides=Object.create(n)),s[e]=t}}function Er(e,t,s=!1){const n=ig();if(n||mi){let i=mi?mi._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&dt(t)?t.call(n&&n.proxy):t}}const Um={},zm=()=>Object.create(Um),Hm=e=>Object.getPrototypeOf(e)===Um;function xv(e,t,s,n=!1){const i={},o=zm();e.propsDefaults=Object.create(null),Vm(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:Nb(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Sv(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=_t(i),[l]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ya(e.emitsOptions,h))continue;const f=t[h];if(l)if(wt(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const m=Xs(h);i[m]=Bl(l,a,m,f,e,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{Vm(e,t,i,o)&&(c=!0);let u;for(const d in a)(!t||!wt(t,d)&&((u=nn(d))===d||!wt(t,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(i[d]=Bl(l,a,d,void 0,e,!0)):delete i[d]);if(o!==a)for(const d in o)(!t||!wt(t,d))&&(delete o[d],c=!0)}c&&xs(e.attrs,"set","")}function Vm(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(oo(l))continue;const c=t[l];let u;i&&wt(i,u=Xs(l))?!o||!o.includes(u)?s[u]=c:(a||(a={}))[u]=c:ya(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=_t(s),c=a||Mt;for(let u=0;u<o.length;u++){const d=o[u];s[d]=Bl(i,l,d,c[d],e,!wt(c,d))}}return r}function Bl(e,t,s,n,i,o){const r=e[s];if(r!=null){const a=wt(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&dt(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Fo(i);n=c[s]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===nn(s))&&(n=!0))}return n}const kv=new WeakMap;function qm(e,t,s=!1){const n=s?kv:t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!dt(e)){const u=d=>{l=!0;const[h,f]=qm(d,t,!0);Zt(r,h),f&&a.push(...f)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return Lt(e)&&n.set(e,li),li;if(Q(o))for(let u=0;u<o.length;u++){const d=Xs(o[u]);Bu(d)&&(r[d]=Mt)}else if(o)for(const u in o){const d=Xs(u);if(Bu(d)){const h=o[u],f=r[d]=Q(h)||dt(h)?{type:h}:Zt({},h),m=f.type;let g=!1,p=!0;if(Q(m))for(let y=0;y<m.length;++y){const _=m[y],v=dt(_)&&_.name;if(v==="Boolean"){g=!0;break}else v==="String"&&(p=!1)}else g=dt(m)&&m.name==="Boolean";f[0]=g,f[1]=p,(g||wt(f,"default"))&&a.push(d)}}const c=[r,a];return Lt(e)&&n.set(e,c),c}function Bu(e){return e[0]!=="$"&&!oo(e)}const Bc=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",Wc=e=>Q(e)?e.map(as):[as(e)],Tv=(e,t,s)=>{if(t._n)return t;const n=$l((...i)=>Wc(t(...i)),s);return n._c=!1,n},Jm=(e,t,s)=>{const n=e._ctx;for(const i in e){if(Bc(i))continue;const o=e[i];if(dt(o))t[i]=Tv(i,o,n);else if(o!=null){const r=Wc(o);t[i]=()=>r}}},Ym=(e,t)=>{const s=Wc(t);e.slots.default=()=>s},Zm=(e,t,s)=>{for(const n in t)(s||!Bc(n))&&(e[n]=t[n])},Ov=(e,t,s)=>{const n=e.slots=zm();if(e.vnode.shapeFlag&32){const i=t.__;i&&Cl(n,"__",i,!0);const o=t._;o?(Zm(n,t,s),s&&Cl(n,"_",o,!0)):Jm(t,n)}else t&&Ym(e,t)},Dv=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=Mt;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:Zm(i,t,s):(o=!t.$stable,Jm(t,i)),r=t}else t&&(Ym(e,t),r={default:1});if(o)for(const a in i)!Bc(a)&&r[a]==null&&delete i[a]},De=Wv;function Mv(e){return Cv(e)}function Cv(e,t){const s=ha();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=ls,insertStaticContent:m}=e,g=(S,k,I,j=null,F=null,N=null,V=void 0,z=null,W=!!k.dynamicChildren)=>{if(S===k)return;S&&!ni(S,k)&&(j=Qo(S),Gt(S,F,N,!0),S=null),k.patchFlag===-2&&(W=!1,k.dynamicChildren=null);const{type:B,ref:K,shapeFlag:q}=k;switch(B){case ba:p(S,k,I,j);break;case us:y(S,k,I,j);break;case Ar:S==null&&_(k,I,j,V);break;case rt:E(S,k,I,j,F,N,V,z,W);break;default:q&1?x(S,k,I,j,F,N,V,z,W):q&6?R(S,k,I,j,F,N,V,z,W):(q&64||q&128)&&B.process(S,k,I,j,F,N,V,z,W,$i)}K!=null&&F?lo(K,S&&S.ref,N,k||S,!k):K==null&&S&&S.ref!=null&&lo(S.ref,null,N,S,!0)},p=(S,k,I,j)=>{if(S==null)n(k.el=a(k.children),I,j);else{const F=k.el=S.el;k.children!==S.children&&c(F,k.children)}},y=(S,k,I,j)=>{S==null?n(k.el=l(k.children||""),I,j):k.el=S.el},_=(S,k,I,j)=>{[S.el,S.anchor]=m(S.children,k,I,j,S.el,S.anchor)},v=({el:S,anchor:k},I,j)=>{let F;for(;S&&S!==k;)F=h(S),n(S,I,j),S=F;n(k,I,j)},w=({el:S,anchor:k})=>{let I;for(;S&&S!==k;)I=h(S),i(S),S=I;i(k)},x=(S,k,I,j,F,N,V,z,W)=>{k.type==="svg"?V="svg":k.type==="math"&&(V="mathml"),S==null?C(k,I,j,F,N,V,z,W):$(S,k,F,N,V,z,W)},C=(S,k,I,j,F,N,V,z)=>{let W,B;const{props:K,shapeFlag:q,transition:Z,dirs:st}=S;if(W=S.el=r(S.type,N,K&&K.is,K),q&8?u(W,S.children):q&16&&P(S.children,W,null,j,F,qa(S,N),V,z),st&&an(S,null,j,"created"),D(W,S,S.scopeId,V,j),K){for(const Ct in K)Ct!=="value"&&!oo(Ct)&&o(W,Ct,null,K[Ct],N,j);"value"in K&&o(W,"value",null,K.value,N),(B=K.onVnodeBeforeMount)&&Qe(B,j,S)}st&&an(S,null,j,"beforeMount");const pt=Ev(F,Z);pt&&Z.beforeEnter(W),n(W,k,I),((B=K&&K.onVnodeMounted)||pt||st)&&De(()=>{B&&Qe(B,j,S),pt&&Z.enter(W),st&&an(S,null,j,"mounted")},F)},D=(S,k,I,j,F)=>{if(I&&f(S,I),j)for(let N=0;N<j.length;N++)f(S,j[N]);if(F){let N=F.subTree;if(k===N||eg(N.type)&&(N.ssContent===k||N.ssFallback===k)){const V=F.vnode;D(S,V,V.scopeId,V.slotScopeIds,F.parent)}}},P=(S,k,I,j,F,N,V,z,W=0)=>{for(let B=W;B<S.length;B++){const K=S[B]=z?Bs(S[B]):as(S[B]);g(null,K,k,I,j,F,N,V,z)}},$=(S,k,I,j,F,N,V)=>{const z=k.el=S.el;let{patchFlag:W,dynamicChildren:B,dirs:K}=k;W|=S.patchFlag&16;const q=S.props||Mt,Z=k.props||Mt;let st;if(I&&ln(I,!1),(st=Z.onVnodeBeforeUpdate)&&Qe(st,I,k,S),K&&an(k,S,I,"beforeUpdate"),I&&ln(I,!0),(q.innerHTML&&Z.innerHTML==null||q.textContent&&Z.textContent==null)&&u(z,""),B?U(S.dynamicChildren,B,z,I,j,qa(k,F),N):V||gt(S,k,z,null,I,j,qa(k,F),N,!1),W>0){if(W&16)L(z,q,Z,I,F);else if(W&2&&q.class!==Z.class&&o(z,"class",null,Z.class,F),W&4&&o(z,"style",q.style,Z.style,F),W&8){const pt=k.dynamicProps;for(let Ct=0;Ct<pt.length;Ct++){const kt=pt[Ct],ge=q[kt],pe=Z[kt];(pe!==ge||kt==="value")&&o(z,kt,ge,pe,F,I)}}W&1&&S.children!==k.children&&u(z,k.children)}else!V&&B==null&&L(z,q,Z,I,F);((st=Z.onVnodeUpdated)||K)&&De(()=>{st&&Qe(st,I,k,S),K&&an(k,S,I,"updated")},j)},U=(S,k,I,j,F,N,V)=>{for(let z=0;z<k.length;z++){const W=S[z],B=k[z],K=W.el&&(W.type===rt||!ni(W,B)||W.shapeFlag&198)?d(W.el):I;g(W,B,K,null,j,F,N,V,!0)}},L=(S,k,I,j,F)=>{if(k!==I){if(k!==Mt)for(const N in k)!oo(N)&&!(N in I)&&o(S,N,k[N],null,F,j);for(const N in I){if(oo(N))continue;const V=I[N],z=k[N];V!==z&&N!=="value"&&o(S,N,z,V,F,j)}"value"in I&&o(S,"value",k.value,I.value,F)}},E=(S,k,I,j,F,N,V,z,W)=>{const B=k.el=S?S.el:a(""),K=k.anchor=S?S.anchor:a("");let{patchFlag:q,dynamicChildren:Z,slotScopeIds:st}=k;st&&(z=z?z.concat(st):st),S==null?(n(B,I,j),n(K,I,j),P(k.children||[],I,K,F,N,V,z,W)):q>0&&q&64&&Z&&S.dynamicChildren?(U(S.dynamicChildren,Z,I,F,N,V,z),(k.key!=null||F&&k===F.subTree)&&Km(S,k,!0)):gt(S,k,I,K,F,N,V,z,W)},R=(S,k,I,j,F,N,V,z,W)=>{k.slotScopeIds=z,S==null?k.shapeFlag&512?F.ctx.activate(k,I,j,V,W):et(k,I,j,F,N,V,W):nt(S,k,W)},et=(S,k,I,j,F,N,V)=>{const z=S.component=Zv(S,j,F);if(Lm(S)&&(z.ctx.renderer=$i),Kv(z,!1,V),z.asyncDep){if(F&&F.registerDep(z,it,V),!S.el){const W=z.subTree=ut(us);y(null,W,k,I),S.placeholder=W.el}}else it(z,S,k,I,F,N,V)},nt=(S,k,I)=>{const j=k.component=S.component;if(jv(S,k,I))if(j.asyncDep&&!j.asyncResolved){ht(j,k,I);return}else j.next=k,j.update();else k.el=S.el,j.vnode=k},it=(S,k,I,j,F,N,V)=>{const z=()=>{if(S.isMounted){let{next:q,bu:Z,u:st,parent:pt,vnode:Ct}=S;{const Ge=Gm(S);if(Ge){q&&(q.el=Ct.el,ht(S,q,V)),Ge.asyncDep.then(()=>{S.isUnmounted||z()});return}}let kt=q,ge;ln(S,!1),q?(q.el=Ct.el,ht(S,q,V)):q=Ct,Z&&Cr(Z),(ge=q.props&&q.props.onVnodeBeforeUpdate)&&Qe(ge,pt,q,Ct),ln(S,!0);const pe=Uu(S),Ke=S.subTree;S.subTree=pe,g(Ke,pe,d(Ke.el),Qo(Ke),S,F,N),q.el=pe.el,kt===null&&Bv(S,pe.el),st&&De(st,F),(ge=q.props&&q.props.onVnodeUpdated)&&De(()=>Qe(ge,pt,q,Ct),F)}else{let q;const{el:Z,props:st}=k,{bm:pt,m:Ct,parent:kt,root:ge,type:pe}=S,Ke=fi(k);ln(S,!1),pt&&Cr(pt),!Ke&&(q=st&&st.onVnodeBeforeMount)&&Qe(q,kt,k),ln(S,!0);{ge.ce&&ge.ce._def.shadowRoot!==!1&&ge.ce._injectChildStyle(pe);const Ge=S.subTree=Uu(S);g(null,Ge,I,j,S,F,N),k.el=Ge.el}if(Ct&&De(Ct,F),!Ke&&(q=st&&st.onVnodeMounted)){const Ge=k;De(()=>Qe(q,kt,Ge),F)}(k.shapeFlag&256||kt&&fi(kt.vnode)&&kt.vnode.shapeFlag&256)&&S.a&&De(S.a,F),S.isMounted=!0,k=I=j=null}};S.scope.on();const W=S.effect=new dm(z);S.scope.off();const B=S.update=W.run.bind(W),K=S.job=W.runIfDirty.bind(W);K.i=S,K.id=S.uid,W.scheduler=()=>jc(K),ln(S,!0),B()},ht=(S,k,I)=>{k.component=S;const j=S.vnode.props;S.vnode=k,S.next=null,Sv(S,k.props,j,I),Dv(S,k.children,I),ks(),$u(S),Ts()},gt=(S,k,I,j,F,N,V,z,W=!1)=>{const B=S&&S.children,K=S?S.shapeFlag:0,q=k.children,{patchFlag:Z,shapeFlag:st}=k;if(Z>0){if(Z&128){Pe(B,q,I,j,F,N,V,z,W);return}else if(Z&256){ae(B,q,I,j,F,N,V,z,W);return}}st&8?(K&16&&Te(B,F,N),q!==B&&u(I,q)):K&16?st&16?Pe(B,q,I,j,F,N,V,z,W):Te(B,F,N,!0):(K&8&&u(I,""),st&16&&P(q,I,j,F,N,V,z,W))},ae=(S,k,I,j,F,N,V,z,W)=>{S=S||li,k=k||li;const B=S.length,K=k.length,q=Math.min(B,K);let Z;for(Z=0;Z<q;Z++){const st=k[Z]=W?Bs(k[Z]):as(k[Z]);g(S[Z],st,I,null,F,N,V,z,W)}B>K?Te(S,F,N,!0,!1,q):P(k,I,j,F,N,V,z,W,q)},Pe=(S,k,I,j,F,N,V,z,W)=>{let B=0;const K=k.length;let q=S.length-1,Z=K-1;for(;B<=q&&B<=Z;){const st=S[B],pt=k[B]=W?Bs(k[B]):as(k[B]);if(ni(st,pt))g(st,pt,I,null,F,N,V,z,W);else break;B++}for(;B<=q&&B<=Z;){const st=S[q],pt=k[Z]=W?Bs(k[Z]):as(k[Z]);if(ni(st,pt))g(st,pt,I,null,F,N,V,z,W);else break;q--,Z--}if(B>q){if(B<=Z){const st=Z+1,pt=st<K?k[st].el:j;for(;B<=Z;)g(null,k[B]=W?Bs(k[B]):as(k[B]),I,pt,F,N,V,z,W),B++}}else if(B>Z)for(;B<=q;)Gt(S[B],F,N,!0),B++;else{const st=B,pt=B,Ct=new Map;for(B=pt;B<=Z;B++){const Oe=k[B]=W?Bs(k[B]):as(k[B]);Oe.key!=null&&Ct.set(Oe.key,B)}let kt,ge=0;const pe=Z-pt+1;let Ke=!1,Ge=0;const Ri=new Array(pe);for(B=0;B<pe;B++)Ri[B]=0;for(B=st;B<=q;B++){const Oe=S[B];if(ge>=pe){Gt(Oe,F,N,!0);continue}let Xe;if(Oe.key!=null)Xe=Ct.get(Oe.key);else for(kt=pt;kt<=Z;kt++)if(Ri[kt-pt]===0&&ni(Oe,k[kt])){Xe=kt;break}Xe===void 0?Gt(Oe,F,N,!0):(Ri[Xe-pt]=B+1,Xe>=Ge?Ge=Xe:Ke=!0,g(Oe,k[Xe],I,null,F,N,V,z,W),ge++)}const Cu=Ke?Av(Ri):li;for(kt=Cu.length-1,B=pe-1;B>=0;B--){const Oe=pt+B,Xe=k[Oe],Eu=k[Oe+1],Au=Oe+1<K?Eu.el||Eu.placeholder:j;Ri[B]===0?g(null,Xe,I,Au,F,N,V,z,W):Ke&&(kt<0||B!==Cu[kt]?me(Xe,I,Au,2):kt--)}}},me=(S,k,I,j,F=null)=>{const{el:N,type:V,transition:z,children:W,shapeFlag:B}=S;if(B&6){me(S.component.subTree,k,I,j);return}if(B&128){S.suspense.move(k,I,j);return}if(B&64){V.move(S,k,I,$i);return}if(V===rt){n(N,k,I);for(let q=0;q<W.length;q++)me(W[q],k,I,j);n(S.anchor,k,I);return}if(V===Ar){v(S,k,I);return}if(j!==2&&B&1&&z)if(j===0)z.beforeEnter(N),n(N,k,I),De(()=>z.enter(N),F);else{const{leave:q,delayLeave:Z,afterLeave:st}=z,pt=()=>{S.ctx.isUnmounted?i(N):n(N,k,I)},Ct=()=>{q(N,()=>{pt(),st&&st()})};Z?Z(N,pt,Ct):Ct()}else n(N,k,I)},Gt=(S,k,I,j=!1,F=!1)=>{const{type:N,props:V,ref:z,children:W,dynamicChildren:B,shapeFlag:K,patchFlag:q,dirs:Z,cacheIndex:st}=S;if(q===-2&&(F=!1),z!=null&&(ks(),lo(z,null,I,S,!0),Ts()),st!=null&&(k.renderCache[st]=void 0),K&256){k.ctx.deactivate(S);return}const pt=K&1&&Z,Ct=!fi(S);let kt;if(Ct&&(kt=V&&V.onVnodeBeforeUnmount)&&Qe(kt,k,S),K&6)rn(S.component,I,j);else{if(K&128){S.suspense.unmount(I,j);return}pt&&an(S,null,k,"beforeUnmount"),K&64?S.type.remove(S,k,I,$i,j):B&&!B.hasOnce&&(N!==rt||q>0&&q&64)?Te(B,k,I,!1,!0):(N===rt&&q&384||!F&&K&16)&&Te(W,k,I),j&&Is(S)}(Ct&&(kt=V&&V.onVnodeUnmounted)||pt)&&De(()=>{kt&&Qe(kt,k,S),pt&&an(S,null,k,"unmounted")},I)},Is=S=>{const{type:k,el:I,anchor:j,transition:F}=S;if(k===rt){hs(I,j);return}if(k===Ar){w(S);return}const N=()=>{i(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:V,delayLeave:z}=F,W=()=>V(I,N);z?z(S.el,N,W):W()}else N()},hs=(S,k)=>{let I;for(;S!==k;)I=h(S),i(S),S=I;i(k)},rn=(S,k,I)=>{const{bum:j,scope:F,job:N,subTree:V,um:z,m:W,a:B,parent:K,slots:{__:q}}=S;Wu(W),Wu(B),j&&Cr(j),K&&Q(q)&&q.forEach(Z=>{K.renderCache[Z]=void 0}),F.stop(),N&&(N.flags|=8,Gt(V,S,k,I)),z&&De(z,k),De(()=>{S.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Te=(S,k,I,j=!1,F=!1,N=0)=>{for(let V=N;V<S.length;V++)Gt(S[V],k,I,j,F)},Qo=S=>{if(S.shapeFlag&6)return Qo(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const k=h(S.anchor||S.el),I=k&&k[Gb];return I?h(I):k};let ja=!1;const Mu=(S,k,I)=>{S==null?k._vnode&&Gt(k._vnode,null,null,!0):g(k._vnode||null,S,k,null,null,null,I),k._vnode=S,ja||(ja=!0,$u(),Cm(),ja=!1)},$i={p:g,um:Gt,m:me,r:Is,mt:et,mc:P,pc:gt,pbc:U,n:Qo,o:e};return{render:Mu,hydrate:void 0,createApp:_v(Mu)}}function qa({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ln({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ev(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Km(e,t,s=!1){const n=e.children,i=t.children;if(Q(n)&&Q(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Bs(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&Km(r,a)),a.type===ba&&(a.el=r.el),a.type===us&&!a.el&&(a.el=r.el)}}function Av(e){const t=e.slice(),s=[0];let n,i,o,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,e[s[a]]<c?o=a+1:r=a;c<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}function Gm(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Gm(t)}function Wu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Iv=Symbol.for("v-scx"),Pv=()=>Er(Iv);function we(e,t,s){return Xm(e,t,s)}function Xm(e,t,s=Mt){const{immediate:n,deep:i,flush:o,once:r}=s,a=Zt({},s),l=t&&n||!t&&o!=="post";let c;if(Do){if(o==="sync"){const f=Pv();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=ls,f.resume=ls,f.pause=ls,f}}const u=de;a.call=(f,m,g)=>Ye(f,u,m,g);let d=!1;o==="post"?a.scheduler=f=>{De(f,u&&u.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(f,m)=>{m?f():jc(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=qb(e,t,a);return Do&&(c?c.push(h):l&&h()),h}function Lv(e,t,s){const n=this.proxy,i=jt(e)?e.includes(".")?Qm(n,e):()=>n[e]:e.bind(n,n);let o;dt(t)?o=t:(o=t.handler,s=t);const r=Fo(this),a=Xm(i,o.bind(n),s);return r(),a}function Qm(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const $v=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Xs(t)}Modifiers`]||e[`${nn(t)}Modifiers`];function Rv(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Mt;let i=s;const o=t.startsWith("update:"),r=o&&$v(n,t.slice(7));r&&(r.trim&&(i=s.map(u=>jt(u)?u.trim():u)),r.number&&(i=s.map(El)));let a,l=n[a=Ba(t)]||n[a=Ba(Xs(t))];!l&&o&&(l=n[a=Ba(nn(t))]),l&&Ye(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ye(c,e,6,i)}}function tg(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!dt(e)){const l=c=>{const u=tg(c,t,!0);u&&(a=!0,Zt(r,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Lt(e)&&n.set(e,null),null):(Q(o)?o.forEach(l=>r[l]=null):Zt(r,o),Lt(e)&&n.set(e,r),r)}function ya(e,t){return!e||!ca(t)?!1:(t=t.slice(2).replace(/Once$/,""),wt(e,t[0].toLowerCase()+t.slice(1))||wt(e,nn(t))||wt(e,t))}function Uu(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:g}=e,p=zr(e);let y,_;try{if(s.shapeFlag&4){const w=i||n,x=w;y=as(c.call(x,w,u,d,f,h,m)),_=a}else{const w=t;y=as(w.length>1?w(d,{attrs:a,slots:r,emit:l}):w(d,null)),_=t.props?a:Fv(a)}}catch(w){uo.length=0,ma(w,e,1),y=ut(us)}let v=y;if(_&&g!==!1){const w=Object.keys(_),{shapeFlag:x}=v;w.length&&x&7&&(o&&w.some(Cc)&&(_=Nv(_,o)),v=Dn(v,_,!1,!0))}return s.dirs&&(v=Dn(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&To(v,s.transition),y=v,zr(p),y}const Fv=e=>{let t;for(const s in e)(s==="class"||s==="style"||ca(s))&&((t||(t={}))[s]=e[s]);return t},Nv=(e,t)=>{const s={};for(const n in e)(!Cc(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function jv(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?zu(n,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(r[h]!==n[h]&&!ya(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?zu(n,r,c):!0:!!r;return!1}function zu(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!ya(s,o))return!0}return!1}function Bv({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const eg=e=>e.__isSuspense;function Wv(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):Kb(e)}const rt=Symbol.for("v-fgt"),ba=Symbol.for("v-txt"),us=Symbol.for("v-cmt"),Ar=Symbol.for("v-stc"),uo=[];let Ce=null;function T(e=!1){uo.push(Ce=e?null:[])}function Uv(){uo.pop(),Ce=uo[uo.length-1]||null}let Oo=1;function Hu(e,t=!1){Oo+=e,e<0&&Ce&&t&&(Ce.hasOnce=!0)}function sg(e){return e.dynamicChildren=Oo>0?Ce||li:null,Uv(),Oo>0&&Ce&&Ce.push(e),e}function M(e,t,s,n,i,o){return sg(b(e,t,s,n,i,o,!0))}function Ee(e,t,s,n,i){return sg(ut(e,t,s,n,i,!0))}function Uc(e){return e?e.__v_isVNode===!0:!1}function ni(e,t){return e.type===t.type&&e.key===t.key}const ng=({key:e})=>e??null,Ir=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?jt(e)||re(e)||dt(e)?{i:oe,r:e,k:t,f:!!s}:e:null);function b(e,t=null,s=null,n=0,i=null,o=e===rt?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ng(t),ref:t&&Ir(t),scopeId:Am,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:oe};return a?(zc(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=jt(s)?8:16),Oo>0&&!r&&Ce&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Ce.push(l),l}const ut=zv;function zv(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===dv)&&(e=us),Uc(e)){const a=Dn(e,t,!0);return s&&zc(a,s),Oo>0&&!o&&Ce&&(a.shapeFlag&6?Ce[Ce.indexOf(e)]=a:Ce.push(a)),a.patchFlag=-2,a}if(t0(e)&&(e=e.__vccOpts),t){t=Hv(t);let{class:a,style:l}=t;a&&!jt(a)&&(t.class=X(a)),Lt(l)&&(Nc(l)&&!Q(l)&&(l=Zt({},l)),t.style=ee(l))}const r=jt(e)?1:eg(e)?128:Xb(e)?64:Lt(e)?4:dt(e)?2:0;return b(e,t,s,n,i,r,o,!0)}function Hv(e){return e?Nc(e)||Hm(e)?Zt({},e):e:null}function Dn(e,t,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,c=t?qv(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&ng(c),ref:t&&t.ref?s&&o?Q(o)?o.concat(Ir(t)):[o,Ir(t)]:Ir(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rt?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dn(e.ssContent),ssFallback:e.ssFallback&&Dn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&To(u,l.clone(u)),u}function G(e=" ",t=0){return ut(ba,null,e,t)}function Vv(e,t){const s=ut(Ar,null,e);return s.staticCount=t,s}function J(e="",t=!1){return t?(T(),Ee(us,null,e)):ut(us,null,e)}function as(e){return e==null||typeof e=="boolean"?ut(us):Q(e)?ut(rt,null,e.slice()):Uc(e)?Bs(e):ut(ba,null,String(e))}function Bs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dn(e)}function zc(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Q(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),zc(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!Hm(t)?t._ctx=oe:i===3&&oe&&(oe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:oe},s=32):(t=String(t),n&64?(s=16,t=[G(t)]):s=8);e.children=t,e.shapeFlag|=s}function qv(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=X([t.class,n.class]));else if(i==="style")t.style=ee([t.style,n.style]);else if(ca(i)){const o=t[i],r=n[i];r&&o!==r&&!(Q(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function Qe(e,t,s,n=null){Ye(e,t,7,[s,n])}const Jv=Wm();let Yv=0;function Zv(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Jv,o={uid:Yv++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qm(n,i),emitsOptions:tg(n,i),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:n.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Rv.bind(null,o),e.ce&&e.ce(o),o}let de=null;const ig=()=>de||oe;let Vr,Wl;{const e=ha(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Vr=t("__VUE_INSTANCE_SETTERS__",s=>de=s),Wl=t("__VUE_SSR_SETTERS__",s=>Do=s)}const Fo=e=>{const t=de;return Vr(e),e.scope.on(),()=>{e.scope.off(),Vr(t)}},Vu=()=>{de&&de.scope.off(),Vr(null)};function og(e){return e.vnode.shapeFlag&4}let Do=!1;function Kv(e,t=!1,s=!1){t&&Wl(t);const{props:n,children:i}=e.vnode,o=og(e);xv(e,n,o,t),Ov(e,i,s||t);const r=o?Gv(e,t):void 0;return t&&Wl(!1),r}function Gv(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fv);const{setup:n}=s;if(n){ks();const i=e.setupContext=n.length>1?Qv(e):null,o=Fo(e),r=Ro(n,e,0,[e.props,i]),a=im(r);if(Ts(),o(),(a||e.sp)&&!fi(e)&&Pm(e),a){if(r.then(Vu,Vu),t)return r.then(l=>{qu(e,l)}).catch(l=>{ma(l,e,0)});e.asyncDep=r}else qu(e,r)}else rg(e)}function qu(e,t,s){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=Om(t)),rg(e)}function rg(e,t,s){const n=e.type;e.render||(e.render=n.render||ls);{const i=Fo(e);ks();try{mv(e)}finally{Ts(),i()}}}const Xv={get(e,t){return ne(e,"get",""),e[t]}};function Qv(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Xv),slots:e.slots,emit:e.emit,expose:t}}function va(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Om(jb(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in co)return co[s](e)},has(t,s){return s in t||s in co}})):e.proxy}function t0(e){return dt(e)&&"__vccOpts"in e}const Y=(e,t)=>Hb(e,t,Do),e0="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ul;const Ju=typeof window<"u"&&window.trustedTypes;if(Ju)try{Ul=Ju.createPolicy("vue",{createHTML:e=>e})}catch{}const ag=Ul?e=>Ul.createHTML(e):e=>e,s0="http://www.w3.org/2000/svg",n0="http://www.w3.org/1998/Math/MathML",vs=typeof document<"u"?document:null,Yu=vs&&vs.createElement("template"),i0={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?vs.createElementNS(s0,e):t==="mathml"?vs.createElementNS(n0,e):s?vs.createElement(e,{is:s}):vs.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>vs.createTextNode(e),createComment:e=>vs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{Yu.innerHTML=ag(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Yu.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Ps="transition",Ni="animation",bi=Symbol("_vtc"),lg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},o0=Zt({},tv,lg),cn=(e,t=[])=>{Q(e)?e.forEach(s=>s(...t)):e&&e(...t)},Zu=e=>e?Q(e)?e.some(t=>t.length>1):e.length>1:!1;function r0(e){const t={};for(const E in e)E in lg||(t[E]=e[E]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:o=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=o,appearActiveClass:c=r,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=e,m=a0(i),g=m&&m[0],p=m&&m[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:v,onLeave:w,onLeaveCancelled:x,onBeforeAppear:C=y,onAppear:D=_,onAppearCancelled:P=v}=t,$=(E,R,et,nt)=>{E._enterCancelled=nt,Rs(E,R?u:a),Rs(E,R?c:r),et&&et()},U=(E,R)=>{E._isLeaving=!1,Rs(E,d),Rs(E,f),Rs(E,h),R&&R()},L=E=>(R,et)=>{const nt=E?D:_,it=()=>$(R,E,et);cn(nt,[R,it]),Ku(()=>{Rs(R,E?l:o),es(R,E?u:a),Zu(nt)||Gu(R,n,g,it)})};return Zt(t,{onBeforeEnter(E){cn(y,[E]),es(E,o),es(E,r)},onBeforeAppear(E){cn(C,[E]),es(E,l),es(E,c)},onEnter:L(!1),onAppear:L(!0),onLeave(E,R){E._isLeaving=!0;const et=()=>U(E,R);es(E,d),E._enterCancelled?(es(E,h),zl()):(zl(),es(E,h)),Ku(()=>{E._isLeaving&&(Rs(E,d),es(E,f),Zu(w)||Gu(E,n,p,et))}),cn(w,[E,et])},onEnterCancelled(E){$(E,!1,void 0,!0),cn(v,[E])},onAppearCancelled(E){$(E,!0,void 0,!0),cn(P,[E])},onLeaveCancelled(E){U(E),cn(x,[E])}})}function a0(e){if(e==null)return null;if(Lt(e))return[Ja(e.enter),Ja(e.leave)];{const t=Ja(e);return[t,t]}}function Ja(e){return db(e)}function es(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[bi]||(e[bi]=new Set)).add(t)}function Rs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[bi];s&&(s.delete(t),s.size||(e[bi]=void 0))}function Ku(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let l0=0;function Gu(e,t,s,n){const i=e._endId=++l0,o=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:r,timeout:a,propCount:l}=cg(e,t);if(!r)return n();const c=r+"end";let u=0;const d=()=>{e.removeEventListener(c,h),o()},h=f=>{f.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,h)}function cg(e,t){const s=window.getComputedStyle(e),n=m=>(s[m]||"").split(", "),i=n(`${Ps}Delay`),o=n(`${Ps}Duration`),r=Xu(i,o),a=n(`${Ni}Delay`),l=n(`${Ni}Duration`),c=Xu(a,l);let u=null,d=0,h=0;t===Ps?r>0&&(u=Ps,d=r,h=o.length):t===Ni?c>0&&(u=Ni,d=c,h=l.length):(d=Math.max(r,c),u=d>0?r>c?Ps:Ni:null,h=u?u===Ps?o.length:l.length:0);const f=u===Ps&&/\b(transform|all)(,|$)/.test(n(`${Ps}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Xu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Qu(s)+Qu(e[n])))}function Qu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function zl(){return document.body.offsetHeight}function c0(e,t,s){const n=e[bi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const qr=Symbol("_vod"),ug=Symbol("_vsh"),dg={beforeMount(e,{value:t},{transition:s}){e[qr]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):ji(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),ji(e,!0),n.enter(e)):n.leave(e,()=>{ji(e,!1)}):ji(e,t))},beforeUnmount(e,{value:t}){ji(e,t)}};function ji(e,t){e.style.display=t?e[qr]:"none",e[ug]=!t}const u0=Symbol(""),d0=/(^|;)\s*display\s*:/;function h0(e,t,s){const n=e.style,i=jt(s);let o=!1;if(s&&!i){if(t)if(jt(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Pr(n,a,"")}else for(const r in t)s[r]==null&&Pr(n,r,"");for(const r in s)r==="display"&&(o=!0),Pr(n,r,s[r])}else if(i){if(t!==s){const r=n[u0];r&&(s+=";"+r),n.cssText=s,o=d0.test(s)}}else t&&e.removeAttribute("style");qr in e&&(e[qr]=o?n.display:"",e[ug]&&(n.display="none"))}const td=/\s*!important$/;function Pr(e,t,s){if(Q(s))s.forEach(n=>Pr(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=f0(e,t);td.test(s)?e.setProperty(nn(n),s.replace(td,""),"important"):e[n]=s}}const ed=["Webkit","Moz","ms"],Ya={};function f0(e,t){const s=Ya[t];if(s)return s;let n=Xs(t);if(n!=="filter"&&n in e)return Ya[t]=n;n=am(n);for(let i=0;i<ed.length;i++){const o=ed[i]+n;if(o in e)return Ya[t]=o}return t}const sd="http://www.w3.org/1999/xlink";function nd(e,t,s,n,i,o=yb(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(sd,t.slice(6,t.length)):e.setAttributeNS(sd,t,s):s==null||o&&!lm(s)?e.removeAttribute(t):e.setAttribute(t,o?"":Cs(s)?String(s):s)}function id(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ag(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=lm(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function ii(e,t,s,n){e.addEventListener(t,s,n)}function m0(e,t,s,n){e.removeEventListener(t,s,n)}const od=Symbol("_vei");function g0(e,t,s,n,i=null){const o=e[od]||(e[od]={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=p0(t);if(n){const c=o[t]=v0(n,i);ii(e,a,c,l)}else r&&(m0(e,a,r,l),o[t]=void 0)}}const rd=/(?:Once|Passive|Capture)$/;function p0(e){let t;if(rd.test(e)){t={};let n;for(;n=e.match(rd);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):nn(e.slice(2)),t]}let Za=0;const y0=Promise.resolve(),b0=()=>Za||(y0.then(()=>Za=0),Za=Date.now());function v0(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ye(_0(n,s.value),t,5,[n])};return s.value=e,s.attached=b0(),s}function _0(e,t){if(Q(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const ad=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,w0=(e,t,s,n,i,o)=>{const r=i==="svg";t==="class"?c0(e,n,r):t==="style"?h0(e,s,n):ca(t)?Cc(t)||g0(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):x0(e,t,n,r))?(id(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&nd(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!jt(n))?id(e,Xs(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),nd(e,t,n,r))};function x0(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ad(t)&&dt(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ad(t)&&jt(s)?!1:t in e}const hg=new WeakMap,fg=new WeakMap,Jr=Symbol("_moveCb"),ld=Symbol("_enterCb"),S0=e=>(delete e.props.mode,e),k0=S0({name:"TransitionGroup",props:Zt({},o0,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=ig(),n=Qb();let i,o;return Rm(()=>{if(!i.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!C0(i[0].el,s.vnode.el,r)){i=[];return}i.forEach(O0),i.forEach(D0);const a=i.filter(M0);zl(),a.forEach(l=>{const c=l.el,u=c.style;es(c,r),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Jr]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[Jr]=null,Rs(c,r))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const r=_t(e),a=r0(r);let l=r.tag||rt;if(i=[],o)for(let c=0;c<o.length;c++){const u=o[c];u.el&&u.el instanceof Element&&(i.push(u),To(u,Rl(u,a,n,s)),hg.set(u,u.el.getBoundingClientRect()))}o=t.default?Im(t.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&To(u,Rl(u,a,n,s))}return ut(l,null,o)}}}),T0=k0;function O0(e){const t=e.el;t[Jr]&&t[Jr](),t[ld]&&t[ld]()}function D0(e){fg.set(e,e.el.getBoundingClientRect())}function M0(e){const t=hg.get(e),s=fg.get(e),n=t.left-s.left,i=t.top-s.top;if(n||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${i}px)`,o.transitionDuration="0s",e}}function C0(e,t,s){const n=e.cloneNode(),i=e[bi];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(n);const{hasTransform:r}=cg(n);return o.removeChild(n),r}const cd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?s=>Cr(t,s):t};function E0(e){e.target.composing=!0}function ud(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ka=Symbol("_assign"),mg={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[Ka]=cd(i);const o=n||i.props&&i.props.type==="number";ii(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=El(a)),e[Ka](a)}),s&&ii(e,"change",()=>{e.value=e.value.trim()}),t||(ii(e,"compositionstart",E0),ii(e,"compositionend",ud),ii(e,"change",ud))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(e[Ka]=cd(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?El(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},A0=["ctrl","shift","alt","meta"],I0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>A0.some(s=>e[`${s}Key`]&&!t.includes(s))},Ga=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<t.length;r++){const a=I0[t[r]];if(a&&a(i,t))return}return e(i,...o)})},P0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dd=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const o=nn(i.key);if(t.some(r=>r===o||P0[r]===o))return e(i)})},L0=Zt({patchProp:w0},i0);let hd;function $0(){return hd||(hd=Mv(L0))}const R0=(...e)=>{const t=$0().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=N0(n);if(!i)return;const o=t._component;!dt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,F0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function F0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function N0(e){return jt(e)?document.querySelector(e):e}class An extends Error{}class j0 extends An{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class B0 extends An{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class W0 extends An{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ai extends An{}class gg extends An{constructor(t){super(`Invalid unit ${t}`)}}class se extends An{}class Ls extends An{constructor(){super("Zone is an abstract class")}}const H="numeric",Ze="short",Ae="long",Yr={year:H,month:H,day:H},pg={year:H,month:Ze,day:H},U0={year:H,month:Ze,day:H,weekday:Ze},yg={year:H,month:Ae,day:H},bg={year:H,month:Ae,day:H,weekday:Ae},vg={hour:H,minute:H},_g={hour:H,minute:H,second:H},wg={hour:H,minute:H,second:H,timeZoneName:Ze},xg={hour:H,minute:H,second:H,timeZoneName:Ae},Sg={hour:H,minute:H,hourCycle:"h23"},kg={hour:H,minute:H,second:H,hourCycle:"h23"},Tg={hour:H,minute:H,second:H,hourCycle:"h23",timeZoneName:Ze},Og={hour:H,minute:H,second:H,hourCycle:"h23",timeZoneName:Ae},Dg={year:H,month:H,day:H,hour:H,minute:H},Mg={year:H,month:H,day:H,hour:H,minute:H,second:H},Cg={year:H,month:Ze,day:H,hour:H,minute:H},Eg={year:H,month:Ze,day:H,hour:H,minute:H,second:H},z0={year:H,month:Ze,day:H,weekday:Ze,hour:H,minute:H},Ag={year:H,month:Ae,day:H,hour:H,minute:H,timeZoneName:Ze},Ig={year:H,month:Ae,day:H,hour:H,minute:H,second:H,timeZoneName:Ze},Pg={year:H,month:Ae,day:H,weekday:Ae,hour:H,minute:H,timeZoneName:Ae},Lg={year:H,month:Ae,day:H,weekday:Ae,hour:H,minute:H,second:H,timeZoneName:Ae};class No{get type(){throw new Ls}get name(){throw new Ls}get ianaName(){return this.name}get isUniversal(){throw new Ls}offsetName(t,s){throw new Ls}formatOffset(t,s){throw new Ls}offset(t){throw new Ls}equals(t){throw new Ls}get isValid(){throw new Ls}}let Xa=null;class _a extends No{static get instance(){return Xa===null&&(Xa=new _a),Xa}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return Vg(t,s,n)}formatOffset(t,s){return ho(this.offset(t),s)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const Hl=new Map;function H0(e){let t=Hl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Hl.set(e,t)),t}const V0={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function q0(e,t){const s=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,i,o,r,a,l,c,u]=n;return[r,i,o,a,l,c,u]}function J0(e,t){const s=e.formatToParts(t),n=[];for(let i=0;i<s.length;i++){const{type:o,value:r}=s[i],a=V0[o];o==="era"?n[a]=r:tt(a)||(n[a]=parseInt(r,10))}return n}const Qa=new Map;class Os extends No{static create(t){let s=Qa.get(t);return s===void 0&&Qa.set(t,s=new Os(t)),s}static resetCache(){Qa.clear(),Hl.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Os.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:s,locale:n}){return Vg(t,s,n,this.name)}formatOffset(t,s){return ho(this.offset(t),s)}offset(t){if(!this.valid)return NaN;const s=new Date(t);if(isNaN(s))return NaN;const n=H0(this.name);let[i,o,r,a,l,c,u]=n.formatToParts?J0(n,s):q0(n,s);a==="BC"&&(i=-Math.abs(i)+1);const h=xa({year:i,month:o,day:r,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+s;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let fd={};function Y0(e,t={}){const s=JSON.stringify([e,t]);let n=fd[s];return n||(n=new Intl.ListFormat(e,t),fd[s]=n),n}const Vl=new Map;function ql(e,t={}){const s=JSON.stringify([e,t]);let n=Vl.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(e,t),Vl.set(s,n)),n}const Jl=new Map;function Z0(e,t={}){const s=JSON.stringify([e,t]);let n=Jl.get(s);return n===void 0&&(n=new Intl.NumberFormat(e,t),Jl.set(s,n)),n}const Yl=new Map;function K0(e,t={}){const{base:s,...n}=t,i=JSON.stringify([e,n]);let o=Yl.get(i);return o===void 0&&(o=new Intl.RelativeTimeFormat(e,t),Yl.set(i,o)),o}let Gi=null;function G0(){return Gi||(Gi=new Intl.DateTimeFormat().resolvedOptions().locale,Gi)}const Zl=new Map;function $g(e){let t=Zl.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),Zl.set(e,t)),t}const Kl=new Map;function X0(e){let t=Kl.get(e);if(!t){const s=new Intl.Locale(e);t="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in t||(t={...Rg,...t}),Kl.set(e,t)}return t}function Q0(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const s=e.indexOf("-u-");if(s===-1)return[e];{let n,i;try{n=ql(e).resolvedOptions(),i=e}catch{const l=e.substring(0,s);n=ql(l).resolvedOptions(),i=l}const{numberingSystem:o,calendar:r}=n;return[i,o,r]}}function t_(e,t,s){return(s||t)&&(e.includes("-u-")||(e+="-u"),s&&(e+=`-ca-${s}`),t&&(e+=`-nu-${t}`)),e}function e_(e){const t=[];for(let s=1;s<=12;s++){const n=O.utc(2009,s,1);t.push(e(n))}return t}function s_(e){const t=[];for(let s=1;s<=7;s++){const n=O.utc(2016,11,13+s);t.push(e(n))}return t}function ir(e,t,s,n){const i=e.listingMode();return i==="error"?null:i==="en"?s(t):n(t)}function n_(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||$g(e.locale).numberingSystem==="latn"}class i_{constructor(t,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:o,...r}=n;if(!s||Object.keys(r).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Z0(t,a)}}format(t){if(this.inf){const s=this.floor?Math.floor(t):t;return this.inf.format(s)}else{const s=this.floor?Math.floor(t):Yc(t,3);return Bt(s,this.padTo)}}}class o_{constructor(t,s,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const r=-1*(t.offset/60),a=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;t.offset!==0&&Os.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=ql(s,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class r_{constructor(t,s,n){this.opts={style:"long",...n},!s&&zg()&&(this.rtf=K0(t,n))}format(t,s){return this.rtf?this.rtf.format(t,s):M_(s,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,s){return this.rtf?this.rtf.formatToParts(t,s):[]}}const Rg={firstDay:1,minimalDays:4,weekend:[6,7]};class xt{static fromOpts(t){return xt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,s,n,i,o=!1){const r=t||Ft.defaultLocale,a=r||(o?"en-US":G0()),l=s||Ft.defaultNumberingSystem,c=n||Ft.defaultOutputCalendar,u=Xl(i)||Ft.defaultWeekSettings;return new xt(a,l,c,u,r)}static resetCache(){Gi=null,Vl.clear(),Jl.clear(),Yl.clear(),Zl.clear(),Kl.clear()}static fromObject({locale:t,numberingSystem:s,outputCalendar:n,weekSettings:i}={}){return xt.create(t,s,n,i)}constructor(t,s,n,i,o){const[r,a,l]=Q0(t);this.locale=r,this.numberingSystem=s||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=t_(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=n_(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&s?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:xt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Xl(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,s=!1){return ir(this,t,Yg,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");s&=!n;const i=s?{month:t,day:"numeric"}:{month:t},o=s?"format":"standalone";if(!this.monthsCache[o][t]){const r=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[o][t]=e_(r)}return this.monthsCache[o][t]})}weekdays(t,s=!1){return ir(this,t,Gg,()=>{const n=s?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=s?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=s_(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return ir(this,void 0,()=>Xg,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[O.utc(2016,11,13,9),O.utc(2016,11,13,19)].map(s=>this.extract(s,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ir(this,t,Qg,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[O.utc(-40,1,1),O.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[t]})}extract(t,s,n){const i=this.dtFormatter(t,s),o=i.formatToParts(),r=o.find(a=>a.type.toLowerCase()===n);return r?r.value:null}numberFormatter(t={}){return new i_(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,s={}){return new o_(t,this.intl,s)}relFormatter(t={}){return new r_(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Y0(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||$g(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Hg()?X0(this.locale):Rg}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let tl=null;class he extends No{static get utcInstance(){return tl===null&&(tl=new he(0)),tl}static instance(t){return t===0?he.utcInstance:new he(t)}static parseSpecifier(t){if(t){const s=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new he(Sa(s[1],s[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ho(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ho(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,s){return ho(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class a_ extends No{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Us(e,t){if(tt(e)||e===null)return t;if(e instanceof No)return e;if(f_(e)){const s=e.toLowerCase();return s==="default"?t:s==="local"||s==="system"?_a.instance:s==="utc"||s==="gmt"?he.utcInstance:he.parseSpecifier(s)||Os.create(e)}else return Zs(e)?he.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new a_(e)}const Hc={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},md={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},l_=Hc.hanidec.replace(/[\[|\]]/g,"").split("");function c_(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(e[s].search(Hc.hanidec)!==-1)t+=l_.indexOf(e[s]);else for(const i in md){const[o,r]=md[i];n>=o&&n<=r&&(t+=n-o)}}return parseInt(t,10)}else return t}const Gl=new Map;function u_(){Gl.clear()}function Ue({numberingSystem:e},t=""){const s=e||"latn";let n=Gl.get(s);n===void 0&&(n=new Map,Gl.set(s,n));let i=n.get(t);return i===void 0&&(i=new RegExp(`${Hc[s]}${t}`),n.set(t,i)),i}let gd=()=>Date.now(),pd="system",yd=null,bd=null,vd=null,_d=60,wd,xd=null;class Ft{static get now(){return gd}static set now(t){gd=t}static set defaultZone(t){pd=t}static get defaultZone(){return Us(pd,_a.instance)}static get defaultLocale(){return yd}static set defaultLocale(t){yd=t}static get defaultNumberingSystem(){return bd}static set defaultNumberingSystem(t){bd=t}static get defaultOutputCalendar(){return vd}static set defaultOutputCalendar(t){vd=t}static get defaultWeekSettings(){return xd}static set defaultWeekSettings(t){xd=Xl(t)}static get twoDigitCutoffYear(){return _d}static set twoDigitCutoffYear(t){_d=t%100}static get throwOnInvalid(){return wd}static set throwOnInvalid(t){wd=t}static resetCaches(){xt.resetCache(),Os.resetCache(),O.resetCache(),u_()}}class qe{constructor(t,s){this.reason=t,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Fg=[0,31,59,90,120,151,181,212,243,273,304,334],Ng=[0,31,60,91,121,152,182,213,244,274,305,335];function Ne(e,t){return new qe("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Vc(e,t,s){const n=new Date(Date.UTC(e,t-1,s));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function jg(e,t,s){return s+(jo(e)?Ng:Fg)[t-1]}function Bg(e,t){const s=jo(e)?Ng:Fg,n=s.findIndex(o=>o<t),i=t-s[n];return{month:n+1,day:i}}function qc(e,t){return(e-t+7)%7+1}function Zr(e,t=4,s=1){const{year:n,month:i,day:o}=e,r=jg(n,i,o),a=qc(Vc(n,i,o),s);let l=Math.floor((r-a+14-t)/7),c;return l<1?(c=n-1,l=Mo(c,t,s)):l>Mo(n,t,s)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,...ka(e)}}function Sd(e,t=4,s=1){const{weekYear:n,weekNumber:i,weekday:o}=e,r=qc(Vc(n,1,t),s),a=gi(n);let l=i*7+o-r-7+t,c;l<1?(c=n-1,l+=gi(c)):l>a?(c=n+1,l-=gi(n)):c=n;const{month:u,day:d}=Bg(c,l);return{year:c,month:u,day:d,...ka(e)}}function el(e){const{year:t,month:s,day:n}=e,i=jg(t,s,n);return{year:t,ordinal:i,...ka(e)}}function kd(e){const{year:t,ordinal:s}=e,{month:n,day:i}=Bg(t,s);return{year:t,month:n,day:i,...ka(e)}}function Td(e,t){if(!tt(e.localWeekday)||!tt(e.localWeekNumber)||!tt(e.localWeekYear)){if(!tt(e.weekday)||!tt(e.weekNumber)||!tt(e.weekYear))throw new ai("Cannot mix locale-based week fields with ISO-based week fields");return tt(e.localWeekday)||(e.weekday=e.localWeekday),tt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),tt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function d_(e,t=4,s=1){const n=wa(e.weekYear),i=je(e.weekNumber,1,Mo(e.weekYear,t,s)),o=je(e.weekday,1,7);return n?i?o?!1:Ne("weekday",e.weekday):Ne("week",e.weekNumber):Ne("weekYear",e.weekYear)}function h_(e){const t=wa(e.year),s=je(e.ordinal,1,gi(e.year));return t?s?!1:Ne("ordinal",e.ordinal):Ne("year",e.year)}function Wg(e){const t=wa(e.year),s=je(e.month,1,12),n=je(e.day,1,Kr(e.year,e.month));return t?s?n?!1:Ne("day",e.day):Ne("month",e.month):Ne("year",e.year)}function Ug(e){const{hour:t,minute:s,second:n,millisecond:i}=e,o=je(t,0,23)||t===24&&s===0&&n===0&&i===0,r=je(s,0,59),a=je(n,0,59),l=je(i,0,999);return o?r?a?l?!1:Ne("millisecond",i):Ne("second",n):Ne("minute",s):Ne("hour",t)}function tt(e){return typeof e>"u"}function Zs(e){return typeof e=="number"}function wa(e){return typeof e=="number"&&e%1===0}function f_(e){return typeof e=="string"}function m_(e){return Object.prototype.toString.call(e)==="[object Date]"}function zg(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Hg(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function g_(e){return Array.isArray(e)?e:[e]}function Od(e,t,s){if(e.length!==0)return e.reduce((n,i)=>{const o=[t(i),i];return n&&s(n[0],o[0])===n[0]?n:o},null)[1]}function p_(e,t){return t.reduce((s,n)=>(s[n]=e[n],s),{})}function vi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xl(e){if(e==null)return null;if(typeof e!="object")throw new se("Week settings must be an object");if(!je(e.firstDay,1,7)||!je(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!je(t,1,7)))throw new se("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function je(e,t,s){return wa(e)&&e>=t&&e<=s}function y_(e,t){return e-t*Math.floor(e/t)}function Bt(e,t=2){const s=e<0;let n;return s?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function Ws(e){if(!(tt(e)||e===null||e===""))return parseInt(e,10)}function un(e){if(!(tt(e)||e===null||e===""))return parseFloat(e)}function Jc(e){if(!(tt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Yc(e,t,s="round"){const n=10**t;switch(s){case"expand":return e>0?Math.ceil(e*n)/n:Math.floor(e*n)/n;case"trunc":return Math.trunc(e*n)/n;case"round":return Math.round(e*n)/n;case"floor":return Math.floor(e*n)/n;case"ceil":return Math.ceil(e*n)/n;default:throw new RangeError(`Value rounding ${s} is out of range`)}}function jo(e){return e%4===0&&(e%100!==0||e%400===0)}function gi(e){return jo(e)?366:365}function Kr(e,t){const s=y_(t-1,12)+1,n=e+(t-s)/12;return s===2?jo(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function xa(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Dd(e,t,s){return-qc(Vc(e,1,t),s)+t-1}function Mo(e,t=4,s=1){const n=Dd(e,t,s),i=Dd(e+1,t,s);return(gi(e)-n+i)/7}function Ql(e){return e>99?e:e>Ft.twoDigitCutoffYear?1900+e:2e3+e}function Vg(e,t,s,n=null){const i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);const r={timeZoneName:t,...o},a=new Intl.DateTimeFormat(s,r).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Sa(e,t){let s=parseInt(e,10);Number.isNaN(s)&&(s=0);const n=parseInt(t,10)||0,i=s<0||Object.is(s,-0)?-n:n;return s*60+i}function qg(e){const t=Number(e);if(typeof e=="boolean"||e===""||!Number.isFinite(t))throw new se(`Invalid unit value ${e}`);return t}function Gr(e,t){const s={};for(const n in e)if(vi(e,n)){const i=e[n];if(i==null)continue;s[t(n)]=qg(i)}return s}function ho(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Bt(s,2)}:${Bt(n,2)}`;case"narrow":return`${i}${s}${n>0?`:${n}`:""}`;case"techie":return`${i}${Bt(s,2)}${Bt(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function ka(e){return p_(e,["hour","minute","second","millisecond"])}const b_=["January","February","March","April","May","June","July","August","September","October","November","December"],Jg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v_=["J","F","M","A","M","J","J","A","S","O","N","D"];function Yg(e){switch(e){case"narrow":return[...v_];case"short":return[...Jg];case"long":return[...b_];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Zg=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Kg=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],__=["M","T","W","T","F","S","S"];function Gg(e){switch(e){case"narrow":return[...__];case"short":return[...Kg];case"long":return[...Zg];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Xg=["AM","PM"],w_=["Before Christ","Anno Domini"],x_=["BC","AD"],S_=["B","A"];function Qg(e){switch(e){case"narrow":return[...S_];case"short":return[...x_];case"long":return[...w_];default:return null}}function k_(e){return Xg[e.hour<12?0:1]}function T_(e,t){return Gg(t)[e.weekday-1]}function O_(e,t){return Yg(t)[e.month-1]}function D_(e,t){return Qg(t)[e.year<0?0:1]}function M_(e,t,s="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(s==="auto"&&o){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${i[e][0]}`;case-1:return d?"yesterday":`last ${i[e][0]}`;case 0:return d?"today":`this ${i[e][0]}`}}const r=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],u=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return r?`${a} ${u} ago`:`in ${a} ${u}`}function Md(e,t){let s="";for(const n of e)n.literal?s+=n.val:s+=t(n.val);return s}const C_={D:Yr,DD:pg,DDD:yg,DDDD:bg,t:vg,tt:_g,ttt:wg,tttt:xg,T:Sg,TT:kg,TTT:Tg,TTTT:Og,f:Dg,ff:Cg,fff:Ag,ffff:Pg,F:Mg,FF:Eg,FFF:Ig,FFFF:Lg};class ie{static create(t,s={}){return new ie(t,s)}static parseFormat(t){let s=null,n="",i=!1;const o=[];for(let r=0;r<t.length;r++){const a=t.charAt(r);a==="'"?((n.length>0||i)&&o.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),s=null,n="",i=!i):i||a===s?n+=a:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=a,s=a)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(t){return C_[t]}constructor(t,s){this.opts=s,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...s}).format()}dtFormatter(t,s={}){return this.loc.dtFormatter(t,{...this.opts,...s})}formatDateTime(t,s){return this.dtFormatter(t,s).format()}formatDateTimeParts(t,s){return this.dtFormatter(t,s).formatToParts()}formatInterval(t,s){return this.dtFormatter(t.start,s).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,s){return this.dtFormatter(t,s).resolvedOptions()}num(t,s=0,n=void 0){if(this.opts.forceSimple)return Bt(t,s);const i={...this.opts};return s>0&&(i.padTo=s),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,s){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(f,m)=>this.loc.extract(t,f,m),r=f=>t.isOffsetFixed&&t.offset===0&&f.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,f.format):"",a=()=>n?k_(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,m)=>n?O_(t,f):o(m?{month:f}:{month:f,day:"numeric"},"month"),c=(f,m)=>n?T_(t,f):o(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=ie.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(t,m):f},d=f=>n?D_(t,f):o({era:f},"era"),h=f=>{switch(f){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?o({day:"numeric"},"day"):this.num(t.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(t.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(t.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(f)}};return Md(ie.parseFormat(s),h)}formatDurationFromString(t,s){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},o=(u,d)=>h=>{const f=i(h);if(f){const m=d.isNegativeDuration&&f!==d.largestUnit?n:1;let g;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(u.get(f)*m,h.length,g)}else return h},r=ie.parseFormat(s),a=r.reduce((u,{literal:d,val:h})=>d?u:u.concat(h),[]),l=t.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Md(r,o(l,c))}}const tp=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Oi(...e){const t=e.reduce((s,n)=>s+n.source,"");return RegExp(`^${t}$`)}function Di(...e){return t=>e.reduce(([s,n,i],o)=>{const[r,a,l]=o(t,i);return[{...s,...r},a||n,l]},[{},null,1]).slice(0,2)}function Mi(e,...t){if(e==null)return[null,null];for(const[s,n]of t){const i=s.exec(e);if(i)return n(i)}return[null,null]}function ep(...e){return(t,s)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=Ws(t[s+i]);return[n,null,s+i]}}const sp=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,E_=`(?:${sp.source}?(?:\\[(${tp.source})\\])?)?`,Zc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,np=RegExp(`${Zc.source}${E_}`),Kc=RegExp(`(?:[Tt]${np.source})?`),A_=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,I_=/(\d{4})-?W(\d\d)(?:-?(\d))?/,P_=/(\d{4})-?(\d{3})/,L_=ep("weekYear","weekNumber","weekDay"),$_=ep("year","ordinal"),R_=/(\d{4})-(\d\d)-(\d\d)/,ip=RegExp(`${Zc.source} ?(?:${sp.source}|(${tp.source}))?`),F_=RegExp(`(?: ${ip.source})?`);function pi(e,t,s){const n=e[t];return tt(n)?s:Ws(n)}function N_(e,t){return[{year:pi(e,t),month:pi(e,t+1,1),day:pi(e,t+2,1)},null,t+3]}function Ci(e,t){return[{hours:pi(e,t,0),minutes:pi(e,t+1,0),seconds:pi(e,t+2,0),milliseconds:Jc(e[t+3])},null,t+4]}function Bo(e,t){const s=!e[t]&&!e[t+1],n=Sa(e[t+1],e[t+2]),i=s?null:he.instance(n);return[{},i,t+3]}function Wo(e,t){const s=e[t]?Os.create(e[t]):null;return[{},s,t+1]}const j_=RegExp(`^T?${Zc.source}$`),B_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function W_(e){const[t,s,n,i,o,r,a,l,c]=e,u=t[0]==="-",d=l&&l[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(un(s)),months:h(un(n)),weeks:h(un(i)),days:h(un(o)),hours:h(un(r)),minutes:h(un(a)),seconds:h(un(l),l==="-0"),milliseconds:h(Jc(c),d)}]}const U_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Gc(e,t,s,n,i,o,r){const a={year:t.length===2?Ql(Ws(t)):Ws(t),month:Jg.indexOf(s)+1,day:Ws(n),hour:Ws(i),minute:Ws(o)};return r&&(a.second=Ws(r)),e&&(a.weekday=e.length>3?Zg.indexOf(e)+1:Kg.indexOf(e)+1),a}const z_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function H_(e){const[,t,s,n,i,o,r,a,l,c,u,d]=e,h=Gc(t,i,n,s,o,r,a);let f;return l?f=U_[l]:c?f=0:f=Sa(u,d),[h,new he(f)]}function V_(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const q_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,J_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Y_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Cd(e){const[,t,s,n,i,o,r,a]=e;return[Gc(t,i,n,s,o,r,a),he.utcInstance]}function Z_(e){const[,t,s,n,i,o,r,a]=e;return[Gc(t,a,s,n,i,o,r),he.utcInstance]}const K_=Oi(A_,Kc),G_=Oi(I_,Kc),X_=Oi(P_,Kc),Q_=Oi(np),op=Di(N_,Ci,Bo,Wo),tw=Di(L_,Ci,Bo,Wo),ew=Di($_,Ci,Bo,Wo),sw=Di(Ci,Bo,Wo);function nw(e){return Mi(e,[K_,op],[G_,tw],[X_,ew],[Q_,sw])}function iw(e){return Mi(V_(e),[z_,H_])}function ow(e){return Mi(e,[q_,Cd],[J_,Cd],[Y_,Z_])}function rw(e){return Mi(e,[B_,W_])}const aw=Di(Ci);function lw(e){return Mi(e,[j_,aw])}const cw=Oi(R_,F_),uw=Oi(ip),dw=Di(Ci,Bo,Wo);function hw(e){return Mi(e,[cw,op],[uw,dw])}const Ed="Invalid Duration",rp={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},fw={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...rp},$e=146097/400,Un=146097/4800,mw={years:{quarters:4,months:12,weeks:$e/7,days:$e,hours:$e*24,minutes:$e*24*60,seconds:$e*24*60*60,milliseconds:$e*24*60*60*1e3},quarters:{months:3,weeks:$e/28,days:$e/4,hours:$e*24/4,minutes:$e*24*60/4,seconds:$e*24*60*60/4,milliseconds:$e*24*60*60*1e3/4},months:{weeks:Un/7,days:Un,hours:Un*24,minutes:Un*24*60,seconds:Un*24*60*60,milliseconds:Un*24*60*60*1e3},...rp},wn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gw=wn.slice(0).reverse();function ms(e,t,s=!1){const n={values:s?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new yt(n)}function ap(e,t){let s=t.milliseconds??0;for(const n of gw.slice(1))t[n]&&(s+=t[n]*e[n].milliseconds);return s}function Ad(e,t){const s=ap(e,t)<0?-1:1;wn.reduceRight((n,i)=>{if(tt(t[i]))return n;if(n){const o=t[n]*s,r=e[i][n],a=Math.floor(o/r);t[i]+=a*s,t[n]-=a*r*s}return i},null),wn.reduce((n,i)=>{if(tt(t[i]))return n;if(n){const o=t[n]%1;t[n]-=o,t[i]+=o*e[n][i]}return i},null)}function Id(e){const t={};for(const[s,n]of Object.entries(e))n!==0&&(t[s]=n);return t}class yt{constructor(t){const s=t.conversionAccuracy==="longterm"||!1;let n=s?mw:fw;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||xt.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,s){return yt.fromObject({milliseconds:t},s)}static fromObject(t,s={}){if(t==null||typeof t!="object")throw new se(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new yt({values:Gr(t,yt.normalizeUnit),loc:xt.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(t){if(Zs(t))return yt.fromMillis(t);if(yt.isDuration(t))return t;if(typeof t=="object")return yt.fromObject(t);throw new se(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,s){const[n]=rw(t);return n?yt.fromObject(n,s):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,s){const[n]=lw(t);return n?yt.fromObject(n,s):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,s=null){if(!t)throw new se("need to specify a reason the Duration is invalid");const n=t instanceof qe?t:new qe(t,s);if(Ft.throwOnInvalid)throw new W0(n);return new yt({invalid:n})}static normalizeUnit(t){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!s)throw new gg(t);return s}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?ie.create(this.loc,n).formatDurationFromString(this,t):Ed}toHuman(t={}){if(!this.isValid)return Ed;const s=t.showZeros!==!1,n=wn.map(i=>{const o=this.values[i];return tt(o)||o===0&&!s?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(o)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Yc(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},O.fromMillis(s,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ap(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t),n={};for(const i of wn)(vi(s.values,i)||vi(this.values,i))&&(n[i]=s.get(i)+this.get(i));return ms(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t);return this.plus(s.negate())}mapUnits(t){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=qg(t(this.values[n],n));return ms(this,{values:s},!0)}get(t){return this[yt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const s={...this.values,...Gr(t,yt.normalizeUnit)};return ms(this,{values:s})}reconfigure({locale:t,numberingSystem:s,conversionAccuracy:n,matrix:i}={}){const r={loc:this.loc.clone({locale:t,numberingSystem:s}),matrix:i,conversionAccuracy:n};return ms(this,r)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Ad(this.matrix,t),ms(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Id(this.normalize().shiftToAll().toObject());return ms(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(r=>yt.normalizeUnit(r));const s={},n={},i=this.toObject();let o;for(const r of wn)if(t.indexOf(r)>=0){o=r;let a=0;for(const c in n)a+=this.matrix[c][r]*n[c],n[c]=0;Zs(i[r])&&(a+=i[r]);const l=Math.trunc(a);s[r]=l,n[r]=(a*1e3-l*1e3)/1e3}else Zs(i[r])&&(n[r]=i[r]);for(const r in n)n[r]!==0&&(s[o]+=r===o?n[r]:n[r]/this.matrix[o][r]);return Ad(this.matrix,s),ms(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=this.values[s]===0?0:-this.values[s];return ms(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=Id(this.values);return ms(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function s(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of wn)if(!s(this.values[n],t.values[n]))return!1;return!0}}const zn="Invalid Interval";function pw(e,t){return!e||!e.isValid?Rt.invalid("missing or invalid start"):!t||!t.isValid?Rt.invalid("missing or invalid end"):t<e?Rt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Rt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,s=null){if(!t)throw new se("need to specify a reason the Interval is invalid");const n=t instanceof qe?t:new qe(t,s);if(Ft.throwOnInvalid)throw new B0(n);return new Rt({invalid:n})}static fromDateTimes(t,s){const n=Bi(t),i=Bi(s),o=pw(n,i);return o??new Rt({start:n,end:i})}static after(t,s){const n=yt.fromDurationLike(s),i=Bi(t);return Rt.fromDateTimes(i,i.plus(n))}static before(t,s){const n=yt.fromDurationLike(s),i=Bi(t);return Rt.fromDateTimes(i.minus(n),i)}static fromISO(t,s){const[n,i]=(t||"").split("/",2);if(n&&i){let o,r;try{o=O.fromISO(n,s),r=o.isValid}catch{r=!1}let a,l;try{a=O.fromISO(i,s),l=a.isValid}catch{l=!1}if(r&&l)return Rt.fromDateTimes(o,a);if(r){const c=yt.fromISO(i,s);if(c.isValid)return Rt.after(o,c)}else if(l){const c=yt.fromISO(n,s);if(c.isValid)return Rt.before(a,c)}}return Rt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(t,s);let i;return s?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,s),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:s}={}){return this.isValid?Rt.fromDateTimes(t||this.s,s||this.e):this}splitAt(...t){if(!this.isValid)return[];const s=t.map(Bi).filter(r=>this.contains(r)).sort((r,a)=>r.toMillis()-a.toMillis()),n=[];let{s:i}=this,o=0;for(;i<this.e;){const r=s[o]||this.e,a=+r>+this.e?this.e:r;n.push(Rt.fromDateTimes(i,a)),i=a,o+=1}return n}splitBy(t){const s=yt.fromDurationLike(t);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,i=1,o;const r=[];for(;n<this.e;){const a=this.start.plus(s.mapUnits(l=>l*i));o=+a>+this.e?this.e:a,r.push(Rt.fromDateTimes(n,o)),n=o,i+=1}return r}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const s=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return s>=n?null:Rt.fromDateTimes(s,n)}union(t){if(!this.isValid)return this;const s=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Rt.fromDateTimes(s,n)}static merge(t){const[s,n]=t.sort((i,o)=>i.s-o.s).reduce(([i,o],r)=>o?o.overlaps(r)||o.abutsStart(r)?[i,o.union(r)]:[i.concat([o]),r]:[i,r],[[],null]);return n&&s.push(n),s}static xor(t){let s=null,n=0;const i=[],o=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),r=Array.prototype.concat(...o),a=r.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?s=l.time:(s&&+s!=+l.time&&i.push(Rt.fromDateTimes(s,l.time)),s=null);return Rt.merge(i)}difference(...t){return Rt.xor([this].concat(t)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:zn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Yr,s={}){return this.isValid?ie.create(this.s.loc.clone(s),t).formatInterval(this):zn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:zn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:zn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:zn}toFormat(t,{separator:s="  "}={}){return this.isValid?`${this.s.toFormat(t)}${s}${this.e.toFormat(t)}`:zn}toDuration(t,s){return this.isValid?this.e.diff(this.s,t,s):yt.invalid(this.invalidReason)}mapEndpoints(t){return Rt.fromDateTimes(t(this.s),t(this.e))}}class or{static hasDST(t=Ft.defaultZone){const s=O.now().setZone(t).set({month:12});return!t.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(t){return Os.isValidZone(t)}static normalizeZone(t){return Us(t,Ft.defaultZone)}static getStartOfWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:s=null}={}){return(s||xt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||xt.create(s,n,o)).months(t)}static monthsFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||xt.create(s,n,o)).months(t,!0)}static weekdays(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:s=null,numberingSystem:n=null,locObj:i=null}={}){return(i||xt.create(s,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return xt.create(t).meridiems()}static eras(t="short",{locale:s=null}={}){return xt.create(s,null,"gregory").eras(t)}static features(){return{relative:zg(),localeWeek:Hg()}}}function Pd(e,t){const s=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(t)-s(e);return Math.floor(yt.fromMillis(n).as("days"))}function yw(e,t,s){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Pd(l,c);return(u-u%7)/7}],["days",Pd]],i={},o=e;let r,a;for(const[l,c]of n)s.indexOf(l)>=0&&(r=l,i[l]=c(e,t),a=o.plus(i),a>t?(i[l]--,e=o.plus(i),e>t&&(a=e,i[l]--,e=o.plus(i))):e=a);return[e,i,a,r]}function bw(e,t,s,n){let[i,o,r,a]=yw(e,t,s);const l=t-i,c=s.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(r<t&&(r=i.plus({[a]:1})),r!==i&&(o[a]=(o[a]||0)+l/(r-i)));const u=yt.fromObject(o,n);return c.length>0?yt.fromMillis(l,n).shiftTo(...c).plus(u):u}const vw="missing Intl.DateTimeFormat.formatToParts support";function vt(e,t=s=>s){return{regex:e,deser:([s])=>t(c_(s))}}const _w="",lp=`[ ${_w}]`,cp=new RegExp(lp,"g");function ww(e){return e.replace(/\./g,"\\.?").replace(cp,lp)}function Ld(e){return e.replace(/\./g,"").replace(cp," ").toLowerCase()}function ze(e,t){return e===null?null:{regex:RegExp(e.map(ww).join("|")),deser:([s])=>e.findIndex(n=>Ld(s)===Ld(n))+t}}function $d(e,t){return{regex:e,deser:([,s,n])=>Sa(s,n),groups:t}}function rr(e){return{regex:e,deser:([t])=>t}}function xw(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Sw(e,t){const s=Ue(t),n=Ue(t,"{2}"),i=Ue(t,"{3}"),o=Ue(t,"{4}"),r=Ue(t,"{6}"),a=Ue(t,"{1,2}"),l=Ue(t,"{1,3}"),c=Ue(t,"{1,6}"),u=Ue(t,"{1,9}"),d=Ue(t,"{2,4}"),h=Ue(t,"{4,6}"),f=p=>({regex:RegExp(xw(p.val)),deser:([y])=>y,literal:!0}),g=(p=>{if(e.literal)return f(p);switch(p.val){case"G":return ze(t.eras("short"),0);case"GG":return ze(t.eras("long"),0);case"y":return vt(c);case"yy":return vt(d,Ql);case"yyyy":return vt(o);case"yyyyy":return vt(h);case"yyyyyy":return vt(r);case"M":return vt(a);case"MM":return vt(n);case"MMM":return ze(t.months("short",!0),1);case"MMMM":return ze(t.months("long",!0),1);case"L":return vt(a);case"LL":return vt(n);case"LLL":return ze(t.months("short",!1),1);case"LLLL":return ze(t.months("long",!1),1);case"d":return vt(a);case"dd":return vt(n);case"o":return vt(l);case"ooo":return vt(i);case"HH":return vt(n);case"H":return vt(a);case"hh":return vt(n);case"h":return vt(a);case"mm":return vt(n);case"m":return vt(a);case"q":return vt(a);case"qq":return vt(n);case"s":return vt(a);case"ss":return vt(n);case"S":return vt(l);case"SSS":return vt(i);case"u":return rr(u);case"uu":return rr(a);case"uuu":return vt(s);case"a":return ze(t.meridiems(),0);case"kkkk":return vt(o);case"kk":return vt(d,Ql);case"W":return vt(a);case"WW":return vt(n);case"E":case"c":return vt(s);case"EEE":return ze(t.weekdays("short",!1),1);case"EEEE":return ze(t.weekdays("long",!1),1);case"ccc":return ze(t.weekdays("short",!0),1);case"cccc":return ze(t.weekdays("long",!0),1);case"Z":case"ZZ":return $d(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return $d(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return rr(/[a-z_+-/]{1,256}?/i);case" ":return rr(/[^\S\n\r]/);default:return f(p)}})(e)||{invalidReason:vw};return g.token=e,g}const kw={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Tw(e,t,s){const{type:n,value:i}=e;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const o=t[n];let r=n;n==="hour"&&(t.hour12!=null?r=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?r="hour12":r="hour24":r=s.hour12?"hour12":"hour24");let a=kw[r];if(typeof a=="object"&&(a=a[o]),a)return{literal:!1,val:a}}function Ow(e){return[`^${e.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,e]}function Dw(e,t,s){const n=e.match(t);if(n){const i={};let o=1;for(const r in s)if(vi(s,r)){const a=s[r],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(o,o+l))),o+=l}return[n,i]}else return[n,{}]}function Mw(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return tt(e.z)||(s=Os.create(e.z)),tt(e.Z)||(s||(s=new he(e.Z)),n=e.Z),tt(e.q)||(e.M=(e.q-1)*3+1),tt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),tt(e.u)||(e.S=Jc(e.u)),[Object.keys(e).reduce((o,r)=>{const a=t(r);return a&&(o[a]=e[r]),o},{}),s,n]}let sl=null;function Cw(){return sl||(sl=O.fromMillis(1555555555555)),sl}function Ew(e,t){if(e.literal)return e;const s=ie.macroTokenToFormatOpts(e.val),n=fp(s,t);return n==null||n.includes(void 0)?e:n}function up(e,t){return Array.prototype.concat(...e.map(s=>Ew(s,t)))}class dp{constructor(t,s){if(this.locale=t,this.format=s,this.tokens=up(ie.parseFormat(s),t),this.units=this.tokens.map(n=>Sw(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=Ow(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[s,n]=Dw(t,this.regex,this.handlers),[i,o,r]=n?Mw(n):[null,null,void 0];if(vi(n,"a")&&vi(n,"H"))throw new ai("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:i,zone:o,specificOffset:r}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function hp(e,t,s){return new dp(e,s).explainFromTokens(t)}function Aw(e,t,s){const{result:n,zone:i,specificOffset:o,invalidReason:r}=hp(e,t,s);return[n,i,o,r]}function fp(e,t){if(!e)return null;const n=ie.create(t,e).dtFormatter(Cw()),i=n.formatToParts(),o=n.resolvedOptions();return i.map(r=>Tw(r,e,o))}const nl="Invalid DateTime",Rd=864e13;function Xi(e){return new qe("unsupported zone",`the zone "${e.name}" is not supported`)}function il(e){return e.weekData===null&&(e.weekData=Zr(e.c)),e.weekData}function ol(e){return e.localWeekData===null&&(e.localWeekData=Zr(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function dn(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new O({...s,...t,old:s})}function mp(e,t,s){let n=e-t*60*1e3;const i=s.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const o=s.offset(n);return i===o?[n,i]:[e-Math.min(i,o)*60*1e3,Math.max(i,o)]}function ar(e,t){e+=t*60*1e3;const s=new Date(e);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function Lr(e,t,s){return mp(xa(e),t,s)}function Fd(e,t){const s=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:n,month:i,day:Math.min(e.c.day,Kr(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},r=yt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=xa(o);let[l,c]=mp(a,s,e.zone);return r!==0&&(l+=r,c=e.zone.offset(l)),{ts:l,o:c}}function Hn(e,t,s,n,i,o){const{setZone:r,zone:a}=s;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=O.fromObject(e,{...s,zone:l,specificOffset:o});return r?c:c.setZone(a)}else return O.invalid(new qe("unparsable",`the input "${i}" can't be parsed as ${n}`))}function lr(e,t,s=!0){return e.isValid?ie.create(xt.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(e,t):null}function rl(e,t,s){const n=e.c.year>9999||e.c.year<0;let i="";if(n&&e.c.year>=0&&(i+="+"),i+=Bt(e.c.year,n?6:4),s==="year")return i;if(t){if(i+="-",i+=Bt(e.c.month),s==="month")return i;i+="-"}else if(i+=Bt(e.c.month),s==="month")return i;return i+=Bt(e.c.day),i}function Nd(e,t,s,n,i,o,r){let a=!s||e.c.millisecond!==0||e.c.second!==0,l="";switch(r){case"day":case"month":case"year":break;default:if(l+=Bt(e.c.hour),r==="hour")break;if(t){if(l+=":",l+=Bt(e.c.minute),r==="minute")break;a&&(l+=":",l+=Bt(e.c.second))}else{if(l+=Bt(e.c.minute),r==="minute")break;a&&(l+=Bt(e.c.second))}if(r==="second")break;a&&(!n||e.c.millisecond!==0)&&(l+=".",l+=Bt(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&e.offset===0&&!o?l+="Z":e.o<0?(l+="-",l+=Bt(Math.trunc(-e.o/60)),l+=":",l+=Bt(Math.trunc(-e.o%60))):(l+="+",l+=Bt(Math.trunc(e.o/60)),l+=":",l+=Bt(Math.trunc(e.o%60)))),o&&(l+="["+e.zone.ianaName+"]"),l}const gp={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Iw={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Pw={ordinal:1,hour:0,minute:0,second:0,millisecond:0},$r=["year","month","day","hour","minute","second","millisecond"],Lw=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],$w=["year","ordinal","hour","minute","second","millisecond"];function Rr(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new gg(e);return t}function jd(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Rr(e)}}function Rw(e){if(Qi===void 0&&(Qi=Ft.now()),e.type!=="iana")return e.offset(Qi);const t=e.name;let s=tc.get(t);return s===void 0&&(s=e.offset(Qi),tc.set(t,s)),s}function Bd(e,t){const s=Us(t.zone,Ft.defaultZone);if(!s.isValid)return O.invalid(Xi(s));const n=xt.fromObject(t);let i,o;if(tt(e.year))i=Ft.now();else{for(const l of $r)tt(e[l])&&(e[l]=gp[l]);const r=Wg(e)||Ug(e);if(r)return O.invalid(r);const a=Rw(s);[i,o]=Lr(e,a,s)}return new O({ts:i,zone:s,loc:n,o})}function Wd(e,t,s){const n=tt(s.round)?!0:s.round,i=tt(s.rounding)?"trunc":s.rounding,o=(a,l)=>(a=Yc(a,n||s.calendary?0:2,s.calendary?"round":i),t.loc.clone(s).relFormatter(s).format(a,l)),r=a=>s.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a);if(s.unit)return o(r(s.unit),s.unit);for(const a of s.units){const l=r(a);if(Math.abs(l)>=1)return o(l,a)}return o(e>t?-0:0,s.units[s.units.length-1])}function Ud(e){let t={},s;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],s=Array.from(e).slice(0,e.length-1)):s=Array.from(e),[t,s]}let Qi;const tc=new Map;class O{constructor(t){const s=t.zone||Ft.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new qe("invalid input"):null)||(s.isValid?null:Xi(s));this.ts=tt(t.ts)?Ft.now():t.ts;let i=null,o=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(s))[i,o]=[t.old.c,t.old.o];else{const a=Zs(t.o)&&!t.old?t.o:s.offset(this.ts);i=ar(this.ts,a),n=Number.isNaN(i.year)?new qe("invalid input"):null,i=n?null:i,o=n?null:a}this._zone=s,this.loc=t.loc||xt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new O({})}static local(){const[t,s]=Ud(arguments),[n,i,o,r,a,l,c]=s;return Bd({year:n,month:i,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static utc(){const[t,s]=Ud(arguments),[n,i,o,r,a,l,c]=s;return t.zone=he.utcInstance,Bd({year:n,month:i,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,s={}){const n=m_(t)?t.valueOf():NaN;if(Number.isNaN(n))return O.invalid("invalid input");const i=Us(s.zone,Ft.defaultZone);return i.isValid?new O({ts:n,zone:i,loc:xt.fromObject(s)}):O.invalid(Xi(i))}static fromMillis(t,s={}){if(Zs(t))return t<-Rd||t>Rd?O.invalid("Timestamp out of range"):new O({ts:t,zone:Us(s.zone,Ft.defaultZone),loc:xt.fromObject(s)});throw new se(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,s={}){if(Zs(t))return new O({ts:t*1e3,zone:Us(s.zone,Ft.defaultZone),loc:xt.fromObject(s)});throw new se("fromSeconds requires a numerical input")}static fromObject(t,s={}){t=t||{};const n=Us(s.zone,Ft.defaultZone);if(!n.isValid)return O.invalid(Xi(n));const i=xt.fromObject(s),o=Gr(t,jd),{minDaysInFirstWeek:r,startOfWeek:a}=Td(o,i),l=Ft.now(),c=tt(s.specificOffset)?n.offset(l):s.specificOffset,u=!tt(o.ordinal),d=!tt(o.year),h=!tt(o.month)||!tt(o.day),f=d||h,m=o.weekYear||o.weekNumber;if((f||u)&&m)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new ai("Can't mix ordinal dates with month/day");const g=m||o.weekday&&!f;let p,y,_=ar(l,c);g?(p=Lw,y=Iw,_=Zr(_,r,a)):u?(p=$w,y=Pw,_=el(_)):(p=$r,y=gp);let v=!1;for(const U of p){const L=o[U];tt(L)?v?o[U]=y[U]:o[U]=_[U]:v=!0}const w=g?d_(o,r,a):u?h_(o):Wg(o),x=w||Ug(o);if(x)return O.invalid(x);const C=g?Sd(o,r,a):u?kd(o):o,[D,P]=Lr(C,c,n),$=new O({ts:D,zone:n,o:P,loc:i});return o.weekday&&f&&t.weekday!==$.weekday?O.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${$.toISO()}`):$.isValid?$:O.invalid($.invalid)}static fromISO(t,s={}){const[n,i]=nw(t);return Hn(n,i,s,"ISO 8601",t)}static fromRFC2822(t,s={}){const[n,i]=iw(t);return Hn(n,i,s,"RFC 2822",t)}static fromHTTP(t,s={}){const[n,i]=ow(t);return Hn(n,i,s,"HTTP",s)}static fromFormat(t,s,n={}){if(tt(t)||tt(s))throw new se("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[a,l,c,u]=Aw(r,t,s);return u?O.invalid(u):Hn(a,l,n,`format ${s}`,t,c)}static fromString(t,s,n={}){return O.fromFormat(t,s,n)}static fromSQL(t,s={}){const[n,i]=hw(t);return Hn(n,i,s,"SQL",t)}static invalid(t,s=null){if(!t)throw new se("need to specify a reason the DateTime is invalid");const n=t instanceof qe?t:new qe(t,s);if(Ft.throwOnInvalid)throw new j0(n);return new O({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,s={}){const n=fp(t,xt.fromObject(s));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,s={}){return up(ie.parseFormat(t),xt.fromObject(s)).map(i=>i.val).join("")}static resetCache(){Qi=void 0,tc.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?il(this).weekYear:NaN}get weekNumber(){return this.isValid?il(this).weekNumber:NaN}get weekday(){return this.isValid?il(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?ol(this).weekday:NaN}get localWeekNumber(){return this.isValid?ol(this).weekNumber:NaN}get localWeekYear(){return this.isValid?ol(this).weekYear:NaN}get ordinal(){return this.isValid?el(this.c).ordinal:NaN}get monthShort(){return this.isValid?or.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?or.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?or.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?or.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,s=6e4,n=xa(this.c),i=this.zone.offset(n-t),o=this.zone.offset(n+t),r=this.zone.offset(n-i*s),a=this.zone.offset(n-o*s);if(r===a)return[this];const l=n-r*s,c=n-a*s,u=ar(l,r),d=ar(c,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[dn(this,{ts:l}),dn(this,{ts:c})]:[this]}get isInLeapYear(){return jo(this.year)}get daysInMonth(){return Kr(this.year,this.month)}get daysInYear(){return this.isValid?gi(this.year):NaN}get weeksInWeekYear(){return this.isValid?Mo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Mo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:s,numberingSystem:n,calendar:i}=ie.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:i}}toUTC(t=0,s={}){return this.setZone(he.instance(t),s)}toLocal(){return this.setZone(Ft.defaultZone)}setZone(t,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(t=Us(t,Ft.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(s||n){const o=t.offset(this.ts),r=this.toObject();[i]=Lr(r,o,t)}return dn(this,{ts:i,zone:t})}else return O.invalid(Xi(t))}reconfigure({locale:t,numberingSystem:s,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:s,outputCalendar:n});return dn(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const s=Gr(t,jd),{minDaysInFirstWeek:n,startOfWeek:i}=Td(s,this.loc),o=!tt(s.weekYear)||!tt(s.weekNumber)||!tt(s.weekday),r=!tt(s.ordinal),a=!tt(s.year),l=!tt(s.month)||!tt(s.day),c=a||l,u=s.weekYear||s.weekNumber;if((c||r)&&u)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&r)throw new ai("Can't mix ordinal dates with month/day");let d;o?d=Sd({...Zr(this.c,n,i),...s},n,i):tt(s.ordinal)?(d={...this.toObject(),...s},tt(s.day)&&(d.day=Math.min(Kr(d.year,d.month),d.day))):d=kd({...el(this.c),...s});const[h,f]=Lr(d,this.o,this.zone);return dn(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t);return dn(this,Fd(this,s))}minus(t){if(!this.isValid)return this;const s=yt.fromDurationLike(t).negate();return dn(this,Fd(this,s))}startOf(t,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},i=yt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(s){const o=this.loc.getStartOfWeek(),{weekday:r}=this;r<o&&(n.weekNumber=this.weekNumber-1),n.weekday=o}else n.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)}endOf(t,s){return this.isValid?this.plus({[t]:1}).startOf(t,s).minus(1):this}toFormat(t,s={}){return this.isValid?ie.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,t):nl}toLocaleString(t=Yr,s={}){return this.isValid?ie.create(this.loc.clone(s),t).formatDateTime(this):nl}toLocaleParts(t={}){return this.isValid?ie.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=Rr(r);const a=t==="extended";let l=rl(this,a,r);return $r.indexOf(r)>=3&&(l+="T"),l+=Nd(this,a,s,n,i,o,r),l}toISODate({format:t="extended",precision:s="day"}={}){return this.isValid?rl(this,t==="extended",Rr(s)):null}toISOWeekDate(){return lr(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:r="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Rr(a),(i&&$r.indexOf(a)>=3?"T":"")+Nd(this,r==="extended",s,t,n,o,a)):null}toRFC2822(){return lr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return lr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?rl(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(s||t)&&(n&&(i+=" "),s?i+="z":t&&(i+="ZZ")),lr(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():nl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const s={...this.c};return t.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,s="milliseconds",n={}){if(!this.isValid||!t.isValid)return yt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=g_(s).map(yt.normalizeUnit),r=t.valueOf()>this.valueOf(),a=r?this:t,l=r?t:this,c=bw(a,l,o,i);return r?c.negate():c}diffNow(t="milliseconds",s={}){return this.diff(O.now(),t,s)}until(t){return this.isValid?Rt.fromDateTimes(this,t):this}hasSame(t,s,n){if(!this.isValid)return!1;const i=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(s,n)<=i&&i<=o.endOf(s,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const s=t.base||O.fromObject({},{zone:this.zone}),n=t.padding?this<s?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(i=t.unit,o=void 0),Wd(s,this.plus(n),{...t,numeric:"always",units:i,unit:o})}toRelativeCalendar(t={}){return this.isValid?Wd(t.base||O.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(O.isDateTime))throw new se("min requires all arguments be DateTimes");return Od(t,s=>s.valueOf(),Math.min)}static max(...t){if(!t.every(O.isDateTime))throw new se("max requires all arguments be DateTimes");return Od(t,s=>s.valueOf(),Math.max)}static fromFormatExplain(t,s,n={}){const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return hp(r,t,s)}static fromStringExplain(t,s,n={}){return O.fromFormatExplain(t,s,n)}static buildFormatParser(t,s={}){const{locale:n=null,numberingSystem:i=null}=s,o=xt.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new dp(o,t)}static fromFormatParser(t,s,n={}){if(tt(t)||tt(s))throw new se("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:o=null}=n,r=xt.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});if(!r.equals(s.locale))throw new se(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${s.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=s.explainFromTokens(t);return u?O.invalid(u):Hn(a,l,n,`format ${s.format}`,t,c)}static get DATE_SHORT(){return Yr}static get DATE_MED(){return pg}static get DATE_MED_WITH_WEEKDAY(){return U0}static get DATE_FULL(){return yg}static get DATE_HUGE(){return bg}static get TIME_SIMPLE(){return vg}static get TIME_WITH_SECONDS(){return _g}static get TIME_WITH_SHORT_OFFSET(){return wg}static get TIME_WITH_LONG_OFFSET(){return xg}static get TIME_24_SIMPLE(){return Sg}static get TIME_24_WITH_SECONDS(){return kg}static get TIME_24_WITH_SHORT_OFFSET(){return Tg}static get TIME_24_WITH_LONG_OFFSET(){return Og}static get DATETIME_SHORT(){return Dg}static get DATETIME_SHORT_WITH_SECONDS(){return Mg}static get DATETIME_MED(){return Cg}static get DATETIME_MED_WITH_SECONDS(){return Eg}static get DATETIME_MED_WITH_WEEKDAY(){return z0}static get DATETIME_FULL(){return Ag}static get DATETIME_FULL_WITH_SECONDS(){return Ig}static get DATETIME_HUGE(){return Pg}static get DATETIME_HUGE_WITH_SECONDS(){return Lg}}function Bi(e){if(O.isDateTime(e))return e;if(e&&e.valueOf&&Zs(e.valueOf()))return O.fromJSDate(e);if(e&&typeof e=="object")return O.fromObject(e);throw new se(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function Fw(e){const t=ot(e);return O.fromJSDate(t).setZone("Australia/Sydney").toFormat("d LLL yyyy")}function Nw(e){const t=O.fromJSDate(e).setZone("Australia/Sydney");return`${t.day}/${t.month}`}function jw(e){const t=O.now().setZone("Australia/Sydney"),s=O.fromJSDate(tn(e)).setZone("Australia/Sydney"),n=t.diff(s,["years","months","weeks","days"]).toObject(),i=[];if(n.years>=1){const o=Math.floor(n.years);i.push(`${o} year${o===1?"":"s"}`);const r=Math.floor(n.months);r>0&&i.push(`${r} month${r===1?"":"s"}`)}else if(n.months>=1){const o=Math.floor(n.months);i.push(`${o} month${o===1?"":"s"}`);const r=Math.floor(n.weeks);r>0&&i.push(`${r} week${r===1?"":"s"}`)}else if(n.weeks>=1){const o=Math.floor(n.weeks);i.push(`${o} week${o===1?"":"s"}`)}else{const o=Math.floor(n.days);i.push(`${o} day${o===1?"":"s"}`)}return i.join(", ")+" ago"}function In(e,{withMillis:t=!1}={}){const s=e instanceof Date?e:new Date(e);if(Number.isNaN(s.getTime()))throw new Error(`sydneyDayRangeUtcISO: invalid date (${String(e)})`);const n=O.fromJSDate(s,{zone:"Australia/Sydney"}).startOf("day"),i=n.plus({days:1}),o=t?{}:{suppressMilliseconds:!0};return{startUtcISO:n.toUTC().toISO(o),endUtcISO:i.toUTC().toISO(o)}}function Xc(e,t,{withMillis:s=!1}={}){const n=e instanceof Date?e:new Date(e),i=t instanceof Date?t:new Date(t),o=O.fromJSDate(n,{zone:"Australia/Sydney"}).startOf("day"),r=O.fromJSDate(i,{zone:"Australia/Sydney"}).startOf("day"),a=s?{}:{suppressMilliseconds:!0};return{startUtcISO:o.toUTC().toISO(a),endUtcISO:r.toUTC().toISO(a),startSydney:o,endSydney:r}}function Bw(e){return O.fromJSDate(tn(e)).setZone("Australia/Sydney").toFormat("d LLL yyyy, h:mma").toLowerCase()}function pp(){return O.local().setZone("Australia/Sydney").startOf("day").toJSDate()}function ot(e){return e instanceof Date?e:typeof e=="number"?new Date(e):typeof e=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(e)?O.fromISO(e):O.fromISO(e,{zone:"Australia/Sydney"})).toJSDate():null}function Ww(e){return O.fromJSDate(tn(e)).setZone("Australia/Sydney").toFormat("cccc d LLLL yyyy")}function Co(e){return O.fromJSDate(tn(e)).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function Jt(e){const t=O.fromJSDate(tn(e)).setZone("Australia/Sydney").startOf("day"),s=t.plus({days:1});return{startOfDay:t.toJSDate(),endOfDay:s.toJSDate()}}function cr(e,t){const s=O.fromJSDate(tn(e)).setZone("Australia/Sydney"),n=O.fromJSDate(tn(t)).setZone("Australia/Sydney");return s.hasSame(n,"day")}function fo(e){return ve(e).setZone("Australia/Sydney").toFormat("h:mma").toLowerCase()}function ec(e){const t=ve(e).setZone("Australia/Sydney");return`${t.toFormat("d LLL")}, ${t.toFormat("h:mma").toLowerCase()}`}function yp(e,t,s){const n=ve(e),i=t?ve(t):O.fromJSDate(tn(s)).setZone("Australia/Sydney").startOf("day").plus({days:1}),o=Math.max(0,i.toMillis()-n.toMillis());return Math.round(o/6e4)}function ve(e){return e instanceof Date?O.fromJSDate(e):typeof e=="number"?O.fromMillis(e):typeof e=="string"?/Z|[+\-]\d{2}:?\d{2}$/.test(e)?O.fromISO(e):O.fromISO(e,{zone:"utc"}):O.invalid("Unknown input")}function mo(e){const t=Math.round(e||0),s=Math.floor(t/60),n=t%60;return s>0&&n>0?`${s}h${n}m`:s>0?`${s}h`:`${n}m`}function bp(e){const t=Math.max(0,Math.round(e||0)),s=Math.floor(t/60),n=t%60;return s>0?`${s}h ${n}m`:`${n}m`}function tn(e){if(e instanceof Date)return e;if(typeof e=="number")return new Date(e);if(typeof e=="string"){const t=O.fromISO(e);return t.isValid?t.toJSDate():new Date(e)}return new Date(NaN)}const Pt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Uw={class:"date-header"},zw={class:"date-heading"},Hw={class:"date-nav"},Vw=["value"],qw={__name:"DateHeader",props:{selectedDate:{type:Date,default:()=>pp()}},emits:["update:selectedDate"],setup(e,{emit:t}){const s=e,n=t,i=Y({get:()=>s.selectedDate,set:u=>n("update:selectedDate",u)}),o=Y(()=>Ww(i.value)),r=Y(()=>O.fromJSDate(i.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function a(){const u=O.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.minus({days:1}).startOf("day").toJSDate()}function l(){const u=O.fromJSDate(i.value).setZone("Australia/Sydney");i.value=u.plus({days:1}).startOf("day").toJSDate()}function c(u){const d=u.target.value;d&&(i.value=O.fromISO(d,{zone:"Australia/Sydney"}).startOf("day").toJSDate())}return(u,d)=>(T(),M("header",Uw,[b("h1",zw,A(o.value),1),b("div",Hw,[b("button",{class:"icon-btn",type:"button",onClick:a,"aria-label":"Previous day",title:"Previous day"},d[0]||(d[0]=[b("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{d:"M15 6l-6 6 6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),b("input",{class:"date-input",type:"date",value:r.value,onInput:c},null,40,Vw),b("button",{class:"icon-btn",type:"button",onClick:l,"aria-label":"Next day",title:"Next day"},d[1]||(d[1]=[b("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{d:"M9 6l6 6-6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]))}},Jw=Pt(qw,[["__scopeId","data-v-5c7b6e77"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Uo(e){return e+.5|0}const Hs=(e,t,s)=>Math.max(Math.min(e,s),t);function to(e){return Hs(Uo(e*2.55),0,255)}function Ks(e){return Hs(Uo(e*255),0,255)}function ws(e){return Hs(Uo(e/2.55)/100,0,1)}function zd(e){return Hs(Uo(e*100),0,100)}const Re={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sc=[..."0123456789ABCDEF"],Yw=e=>sc[e&15],Zw=e=>sc[(e&240)>>4]+sc[e&15],ur=e=>(e&240)>>4===(e&15),Kw=e=>ur(e.r)&&ur(e.g)&&ur(e.b)&&ur(e.a);function Gw(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Re[e[1]]*17,g:255&Re[e[2]]*17,b:255&Re[e[3]]*17,a:t===5?Re[e[4]]*17:255}:(t===7||t===9)&&(s={r:Re[e[1]]<<4|Re[e[2]],g:Re[e[3]]<<4|Re[e[4]],b:Re[e[5]]<<4|Re[e[6]],a:t===9?Re[e[7]]<<4|Re[e[8]]:255})),s}const Xw=(e,t)=>e<255?t(e):"";function Qw(e){var t=Kw(e)?Yw:Zw;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Xw(e.a,t):void 0}const tx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vp(e,t,s){const n=t*Math.min(s,1-s),i=(o,r=(o+e/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function ex(e,t,s){const n=(i,o=(i+e/60)%6)=>s-s*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function sx(e,t,s){const n=vp(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function nx(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function Qc(e){const s=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=nx(s,n,i,u,o),l=l*60+.5),[l|0,c||0,a]}function tu(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Ks)}function eu(e,t,s){return tu(vp,e,t,s)}function ix(e,t,s){return tu(sx,e,t,s)}function ox(e,t,s){return tu(ex,e,t,s)}function _p(e){return(e%360+360)%360}function rx(e){const t=tx.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?to(+t[5]):Ks(+t[5]));const i=_p(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=ix(i,o,r):t[1]==="hsv"?n=ox(i,o,r):n=eu(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function ax(e,t){var s=Qc(e);s[0]=_p(s[0]+t),s=eu(s),e.r=s[0],e.g=s[1],e.b=s[2]}function lx(e){if(!e)return;const t=Qc(e),s=t[0],n=zd(t[1]),i=zd(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${ws(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Hd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cx(){const e={},t=Object.keys(Vd),s=Object.keys(Hd);let n,i,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,Hd[o]);o=parseInt(Vd[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let dr;function ux(e){dr||(dr=cx(),dr.transparent=[0,0,0,0]);const t=dr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const dx=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hx(e){const t=dx.exec(e);let s=255,n,i,o;if(t){if(t[7]!==n){const r=+t[7];s=t[8]?to(r):Hs(r*255,0,255)}return n=+t[1],i=+t[3],o=+t[5],n=255&(t[2]?to(n):Hs(n,0,255)),i=255&(t[4]?to(i):Hs(i,0,255)),o=255&(t[6]?to(o):Hs(o,0,255)),{r:n,g:i,b:o,a:s}}}function fx(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ws(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const al=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Vn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function mx(e,t,s){const n=Vn(ws(e.r)),i=Vn(ws(e.g)),o=Vn(ws(e.b));return{r:Ks(al(n+s*(Vn(ws(t.r))-n))),g:Ks(al(i+s*(Vn(ws(t.g))-i))),b:Ks(al(o+s*(Vn(ws(t.b))-o))),a:e.a+s*(t.a-e.a)}}function hr(e,t,s){if(e){let n=Qc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=eu(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function wp(e,t){return e&&Object.assign(t||{},e)}function qd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ks(e[3]))):(t=wp(e,{r:0,g:0,b:0,a:1}),t.a=Ks(t.a)),t}function gx(e){return e.charAt(0)==="r"?hx(e):rx(e)}class Eo{constructor(t){if(t instanceof Eo)return t;const s=typeof t;let n;s==="object"?n=qd(t):s==="string"&&(n=Gw(t)||ux(t)||gx(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=wp(this._rgb);return t&&(t.a=ws(t.a)),t}set rgb(t){this._rgb=qd(t)}rgbString(){return this._valid?fx(this._rgb):void 0}hexString(){return this._valid?Qw(this._rgb):void 0}hslString(){return this._valid?lx(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=mx(this._rgb,t._rgb,s)),this}clone(){return new Eo(this.rgb)}alpha(t){return this._rgb.a=Ks(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=Uo(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return hr(this._rgb,2,t),this}darken(t){return hr(this._rgb,2,-t),this}saturate(t){return hr(this._rgb,1,t),this}desaturate(t){return hr(this._rgb,1,-t),this}rotate(t){return ax(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gs(){}const px=(()=>{let e=0;return()=>e++})();function St(e){return e==null}function It(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ct(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Kt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ts(e,t){return Kt(e)?e:t}function at(e,t){return typeof e>"u"?t:e}const yx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,xp=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Dt(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function Tt(e,t,s,n){let i,o,r;if(It(e))for(o=e.length,i=0;i<o;i++)t.call(s,e[i],i);else if(ct(e))for(r=Object.keys(e),o=r.length,i=0;i<o;i++)t.call(s,e[r[i]],r[i])}function Xr(e,t){let s,n,i,o;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],o=t[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Qr(e){if(It(e))return e.map(Qr);if(ct(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=Qr(e[s[i]]);return t}return e}function Sp(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function bx(e,t,s,n){if(!Sp(e))return;const i=t[e],o=s[e];ct(i)&&ct(o)?Ao(i,o,n):t[e]=Qr(o)}function Ao(e,t,s){const n=It(t)?t:[t],i=n.length;if(!ct(e))return e;s=s||{};const o=s.merger||bx;let r;for(let a=0;a<i;++a){if(r=n[a],!ct(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,s)}return e}function go(e,t){return Ao(e,t,{merger:vx})}function vx(e,t,s){if(!Sp(e))return;const n=t[e],i=s[e];ct(n)&&ct(i)?go(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Qr(i))}const Jd={"":e=>e,x:e=>e.x,y:e=>e.y};function _x(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function wx(e){const t=_x(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function Mn(e,t){return(Jd[t]||(Jd[t]=wx(t)))(e)}function su(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Se=e=>typeof e<"u",xe=e=>typeof e=="function",Yd=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function xx(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ot=Math.PI,Vt=2*Ot,Sx=Vt+Ot,ta=Number.POSITIVE_INFINITY,nu=Ot/180,Qt=Ot/2,Fe=Ot/4,ea=Ot*2/3,kp=Math.log10,cs=Math.sign;function po(e,t,s){return Math.abs(e-t)<s}function Zd(e){const t=Math.round(e);e=po(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(kp(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function kx(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,o)=>i-o).pop(),t}function Tx(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function en(e){return!Tx(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ox(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function Dx(e,t,s){let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n][s],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function qt(e){return e*(Ot/180)}function Tp(e){return e*(180/Ot)}function Kd(e){if(!Kt(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function nc(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*Ot&&(o+=Vt),{angle:o,distance:i}}function _i(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Mx(e,t){return(e-t+Sx)%Vt-Ot}function rs(e){return(e%Vt+Vt)%Vt}function sa(e,t,s,n){const i=rs(e),o=rs(t),r=rs(s),a=rs(o-i),l=rs(r-i),c=rs(i-o),u=rs(i-r);return i===o||i===r||n&&o===r||a>l&&c<u}function Be(e,t,s){return Math.max(t,Math.min(s,e))}function Cx(e){return Be(e,-32768,32767)}function Vs(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function iu(e,t,s){s=s||(r=>e[r]<t);let n=e.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const xn=(e,t,s,n)=>iu(e,s,n?i=>{const o=e[i][t];return o<s||o===s&&e[i+1][t]===s}:i=>e[i][t]<s),Ex=(e,t,s)=>iu(e,s,n=>e[n][t]>=s);function Ax(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const Op=["push","pop","shift","splice","unshift"];function Ix(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Op.forEach(s=>{const n="_onData"+su(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Gd(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(Op.forEach(o=>{delete e[o]}),delete e._chartjs)}function Dp(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Mp=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Cp(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Mp.call(window,()=>{n=!1,e.apply(t,s)}))}}function Px(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const Ep=e=>e==="start"?"left":e==="end"?"right":"center",Me=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,Lx=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function Ap(e,t,s){const n=t.length;let i=0,o=n;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=r.axis,{min:d,max:h,minDefined:f,maxDefined:m}=r.getUserBounds();if(f){if(i=Math.min(xn(l,u,d).lo,s?n:xn(t,u,r.getPixelForValue(d)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(p=>!St(p[a.axis]));i-=Math.max(0,g)}i=Be(i,0,n-1)}if(m){let g=Math.max(xn(l,r.axis,h,!0).hi+1,s?0:xn(t,u,r.getPixelForValue(h),!0).hi+1);if(c){const p=l.slice(g-1).findIndex(y=>!St(y[a.axis]));g+=Math.max(0,p)}o=Be(g,i,n)-i}else o=n-i}return{start:i,count:o}}function Ip(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const fr=e=>e===0||e===1,Xd=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Vt/s)),Qd=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Vt/s)+1,yo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Qt)+1,easeOutSine:e=>Math.sin(e*Qt),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>fr(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>fr(e)?e:Xd(e,.075,.3),easeOutElastic:e=>fr(e)?e:Qd(e,.075,.3),easeInOutElastic(e){return fr(e)?e:e<.5?.5*Xd(e*2,.1125,.45):.5+.5*Qd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-yo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?yo.easeInBounce(e*2)*.5:yo.easeOutBounce(e*2-1)*.5+.5};function ou(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function th(e){return ou(e)?e:new Eo(e)}function ll(e){return ou(e)?e:new Eo(e).saturate(.5).darken(.1).hexString()}const $x=["x","y","borderWidth","radius","tension"],Rx=["color","borderColor","backgroundColor"];function Fx(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Rx},numbers:{type:"number",properties:$x}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Nx(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const eh=new Map;function jx(e,t){t=t||{};const s=e+JSON.stringify(t);let n=eh.get(s);return n||(n=new Intl.NumberFormat(e,t),eh.set(s,n)),n}function ru(e,t,s){return jx(t,s).format(e)}const Bx={values(e){return It(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,o=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=Wx(e,s)}const r=kp(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ru(e,n,l)}};function Wx(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var Pp={formatters:Bx};function Ux(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Cn=Object.create(null),ic=Object.create(null);function bo(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];e=e[o]||(e[o]=Object.create(null))}return e}function cl(e,t,s){return typeof t=="string"?Ao(bo(e,t),s):Ao(bo(e,""),t)}class zx{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>ll(i.backgroundColor),this.hoverBorderColor=(n,i)=>ll(i.borderColor),this.hoverColor=(n,i)=>ll(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return cl(this,t,s)}get(t){return bo(this,t)}describe(t,s){return cl(ic,t,s)}override(t,s){return cl(Cn,t,s)}route(t,s,n,i){const o=bo(this,t),r=bo(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return ct(l)?Object.assign({},c,l):at(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var Nt=new zx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Fx,Nx,Ux]);function Hx(e){return!e||St(e.size)||St(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function sh(e,t,s,n,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,s.push(i)),o>n&&(n=o),n}function hn(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function nh(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function oc(e,t,s,n){Lp(e,t,s,n,null)}function Lp(e,t,s,n,i){let o,r,a,l,c,u,d,h;const f=t.pointStyle,m=t.rotation,g=t.radius;let p=(m||0)*nu;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(p),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(s,n,i/2,g,0,0,Vt):e.arc(s,n,g,0,Vt),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(s+Math.sin(p)*u,n-Math.cos(p)*g),p+=ea,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*g),p+=ea,e.lineTo(s+Math.sin(p)*u,n-Math.cos(p)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(p+Fe)*l,d=Math.cos(p+Fe)*(i?i/2-c:l),a=Math.sin(p+Fe)*l,h=Math.sin(p+Fe)*(i?i/2-c:l),e.arc(s-d,n-a,c,p-Ot,p-Qt),e.arc(s+h,n-r,c,p-Qt,p),e.arc(s+d,n+a,c,p,p+Qt),e.arc(s-h,n+r,c,p+Qt,p+Ot),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(s-u,n-l,2*u,2*l);break}p+=Fe;case"rectRot":d=Math.cos(p)*(i?i/2:g),r=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+h,n-r),e.lineTo(s+d,n+a),e.lineTo(s-h,n+r),e.closePath();break;case"crossRot":p+=Fe;case"cross":d=Math.cos(p)*(i?i/2:g),r=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r);break;case"star":d=Math.cos(p)*(i?i/2:g),r=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r),p+=Fe,d=Math.cos(p)*(i?i/2:g),r=Math.cos(p)*g,a=Math.sin(p)*g,h=Math.sin(p)*(i?i/2:g),e.moveTo(s-d,n-a),e.lineTo(s+d,n+a),e.moveTo(s+h,n-r),e.lineTo(s-h,n+r);break;case"line":r=i?i/2:Math.cos(p)*g,a=Math.sin(p)*g,e.moveTo(s-r,n-a),e.lineTo(s+r,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(p)*(i?i/2:g),n+Math.sin(p)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Io(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function zo(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ho(e){e.restore()}function Vx(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const o=(t.x+s.x)/2;e.lineTo(o,t.y),e.lineTo(o,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function qx(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Jx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),St(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Yx(e,t,s,n,i){if(i.strikethrough||i.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function Zx(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function na(e,t,s,n,i,o={}){const r=It(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Jx(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Zx(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),St(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,s,n,o.maxWidth)),e.fillText(c,s,n,o.maxWidth),Yx(e,s,n,c,o),n+=Number(i.lineHeight);e.restore()}function Po(e,t){const{x:s,y:n,w:i,h:o,radius:r}=t;e.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*Ot,Ot,!0),e.lineTo(s,n+o-r.bottomLeft),e.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,Ot,Qt,!0),e.lineTo(s+i-r.bottomRight,n+o),e.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Qt,0,!0),e.lineTo(s+i,n+r.topRight),e.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-Qt,!0),e.lineTo(s+r.topLeft,n)}const Kx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xx(e,t){const s=(""+e).match(Kx);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const Qx=e=>+e||0;function $p(e,t){const s={},n=ct(t),i=n?Object.keys(t):t,o=ct(e)?n?r=>at(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of i)s[r]=Qx(o(r));return s}function Rp(e){return $p(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Tn(e){return $p(e,["topLeft","topRight","bottomLeft","bottomRight"])}function fe(e){const t=Rp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function te(e,t){e=e||{},t=t||Nt.font;let s=at(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=at(e.style,t.style);n&&!(""+n).match(Gx)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:at(e.family,t.family),lineHeight:Xx(at(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:at(e.weight,t.weight),string:""};return i.string=Hx(i),i}function mr(e,t,s,n){let i,o,r;for(i=0,o=e.length;i<o;++i)if(r=e[i],r!==void 0&&r!==void 0)return r}function tS(e,t,s){const{min:n,max:i}=e,o=xp(t,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function Pn(e,t){return Object.assign(Object.create(e),t)}function au(e,t=[""],s,n,i=()=>e[0]){const o=s||e;typeof n>"u"&&(n=Bp("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>au([a,...e],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Np(a,l,()=>lS(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return oh(a).includes(l)},ownKeys(a){return oh(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function wi(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Fp(e,n),setContext:o=>wi(e,o,s,n),override:o=>wi(e.override(o),t,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return Np(o,r,()=>sS(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function Fp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:xe(s)?s:()=>s,isIndexable:xe(n)?n:()=>n}}const eS=(e,t)=>e?e+su(t):t,lu=(e,t)=>ct(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Np(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function sS(e,t,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=e;let a=n[t];return xe(a)&&r.isScriptable(t)&&(a=nS(t,a,e,s)),It(a)&&a.length&&(a=iS(t,a,e,r.isIndexable)),lu(t,a)&&(a=wi(a,i,o&&o[t],r)),a}function nS(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||n);return a.delete(e),lu(e,l)&&(l=cu(i._scopes,i,e,l)),l}function iS(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(e))return t[o.index%t.length];if(ct(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=cu(c,i,e,u);t.push(wi(d,o,r&&r[e],a))}}return t}function jp(e,t,s){return xe(e)?e(t,s):e}const oS=(e,t)=>e===!0?t:typeof e=="string"?Mn(t,e):void 0;function rS(e,t,s,n,i){for(const o of t){const r=oS(s,o);if(r){e.add(r);const a=jp(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function cu(e,t,s,n){const i=t._rootScopes,o=jp(t._fallback,s,n),r=[...e,...i],a=new Set;a.add(n);let l=ih(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=ih(a,r,o,l,n),l===null)?!1:au(Array.from(a),[""],i,o,()=>aS(t,s,n))}function ih(e,t,s,n,i){for(;s;)s=rS(e,t,s,n,i);return s}function aS(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return It(i)&&ct(s)?s:i||{}}function lS(e,t,s,n){let i;for(const o of t)if(i=Bp(eS(o,e),s),typeof i<"u")return lu(e,i)?cu(s,n,e,i):i}function Bp(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function oh(e){let t=e._keys;return t||(t=e._keys=cS(e._scopes)),t}function cS(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}const uS=Number.EPSILON||1e-14,xi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Wp=e=>e==="x"?"y":"x";function dS(e,t,s,n){const i=e.skip?t:e,o=t,r=s.skip?t:s,a=_i(o,i),l=_i(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=n*c,h=n*u;return{previous:{x:o.x-d*(r.x-i.x),y:o.y-d*(r.y-i.y)},next:{x:o.x+h*(r.x-i.x),y:o.y+h*(r.y-i.y)}}}function hS(e,t,s){const n=e.length;let i,o,r,a,l,c=xi(e,0);for(let u=0;u<n-1;++u)if(l=c,c=xi(e,u+1),!(!l||!c)){if(po(t[u],0,uS)){s[u]=s[u+1]=0;continue}i=s[u]/t[u],o=s[u+1]/t[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=i*r*t[u],s[u+1]=o*r*t[u])}}function fS(e,t,s="x"){const n=Wp(s),i=e.length;let o,r,a,l=xi(e,0);for(let c=0;c<i;++c){if(r=a,a=l,l=xi(e,c+1),!a)continue;const u=a[s],d=a[n];r&&(o=(u-r[s])/3,a[`cp1${s}`]=u-o,a[`cp1${n}`]=d-o*t[c]),l&&(o=(l[s]-u)/3,a[`cp2${s}`]=u+o,a[`cp2${n}`]=d+o*t[c])}}function mS(e,t="x"){const s=Wp(t),n=e.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=xi(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=xi(e,r+1),!!l){if(c){const u=c[t]-l[t];i[r]=u!==0?(c[s]-l[s])/u:0}o[r]=a?c?cs(i[r-1])!==cs(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}hS(e,i,o),fS(e,o,t)}function gr(e,t,s){return Math.max(Math.min(e,s),t)}function gS(e,t){let s,n,i,o,r,a=Io(e[0],t);for(s=0,n=e.length;s<n;++s)r=o,o=a,a=s<n-1&&Io(e[s+1],t),o&&(i=e[s],r&&(i.cp1x=gr(i.cp1x,t.left,t.right),i.cp1y=gr(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=gr(i.cp2x,t.left,t.right),i.cp2y=gr(i.cp2y,t.top,t.bottom)))}function pS(e,t,s,n,i){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")mS(e,i);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=dS(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&gS(e,s)}function uu(){return typeof window<"u"&&typeof document<"u"}function du(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ia(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const Ta=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function yS(e,t){return Ta(e).getPropertyValue(t)}const bS=["top","right","bottom","left"];function On(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=bS[i];n[o]=parseFloat(e[t+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const vS=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function _S(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(vS(i,o,e.target))a=i,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function yn(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=Ta(s),o=i.boxSizing==="border-box",r=On(i,"padding"),a=On(i,"border","width"),{x:l,y:c,box:u}=_S(e,s),d=r.left+(u&&a.left),h=r.top+(u&&a.top);let{width:f,height:m}=t;return o&&(f-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-d)/f*s.width/n),y:Math.round((c-h)/m*s.height/n)}}function wS(e,t,s){let n,i;if(t===void 0||s===void 0){const o=e&&du(e);if(!o)t=e.clientWidth,s=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Ta(o),l=On(a,"border","width"),c=On(a,"padding");t=r.width-c.width-l.width,s=r.height-c.height-l.height,n=ia(a.maxWidth,o,"clientWidth"),i=ia(a.maxHeight,o,"clientHeight")}}return{width:t,height:s,maxWidth:n||ta,maxHeight:i||ta}}const pr=e=>Math.round(e*10)/10;function xS(e,t,s,n){const i=Ta(e),o=On(i,"margin"),r=ia(i.maxWidth,e,"clientWidth")||ta,a=ia(i.maxHeight,e,"clientHeight")||ta,l=wS(e,t,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=On(i,"border","width"),f=On(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=pr(Math.min(c,r,l.maxWidth)),u=pr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=pr(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=pr(Math.floor(u*n))),{width:c,height:u}}function rh(e,t,s){const n=t||1,i=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(e.currentDevicePixelRatio=n,r.height=i,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const SS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};uu()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function ah(e,t){const s=yS(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function bn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function kS(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function TS(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=bn(e,i,s),a=bn(i,o,s),l=bn(o,t,s),c=bn(r,a,s),u=bn(a,l,s);return bn(c,u,s)}const OS=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},DS=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function yi(e,t,s){return e?OS(t,s):DS()}function Up(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function zp(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Hp(e){return e==="angle"?{between:sa,compare:Mx,normalize:rs}:{between:Vs,compare:(t,s)=>t-s,normalize:t=>t}}function lh({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function MS(e,t,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Hp(n),l=t.length;let{start:c,end:u,loop:d}=e,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&r(a(t[c%l][n]),i,o);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function Vp(e,t,s){if(!s)return[e];const{property:n,start:i,end:o}=s,r=t.length,{compare:a,between:l,normalize:c}=Hp(n),{start:u,end:d,loop:h,style:f}=MS(e,t,s),m=[];let g=!1,p=null,y,_,v;const w=()=>l(i,v,y)&&a(i,v)!==0,x=()=>a(o,y)===0||l(o,v,y),C=()=>g||w(),D=()=>!g||x();for(let P=u,$=u;P<=d;++P)_=t[P%r],!_.skip&&(y=c(_[n]),y!==v&&(g=l(y,i,o),p===null&&C()&&(p=a(y,i)===0?P:$),p!==null&&D()&&(m.push(lh({start:p,end:P,loop:h,count:r,style:f})),p=null),$=P,v=y));return p!==null&&m.push(lh({start:p,end:d,loop:h,count:r,style:f})),m}function qp(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const o=Vp(n[i],e.points,t);o.length&&s.push(...o)}return s}function CS(e,t,s,n){let i=0,o=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}function ES(e,t,s,n){const i=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%i,end:(l-1)%i,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%i,end:r%i,loop:n}),o}function AS(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const o=!!e._loop,{start:r,end:a}=CS(s,i,o,n);if(n===!0)return ch(e,[{start:r,end:a,loop:o}],s,t);const l=a<r?a+i:a,c=!!e._fullLoop&&r===0&&a===i-1;return ch(e,ES(s,r,l,c),s,t)}function ch(e,t,s,n){return!n||!n.setContext||!s?t:IS(e,t,s,n)}function IS(e,t,s,n){const i=e._chart.getContext(),o=uh(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=s.length,c=[];let u=o,d=t[0].start,h=d;function f(m,g,p,y){const _=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=_;for(;s[g%l].skip;)g+=_;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:p,style:y}),u=y,d=g%l)}}for(const m of t){d=a?d:m.start;let g=s[d%l],p;for(h=d+1;h<=m.end;h++){const y=s[h%l];p=uh(n.setContext(Pn(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:r}))),PS(p,u)&&f(d,h-1,m.loop,u),g=y,u=p}d<h-1&&f(d,h-1,m.loop,u)}return c}function uh(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function PS(e,t){if(!t)return!1;const s=[],n=function(i,o){return ou(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function yr(e,t,s){return e.options.clip?e[s]:t[s]}function LS(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:yr(s,t,"left"),right:yr(s,t,"right"),top:yr(n,t,"top"),bottom:yr(n,t,"bottom")}:t}function Jp(e,t){const s=t._clip;if(s.disabled)return!1;const n=LS(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $S{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:t,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Mp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=o.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ps=new $S;const dh="transparent",RS={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=th(e||dh),i=n.valid&&th(t||dh);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class FS{constructor(t,s,n,i){const o=s[n];i=mr([t.to,i,o,t.from]);const r=mr([t.from,o,i]);this._active=!0,this._fn=t.fn||RS[t.type||typeof r],this._easing=yo[t.easing]||yo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=mr([t.to,s,i,t.from]),this._from=mr([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class hu{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!ct(t))return;const s=Object.keys(Nt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!ct(o))return;const r={};for(const a of s)r[a]=o[a];(It(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,s){const n=s.options,i=jS(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&NS(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,s){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const u=s[c];let d=o[c];const h=n.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}o[c]=d=new FS(h,t,c,u),i.push(d)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return ps.add(this._chart,n),!0}}function NS(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const o=e[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function jS(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function hh(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,o=s.max===void 0?t:0;return{start:n?o:i,end:n?i:o}}function BS(e,t,s){if(s===!1)return!1;const n=hh(e,s),i=hh(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function WS(e){let t,s,n,i;return ct(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function Yp(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function fh(e,t,s,n={}){const i=e.keys,o=n.mode==="single";let r,a,l,c;if(t===null)return;let u=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(u=!0,n.all)continue;break}c=e.values[l],Kt(c)&&(o||t===0||cs(t)===cs(c))&&(t+=c)}return!u&&!n.all?0:t}function US(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[i]:u,[o]:e[u]};return a}function ul(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function zS(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function HS(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function VS(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function mh(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const o=e[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function gh(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=zS(o,r,n),d=t.length;let h;for(let f=0;f<d;++f){const m=t[f],{[l]:g,[c]:p}=m,y=m._stacks||(m._stacks={});h=y[c]=VS(i,u,g),h[a]=p,h._top=mh(h,r,!0,n.type),h._bottom=mh(h,r,!1,n.type);const _=h._visualValues||(h._visualValues={});_[a]=p}}function dl(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function qS(e,t){return Pn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function JS(e,t,s){return Pn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function Wi(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const hl=e=>e==="reset"||e==="none",ph=(e,t)=>t?e:Object.assign({},e),YS=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Yp(s,!0),values:null};class Vo{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ul(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Wi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(d,h,f,m)=>d==="x"?h:d==="r"?m:f,o=s.xAxisID=at(n.xAxisID,dl(t,"x")),r=s.yAxisID=at(n.yAxisID,dl(t,"y")),a=s.rAxisID=at(n.rAxisID,dl(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),u=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Gd(this._data,this),t._stacked&&Wi(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(ct(s)){const i=this._cachedMeta;this._data=US(s,i)}else if(n!==s){if(n){Gd(n,this);const i=this._cachedMeta;Wi(i),i._parsed=[]}s&&Object.isExtensible(s)&&Ix(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=ul(s.vScale,s),s.stack!==n.stack&&(i=!0,Wi(s),s.stack=n.stack),this._resyncElements(t),(i||o!==s._stacked)&&(gh(this,s._parsed),s._stacked=ul(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,d,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{It(i[t])?h=this.parseArrayData(n,i,t,s):ct(i[t])?h=this.parseObjectData(n,i,t,s):h=this.parsePrimitiveData(n,i,t,s);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<s;++u)n._parsed[u+t]=d=h[u],l&&(f()&&(l=!1),c=d);n._sorted=l}r&&gh(this,h)}parsePrimitiveData(t,s,n,i){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,d=new Array(i);let h,f,m;for(h=0,f=i;h<f;++h)m=h+n,d[h]={[a]:u||o.parse(c[m],m),[l]:r.parse(s[m],m)};return d}parseArrayData(t,s,n,i){const{xScale:o,yScale:r}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+n,d=s[u],a[l]={x:o.parse(d[0],u),y:r.parse(d[1],u)};return a}parseObjectData(t,s,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+n,f=s[h],c[u]={x:o.parse(Mn(f,a),h),y:r.parse(Mn(f,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,o=this._cachedMeta,r=s[t.axis],a={keys:Yp(i,!0),values:s._stacks[t.axis]._visualValues};return fh(a,r,o.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=fh(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,r=i.length,a=this._getOtherScale(t),l=YS(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=HS(a);let h,f;function m(){f=i[h];const g=f[a.axis];return!Kt(f[t.axis])||u>g||d<g}for(h=0;h<r&&!(!m()&&(this.updateRangeFromParsed(c,t,f,l),o));++h);if(o){for(h=r-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][t.axis],Kt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=WS(at(this.options.clip,BS(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=JS(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=qS(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=t+"-"+s,a=o[r],l=this.enableOptionSharing&&Se(n);if(a)return ph(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Nt.elements[t]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(h,f,m,d);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(ph(g,l))),g}_resolveAnimations(t,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,n,s))}const c=new hu(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||hl(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(t,s,n,i){hl(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!hl(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,s,n=!0){const i=this._cachedMeta,o=i.data,r=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(o,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&Wi(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ZS(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=Dp(n.sort((i,o)=>i-o))}return e._cache.$bar}function KS(e){const t=e.iScale,s=ZS(t,e.type);let n=t._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(Se(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=t.ticks.length;i<o;++i)r=t.getPixelForTick(i),l();return n}function GS(e,t,s,n){const i=s.barThickness;let o,r;return St(i)?(o=t.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function XS(e,t,s,n){const i=t.pixels,o=i[e];let r=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function QS(e,t,s,n){const i=s.parse(e[0],n),o=s.parse(e[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function Zp(e,t,s,n){return It(e)?QS(e,t,s,n):t[s.axis]=s.parse(e,n),t}function yh(e,t,s,n){const i=e.iScale,o=e.vScale,r=i.getLabels(),a=i===o,l=[];let c,u,d,h;for(c=s,u=s+n;c<u;++c)h=t[c],d={},d[i.axis]=a||i.parse(r[c],c),l.push(Zp(h,d,o,c));return l}function fl(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function tk(e,t,s){return e!==0?cs(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function ek(e){let t,s,n,i,o;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:t,top:i,bottom:o}}function sk(e,t,s,n){let i=t.borderSkipped;const o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=ek(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(o[bh(u,r,a,l)]=!0,i=c)),o[bh(i,r,a,l)]=!0,e.borderSkipped=o}function bh(e,t,s,n){return n?(e=nk(e,t,s),e=vh(e,s,t)):e=vh(e,t,s),e}function nk(e,t,s){return e===t?s:e===s?t:e}function vh(e,t,s){return e==="start"?t:e==="end"?s:e}function ik(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class Kp extends Vo{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,s,n,i){return yh(t,s,n,i)}parseArrayData(t,s,n,i){return yh(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,d=[];let h,f,m,g;for(h=n,f=n+i;h<f;++h)g=s[h],m={},m[o.axis]=o.parse(Mn(g,c),h),d.push(Zp(Mn(g,u),m,r,h));return d}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(t),r=o._custom,a=fl(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i);for(let f=s;f<s+n;f++){const m=this.getParsed(f),g=o||St(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),y=(m._stacks||{})[a.axis],_={horizontal:c,base:g.base,enableBorderRadius:!y||fl(m._custom)||r===y._top||r===y._bottom,x:c?g.head:p.center,y:c?p.center:g.head,height:c?p.size:Math.abs(g.size),width:c?Math.abs(g.size):p.size};h&&(_.options=d||this.resolveDataElementOptions(f,t[f].active?"active":i));const v=_.options||t[f].options;sk(_,v,y,r),ik(_,v,u.ratio),this.updateElement(t[f],f,_,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const d=u._parsed.find(f=>f[n.axis]===l),h=d&&d[u.vScale.axis];if(St(h)||isNaN(h))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===s).shift()}_getAxis(){const t={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[at(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(t)}_getStackIndex(t,s,n){const i=this._getStacks(t,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||KS(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=fl(c);let d=l[s.axis],h=0,f=n?this.applyStack(s,l,n):d,m,g;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&cs(d)!==cs(c.barEnd)&&(h=0),h+=d);const p=!St(o)&&!u?o:h;let y=s.getPixelForValue(p);if(this.chart.getDataVisibility(t)?m=s.getPixelForValue(h+f):m=y,g=m-y,Math.abs(g)<r){g=tk(g,s,a)*r,d===a&&(y-=g/2);const _=s.getPixelForDecimal(0),v=s.getPixelForDecimal(1),w=Math.min(_,v),x=Math.max(_,v);y=Math.max(Math.min(y,x),w),m=y+g,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(y))}if(y===s.getPixelForValue(a)){const _=cs(g)*s.getLineWidthForValue(a)/2;y+=_,g-=_}return{size:g,base:y,head:m,center:m+g/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,o=i.skipNull,r=at(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(s.grouped){const u=o?this._getStackCount(t):s.stackCount,d=i.barThickness==="flex"?XS(t,s,i,u*c):GS(t,s,i,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(at(h,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;a=d.start+d.chunk*m+d.chunk/2,l=Math.min(r,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}function ok(e,t,s){let n=1,i=1,o=0,r=0;if(t<Vt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(v,w,x)=>sa(v,a,l,!0)?1:Math.max(w,w*s,x,x*s),m=(v,w,x)=>sa(v,a,l,!0)?-1:Math.min(w,w*s,x,x*s),g=f(0,c,d),p=f(Qt,u,h),y=m(Ot,c,d),_=m(Ot+Qt,u,h);n=(g-y)/2,i=(p-_)/2,o=-(g+y)/2,r=-(p+_)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class rk extends Vo{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(ct(n[t])){const{key:l="value"}=this._parsing;o=c=>+Mn(n[c],l)}let r,a;for(r=t,a=t+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return qt(this.options.rotation-90)}_getCircumference(){return qt(this.options.circumference)}_getRotationExtents(){let t=Vt,s=-Vt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),s=Math.max(s,o+r)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(yx(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:m,offsetY:g}=ok(d,u,l),p=(n.width-r)/h,y=(n.height-r)/f,_=Math.max(Math.min(p,y)/2,0),v=xp(this.options.radius,_),w=Math.max(v*l,0),x=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=m*v,this.offsetY=g*v,i.total=this.calculateTotal(),this.outerRadius=v-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Vt)}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=o&&c.animateScale,f=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(s,i);let y=this._getRotation(),_;for(_=0;_<s;++_)y+=this._circumference(_,o);for(_=s;_<s+n;++_){const v=this._circumference(_,o),w=t[_],x={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:m,innerRadius:f};p&&(x.options=g||this.resolveDataElementOptions(_,w.active?"active":i)),y+=v,this.updateElement(w,_,x,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const o=t._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?Vt*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=ru(s._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,o,r,a,l;if(!t){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}}if(!t)return 0;for(i=0,o=t.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(at(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Oa extends Vo{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Ap(s,i,r);this._drawStart=a,this._drawCount=l,Ip(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,i),h=r.axis,f=a.axis,{spanGaps:m,segment:g}=this.options,p=en(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||i==="none",_=s+n,v=t.length;let w=s>0&&this.getParsed(s-1);for(let x=0;x<v;++x){const C=t[x],D=y?C:{};if(x<s||x>=_){D.skip=!0;continue}const P=this.getParsed(x),$=St(P[f]),U=D[h]=r.getPixelForValue(P[h],x),L=D[f]=o||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,P,l):P[f],x);D.skip=isNaN(U)||isNaN(L)||$,D.stop=x>0&&Math.abs(P[h]-w[h])>p,g&&(D.parsed=P,D.raw=c.data[x]),d&&(D.options=u||this.resolveDataElementOptions(x,C.active?"active":i)),y||this.updateElement(C,x,D,i),w=P}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class ak extends Vo{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=Ap(s,n,i);if(this._drawStart=o,this._drawCount=r,Ip(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=r.axis,m=a.axis,{spanGaps:g,segment:p}=this.options,y=en(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||i==="none";let v=s>0&&this.getParsed(s-1);for(let w=s;w<s+n;++w){const x=t[w],C=this.getParsed(w),D=_?x:{},P=St(C[m]),$=D[f]=r.getPixelForValue(C[f],w),U=D[m]=o||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[m],w);D.skip=isNaN($)||isNaN(U)||P,D.stop=w>0&&Math.abs(C[f]-v[f])>y,p&&(D.parsed=C,D.raw=c.data[w]),h&&(D.options=d||this.resolveDataElementOptions(w,x.active?"active":i)),_||this.updateElement(x,w,D,i),v=C}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const t=this._cachedMeta,s=t.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}function fn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fu{static override(t){Object.assign(fu.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return fn()}parse(){return fn()}format(){return fn()}add(){return fn()}diff(){return fn()}startOf(){return fn()}endOf(){return fn()}}var Gp={_date:fu};function lk(e,t,s,n){const{controller:i,data:o,_sorted:r}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?Ex:xn;if(n){if(i._sharedOptions){const u=o[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const h=c(o,t,s-d),f=c(o,t,s+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(o,t,s);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=e,f=h.slice(0,u.lo+1).reverse().findIndex(g=>!St(g[d.axis]));u.lo-=Math.max(0,f);const m=h.slice(u.hi).findIndex(g=>!St(g[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:o.length-1}}function Da(e,t,s,n,i){const o=e.getSortedVisibleDatasetMetas(),r=s[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:d,hi:h}=lk(o[a],t,r,i);for(let f=d;f<=h;++f){const m=u[f];m.skip||n(m,c,f)}}}function ck(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const o=t?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ml(e,t,s,n,i){const o=[];return!i&&!e.isPointInArea(t)||Da(e,s,t,function(a,l,c){!i&&!Io(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function uk(e,t,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:d}=nc(r,{x:t.x,y:t.y});sa(d,c,u)&&i.push({element:r,datasetIndex:a,index:l})}return Da(e,s,t,o),i}function dk(e,t,s,n,i,o){let r=[];const a=ck(s);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(t.x,t.y,i);if(n&&!f)return;const m=u.getCenterPoint(i);if(!(!!o||e.isPointInArea(m))&&!f)return;const p=a(t,m);p<l?(r=[{element:u,datasetIndex:d,index:h}],l=p):p===l&&r.push({element:u,datasetIndex:d,index:h})}return Da(e,s,t,c),r}function gl(e,t,s,n,i,o){return!o&&!e.isPointInArea(t)?[]:s==="r"&&!n?uk(e,t,s,i):dk(e,t,s,n,i,o)}function _h(e,t,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return Da(e,s,t,(l,c,u)=>{l[r]&&l[r](t[s],i)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:o}var hk={modes:{index(e,t,s,n){const i=yn(t,e),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?ml(e,i,o,n,r):gl(e,i,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,s,n){const i=yn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?ml(e,i,o,n,r):gl(e,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,s,n){const i=yn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return ml(e,i,o,n,r)},nearest(e,t,s,n){const i=yn(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return gl(e,i,o,s.intersect,n,r)},x(e,t,s,n){const i=yn(t,e);return _h(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=yn(t,e);return _h(e,i,"y",s.intersect,n)}}};const Xp=["left","top","right","bottom"];function Ui(e,t){return e.filter(s=>s.pos===t)}function wh(e,t){return e.filter(s=>Xp.indexOf(s.pos)===-1&&s.box.axis===t)}function zi(e,t){return e.sort((s,n)=>{const i=t?n:s,o=t?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function fk(e){const t=[];let s,n,i,o,r,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return t}function mk(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Xp.includes(i))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function gk(e,t){const s=mk(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return s}function pk(e){const t=fk(e),s=zi(t.filter(c=>c.box.fullSize),!0),n=zi(Ui(t,"left"),!0),i=zi(Ui(t,"right")),o=zi(Ui(t,"top"),!0),r=zi(Ui(t,"bottom")),a=wh(t,"x"),l=wh(t,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:Ui(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function xh(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function Qp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function yk(e,t,s,n){const{pos:i,box:o}=s,r=e.maxPadding;if(!ct(i)){s.size&&(e[i]-=s.size);const d=n[s.stack]||{size:0,count:1};d.size=Math.max(d.size,s.horizontal?o.height:o.width),s.size=d.size/d.count,e[i]+=s.size}o.getPadding&&Qp(r,o.getPadding());const a=Math.max(0,t.outerWidth-xh(r,e,"left","right")),l=Math.max(0,t.outerHeight-xh(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function bk(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function vk(e,t){const s=t.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(t[r],s[r])}),o}return n(e?["left","right"]:["top","bottom"])}function eo(e,t,s,n){const i=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,vk(a.horizontal,t));const{same:d,other:h}=yk(t,s,a,n);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&eo(i,t,s,n)||u}function br(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function Sh(e,t,s,n){const i=s.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,h=c.size||l.height;Se(c.start)&&(r=c.start),l.fullSize?br(l,i.left,r,s.outerWidth-i.right-i.left,h):br(l,t.left+c.placed,r,d,h),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*u,h=c.size||l.width;Se(c.start)&&(o=c.start),l.fullSize?br(l,o,i.top,h,s.outerHeight-i.bottom-i.top):br(l,o,t.top+c.placed,h,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}var qs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=fe(e.options.layout.padding),o=Math.max(t-i.width,0),r=Math.max(s-i.height,0),a=pk(e.boxes),l=a.vertical,c=a.horizontal;Tt(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,p)=>p.box.options&&p.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),h=Object.assign({},i);Qp(h,fe(n));const f=Object.assign({maxPadding:h,w:o,h:r,x:i.left,y:i.top},i),m=gk(l.concat(c),d);eo(a.fullSize,f,d,m),eo(l,f,d,m),eo(c,f,d,m)&&eo(l,f,d,m),bk(f),Sh(a.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,Sh(a.rightAndBottom,f,d,m),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Tt(a.chartArea,g=>{const p=g.box;Object.assign(p,e.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ty{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class _k extends ty{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fr="$chartjs",wk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kh=e=>e===null||e==="";function xk(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[Fr]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",kh(i)){const o=ah(e,"width");o!==void 0&&(e.width=o)}if(kh(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=ah(e,"height");o!==void 0&&(e.height=o)}return e}const ey=SS?{passive:!0}:!1;function Sk(e,t,s){e&&e.addEventListener(t,s,ey)}function kk(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,ey)}function Tk(e,t){const s=wk[e.type]||e.type,{x:n,y:i}=yn(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function oa(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function Ok(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||oa(a.addedNodes,n),r=r&&!oa(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function Dk(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||oa(a.removedNodes,n),r=r&&!oa(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lo=new Map;let Th=0;function sy(){const e=window.devicePixelRatio;e!==Th&&(Th=e,Lo.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function Mk(e,t){Lo.size||window.addEventListener("resize",sy),Lo.set(e,t)}function Ck(e){Lo.delete(e),Lo.size||window.removeEventListener("resize",sy)}function Ek(e,t,s){const n=e.canvas,i=n&&du(n);if(!i)return;const o=Cp((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(i),Mk(e,o),r}function pl(e,t,s){s&&s.disconnect(),t==="resize"&&Ck(e)}function Ak(e,t,s){const n=e.canvas,i=Cp(o=>{e.ctx!==null&&s(Tk(o,e))},e);return Sk(n,t,i),i}class Ik extends ty{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(xk(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[Fr])return!1;const n=s[Fr].initial;["height","width"].forEach(o=>{const r=n[o];St(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[Fr],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),r={attach:Ok,detach:Dk,resize:Ek}[s]||Ak;i[s]=r(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:pl,detach:pl,resize:pl}[s]||kk)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return xS(t,s,n,i)}isAttached(t){const s=t&&du(t);return!!(s&&s.isConnected)}}function Pk(e){return!uu()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?_k:Ik}let ke=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return en(this.x)&&en(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}};function Lk(e,t){const s=e.options.ticks,n=$k(e),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?Fk(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return Nk(t,c,o,r/i),c;const u=Rk(o,t,i);if(r>0){let d,h;const f=r>1?Math.round((l-a)/(r-1)):null;for(vr(t,c,u,St(f)?0:a-f,a),d=0,h=r-1;d<h;d++)vr(t,c,u,o[d],o[d+1]);return vr(t,c,u,l,St(f)?t.length:l+f),c}return vr(t,c,u),c}function $k(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function Rk(e,t,s){const n=jk(e),i=t.length/s;if(!n)return Math.max(i,1);const o=kx(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function Fk(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function Nk(e,t,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),i++,o=s[i*n])}function vr(e,t,s,n,i){const o=at(n,0),r=Math.min(at(i,e.length),e.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*s))}function jk(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const Bk=e=>e==="left"?"right":e==="right"?"left":e,Oh=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Dh=(e,t)=>Math.min(t||e,e);function Mh(e,t){const s=[],n=e.length/t,i=e.length;let o=0;for(;o<i;o+=n)s.push(e[Math.floor(o)]);return s}function Wk(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>r+a)))return l}function Uk(e,t){Tt(e,s=>{const n=s.gc,i=n.length/2;let o;if(i>t){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function Hi(e){return e.drawTicks?e.tickLength:0}function Ch(e,t){if(!e.display)return 0;const s=te(e.font,t),n=fe(e.padding);return(It(e.text)?e.text.length:1)*s.lineHeight+n.height}function zk(e,t){return Pn(e,{scale:t,type:"scale"})}function Hk(e,t,s){return Pn(e,{tick:s,index:t,type:"tick"})}function Vk(e,t,s){let n=Ep(e);return(s&&t!=="right"||!s&&t==="right")&&(n=Bk(n)),n}function qk(e,t,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,h,f,m;const g=r-i,p=a-o;if(e.isHorizontal()){if(f=Me(n,o,a),ct(s)){const y=Object.keys(s)[0],_=s[y];m=u[y].getPixelForValue(_)+g-t}else s==="center"?m=(c.bottom+c.top)/2+g-t:m=Oh(e,s,t);h=a-o}else{if(ct(s)){const y=Object.keys(s)[0],_=s[y];f=u[y].getPixelForValue(_)-p+t}else s==="center"?f=(c.left+c.right)/2-p+t:f=Oh(e,s,t);m=Me(n,r,i),d=s==="left"?-Qt:Qt}return{titleX:f,titleY:m,maxWidth:h,rotation:d}}class qo extends ke{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=ts(t,Number.POSITIVE_INFINITY),s=ts(s,Number.NEGATIVE_INFINITY),n=ts(n,Number.POSITIVE_INFINITY),i=ts(i,Number.NEGATIVE_INFINITY),{min:ts(t,n),max:ts(s,i),minDefined:Kt(t),maxDefined:Kt(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:ts(s,ts(n,s)),max:ts(n,ts(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tS(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Mh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Lk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Dt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=Dt(s.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Dh(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Be(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-Hi(t.grid)-s.padding-Ch(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),r=Tp(Math.min(Math.asin(Be((u.highest.height+6)/a,-1,1)),Math.asin(Be(l/c,-1,1))-Math.asin(Be(h/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ch(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=Hi(o)+l):(t.height=this.maxHeight,t.width=Hi(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=n.padding*2,m=qt(this.labelRotation),g=Math.cos(m),p=Math.sin(m);if(a){const y=n.mirror?0:p*d.width+g*h.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=n.mirror?0:g*d.width+p*h.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,u,p,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*t.width,f=n*s.height):(h=n*t.height,f=i*s.width):o==="start"?f=s.width:o==="end"?h=t.width:o!=="inner"&&(h=t.width/2,f=s.width/2),this.paddingLeft=Math.max((h-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+r)*this.width/(this.width-d),0)}else{let u=s.height/2,d=t.height/2;o==="start"?(u=0,d=t.height):o==="end"&&(u=s.height,d=0),this.paddingTop=u+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)St(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Mh(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Dh(s,n));let c=0,u=0,d,h,f,m,g,p,y,_,v,w,x;for(d=0;d<s;d+=l){if(m=t[d].label,g=this._resolveTickFontOptions(d),i.font=p=g.string,y=o[p]=o[p]||{data:{},gc:[]},_=g.lineHeight,v=w=0,!St(m)&&!It(m))v=sh(i,y.data,y.gc,v,m),w=_;else if(It(m))for(h=0,f=m.length;h<f;++h)x=m[h],!St(x)&&!It(x)&&(v=sh(i,y.data,y.gc,v,x),w+=_);r.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}Uk(o,s);const C=r.indexOf(c),D=a.indexOf(u),P=$=>({width:r[$]||0,height:a[$]||0});return{first:P(0),last:P(s-1),widest:P(C),highest:P(D),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return Cx(this._alignToPixels?hn(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=Hk(this.getContext(),t,n))}return this.$context||(this.$context=zk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=qt(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Hi(o),f=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,p=g/2,y=function(it){return hn(n,it,g)};let _,v,w,x,C,D,P,$,U,L,E,R;if(r==="top")_=y(this.bottom),D=this.bottom-h,$=_-p,L=y(t.top)+p,R=t.bottom;else if(r==="bottom")_=y(this.top),L=t.top,R=y(t.bottom)-p,D=_+p,$=this.top+h;else if(r==="left")_=y(this.right),C=this.right-h,P=_-p,U=y(t.left)+p,E=t.right;else if(r==="right")_=y(this.left),U=t.left,E=y(t.right)-p,C=_+p,P=this.left+h;else if(s==="x"){if(r==="center")_=y((t.top+t.bottom)/2+.5);else if(ct(r)){const it=Object.keys(r)[0],ht=r[it];_=y(this.chart.scales[it].getPixelForValue(ht))}L=t.top,R=t.bottom,D=_+p,$=D+h}else if(s==="y"){if(r==="center")_=y((t.left+t.right)/2);else if(ct(r)){const it=Object.keys(r)[0],ht=r[it];_=y(this.chart.scales[it].getPixelForValue(ht))}C=_-p,P=C-h,U=t.left,E=t.right}const et=at(i.ticks.maxTicksLimit,d),nt=Math.max(1,Math.ceil(d/et));for(v=0;v<d;v+=nt){const it=this.getContext(v),ht=o.setContext(it),gt=a.setContext(it),ae=ht.lineWidth,Pe=ht.color,me=gt.dash||[],Gt=gt.dashOffset,Is=ht.tickWidth,hs=ht.tickColor,rn=ht.tickBorderDash||[],Te=ht.tickBorderDashOffset;w=Wk(this,v,l),w!==void 0&&(x=hn(n,w,ae),c?C=P=U=E=x:D=$=L=R=x,f.push({tx1:C,ty1:D,tx2:P,ty2:$,x1:U,y1:L,x2:E,y2:R,width:ae,color:Pe,borderDash:me,borderDashOffset:Gt,tickWidth:Is,tickColor:hs,tickBorderDash:rn,tickBorderDashOffset:Te}))}return this._ticksLength=d,this._borderValue=_,f}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=o,h=Hi(n.grid),f=h+u,m=d?-u:f,g=-qt(this.labelRotation),p=[];let y,_,v,w,x,C,D,P,$,U,L,E,R="middle";if(i==="top")C=this.bottom-m,D=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+m,D=this._getXAxisLabelAlignment();else if(i==="left"){const nt=this._getYAxisLabelAlignment(h);D=nt.textAlign,x=nt.x}else if(i==="right"){const nt=this._getYAxisLabelAlignment(h);D=nt.textAlign,x=nt.x}else if(s==="x"){if(i==="center")C=(t.top+t.bottom)/2+f;else if(ct(i)){const nt=Object.keys(i)[0],it=i[nt];C=this.chart.scales[nt].getPixelForValue(it)+f}D=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")x=(t.left+t.right)/2-f;else if(ct(i)){const nt=Object.keys(i)[0],it=i[nt];x=this.chart.scales[nt].getPixelForValue(it)}D=this._getYAxisLabelAlignment(h).textAlign}s==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const et=this._getLabelSizes();for(y=0,_=a.length;y<_;++y){v=a[y],w=v.label;const nt=o.setContext(this.getContext(y));P=this.getPixelForTick(y)+o.labelOffset,$=this._resolveTickFontOptions(y),U=$.lineHeight,L=It(w)?w.length:1;const it=L/2,ht=nt.color,gt=nt.textStrokeColor,ae=nt.textStrokeWidth;let Pe=D;r?(x=P,D==="inner"&&(y===_-1?Pe=this.options.reverse?"left":"right":y===0?Pe=this.options.reverse?"right":"left":Pe="center"),i==="top"?c==="near"||g!==0?E=-L*U+U/2:c==="center"?E=-et.highest.height/2-it*U+U:E=-et.highest.height+U/2:c==="near"||g!==0?E=U/2:c==="center"?E=et.highest.height/2-it*U:E=et.highest.height-L*U,d&&(E*=-1),g!==0&&!nt.showLabelBackdrop&&(x+=U/2*Math.sin(g))):(C=P,E=(1-L)*U/2);let me;if(nt.showLabelBackdrop){const Gt=fe(nt.backdropPadding),Is=et.heights[y],hs=et.widths[y];let rn=E-Gt.top,Te=0-Gt.left;switch(R){case"middle":rn-=Is/2;break;case"bottom":rn-=Is;break}switch(D){case"center":Te-=hs/2;break;case"right":Te-=hs;break;case"inner":y===_-1?Te-=hs:y>0&&(Te-=hs/2);break}me={left:Te,top:rn,width:hs+Gt.width,height:Is+Gt.height,color:nt.backdropColor}}p.push({label:w,font:$,textOffset:E,options:{rotation:g,color:ht,strokeColor:gt,strokeWidth:ae,textAlign:Pe,textBaseline:R,translation:[x,C],backdrop:me}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-qt(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return s==="left"?i?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=hn(t,this.left,r)-r/2,u=hn(t,this.right,a)+a/2,d=h=l):(d=hn(t,this.top,r)-r/2,h=hn(t,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,d),s.lineTo(u,h),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&zo(n,i);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;na(n,c,0,u,l,a)}i&&Ho(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=te(n.font),r=fe(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||ct(s)?(l+=r.bottom,It(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=qk(this,l,s,a);na(t,n.text,0,0,o,{color:n.color,maxWidth:d,rotation:h,textAlign:Vk(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=at(t.grid&&t.grid.z,-1),i=at(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qo.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return te(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _r{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;Zk(s)&&(n=this.register(s));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,Jk(t,r,n),this.override&&Nt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in Nt[i]&&(delete Nt[i][n],this.override&&delete Cn[n])}}function Jk(e,t,s){const n=Ao(Object.create(null),[s?Nt.get(s):{},Nt.get(t),e.defaults]);Nt.set(t,n),e.defaultRoutes&&Yk(t,e.defaultRoutes),e.descriptors&&Nt.describe(t,e.descriptors)}function Yk(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),o=[e].concat(n).join("."),r=t[s].split("."),a=r.pop(),l=r.join(".");Nt.route(o,i,l,a)})}function Zk(e){return"id"in e&&"defaults"in e}class Kk{constructor(){this.controllers=new _r(Vo,"datasets",!0),this.elements=new _r(ke,"elements"),this.plugins=new _r(Object,"plugins"),this.scales=new _r(qo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(t,o,i):Tt(i,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,s,n){const i=su(t);Dt(n["before"+i],[],n),s[t](n),Dt(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var is=new Kk;class Gk{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,s,n);return s==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,s,n,i){i=i||{};for(const o of t){const r=o.plugin,a=r[n],l=[s,i,o.options];if(Dt(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){St(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=at(n.options&&n.options.plugins,{}),o=Xk(n);return i===!1&&!s?[]:t1(t,o,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function Xk(e){const t={},s=[],n=Object.keys(is.plugins.items);for(let o=0;o<n.length;o++)s.push(is.getPlugin(n[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),t[r.id]=!0)}return{plugins:s,localIds:t}}function Qk(e,t){return!t&&e===!1?null:e===!0?{}:e}function t1(e,{plugins:t,localIds:s},n,i){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=Qk(n[l],i);c!==null&&o.push({plugin:a,options:e1(e.config,{plugin:a,local:s[l]},c,r)})}return o}function e1(e,{plugin:t,local:s},n,i){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return s&&t.defaults&&r.push(t.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rc(e,t){const s=Nt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function s1(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function n1(e,t){return e===t?"_index_":"_value_"}function Eh(e){if(e==="x"||e==="y"||e==="r")return e}function i1(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ac(e,...t){if(Eh(e))return e;for(const s of t){const n=s.axis||i1(s.position)||e.length>1&&Eh(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ah(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function o1(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Ah(e,"x",s[0])||Ah(e,"y",s[0])}return{}}function r1(e,t){const s=Cn[e.type]||{scales:{}},n=t.scales||{},i=rc(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!ct(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=ac(r,a,o1(r,e),Nt.scales[a.type]),c=n1(l,i),u=s.scales||{};o[r]=go(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||rc(a,t),u=(Cn[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=s1(d,l),f=r[h+"AxisID"]||h;o[f]=o[f]||Object.create(null),go(o[f],[{axis:h},n[f],u[d]])})}),Object.keys(o).forEach(r=>{const a=o[r];go(a,[Nt.scales[a.type],Nt.scale])}),o}function ny(e){const t=e.options||(e.options={});t.plugins=at(t.plugins,{}),t.scales=r1(e,t)}function iy(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function a1(e){return e=e||{},e.data=iy(e.data),ny(e),e}const Ih=new Map,oy=new Set;function wr(e,t){let s=Ih.get(e);return s||(s=t(),Ih.set(e,s),oy.add(s)),s}const Vi=(e,t,s)=>{const n=Mn(t,s);n!==void 0&&e.add(n)};class l1{constructor(t){this._config=a1(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=iy(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ny(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return wr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return wr(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return wr(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return wr(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{t&&(l.add(t),u.forEach(d=>Vi(l,t,d))),u.forEach(d=>Vi(l,i,d)),u.forEach(d=>Vi(l,Cn[o]||{},d)),u.forEach(d=>Vi(l,Nt,d)),u.forEach(d=>Vi(l,ic,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),oy.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,Cn[s]||{},Nt.datasets[s]||{},{type:s},Nt,ic]}resolveNamedOptions(t,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ph(this._resolverCache,t,i);let l=r;if(u1(r,s)){o.$shared=!1,n=xe(n)?n():n;const c=this.createResolver(t,n,a);l=wi(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(t,s,n=[""],i){const{resolver:o}=Ph(this._resolverCache,t,n);return ct(s)?wi(o,s,void 0,i):o}}function Ph(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let o=n.get(i);return o||(o={resolver:au(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const c1=e=>ct(e)&&Object.getOwnPropertyNames(e).some(t=>xe(e[t]));function u1(e,t){const{isScriptable:s,isIndexable:n}=Fp(e);for(const i of t){const o=s(i),r=n(i),a=(r||o)&&e[i];if(o&&(xe(a)||c1(a))||r&&It(a))return!0}return!1}var d1="4.5.0";const h1=["top","bottom","left","right","chartArea"];function Lh(e,t){return e==="top"||e==="bottom"||h1.indexOf(e)===-1&&t==="x"}function $h(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Rh(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),Dt(s&&s.onComplete,[e],t)}function f1(e){const t=e.chart,s=t.options.animation;Dt(s&&s.onProgress,[e],t)}function ry(e){return uu()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Nr={},Fh=e=>{const t=ry(e);return Object.values(Nr).filter(s=>s.canvas===t).pop()};function m1(e,t,s){const n=Object.keys(e);for(const i of n){const o=+i;if(o>=t){const r=e[i];delete e[i],(s>0||o>t)&&(e[o+s]=r)}}}function g1(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class Yt{static defaults=Nt;static instances=Nr;static overrides=Cn;static registry=is;static version=d1;static getChart=Fh;static register(...t){is.add(...t),Nh()}static unregister(...t){is.remove(...t),Nh()}constructor(t,s){const n=this.config=new l1(s),i=ry(t),o=Fh(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Pk(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=px(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Px(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Nr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ps.listen(this,"complete",Rh),ps.listen(this,"progress",f1),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return St(t)?s&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return is}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nh(this.canvas,this.ctx),this}stop(){return ps.stop(this),this}resize(t,s){ps.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,rh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Dt(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Tt(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=ac(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Tt(o,r=>{const a=r.options,l=a.id,c=ac(l,a),u=at(a.type,r.dtype);(a.position===void 0||Lh(a.position,c)!==Lh(r.dposition))&&(a.position=r.dposition),i[l]=!0;let d=null;if(l in n&&n[l].type===u)d=n[l];else{const h=is.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),Tt(i,(r,a)=>{r||delete n[a]}),Tt(n,r=>{qs.configure(this,r,r.options),qs.addBox(this,r)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort($h("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||rc(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=is.getController(a),{datasetElementType:c,dataElementType:u}=Nt.datasets[a];Object.assign(l,{dataElementType:is.getElement(u),datasetElementType:c&&is.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&o.indexOf(d)===-1;d.buildOrUpdateElements(h),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Tt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($h("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Tt(this.scales,t=>{qs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Yd(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;m1(t,i,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!Yd(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qs.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Tt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,xe(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ps.has(this)?this.attached&&!ps.running(this)&&ps.start(this):(this.draw(),Rh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Jp(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&zo(s,i),t.controller.draw(),i&&Ho(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Io(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const o=hk.modes[s];return typeof o=="function"?o(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);Se(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),ps.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),nh(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Nr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),t[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Tt(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Tt(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},Tt(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Xr(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),r=o(s,t),a=n?t:o(t,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(t,i,n,r),l=xx(t),c=g1(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Dt(o.onHover,[t,a,this],this),l&&Dt(o.onClick,[t,a,this],this));const u=!Xr(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}function Nh(){return Tt(Yt.instances,e=>e._plugins.invalidate())}function ay(e,t,s=t){e.lineCap=at(s.borderCapStyle,t.borderCapStyle),e.setLineDash(at(s.borderDash,t.borderDash)),e.lineDashOffset=at(s.borderDashOffset,t.borderDashOffset),e.lineJoin=at(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=at(s.borderWidth,t.borderWidth),e.strokeStyle=at(s.borderColor,t.borderColor)}function p1(e,t,s){e.lineTo(s.x,s.y)}function y1(e){return e.stepped?Vx:e.tension||e.cubicInterpolationMode==="monotone"?qx:p1}function ly(e,t,s={}){const n=e.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=t,l=Math.max(i,r),c=Math.min(o,a),u=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function b1(e,t,s,n){const{points:i,options:o}=t,{count:r,start:a,loop:l,ilen:c}=ly(i,s,n),u=y1(o);let{move:d=!0,reverse:h}=n||{},f,m,g;for(f=0;f<=c;++f)m=i[(a+(h?c-f:f))%r],!m.skip&&(d?(e.moveTo(m.x,m.y),d=!1):u(e,g,m,h,o.stepped),g=m);return l&&(m=i[(a+(h?c:0))%r],u(e,g,m,h,o.stepped)),!!l}function v1(e,t,s,n){const i=t.points,{count:o,start:r,ilen:a}=ly(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,d=0,h,f,m,g,p,y;const _=w=>(r+(c?a-w:w))%o,v=()=>{g!==p&&(e.lineTo(u,p),e.lineTo(u,g),e.lineTo(u,y))};for(l&&(f=i[_(0)],e.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[_(h)],f.skip)continue;const w=f.x,x=f.y,C=w|0;C===m?(x<g?g=x:x>p&&(p=x),u=(d*u+w)/++d):(v(),e.lineTo(w,x),m=C,d=0,g=p=x),y=x}v()}function lc(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?v1:b1}function _1(e){return e.stepped?kS:e.tension||e.cubicInterpolationMode==="monotone"?TS:bn}function w1(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),ay(e,t.options),e.stroke(i)}function x1(e,t,s,n){const{segments:i,options:o}=t,r=lc(t);for(const a of i)ay(e,o,a.style),e.beginPath(),r(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const S1=typeof Path2D=="function";function k1(e,t,s,n){S1&&!t.options.segment?w1(e,t,s,n):x1(e,t,s,n)}class Ln extends ke{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;pS(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AS(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],o=this.points,r=qp(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=_1(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:d,end:h}=r[c],f=o[d],m=o[h];if(f===m){a.push(f);continue}const g=Math.abs((i-f[s])/(m[s]-f[s])),p=l(f,m,g,n.stepped);p[s]=t[s],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,s,n){return lc(this)(t,this,s,n)}path(t,s,n){const i=this.segments,o=lc(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(t,this,a,{start:s,end:s+n-1});return!!r}draw(t,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),k1(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jh(e,t,s,n){const i=e.options,{[s]:o}=e.getProps([s],n);return Math.abs(t-o)<i.radius+i.hitRadius}class Jo extends ke{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,n){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(s-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,s){return jh(this,t,"x",s)}inYRange(t,s){return jh(this,t,"y",s)}getCenterPoint(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const n=s&&t.borderWidth||0;return(s+n)*2}draw(t,s){const n=this.options;this.skip||n.radius<.1||!Io(this,s,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,oc(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function cy(e,t){const{x:s,y:n,base:i,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-d,u=n+d):(d=o/2,a=s-d,l=s+d,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function Js(e,t,s,n){return e?0:Be(t,s,n)}function T1(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,o=Rp(n);return{t:Js(i.top,o.top,0,s),r:Js(i.right,o.right,0,t),b:Js(i.bottom,o.bottom,0,s),l:Js(i.left,o.left,0,t)}}function O1(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=Tn(i),r=Math.min(t,s),a=e.borderSkipped,l=n||ct(i);return{topLeft:Js(!l||a.top||a.left,o.topLeft,0,r),topRight:Js(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Js(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Js(!l||a.bottom||a.right,o.bottomRight,0,r)}}function D1(e){const t=cy(e),s=t.right-t.left,n=t.bottom-t.top,i=T1(e,s/2,n/2),o=O1(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function yl(e,t,s,n){const i=t===null,o=s===null,a=e&&!(i&&o)&&cy(e,n);return a&&(i||Vs(t,a.left,a.right))&&(o||Vs(s,a.top,a.bottom))}function M1(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function C1(e,t){e.rect(t.x,t.y,t.w,t.h)}function bl(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,o=(e.x+e.w!==s.x+s.w?t:0)-n,r=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+o,h:e.h+r,radius:e.radius}}class uy extends ke{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=D1(this),a=M1(r.radius)?Po:C1;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,bl(r,s,o)),t.clip(),a(t,bl(o,-s,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,bl(o,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return yl(this,t,s,n)}inXRange(t,s){return yl(this,t,null,s)}inYRange(t,s){return yl(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function E1(e,t,s){const n=e.segments,i=e.points,o=t.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Ma(l,c,i);const u=cc(s,i[l],i[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=qp(t,u);for(const h of d){const f=cc(s,o[h.start],o[h.end],h.loop),m=Vp(a,i,f);for(const g of m)r.push({source:g,target:h,start:{[s]:Bh(u,f,"start",Math.max)},end:{[s]:Bh(u,f,"end",Math.min)}})}}return r}function cc(e,t,s,n){if(n)return;let i=t[e],o=s[e];return e==="angle"&&(i=rs(i),o=rs(o)),{property:e,start:i,end:o}}function A1(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=Ma(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function Ma(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Bh(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function dy(e,t){let s=[],n=!1;return It(e)?(n=!0,s=e):s=A1(e,t),s.length?new Ln({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Wh(e){return e&&e.fill!==!1}function I1(e,t,s){let i=e[t].fill;const o=[t];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Kt(i))return i;if(r=e[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function P1(e,t,s){const n=F1(e);if(ct(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Kt(i)&&Math.floor(i)===i?L1(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function L1(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function $1(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:ct(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function R1(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:ct(e)?n=e.value:n=t.getBaseValue(),n}function F1(e){const t=e.options,s=t.fill;let n=at(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function N1(e){const{scale:t,index:s,line:n}=e,i=[],o=n.segments,r=n.points,a=j1(t,s);a.push(dy({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)B1(i,r[u],a)}return new Ln({points:i,options:{}})}function j1(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===t)break;o.hidden||s.unshift(o.dataset)}return s}function B1(e,t,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=W1(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function W1(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],d=r[u.start][s],h=r[u.end][s];if(Vs(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:n}}class hy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Vt},t.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,o=t.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function U1(e){const{chart:t,fill:s,line:n}=e;if(Kt(s))return z1(t,s);if(s==="stack")return N1(e);if(s==="shape")return!0;const i=H1(e);return i instanceof hy?i:dy(i,n)}function z1(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function H1(e){return(e.scale||{}).getPointPositionForValue?q1(e):V1(e)}function V1(e){const{scale:t={},fill:s}=e,n=$1(s,t);if(Kt(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function q1(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,o=n.reverse?t.max:t.min,r=R1(s,t,o),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,o);return new hy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,r));return a}function vl(e,t,s){const n=U1(t),{chart:i,index:o,line:r,scale:a,axis:l}=t,c=r.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},m=i.getDatasetMeta(o),g=Jp(i,m);n&&r.points.length&&(zo(e,s),J1(e,{line:r,target:n,above:h,below:f,area:s,scale:a,axis:l,clip:g}),Ho(e))}function J1(e,t){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save();let u=o;o!==i&&(c==="x"?(Uh(e,n,r.top),_l(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Uh(e,n,r.bottom)):c==="y"&&(zh(e,n,r.left),_l(e,{line:s,target:n,color:o,scale:a,property:c,clip:l}),e.restore(),e.save(),zh(e,n,r.right),u=i)),_l(e,{line:s,target:n,color:u,scale:a,property:c,clip:l}),e.restore()}function Uh(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[Ma(l,c,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,s),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function zh(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[Ma(l,c,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(s,u.y),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(s,d.y)}e.lineTo(s,t.first().y),e.closePath(),e.clip()}function _l(e,t){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=t,l=E1(s,n,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=o}={}}=c,m=n!==!0;e.save(),e.fillStyle=f,Y1(e,r,a,m&&cc(i,d,h)),e.beginPath();const g=!!s.pathSegment(e,c);let p;if(m){g?e.closePath():Hh(e,n,h,i);const y=!!n.pathSegment(e,u,{move:g,reverse:!0});p=g&&y,p||Hh(e,n,d,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Y1(e,t,s,n){const i=t.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,u,d;o==="x"?(l=r,c=i.top,u=a,d=i.bottom):(l=i.left,c=r,u=i.right,d=a),e.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),d=Math.min(d,s.bottom)),e.rect(l,c,u-l,d-c),e.clip()}}function Hh(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var mu={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Ln&&(l={visible:e.isDatasetVisible(r),index:r,fill:P1(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=I1(i,r,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&vl(e.ctx,a,o))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Wh(o)&&vl(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!Wh(n)||s.drawTime!=="beforeDatasetDraw"||vl(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Vh=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},Z1=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class qh extends ke{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=Dt(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=te(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Vh(n,o);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;o.textAlign="left",o.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((m,g)=>{const p=n+s/2+o.measureText(m.text).width;(g===0||c[c.length-1]+p+2*a>r)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:p,height:i},c[c.length-1]+=p+a}),d}_fitCols(t,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let d=a,h=0,f=0,m=0,g=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:_,itemHeight:v}=K1(n,s,o,p,i);y>0&&f+v+2*a>u&&(d+=h+a,c.push({width:h,height:f}),m+=h+a,g++,h=f=0),l[y]={left:m,top:f,col:g,width:_,height:v},h=Math.max(h,_),f+=v+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=yi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Me(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=Me(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=Me(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=Me(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zo(t,this),this._draw(),Ho(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,a=Nt.color,l=yi(t.rtl,this.left,this.width),c=te(r.font),{padding:u}=r,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:p}=Vh(r,d),y=function(C,D,P){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const $=at(P.lineWidth,1);if(i.fillStyle=at(P.fillStyle,a),i.lineCap=at(P.lineCap,"butt"),i.lineDashOffset=at(P.lineDashOffset,0),i.lineJoin=at(P.lineJoin,"miter"),i.lineWidth=$,i.strokeStyle=at(P.strokeStyle,a),i.setLineDash(at(P.lineDash,[])),r.usePointStyle){const U={radius:g*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:$},L=l.xPlus(C,m/2),E=D+h;Lp(i,U,L,E,r.pointStyleWidth&&m)}else{const U=D+Math.max((d-g)/2,0),L=l.leftForLtr(C,m),E=Tn(P.borderRadius);i.beginPath(),Object.values(E).some(R=>R!==0)?Po(i,{x:L,y:U,w:m,h:g,radius:E}):i.rect(L,U,m,g),i.fill(),$!==0&&i.stroke()}i.restore()},_=function(C,D,P){na(i,P.text,C,D+p/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:Me(o,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:Me(o,this.top+w+u,this.bottom-s[0].height),line:0},Up(this.ctx,t.textDirection);const x=p+u;this.legendItems.forEach((C,D)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const P=i.measureText(C.text).width,$=l.textAlign(C.textAlign||(C.textAlign=r.textAlign)),U=m+h+P;let L=f.x,E=f.y;l.setWidth(this.width),v?D>0&&L+U+u>this.right&&(E=f.y+=x,f.line++,L=f.x=Me(o,this.left+u,this.right-n[f.line])):D>0&&E+x>this.bottom&&(L=f.x=L+s[f.line].width+u,f.line++,E=f.y=Me(o,this.top+w+u,this.bottom-s[f.line].height));const R=l.x(L);if(y(R,E,C),L=Lx($,L+m+h,v?L+U:this.right,t.rtl),_(l.x(L),E,C),v)f.x+=U+u;else if(typeof C.text!="string"){const et=c.lineHeight;f.y+=fy(C,et)+u}else f.y+=x}),zp(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=te(s.font),i=fe(s.padding);if(!s.display)return;const o=yi(t.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Me(t.align,d,this.right-h);else{const m=this.columnSizes.reduce((g,p)=>Math.max(g,p.height),0);u=c+Me(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const f=Me(a,d,d+h);r.textAlign=o.textAlign(Ep(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,na(r,s.text,f,u,n)}_computeTitleHeight(){const t=this.options.title,s=te(t.font),n=fe(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,o;if(Vs(t,this.left,this.right)&&Vs(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Vs(t,i.left,i.left+i.width)&&Vs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!Q1(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,o=Z1(i,n);i&&!o&&Dt(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!o&&Dt(s.onHover,[t,n,this],this)}else n&&Dt(s.onClick,[t,n,this],this)}}function K1(e,t,s,n,i){const o=G1(n,e,t,s),r=X1(i,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function G1(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),t+s.size/2+n.measureText(i).width}function X1(e,t,s){let n=e;return typeof t.text!="string"&&(n=fy(t,s)),n}function fy(e,t){const s=e.text?e.text.length:0;return t*s}function Q1(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Ca={id:"legend",_element:qh,start(e,t,s){const n=e.legend=new qh({ctx:e.ctx,options:s,chart:e});qs.configure(e,n,s),qs.addBox(e,n)},stop(e){qs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;qs.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=fe(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const so={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,o=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=_i(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function ss(e,t){return t&&(It(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ys(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function tT(e,t){const{element:s,datasetIndex:n,index:i}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:e,label:r,parsed:o.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Jh(e,t){const s=e.chart.ctx,{body:n,footer:i,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=te(t.bodyFont),c=te(t.titleFont),u=te(t.footerFont),d=o.length,h=i.length,f=n.length,m=fe(t.padding);let g=m.height,p=0,y=n.reduce((w,x)=>w+x.before.length+x.lines.length+x.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let _=0;const v=function(w){p=Math.max(p,s.measureText(w).width+_)};return s.save(),s.font=c.string,Tt(e.title,v),s.font=l.string,Tt(e.beforeBody.concat(e.afterBody),v),_=t.displayColors?r+2+t.boxPadding:0,Tt(n,w=>{Tt(w.before,v),Tt(w.lines,v),Tt(w.after,v)}),_=0,s.font=u.string,Tt(e.footer,v),s.restore(),p+=m.width,{width:p,height:g}}function eT(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function sT(e,t,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(e==="left"&&i+o+r>t.width||e==="right"&&i-o-r<0)return!0}function nT(e,t,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),sT(c,e,t,s)&&(c="center"),c}function Yh(e,t,s){const n=s.yAlign||t.yAlign||eT(e,s);return{xAlign:s.xAlign||t.xAlign||nT(e,t,s,n),yAlign:n}}function iT(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function oT(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function Zh(e,t,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Tn(r);let m=iT(t,a);const g=oT(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,h)+i:a==="right"&&(m+=Math.max(d,f)+i),{x:Be(m,0,n.width-t.width),y:Be(g,0,n.height-t.height)}}function xr(e,t,s){const n=fe(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Kh(e){return ss([],ys(e))}function rT(e,t,s){return Pn(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function Gh(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const my={beforeTitle:gs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:gs,beforeBody:gs,beforeLabel:gs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return St(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:gs,afterBody:gs,beforeFooter:gs,footer:gs,afterFooter:gs};function ye(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?my[t].call(s,n):i}let Xh=class extends ke{static positioners=so;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new hu(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=rT(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=ye(n,"beforeTitle",this,t),o=ye(n,"title",this,t),r=ye(n,"afterTitle",this,t);let a=[];return a=ss(a,ys(i)),a=ss(a,ys(o)),a=ss(a,ys(r)),a}getBeforeBody(t,s){return Kh(ye(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return Tt(t,o=>{const r={before:[],lines:[],after:[]},a=Gh(n,o);ss(r.before,ys(ye(a,"beforeLabel",this,o))),ss(r.lines,ye(a,"label",this,o)),ss(r.after,ys(ye(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(t,s){return Kh(ye(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=ye(n,"beforeFooter",this,t),o=ye(n,"footer",this,t),r=ye(n,"afterFooter",this,t);let a=[];return a=ss(a,ys(i)),a=ss(a,ys(o)),a=ss(a,ys(r)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(tT(this.chart,s[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,n))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,n))),Tt(a,u=>{const d=Gh(t.callbacks,u);i.push(ye(d,"labelColor",this,u)),o.push(ye(d,"labelPointStyle",this,u)),r.push(ye(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=so[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=Jh(this,n),c=Object.assign({},a,l),u=Yh(this.chart,n,c),d=Zh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const o=this.getCaretPosition(t,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Tn(a),{x:h,y:f}=t,{width:m,height:g}=s;let p,y,_,v,w,x;return o==="center"?(w=f+g/2,i==="left"?(p=h,y=p-r,v=w+r,x=w-r):(p=h+m,y=p+r,v=w-r,x=w+r),_=p):(i==="left"?y=h+Math.max(l,u)+r:i==="right"?y=h+m-Math.max(c,d)-r:y=this.caretX,o==="top"?(v=f,w=v-r,p=y-r,_=y+r):(v=f+g,w=v+r,p=y+r,_=y-r),x=v),{x1:p,x2:y,x3:_,y1:v,y2:w,y3:x}}drawTitle(t,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=yi(n.rtl,this.x,this.width);for(t.x=xr(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=te(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,u=te(o.bodyFont),d=xr(this,"left",o),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=s.y+f;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(h,c)+c/2,y=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,oc(t,g,p,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,oc(t,g,p,y)}else{t.lineWidth=ct(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(h,c),p=i.leftForLtr(i.xPlus(h,1),c-2),y=Tn(r.borderRadius);Object.values(y).some(_=>_!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Po(t,{x:g,y:m,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Po(t,{x:p,y:m+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,m,c,l),t.strokeRect(g,m,c,l),t.fillStyle=r.backgroundColor,t.fillRect(p,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,d=te(n.bodyFont);let h=d.lineHeight,f=0;const m=yi(n.rtl,this.x,this.width),g=function(P){s.fillText(P,m.x(t.x+f),t.y+h/2),t.y+=h+o},p=m.textAlign(r);let y,_,v,w,x,C,D;for(s.textAlign=r,s.textBaseline="middle",s.font=d.string,t.x=xr(this,p,n),s.fillStyle=n.bodyColor,Tt(this.beforeBody,g),f=a&&p!=="right"?r==="center"?c/2+u:c+2+u:0,w=0,C=i.length;w<C;++w){for(y=i[w],_=this.labelTextColors[w],s.fillStyle=_,Tt(y.before,g),v=y.lines,a&&v.length&&(this._drawColorBox(s,t,w,m,n),h=Math.max(d.lineHeight,l)),x=0,D=v.length;x<D;++x)g(v[x]),h=d.lineHeight;Tt(y.after,g)}f=0,h=d.lineHeight,Tt(this.afterBody,g),t.y-=o}drawFooter(t,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=yi(n.rtl,this.x,this.width);for(t.x=xr(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=te(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=Tn(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+d,l),r==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-h,l),s.quadraticCurveTo(a+c,l,a+c,l+h),r==="center"&&o==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+u-m),s.quadraticCurveTo(a+c,l+u,a+c-m,l+u),r==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+f,l+u),s.quadraticCurveTo(a,l+u,a,l+u-f),r==="center"&&o==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+d),s.quadraticCurveTo(a,l,a+d,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=so[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Jh(this,t),l=Object.assign({},r,this._size),c=Yh(s,t,l),u=Zh(t,l,c,s);(i._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=fe(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,s),Up(t,s.textDirection),o.y+=r.top,this.drawTitle(o,t,s),this.drawBody(o,t,s),this.drawFooter(o,t,s),zp(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Xr(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,s,n),a=this._positionChanged(r,t),l=s||!Xr(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const o=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,s){const{caretX:n,caretY:i,options:o}=this,r=so[o.position].call(this,t,s);return r!==!1&&(n!==r.x||i!==r.y)}};var $n={id:"tooltip",_element:Xh,positioners:so,afterInit(e,t,s){s&&(e.tooltip=new Xh({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:my},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function aT(e,t){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,f=o||1,m=u-1,{min:g,max:p}=t,y=!St(r),_=!St(a),v=!St(c),w=(p-g)/(d+1);let x=Zd((p-g)/m/f)*f,C,D,P,$;if(x<1e-14&&!y&&!_)return[{value:g},{value:p}];$=Math.ceil(p/x)-Math.floor(g/x),$>m&&(x=Zd($*x/m/f)*f),St(l)||(C=Math.pow(10,l),x=Math.ceil(x*C)/C),i==="ticks"?(D=Math.floor(g/x)*x,P=Math.ceil(p/x)*x):(D=g,P=p),y&&_&&o&&Ox((a-r)/o,x/1e3)?($=Math.round(Math.min((a-r)/x,u)),x=(a-r)/$,D=r,P=a):v?(D=y?r:D,P=_?a:P,$=c-1,x=(P-D)/$):($=(P-D)/x,po($,Math.round($),x/1e3)?$=Math.round($):$=Math.ceil($));const U=Math.max(Kd(x),Kd(D));C=Math.pow(10,St(l)?U:l),D=Math.round(D*C)/C,P=Math.round(P*C)/C;let L=0;for(y&&(h&&D!==r?(s.push({value:r}),D<r&&L++,po(Math.round((D+L*x)*C)/C,r,Qh(r,w,e))&&L++):D<r&&L++);L<$;++L){const E=Math.round((D+L*x)*C)/C;if(_&&E>a)break;s.push({value:E})}return _&&h&&P!==a?s.length&&po(s[s.length-1].value,a,Qh(a,w,e))?s[s.length-1].value=a:s.push({value:a}):(!_||P===a)&&s.push({value:P}),s}function Qh(e,t,{horizontal:s,minRotation:n}){const i=qt(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class lT extends qo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return St(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(t){const l=cs(i),c=cs(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(i-l)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=aT(i,o);return t.bounds==="ticks"&&Dx(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return ru(t,this.chart.options.locale,this.options.ticks.format)}}class Rn extends lT{static id="linear";static defaults={ticks:{callback:Pp.formatters.numeric}};determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=Kt(t)?t:0,this.max=Kt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=qt(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ea={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_e=Object.keys(Ea);function tf(e,t){return e-t}function ef(e,t){if(St(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),Kt(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(en(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function sf(e,t,s,n){const i=_e.length;for(let o=_e.indexOf(e);o<i-1;++o){const r=Ea[_e[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-t)/(a*r.size))<=n)return _e[o]}return _e[i-1]}function cT(e,t,s,n,i){for(let o=_e.length-1;o>=_e.indexOf(s);o--){const r=_e[o];if(Ea[r].common&&e._adapter.diff(i,n,r)>=t-1)return r}return _e[s?_e.indexOf(s):0]}function uT(e){for(let t=_e.indexOf(e)+1,s=_e.length;t<s;++t)if(Ea[_e[t]].common)return _e[t]}function nf(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=iu(s,t),o=s[n]>=t?s[n]:s[i];e[o]=!0}}function dT(e,t,s,n){const i=e._adapter,o=+i.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function of(e,t,s){const n=[],i={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:dT(e,n,i,s)}class Ds extends qo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new Gp._date(t.adapters.date);i.init(s),go(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:ef(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Kt(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=Kt(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=Ax(i,o,r);return this._unit=s.unit||(n.autoSkip?sf(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):cT(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:uT(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),of(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,o;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;s=Be(s,0,r),n=Be(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||sf(o.minUnit,s,n,this._getLabelCapacity(s)),a=at(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=en(l)||l===!0,u={};let d=s,h,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<n;h=+t.add(h,a,r),f++)nf(u,h,m);return(h===n||i.bounds==="ticks"||f===1)&&nf(u,h,m),Object.keys(u).sort(tf).map(g=>+g)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return Dt(r,[t,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=n[s],f=c&&d&&h&&h.major;return this._adapter.format(t,i||(f?d:u))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=qt(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(t,0,of(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(ef(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Dp(t.sort(tf))}}function Sr(e,t,s){let n=0,i=e.length-1,o,r,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=xn(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=xn(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[i]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class H2 extends Ds{static id="timeseries";static defaults=Ds.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=Sr(s,this.min),this._tableRange=Sr(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)u=i[r+1],l=i[r-1],c=i[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Sr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return Sr(this._table,n*this._tableRange+this._minPos,!0)}}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const hT={datetime:O.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:O.TIME_WITH_SECONDS,minute:O.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Gp._date.override({_id:"luxon",_create:function(e){return O.fromMillis(e,this.options)},init(e){this.options.locale||(this.options.locale=e.locale)},formats:function(){return hT},parse:function(e,t){const s=this.options,n=typeof e;return e===null||n==="undefined"?null:(n==="number"?e=this._create(e):n==="string"?typeof t=="string"?e=O.fromFormat(e,t,s):e=O.fromISO(e,s):e instanceof Date?e=O.fromJSDate(e,s):n==="object"&&!(e instanceof O)&&(e=O.fromObject(e,s)),e.isValid?e.valueOf():null)},format:function(e,t){const s=this._create(e);return typeof t=="string"?s.toFormat(t):s.toLocaleString(t)},add:function(e,t,s){const n={};return n[s]=t,this._create(e).plus(n).valueOf()},diff:function(e,t,s){return this._create(e).diff(this._create(t)).as(s).valueOf()},startOf:function(e,t,s){if(t==="isoWeek"){s=Math.trunc(Math.min(Math.max(0,s),6));const n=this._create(e);return n.minus({days:(n.weekday-s+7)%7}).startOf("day").valueOf()}return t?this._create(e).startOf(t).valueOf():e},endOf:function(e,t){return this._create(e).endOf(t).valueOf()}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const rf={modes:{point(e,t){return jr(e,t,{intersect:!0})},nearest(e,t,s){return gT(e,t,s)},x(e,t,s){return jr(e,t,{intersect:s.intersect,axis:"x"})},y(e,t,s){return jr(e,t,{intersect:s.intersect,axis:"y"})}}};function gu(e,t,s){return(rf.modes[s.mode]||rf.modes.nearest)(e,t,s)}function fT(e,t,s){return s!=="x"&&s!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,s,!0)}function mT(e,t,s){return s==="x"?{x:e.x,y:t.y}:s==="y"?{x:t.x,y:e.y}:t}function jr(e,t,s){return e.filter(n=>s.intersect?n.inRange(t.x,t.y):fT(n,t,s.axis))}function gT(e,t,s){let n=Number.POSITIVE_INFINITY;return jr(e,t,s).reduce((i,o)=>{const r=o.getCenterPoint(),a=mT(t,r,s.axis),l=_i(t,a);return l<n?(i=[o],n=l):l===n&&i.push(o),i},[]).sort((i,o)=>i._index-o._index).slice(0,1)}function Fn(e,t,s){const n=Math.cos(s),i=Math.sin(s),o=t.x,r=t.y;return{x:o+n*(e.x-o)-i*(e.y-r),y:r+i*(e.x-o)+n*(e.y-r)}}const pT=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,Sn=.001,Aa=(e,t,s)=>Math.min(s,Math.max(t,e)),gy=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function yT(e,t,s){for(const n of Object.keys(e))e[n]=Aa(e[n],t,s);return e}function bT(e,t,s,n){return!e||!t||s<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(s+n,2)}function py(e,{x:t,y:s,x2:n,y2:i},o,{borderWidth:r,hitTolerance:a}){const l=(r+a)/2,c=e.x>=t-l-Sn&&e.x<=n+l+Sn,u=e.y>=s-l-Sn&&e.y<=i+l+Sn;return o==="x"?c:(o==="y"||c)&&u}function yy(e,{rect:t,center:s},n,{rotation:i,borderWidth:o,hitTolerance:r}){const a=Fn(e,s,qt(-i));return py(a,t,n,{borderWidth:o,hitTolerance:r})}function Nn(e,t){const{centerX:s,centerY:n}=e.getProps(["centerX","centerY"],t);return{x:s,y:n}}function vT(e,t,s,n=!0){const i=s.split(".");let o=0;for(const r of t.split(".")){const a=i[o++];if(parseInt(r,10)<parseInt(a,10))break;if(pT(a,r)){if(n)throw new Error(`${e} v${s} is not supported. v${t} or newer is required.`);return!1}}return!0}const by=e=>typeof e=="string"&&e.endsWith("%"),vy=e=>parseFloat(e)/100,_y=e=>Aa(vy(e),0,1),qi=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),_T={box:e=>qi(e.centerX,e.centerY),doughnutLabel:e=>qi(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>qi(e.centerX,e.centerY),line:e=>qi(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>qi(e.centerX,e.centerY)};function pu(e,t){return t==="start"?0:t==="end"?e:by(t)?_y(t)*e:e/2}function sn(e,t,s=!0){return typeof t=="number"?t:by(t)?(s?_y(t):vy(t))*e:e}function wT(e,t){const{x:s,width:n}=e,i=t.textAlign;return i==="center"?s+n/2:i==="end"||i==="right"?s+n:s}function wy(e,t,{borderWidth:s,position:n,xAdjust:i,yAdjust:o},r){const a=ct(r),l=t.width+(a?r.width:0)+s,c=t.height+(a?r.height:0)+s,u=yu(n),d=af(e.x,l,i,u.x),h=af(e.y,c,o,u.y);return{x:d,y:h,x2:d+l,y2:h+c,width:l,height:c,centerX:d+l/2,centerY:h+c/2}}function yu(e,t="center"){return ct(e)?{x:at(e.x,t),y:at(e.y,t)}:(e=at(e,t),{x:e,y:e})}const xy=(e,t)=>e&&e.autoFit&&t<1;function Sy(e,t){const s=e.font,n=It(s)?s:[s];return xy(e,t)?n.map(function(i){const o=te(i);return o.size=Math.floor(i.size*t),o.lineHeight=i.lineHeight,te(o)}):n.map(i=>te(i))}function ky(e){return e&&(Se(e.xValue)||Se(e.yValue))}function af(e,t,s=0,n){return e-pu(t,n)+s}function Ei(e,t,s){const n=s.init;if(n){if(n===!0)return Oy(t,s)}else return;return xT(e,t,s)}function Ty(e,t,s){let n=!1;return t.forEach(i=>{xe(e[i])?(n=!0,s[i]=e[i]):Se(s[i])&&delete s[i]}),n}function Oy(e,t){const s=t.type||"line";return _T[s](e)}function xT(e,t,s){const n=Dt(s.init,[{chart:e,properties:t,options:s}]);if(n===!0)return Oy(t,s);if(ct(n))return n}const wl=new Map,ST=e=>isNaN(e)||e<=0,kT=e=>e.reduce(function(t,s){return t+=s.string,t},"");function Ia(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Pa(e,{x:t,y:s},n){n&&(e.translate(t,s),e.rotate(qt(n)),e.translate(-t,-s))}function Ms(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Ai(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function La(e,t){const s=t.content;if(Ia(s))return{width:sn(s.width,t.width),height:sn(s.height,t.height)};const n=Sy(t),i=t.textStrokeWidth,o=It(s)?s:[s],r=o.join()+kT(n)+i+(e._measureText?"-spriting":"");return wl.has(r)||wl.set(r,MT(e,o,n,i)),wl.get(r)}function Dy(e,t,s){const{x:n,y:i,width:o,height:r}=t;e.save(),Ai(e,s);const a=Ms(e,s);e.fillStyle=s.backgroundColor,e.beginPath(),Po(e,{x:n,y:i,w:o,h:r,radius:yT(Tn(s.borderRadius),0,Math.min(o,r)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}function My(e,t,s,n){const i=s.content;if(Ia(i)){e.save(),e.globalAlpha=AT(s.opacity,i.style.opacity),e.drawImage(i,t.x,t.y,t.width,t.height),e.restore();return}const o=It(i)?i:[i],r=Sy(s,n),a=s.color,l=It(a)?a:[a],c=wT(t,s),u=t.y+s.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=s.textAlign,TT(e,s)&&CT(e,{x:c,y:u},o,r),ET(e,{x:c,y:u},o,{fonts:r,colors:l}),e.restore()}function TT(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function OT(e,t,s,n){const{radius:i,options:o}=t,r=o.pointStyle,a=o.rotation;let l=(a||0)*nu;if(Ia(r)){e.save(),e.translate(s,n),e.rotate(l),e.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),e.restore();return}ST(i)||DT(e,{x:s,y:n,radius:i,rotation:a,style:r,rad:l})}function DT(e,{x:t,y:s,radius:n,rotation:i,style:o,rad:r}){let a,l,c,u;switch(e.beginPath(),o){default:e.arc(t,s,n,0,Vt),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(r)*n,s-Math.cos(r)*n),r+=ea,e.lineTo(t+Math.sin(r)*n,s-Math.cos(r)*n),r+=ea,e.lineTo(t+Math.sin(r)*n,s-Math.cos(r)*n),e.closePath();break;case"rectRounded":u=n*.516,c=n-u,a=Math.cos(r+Fe)*c,l=Math.sin(r+Fe)*c,e.arc(t-a,s-l,u,r-Ot,r-Qt),e.arc(t+l,s-a,u,r-Qt,r),e.arc(t+a,s+l,u,r,r+Qt),e.arc(t-l,s+a,u,r+Qt,r+Ot),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*n,e.rect(t-c,s-c,2*c,2*c);break}r+=Fe;case"rectRot":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+l,s-a),e.lineTo(t+a,s+l),e.lineTo(t-l,s+a),e.closePath();break;case"crossRot":r+=Fe;case"cross":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"star":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a),r+=Fe,a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l),e.moveTo(t+l,s-a),e.lineTo(t-l,s+a);break;case"line":a=Math.cos(r)*n,l=Math.sin(r)*n,e.moveTo(t-a,s-l),e.lineTo(t+a,s+l);break;case"dash":e.moveTo(t,s),e.lineTo(t+Math.cos(r)*n,s+Math.sin(r)*n);break}e.fill()}function MT(e,t,s,n){e.save();const i=t.length;let o=0,r=n;for(let a=0;a<i;a++){const l=s[Math.min(a,s.length-1)];e.font=l.string;const c=t[a];o=Math.max(o,e.measureText(c).width+n),r+=l.lineHeight}return e.restore(),{width:o,height:r}}function CT(e,{x:t,y:s},n,i){e.beginPath();let o=0;n.forEach(function(r,a){const l=i[Math.min(a,i.length-1)],c=l.lineHeight;e.font=l.string,e.strokeText(r,t,s+c/2+o),o+=c}),e.stroke()}function ET(e,{x:t,y:s},n,{fonts:i,colors:o}){let r=0;n.forEach(function(a,l){const c=o[Math.min(l,o.length-1)],u=i[Math.min(l,i.length-1)],d=u.lineHeight;e.beginPath(),e.font=u.string,e.fillStyle=c,e.fillText(a,t,s+d/2+r),r+=d,e.fill()})}function AT(e,t){const s=en(e)?e:t;return en(s)?Aa(s,0,1):1}const Cy=["left","bottom","top","right"];function IT(e,t){const{pointX:s,pointY:n,options:i}=t,o=i.callout,r=o&&o.display&&FT(t,o);if(!r||jT(t,o,r))return;if(e.save(),e.beginPath(),!Ms(e,o))return e.restore();const{separatorStart:l,separatorEnd:c}=PT(t,r),{sideStart:u,sideEnd:d}=$T(t,r,l);(o.margin>0||i.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(c.x,c.y)),e.moveTo(u.x,u.y),e.lineTo(d.x,d.y);const h=Fn({x:s,y:n},t.getCenterPoint(),qt(-t.rotation));e.lineTo(h.x,h.y),e.stroke(),e.restore()}function PT(e,t){const{x:s,y:n,x2:i,y2:o}=e,r=LT(e,t);let a,l;return t==="left"||t==="right"?(a={x:s+r,y:n},l={x:a.x,y:o}):(a={x:s,y:n+r},l={x:i,y:a.y}),{separatorStart:a,separatorEnd:l}}function LT(e,t){const{width:s,height:n,options:i}=e,o=i.callout.margin+i.borderWidth/2;return t==="right"?s+o:t==="bottom"?n+o:-o}function $T(e,t,s){const{y:n,width:i,height:o,options:r}=e,a=r.callout.start,l=RT(t,r.callout);let c,u;return t==="left"||t==="right"?(c={x:s.x,y:n+sn(o,a)},u={x:c.x+l,y:c.y}):(c={x:s.x+sn(i,a),y:s.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function RT(e,t){const s=t.side;return e==="left"||e==="top"?-s:s}function FT(e,t){const s=t.position;return Cy.includes(s)?s:NT(e,t)}function NT(e,t){const{x:s,y:n,x2:i,y2:o,width:r,height:a,pointX:l,pointY:c,centerX:u,centerY:d,rotation:h}=e,f={x:u,y:d},m=t.start,g=sn(r,m),p=sn(a,m),y=[s,s+g,s+g,i],_=[n+p,o,n,o],v=[];for(let w=0;w<4;w++){const x=Fn({x:y[w],y:_[w]},f,qt(h));v.push({position:Cy[w],distance:_i(x,{x:l,y:c})})}return v.sort((w,x)=>w.distance-x.distance)[0].position}function jT(e,t,s){const{pointX:n,pointY:i}=e,o=t.margin;let r=n,a=i;return s==="left"?r+=o:s==="right"?r-=o:s==="top"?a+=o:s==="bottom"&&(a-=o),e.inRange(r,a)}const lf={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Si(e,t,s){return t=typeof t=="number"?t:e.parse(t),Kt(t)?e.getPixelForValue(t):s}function En(e,t,s){const n=t[s];if(n||s==="scaleID")return n;const i=s.charAt(0),o=Object.values(e).filter(r=>r.axis&&r.axis===i);return o.length?o[0].id:i}function Ey(e,t){if(e){const s=e.options.reverse,n=Si(e,t.min,s?t.end:t.start),i=Si(e,t.max,s?t.start:t.end);return{start:n,end:i}}}function Ay(e,t){const{chartArea:s,scales:n}=e,i=n[En(n,t,"xScaleID")],o=n[En(n,t,"yScaleID")];let r=s.width/2,a=s.height/2;return i&&(r=Si(i,t.xValue,i.left+i.width/2)),o&&(a=Si(o,t.yValue,o.top+o.height/2)),{x:r,y:a}}function bu(e,t){const s=e.scales,n=s[En(s,t,"xScaleID")],i=s[En(s,t,"yScaleID")];if(!n&&!i)return{};let{left:o,right:r}=n||e.chartArea,{top:a,bottom:l}=i||e.chartArea;const c=cf(n,{min:t.xMin,max:t.xMax,start:o,end:r});o=c.start,r=c.end;const u=cf(i,{min:t.yMin,max:t.yMax,start:l,end:a});return a=u.start,l=u.end,{x:o,y:a,x2:r,y2:l,width:r-o,height:l-a,centerX:o+(r-o)/2,centerY:a+(l-a)/2}}function Iy(e,t){if(!ky(t)){const s=bu(e,t);let n=t.radius;(!n||isNaN(n))&&(n=Math.min(s.width,s.height)/2,t.radius=n);const i=n*2,o=s.centerX+t.xAdjust,r=s.centerY+t.yAdjust;return{x:o-n,y:r-n,x2:o+n,y2:r+n,centerX:o,centerY:r,width:i,height:i,radius:n}}return WT(e,t)}function BT(e,t){const{scales:s,chartArea:n}=e,i=s[t.scaleID],o={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return i?UT(i,o,t):zT(s,o,t),o}function Py(e,t){const s=bu(e,t);return s.initProperties=Ei(e,s,t),s.elements=[{type:"label",optionScope:"label",properties:qT(e,s,t),initProperties:s.initProperties}],s}function WT(e,t){const s=Ay(e,t),n=t.radius*2;return{x:s.x-t.radius+t.xAdjust,y:s.y-t.radius+t.yAdjust,x2:s.x+t.radius+t.xAdjust,y2:s.y+t.radius+t.yAdjust,centerX:s.x+t.xAdjust,centerY:s.y+t.yAdjust,radius:t.radius,width:n,height:n}}function cf(e,t){const s=Ey(e,t)||t;return{start:Math.min(s.start,s.end),end:Math.max(s.start,s.end)}}function UT(e,t,s){const n=Si(e,s.value,NaN),i=Si(e,s.endValue,n);e.isHorizontal()?(t.x=n,t.x2=i):(t.y=n,t.y2=i)}function zT(e,t,s){for(const n of Object.keys(lf)){const i=e[En(e,s,n)];if(i){const{min:o,max:r,start:a,end:l,startProp:c,endProp:u}=lf[n],d=Ey(i,{min:s[o],max:s[r],start:i[a],end:i[l]});t[c]=d.start,t[u]=d.end}}}function HT({properties:e,options:t},s,n,i){const{x:o,x2:r,width:a}=e;return Ly({start:o,end:r,borderWidth:t.borderWidth},{position:n.x,padding:{start:i.left,end:i.right},adjust:t.label.xAdjust,size:s.width})}function VT({properties:e,options:t},s,n,i){const{y:o,y2:r,height:a}=e;return Ly({start:o,end:r,borderWidth:t.borderWidth},{position:n.y,padding:{start:i.top,end:i.bottom},adjust:t.label.yAdjust,size:s.height})}function Ly(e,t){const{start:s,end:n,borderWidth:i}=e,{position:o,padding:{start:r,end:a},adjust:l}=t,c=n-i-s-r-a-t.size;return s+i/2+l+pu(c,o)}function qT(e,t,s){const n=s.label;n.backgroundColor="transparent",n.callout.display=!1;const i=yu(n.position),o=fe(n.padding),r=La(e.ctx,n),a=HT({properties:t,options:s},r,i,o),l=VT({properties:t,options:s},r,i,o),c=r.width+o.width,u=r.height+o.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:n.rotation}}const uc=["enter","leave"],vu=uc.concat("click");function JT(e,t,s){t.listened=Ty(s,vu,t.listeners),t.moveListened=!1,uc.forEach(n=>{xe(s[n])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(n=>{!t.listened&&xe(n.click)&&(t.listened=!0),t.moveListened||uc.forEach(i=>{xe(n[i])&&(t.listened=!0,t.moveListened=!0)})})}function YT(e,t,s){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return ZT(e,t,s);case"click":return KT(e,t,s)}}function ZT(e,t,s){if(!e.moveListened)return;let n;t.type==="mousemove"?n=gu(e.visibleElements,t,s.interaction):n=[];const i=e.hovered;e.hovered=n;const o={state:e,event:t};let r=uf(o,"leave",i,n);return uf(o,"enter",n,i)||r}function uf({state:e,event:t},s,n,i){let o;for(const r of n)i.indexOf(r)<0&&(o=$y(r.options[s]||e.listeners[s],r,t)||o);return o}function KT(e,t,s){const n=e.listeners,i=gu(e.visibleElements,t,s.interaction);let o;for(const r of i)o=$y(r.options.click||n.click,r,t)||o;return o}function $y(e,t,s){return Dt(e,[t.$context,s])===!0}const ra=["afterDraw","beforeDraw"];function GT(e,t,s){const n=t.visibleElements;t.hooked=Ty(s,ra,t.hooks),t.hooked||n.forEach(i=>{t.hooked||ra.forEach(o=>{xe(i.options[o])&&(t.hooked=!0)})})}function df(e,t,s){if(e.hooked){const n=t.options[s]||e.hooks[s];return Dt(n,[t.$context])}}function XT(e,t,s){const n=nO(e.scales,t,s);let i=hf(t,n,"min","suggestedMin");i=hf(t,n,"max","suggestedMax")||i,i&&xe(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function QT(e,t){for(const s of e)eO(s,t)}function hf(e,t,s,n){if(Kt(t[s])&&!tO(e.options,s,n)){const i=e[s]!==t[s];return e[s]=t[s],i}}function tO(e,t,s){return Se(e[t])||Se(e[s])}function eO(e,t){for(const s of["scaleID","xScaleID","yScaleID"]){const n=En(t,e,s);n&&!t[n]&&sO(e,s)&&console.warn(`No scale found with id '${n}' for annotation '${e.id}'`)}}function sO(e,t){if(t==="scaleID")return!0;const s=t.charAt(0);for(const n of["Min","Max","Value"])if(Se(e[s+n]))return!0;return!1}function nO(e,t,s){const n=t.axis,i=t.id,o=n+"ScaleID",r={min:at(t.min,Number.NEGATIVE_INFINITY),max:at(t.max,Number.POSITIVE_INFINITY)};for(const a of s)a.scaleID===i?ff(a,t,["value","endValue"],r):En(e,a,o)===i&&ff(a,t,[n+"Min",n+"Max",n+"Value"],r);return r}function ff(e,t,s,n){for(const i of s){const o=e[i];if(Se(o)){const r=t.parse(o);n.min=Math.min(n.min,r),n.max=Math.max(n.max,r)}}}class Ii extends ke{inRange(t,s,n,i){const{x:o,y:r}=Fn({x:t,y:s},this.getCenterPoint(i),qt(-this.options.rotation));return py({x:o,y:r},this.getProps(["x","y","x2","y2"],i),n,this.options)}getCenterPoint(t){return Nn(this,t)}draw(t){t.save(),Pa(t,this.getCenterPoint(),this.options.rotation),Dy(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Py(t,s)}}Ii.id="boxAnnotation";Ii.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ii.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ii.descriptors={label:{_fallback:!0}};class $a extends ke{inRange(t,s,n,i){return yy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Nn(this,t)}draw(t){const s=this.options;!s.display||!s.content||(cO(t,this),t.save(),Pa(t,this.getCenterPoint(),this.rotation),My(t,this,s,this._fitRatio),t.restore())}resolveElementProperties(t,s){const n=iO(t,s);if(!n)return{};const{controllerMeta:i,point:o,radius:r}=rO(t,s,n);let a=La(t.ctx,s);const l=aO(a,r);xy(s,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:d}=s,h=wy(o,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:d});return{initProperties:Ei(t,h,s),...h,...i,rotation:s.rotation,_fitRatio:l}}}$a.id="doughnutLabelAnnotation";$a.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};$a.defaultRoutes={};function iO(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(s,n){const i=n.controller;return i instanceof rk&&oO(e,t,n.data)&&(!s||i.innerRadius<s.controller.innerRadius)&&i.options.circumference>=90?n:s},void 0)}function oO(e,t,s){if(!t.autoHide)return!0;for(let n=0;n<s.length;n++)if(!s[n].hidden&&e.getDataVisibility(n))return!0}function rO({chartArea:e},t,s){const{left:n,top:i,right:o,bottom:r}=e,{innerRadius:a,offsetX:l,offsetY:c}=s.controller,u=(n+o)/2+l,d=(i+r)/2+c,h={left:Math.max(u-a,n),right:Math.min(u+a,o),top:Math.max(d-a,i),bottom:Math.min(d+a,r)},f={x:(h.left+h.right)/2,y:(h.top+h.bottom)/2},m=t.spacing+t.borderWidth/2,g=a-m,p=f.y>d,y=p?i+m:r-m,_=lO(y,u,d,g);return{controllerMeta:{_centerX:u,_centerY:d,_radius:g,_counterclockwise:p,..._},point:f,radius:Math.min(a,Math.min(h.right-h.left,h.bottom-h.top)/2)}}function aO({width:e,height:t},s){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return s*2/n}function lO(e,t,s,n){const i=Math.pow(s-e,2),o=Math.pow(n,2),r=t*-2,a=Math.pow(t,2)+i-o,l=Math.pow(r,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Vt};const c=(-r-Math.sqrt(l))/2,u=(-r+Math.sqrt(l))/2;return{_startAngle:nc({x:t,y:s},{x:c,y:e}).angle,_endAngle:nc({x:t,y:s},{x:u,y:e}).angle}}function cO(e,t){const{_centerX:s,_centerY:n,_radius:i,_startAngle:o,_endAngle:r,_counterclockwise:a,options:l}=t;e.save();const c=Ms(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(s,n,i,o,r,a),e.closePath(),e.fill(),c&&e.stroke(),e.restore()}class Yo extends ke{inRange(t,s,n,i){return yy({x:t,y:s},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Nn(this,t)}draw(t){const s=this.options,n=!Se(this._visible)||this._visible;!s.display||!s.content||!n||(t.save(),Pa(t,this.getCenterPoint(),this.rotation),IT(t,this),Dy(t,this,s),My(t,uO(this),s),t.restore())}resolveElementProperties(t,s){let n;if(ky(s))n=Ay(t,s);else{const{centerX:a,centerY:l}=bu(t,s);n={x:a,y:l}}const i=fe(s.padding),o=La(t.ctx,s),r=wy(n,o,s,i);return{initProperties:Ei(t,r,s),pointX:n.x,pointY:n.y,...r,rotation:s.rotation}}}Yo.id="labelAnnotation";Yo.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Yo.defaultRoutes={borderColor:"color"};function uO({x:e,y:t,width:s,height:n,options:i}){const o=i.borderWidth/2,r=fe(i.padding);return{x:e+r.left+o,y:t+r.top+o,width:s-r.left-r.right-i.borderWidth,height:n-r.top-r.bottom-i.borderWidth}}const _u=(e,t,s)=>({x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}),dc=(e,t,s)=>_u(t,s,Math.abs((e-t.y)/(s.y-t.y))).x,mf=(e,t,s)=>_u(t,s,Math.abs((e-t.x)/(s.x-t.x))).y,no=e=>e*e,dO=(e,t,{x:s,y:n,x2:i,y2:o},r)=>r==="y"?{start:Math.min(n,o),end:Math.max(n,o),value:t}:{start:Math.min(s,i),end:Math.max(s,i),value:e},gf=(e,t,s,n)=>(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*s,hc=(e,t,s,n)=>({x:gf(e.x,t.x,s.x,n),y:gf(e.y,t.y,s.y,n)}),pf=(e,t,s,n)=>2*(1-n)*(t-e)+2*n*(s-t),yf=(e,t,s,n)=>-Math.atan2(pf(e.x,t.x,s.x,n),pf(e.y,t.y,s.y,n))+.5*Ot;class Zo extends ke{inRange(t,s,n,i){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const r={mouseX:t,mouseY:s},{path:a,ctx:l}=this;if(a){Ms(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=t*u.currentDevicePixelRatio,h=s*u.currentDevicePixelRatio,f=l.isPointInStroke(a,d,h)||fc(this,r,i);return l.restore(),f}const c=no(o);return gO(this,r,c,i)||fc(this,r,i)}return hO(this,{mouseX:t,mouseY:s},n,{hitSize:o,useFinalPosition:i})}getCenterPoint(t){return Nn(this,t)}draw(t){const{x:s,y:n,x2:i,y2:o,cp:r,options:a}=this;if(t.save(),!Ms(t,a))return t.restore();Ai(t,a);const l=Math.sqrt(Math.pow(i-s,2)+Math.pow(o-n,2));if(a.curve&&r)return SO(t,this,r,l),t.restore();const{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ry(this),f=Math.atan2(o-n,i-s);t.translate(s,n),t.rotate(f),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-h,0),t.shadowColor=a.borderShadowColor,t.stroke(),mc(t,0,d,c),mc(t,l,-h,u),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){const n=BT(t,s),{x:i,y:o,x2:r,y2:a}=n,l=fO(n,t.chartArea),c=l?mO({x:i,y:o},{x:r,y:a},t.chartArea):{x:i,y:o,x2:r,y2:a,width:Math.abs(r-i),height:Math.abs(a-o)};if(c.centerX=(r+i)/2,c.centerY=(a+o)/2,c.initProperties=Ei(t,c,s),s.curve){const d={x:c.x,y:c.y},h={x:c.x2,y:c.y2};c.cp=xO(c,s,_i(d,h))}const u=pO(t,c,s.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}Zo.id="lineAnnotation";const bf={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Zo.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},bf),fill:!1,length:12,start:Object.assign({},bf),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Yo.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Zo.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Zo.defaultRoutes={borderColor:"color"};function hO(e,{mouseX:t,mouseY:s},n,{hitSize:i,useFinalPosition:o}){const r=dO(t,s,e.getProps(["x","y","x2","y2"],o),n);return gy(r,i)||fc(e,{mouseX:t,mouseY:s},o,n)}function fO({x:e,y:t,x2:s,y2:n},{top:i,right:o,bottom:r,left:a}){return!(e<a&&s<a||e>o&&s>o||t<i&&n<i||t>r&&n>r)}function vf({x:e,y:t},s,{top:n,right:i,bottom:o,left:r}){return e<r&&(t=mf(r,{x:e,y:t},s),e=r),e>i&&(t=mf(i,{x:e,y:t},s),e=i),t<n&&(e=dc(n,{x:e,y:t},s),t=n),t>o&&(e=dc(o,{x:e,y:t},s),t=o),{x:e,y:t}}function mO(e,t,s){const{x:n,y:i}=vf(e,t,s),{x:o,y:r}=vf(t,e,s);return{x:n,y:i,x2:o,y2:r,width:Math.abs(o-n),height:Math.abs(r-i)}}function gO(e,{mouseX:t,mouseY:s},n=Sn,i){const{x:o,y:r,x2:a,y2:l}=e.getProps(["x","y","x2","y2"],i),c=a-o,u=l-r,d=no(c)+no(u),h=d===0?-1:((t-o)*c+(s-r)*u)/d;let f,m;return h<0?(f=o,m=r):h>1?(f=a,m=l):(f=o+h*c,m=r+h*u),no(t-f)+no(s-m)<=n}function fc(e,{mouseX:t,mouseY:s},n,i){const o=e.label;return o.options.display&&o.inRange(t,s,i,n)}function pO(e,t,s){const n=s.borderWidth,i=fe(s.padding),o=La(e.ctx,s),r=o.width+i.width+n,a=o.height+i.height+n;return bO(t,s,{width:r,height:a,padding:i},e.chartArea)}function yO(e){const{x:t,y:s,x2:n,y2:i}=e,o=Math.atan2(i-s,n-t);return o>Ot/2?o-Ot:o<Ot/-2?o+Ot:o}function bO(e,t,s,n){const{width:i,height:o,padding:r}=s,{xAdjust:a,yAdjust:l}=t,c={x:e.x,y:e.y},u={x:e.x2,y:e.y2},d=t.rotation==="auto"?yO(e):qt(t.rotation),h=vO(i,o,d),f=_O(e,t,{labelSize:h,padding:r},n),m=e.cp?hc(c,e.cp,u,f):_u(c,u,f),g={size:h.w,min:n.left,max:n.right,padding:r.left},p={size:h.h,min:n.top,max:n.bottom,padding:r.top},y=wf(m.x,g)+a,_=wf(m.y,p)+l;return{x:y-i/2,y:_-o/2,x2:y+i/2,y2:_+o/2,centerX:y,centerY:_,pointX:m.x,pointY:m.y,width:i,height:o,rotation:Tp(d)}}function vO(e,t,s){const n=Math.cos(s),i=Math.sin(s);return{w:Math.abs(e*n)+Math.abs(t*i),h:Math.abs(e*i)+Math.abs(t*n)}}function _O(e,t,s,n){let i;const o=wO(e,n);return t.position==="start"?i=_f({w:e.x2-e.x,h:e.y2-e.y},s,t,o):t.position==="end"?i=1-_f({w:e.x-e.x2,h:e.y-e.y2},s,t,o):i=pu(1,t.position),i}function _f(e,t,s,n){const{labelSize:i,padding:o}=t,r=e.w*n.dx,a=e.h*n.dy,l=r>0&&(i.w/2+o.left-n.x)/r,c=a>0&&(i.h/2+o.top-n.y)/a;return Aa(Math.max(l,c),0,.25)}function wO(e,t){const{x:s,x2:n,y:i,y2:o}=e,r=Math.min(i,o)-t.top,a=Math.min(s,n)-t.left,l=t.bottom-Math.max(i,o),c=t.right-Math.max(s,n);return{x:Math.min(a,c),y:Math.min(r,l),dx:a<=c?1:-1,dy:r<=l?1:-1}}function wf(e,t){const{size:s,min:n,max:i,padding:o}=t,r=s/2;return s>i-n?(i+n)/2:(n>=e-o-r&&(e=n+o+r),i<=e+o+r&&(e=i-o-r),e)}function Ry(e){const t=e.options,s=t.arrowHeads&&t.arrowHeads.start,n=t.arrowHeads&&t.arrowHeads.end;return{startOpts:s,endOpts:n,startAdjust:xf(e,s),endAdjust:xf(e,n)}}function xf(e,t){if(!t||!t.display)return 0;const{length:s,width:n}=t,i=e.options.borderWidth/2,o={x:s,y:n+i};return Math.abs(dc(0,o,{x:0,y:i}))}function mc(e,t,s,n){if(!n||!n.display)return;const{length:i,width:o,fill:r,backgroundColor:a,borderColor:l}=n,c=Math.abs(t-i)+s;e.beginPath(),Ai(e,n),Ms(e,n),e.moveTo(c,-o),e.lineTo(t+s,0),e.lineTo(c,o),r===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=n.borderShadowColor,e.stroke()}function xO(e,t,s){const{x:n,y:i,x2:o,y2:r,centerX:a,centerY:l}=e,c=Math.atan2(r-i,o-n),u=yu(t.controlPoint,0),d={x:a+sn(s,u.x,!1),y:l+sn(s,u.y,!1)};return Fn(d,{x:a,y:l},c)}function Sf(e,{x:t,y:s},{angle:n,adjust:i},o){!o||!o.display||(e.save(),e.translate(t,s),e.rotate(n),mc(e,0,-i,o),e.restore())}function SO(e,t,s,n){const{x:i,y:o,x2:r,y2:a,options:l}=t,{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=Ry(t),f={x:i,y:o},m={x:r,y:a},g=yf(f,s,m,0),p=yf(f,s,m,1)-Ot,y=hc(f,s,m,d/n),_=hc(f,s,m,1-h/n),v=new Path2D;e.beginPath(),v.moveTo(y.x,y.y),v.quadraticCurveTo(s.x,s.y,_.x,_.y),e.shadowColor=l.borderShadowColor,e.stroke(v),t.path=v,t.ctx=e,Sf(e,y,{angle:g,adjust:d},c),Sf(e,_,{angle:p,adjust:h},u)}class Ko extends ke{inRange(t,s,n,i){const o=this.options.rotation,r=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return kO({x:t,y:s},this.getProps(["width","height","centerX","centerY"],i),o,r);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],i),d=n==="y"?{start:l,end:u}:{start:a,end:c},h=Fn({x:t,y:s},this.getCenterPoint(i),qt(-o));return h[n]>=d.start-r-Sn&&h[n]<=d.end+r+Sn}getCenterPoint(t){return Nn(this,t)}draw(t){const{width:s,height:n,centerX:i,centerY:o,options:r}=this;t.save(),Pa(t,this.getCenterPoint(),r.rotation),Ai(t,this.options),t.beginPath(),t.fillStyle=r.backgroundColor;const a=Ms(t,r);t.ellipse(i,o,n/2,s/2,Ot/2,0,2*Ot),t.fill(),a&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,s){return Py(t,s)}}Ko.id="ellipseAnnotation";Ko.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Ii.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ko.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ko.descriptors={label:{_fallback:!0}};function kO(e,t,s,n){const{width:i,height:o,centerX:r,centerY:a}=t,l=i/2,c=o/2;if(l<=0||c<=0)return!1;const u=qt(s||0),d=Math.cos(u),h=Math.sin(u),f=Math.pow(d*(e.x-r)+h*(e.y-a),2),m=Math.pow(h*(e.x-r)-d*(e.y-a),2);return f/Math.pow(l+n,2)+m/Math.pow(c+n,2)<=1.0001}class Ra extends ke{inRange(t,s,n,i){const{x:o,y:r,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?bT({x:t,y:s},this.getCenterPoint(i),c/2,u):gy(n==="y"?{start:r,end:l,value:s}:{start:o,end:a,value:t},u)}getCenterPoint(t){return Nn(this,t)}draw(t){const s=this.options,n=s.borderWidth;if(s.radius<.1)return;t.save(),t.fillStyle=s.backgroundColor,Ai(t,s);const i=Ms(t,s);OT(t,this,this.centerX,this.centerY),i&&!Ia(s.pointStyle)&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore(),s.borderWidth=n}resolveElementProperties(t,s){const n=Iy(t,s);return n.initProperties=Ei(t,n,s),n}}Ra.id="pointAnnotation";Ra.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ra.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Fa extends ke{inRange(t,s,n,i){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&OO(this.elements,t,s,i);const o=Fn({x:t,y:s},this.getCenterPoint(i),qt(-this.options.rotation)),r=this.elements.map(c=>n==="y"?c.bY:c.bX),a=Math.min(...r),l=Math.max(...r);return o[n]>=a&&o[n]<=l}getCenterPoint(t){return Nn(this,t)}draw(t){const{elements:s,options:n}=this;t.save(),t.beginPath(),t.fillStyle=n.backgroundColor,Ai(t,n);const i=Ms(t,n);let o=!0;for(const r of s)o?(t.moveTo(r.x,r.y),o=!1):t.lineTo(r.x,r.y);t.closePath(),t.fill(),i&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,s){const n=Iy(t,s),{sides:i,rotation:o}=s,r=[],a=2*Ot/i;let l=o*nu;for(let c=0;c<i;c++,l+=a){const u=TO(n,s,l);u.initProperties=Ei(t,n,s),r.push(u)}return n.elements=r,n}}Fa.id="polygonAnnotation";Fa.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Fa.defaultRoutes={borderColor:"color",backgroundColor:"color"};function TO({centerX:e,centerY:t},{radius:s,borderWidth:n,hitTolerance:i},o){const r=(n+i)/2,a=Math.sin(o),l=Math.cos(o),c={x:e+a*s,y:t-l*s};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:e+a*(s+r),bY:t-l*(s+r)}}}function OO(e,t,s,n){let i=!1,o=e[e.length-1].getProps(["bX","bY"],n);for(const r of e){const a=r.getProps(["bX","bY"],n);a.bY>s!=o.bY>s&&t<(o.bX-a.bX)*(s-a.bY)/(o.bY-a.bY)+a.bX&&(i=!i),o=a}return i}const Gs={box:Ii,doughnutLabel:$a,ellipse:Ko,label:Yo,line:Zo,point:Ra,polygon:Fa};Object.keys(Gs).forEach(e=>{Nt.describe(`elements.${Gs[e].id}`,{_fallback:"plugins.annotation.common"})});const DO={update:Object.assign},MO=vu.concat(ra),kf=(e,t)=>ct(t)?pc(e,t):e,gc=e=>e==="color"||e==="font";function wu(e="line"){return Gs[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function CO(e,t,s,n){const i=AO(e,s.animations,n),o=t.annotations,r=LO(t.elements,o);for(let a=0;a<o.length;a++){const l=o[a],c=Fy(r,a,l.type),u=l.setContext(PO(e,c,r,l)),d=c.resolveElementProperties(e,u);d.skip=EO(d),"elements"in d&&(IO(c,d.elements,u,i),delete d.elements),Se(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=Ny(u),i.update(c,d)}}function EO(e){return isNaN(e.x)||isNaN(e.y)}function AO(e,t,s){return s==="reset"||s==="none"||s==="resize"?DO:new hu(e,t)}function IO(e,t,s,n){const i=e.elements||(e.elements=[]);i.length=t.length;for(let o=0;o<t.length;o++){const r=t[o],a=r.properties,l=Fy(i,o,r.type,r.initProperties),c=s[r.optionScope].override(r);a.options=Ny(c),n.update(l,a)}}function Fy(e,t,s,n){const i=Gs[wu(s)];let o=e[t];return(!o||!(o instanceof i))&&(o=e[t]=new i,Object.assign(o,n)),o}function Ny(e){const t=Gs[wu(e.type)],s={};s.id=e.id,s.type=e.type,s.drawTime=e.drawTime,Object.assign(s,pc(e,t.defaults),pc(e,t.defaultRoutes));for(const n of MO)s[n]=e[n];return s}function pc(e,t){const s={};for(const n of Object.keys(t)){const i=t[n],o=e[n];gc(n)&&It(o)?s[n]=o.map(r=>kf(r,i)):s[n]=kf(o,i)}return s}function PO(e,t,s,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return s.filter(i=>i&&i.options)},id:n.id,type:"annotation"}))}function LO(e,t){const s=t.length,n=e.length;if(n<s){const i=s-n;e.splice(n,0,...new Array(i))}else n>s&&e.splice(s,n-s);return e}var $O="3.1.0";const Fs=new Map,Tf=e=>e.type!=="doughnutLabel",RO=vu.concat(ra);var Pi={id:"annotation",version:$O,beforeRegister(){vT("chart.js","4.0",Yt.version)},afterRegister(){Yt.register(Gs)},afterUnregister(){Yt.unregister(Gs)},beforeInit(e){Fs.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,s){const n=Fs.get(e),i=n.annotations=[];let o=s.annotations;ct(o)?Object.keys(o).forEach(r=>{const a=o[r];ct(a)&&(a.id=r,i.push(a))}):It(o)&&i.push(...o),QT(i.filter(Tf),e.scales)},afterDataLimits(e,t){const s=Fs.get(e);XT(e,t.scale,s.annotations.filter(Tf).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(e,t,s){const n=Fs.get(e);JT(e,n,s),CO(e,n,s,t.mode),n.visibleElements=n.elements.filter(i=>!i.skip&&i.options.display),GT(e,n,s)},beforeDatasetsDraw(e,t,s){Ji(e,"beforeDatasetsDraw",s.clip)},afterDatasetsDraw(e,t,s){Ji(e,"afterDatasetsDraw",s.clip)},beforeDatasetDraw(e,t,s){Ji(e,t.index,s.clip)},beforeDraw(e,t,s){Ji(e,"beforeDraw",s.clip)},afterDraw(e,t,s){Ji(e,"afterDraw",s.clip)},beforeEvent(e,t,s){const n=Fs.get(e);YT(n,t.event,s)&&(t.changed=!0)},afterDestroy(e){Fs.delete(e)},getAnnotations(e){const t=Fs.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,s){return gu(e,t,s)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!RO.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Gs[wu(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:gc,_fallback:!0},_indexable:gc}},additionalOptionScopes:[""]};function Ji(e,t,s){const{ctx:n,chartArea:i}=e,o=Fs.get(e);s&&zo(n,i);const r=FO(o.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of r)NO(n,i,o,a);s&&Ho(n)}function FO(e,t){const s=[];for(const n of e)if(n.options.drawTime===t&&s.push({element:n,main:!0}),n.elements&&n.elements.length)for(const i of n.elements)i.options.display&&i.options.drawTime===t&&s.push({element:i});return s}function NO(e,t,s,n){const i=n.element;n.main?(df(s,i,"beforeDraw"),i.draw(e,t),df(s,i,"afterDraw")):i.draw(e,t)}const jO={class:"chartContainer"},BO={__name:"BgChart",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Yt.register(Oa,Ln,Jo,Rn,Ds,$n,Ca,mu,Pi);const t=e,s=ft(null);let n=null,i=null;const o=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:f,endOfDay:m}=Jt(t.selectedDate);return t.glucoseReadings.filter(g=>{const p=typeof g.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(g.timestamp)?O.fromISO(g.timestamp):O.fromISO(g.timestamp,{zone:"Australia/Sydney"})).toJSDate():g.timestamp instanceof Date?g.timestamp:new Date(Number(g.timestamp));return p>=f&&p<m}).map(g=>({x:typeof g.timestamp=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(g.timestamp)?O.fromISO(g.timestamp):O.fromISO(g.timestamp,{zone:"Australia/Sydney"})).toMillis():g.timestamp instanceof Date?g.timestamp.getTime():Number(g.timestamp),y:Number(g.value)})).sort((g,p)=>g.x-p.x)});function r(f){return{label:"BG (mmol/L)",data:f,pointRadius:0,pointHoverRadius:6,borderColor:"rgba(80, 80, 80, 0.9)",borderWidth:3,tension:.15,fill:!1}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bg"}}))}function l(f){if(!n)return;const m=f?.detail?.x??null,g=n.options?.plugins?.annotation?.annotations;g?.dynamicLine!=null&&(g.dynamicLine.value=m,n.update("none"))}function c(f){if(!f.length)return{min:4,max:10};const m=f.map(y=>y.y),g=Math.floor(Math.min(...m)),p=Math.ceil(Math.max(...m));return{min:Math.min(4,g),max:Math.max(10,p)}}function u(f,m){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(g,p,y)=>{const _=y.getElementsAtEventForMode(g,"nearest",{intersect:!1},!1);if(_.length){const{datasetIndex:v,index:w}=_[0],x=y.data.datasets[v].data[w].x;y.options.plugins.annotation.annotations.dynamicLine.value=x,y.update("none");const C=y.canvas.getBoundingClientRect(),P=(g?.native?.clientX??g.clientX)-C.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x,px:P,source:"bg"}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:g=>O.fromMillis(Number(g)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:f?.min,max:f?.max},y:{position:"right",min:m.min,max:m.max,grid:{color:"#888",lineWidth:1},title:{display:!0,text:"mmol/L"},ticks:{stepSize:2}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{inRangeBand:{type:"box",yMin:4,yMax:6,backgroundColor:"rgba(100, 149, 237, 0.5)",borderWidth:0},dynamicLine:{type:"line",scaleID:"x",value:i,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:g=>g.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function d(){if(!s.value)return;const f=s.value.getContext("2d"),m=o.value,g=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=g+864e5,y=c(m);n=new Yt(f,{type:"line",data:{datasets:[r(m)]},options:u({min:g,max:p},y)})}function h(){if(!n)return;const f=o.value,m=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=c(f);n.data.datasets=[r(f)],n.options.scales.x.min=m,n.options.scales.x.max=g,n.options.scales.y.min=p.min,n.options.scales.y.max=p.max,n.update("none")}return Ie(()=>{d(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),ds(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),we([()=>t.selectedDate,o],h),(f,m)=>(T(),M("div",jO,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Blood glucose chart"},null,512)]))}},WO={__name:"NotesChart",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},noteIconUrl:{type:String,default:"/note-icon.png"}},setup(e){Yt.register(ak,Jo,Rn,Ds,$n);const t=e,s=ft(null);let n=null;const i=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:c,endOfDay:u}=Jt(t.selectedDate);return(t.notes||[]).map(d=>({ts:d.timestamp instanceof Date?d.timestamp:typeof d.timestamp=="string"?O.fromISO(d.timestamp).toJSDate():new Date(Number(d.timestamp)),text:d.text??""})).filter(d=>d.ts>=c&&d.ts<u).sort((d,h)=>d.ts-h.ts).map(d=>({x:d.ts.getTime(),y:.5,_note:{text:d.text,timestamp:d.ts}}))});function o(c){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!0},events:["mousemove","mouseout","click","touchstart","touchmove"],onHover:(u,d,h)=>{if(!d.length){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"note"}}));return}const{datasetIndex:f,index:m}=d[0],g=h.data.datasets[f].data[m],p=g.x,y=h.canvas.getBoundingClientRect(),v=(u?.native?.clientX??u.clientX)-y.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:p,px:v,source:"note",note:g._note}}))},plugins:{legend:{display:!1},tooltip:{enabled:!1}},layout:{padding:{top:2,bottom:2}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,color:"transparent",callback:u=>O.fromMillis(Number(u)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:c?.min,max:c?.max},y:{position:"right",min:0,max:1,grid:{display:!1},ticks:{display:!0,color:"transparent"},beginAtZero:!0,title:{display:!0,color:"transparent",text:"Notes",align:"center"}}}}}function r(c){return{type:"scatter",data:c,pointRadius:7,pointHoverRadius:12,pointHitRadius:18,pointBackgroundColor:"#f59e0b",pointBorderColor:"#f59e0b",borderWidth:0,pointStyle:""}}function a(){if(!s.value)return;const c=s.value.getContext("2d"),u=i.value,d=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),h=d+864e5;n=new Yt(c,{type:"scatter",data:{datasets:[r(u)]},options:o({min:d,max:h})})}function l(){if(!n)return;const c=i.value,u=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),d=u+864e5;n.data.datasets=[r(c)],n.options.scales.x.min=u,n.options.scales.x.max=d,n.update("none")}return Ie(()=>{a()}),ds(()=>{n?.destroy(),n=null}),we([()=>t.selectedDate,i],l),(c,u)=>(T(),M("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Notes lane"},null,512))}};function UO(e,t=1){if(!e?.startsWith("#")||e.length!==7&&e.length!==4)return console.warn(`[hexToRgba] Invalid hex: ${e}`),`rgba(0,0,0,${t})`;let s,n,i;return e.length===7?(s=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16)):(s=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)),`rgba(${s}, ${n}, ${i}, ${t})`}function zO(e){return e?.startsWith("--")?getComputedStyle(document.documentElement).getPropertyValue(e)?.trim():(console.warn(`[getCssVar] Invalid CSS variable name: ${e}`),null)}function ki(e,t=1){const s=zO(e);return UO(s,t)}const HO={class:"chartContainer"},VO={__name:"BasalChart",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Yt.register(Oa,Ln,Jo,Rn,Ds,$n,Ca,mu,Pi);const t=e,s=ft(null);let n=null;const i=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:h,endOfDay:f}=Jt(t.selectedDate),m=t.basalEntries.filter(p=>{const y=p.startTime instanceof Date?p.startTime:ot(p.startTime),_=p.endTime?p.endTime instanceof Date?p.endTime:ot(p.endTime):null;return y<f&&(!_||_>h)}).sort((p,y)=>{const _=(p.startTime instanceof Date?p.startTime:ot(p.startTime)).getTime(),v=(y.startTime instanceof Date?y.startTime:ot(y.startTime)).getTime();return _-v}),g=[];for(const p of m){const y=p.startTime instanceof Date?p.startTime:ot(p.startTime),_=p.endTime?p.endTime instanceof Date?p.endTime:ot(p.endTime):null,v=y<h?h:y,w=_?_>f?f:_:f,x=Number(p.rate??0);g.push({x:v.getTime(),y:x,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:x}),g.push({x:w.getTime(),y:x,_segStart:v.getTime(),_segEnd:w.getTime(),_rate:x})}return g});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal"}}))}function r(h){if(!n)return;const f=h?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(g=>g.y));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (U/hr)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:ki("--color-basal",.7),borderColor:ki("--color-basal",.3),fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,g,p)=>{const y=p.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:_,index:v}=y[0],w=p.data.datasets[_].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const x=p.canvas.getBoundingClientRect(),D=(m?.native?.clientX??m.clientX)-x.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:D,source:"basal"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>O.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Basal Rate"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,m=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=a(f);n=new Yt(h,{type:"line",data:{datasets:[l(f)]},options:c({min:m,max:g},p)})}function d(){if(!n)return;const h=i.value,f=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=m,n.options.scales.y.min=g.min,n.options.scales.y.max=g.max,n.update("none")}return Ie(()=>{u(),window.addEventListener("chart-hover",r),s.value?.addEventListener("mouseleave",o)}),ds(()=>{window.removeEventListener("chart-hover",r),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),we([()=>t.selectedDate,i],d),(h,f)=>(T(),M("div",HO,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Basal rate chart"},null,512)]))}},qO={class:"chartContainer"},JO={__name:"BolusChart",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Yt.register(Kp,uy,Rn,Ds,$n,Ca,Pi);const t=e,s=ft(null);let n=null;function i(m,g){return getComputedStyle(document.documentElement).getPropertyValue(m).trim()||g}const o=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:m,endOfDay:g}=Jt(t.selectedDate);return(t.boluses||[]).map(p=>({ts:p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),amt:Number(p.amount??0),type:p.type??p.bolusType??null})).filter(p=>p.ts>=m&&p.ts<g&&p.amt>0).sort((p,y)=>p.ts-y.ts).map(p=>({x:p.ts.getTime(),y:p.amt,type:p.type??p.bolusType??null}))});function r(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"bolus",bolus:null}}))}function a(m){if(!n)return;const g=m?.detail?.x??null,p=n.options?.plugins?.annotation?.annotations;p?.dynamicLine!=null&&(p.dynamicLine.value=g,n.update("none"))}function l(m){if(!m.length)return{min:0,max:1};const g=Math.max(0,...m.map(y=>y.y));return{min:0,max:Math.max(1,Math.ceil(g+.2))}}function c(m,g,p="#000000"){const y=getComputedStyle(document.documentElement).getPropertyValue(m).trim()||p,_=y.length===4?"#"+[...y.slice(1)].map(D=>D+D).join(""):y,v=parseInt(_.slice(1),16),w=v>>16&255,x=v>>8&255,C=v&255;return`rgba(${w}, ${x}, ${C}, ${g})`}function u(m){return console.log("[createDataset] types:",m.map((g,p)=>({i:p,type:g.type??g.t,raw:g}))),i("--color-bolus","#ef4444"),{label:"Bolus (U)",data:m,type:"bar",borderWidth:0,borderRadius:2,barPercentage:.95,categoryPercentage:1,barThickness:10,backgroundColor:g=>{const p=g.raw?.type;return p==="meal"?c("--color-bolus-meal",.7,"#16a34a"):p==="correction"?c("--color-bolus-correction",.7,"#f97316"):p==="Control-IQ"?c("--color-bolus-controliq",.7,"#6b7280"):c("--color-bolus",.7,"#2563eb")}}}function d(m,g){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(p,y,_)=>{const v=_.getElementsAtEventForMode(p,"nearest",{intersect:!1},!1);if(v.length){const{datasetIndex:w,index:x}=v[0],C=_.data.datasets[w].data[x],D=C.x,P=typeof C.y=="number"?C.y:Number(C.amt??0);_.options.plugins.annotation.annotations.dynamicLine.value=D,_.update("none");const $=_.canvas.getBoundingClientRect(),L=(p?.native?.clientX??p.clientX)-$.left,E=C.type??null;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:D,px:L,source:"bolus",bolus:{amount:P,type:E}}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:p=>O.fromMillis(Number(p)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:m?.min,max:m?.max},y:{position:"right",min:g.min,max:g.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:1},title:{display:!0,text:"Bolus (U)"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:p=>p.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function h(){if(!s.value)return;const m=s.value.getContext("2d"),g=o.value,p=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),y=p+864e5,_=l(g);n=new Yt(m,{type:"bar",data:{datasets:[u(g)]},options:d({min:p,max:y},_)})}function f(){if(!n)return;const m=o.value,g=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),p=g+864e5,y=l(m);n.data.datasets=[u(m)],n.options.scales.x.min=g,n.options.scales.x.max=p,n.options.scales.y.min=y.min,n.options.scales.y.max=y.max,n.update("none")}return Ie(()=>{h(),window.addEventListener("chart-hover",a),s.value?.addEventListener("mouseleave",r)}),ds(()=>{window.removeEventListener("chart-hover",a),s.value?.removeEventListener("mouseleave",r),n?.destroy(),n=null}),we([()=>t.selectedDate,()=>t.boluses],f),(m,g)=>(T(),M("div",qO,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Bolus chart"},null,512)]))}},YO={class:"chartContainer"},ZO={__name:"HourlyBasalChart",props:{hourlyTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){Yt.register(Oa,Ln,Jo,Rn,Ds,$n,Ca,mu,Pi);const t=e,s=ft(null);let n=null;const i=Y(()=>{if(!t.selectedDate||!Array.isArray(t.hourlyTotals))return[];const h=t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate),f=O.fromJSDate(h).setZone("Australia/Sydney").startOf("day"),m=[];for(let g=0;g<24;g++){const p=Number(t.hourlyTotals[g]??0),y=f.plus({hours:g}).toMillis(),_=f.plus({hours:g+1}).toMillis();m.push({x:y,y:p,_segStart:y,_segEnd:_,_val:p}),m.push({x:_,y:p,_segStart:y,_segEnd:_,_val:p})}return m});function o(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"basal-hourly"}}))}function r(h){if(!n)return;const f=h?.detail?.x??null,m=n.options?.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=f,n.update("none"))}function a(h){if(!h.length)return{min:0,max:1};const f=Math.max(0,...h.map(g=>Number(g.y)||0));return{min:0,max:Math.max(1,Math.ceil(f+.2))}}function l(h){return{label:"Basal (units/hour bucket)",data:h,stepped:"before",pointRadius:0,pointHoverRadius:6,borderWidth:2,backgroundColor:ki("--color-basal",.7),borderColor:ki("--color-basal",.3),fill:!0}}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover:(m,g,p)=>{const y=p.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:_,index:v}=y[0],w=p.data.datasets[_].data[v].x;p.options.plugins.annotation.annotations.dynamicLine.value=w,p.update("none");const x=p.canvas.getBoundingClientRect(),D=(m?.native?.clientX??m.clientX)-x.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w,px:D,source:"basal-hourly"}}))}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,callback:m=>O.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ddd",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{color:"#eee",lineWidth:1},ticks:{stepSize:.5},title:{display:!0,text:"Units / Hour"}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!==null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=i.value,m=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=a(f);n=new Yt(h,{type:"line",data:{datasets:[l(f)]},options:c({min:m,max:g},p)})}function d(){if(!n)return;const h=i.value,f=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=a(h);n.data.datasets=[l(h)],n.options.scales.x.min=f,n.options.scales.x.max=m,n.options.scales.y.min=g.min,n.options.scales.y.max=g.max,n.update("none")}return Ie(()=>{u(),window.addEventListener("chart-hover",r),s.value?.addEventListener("mouseleave",o)}),ds(()=>{window.removeEventListener("chart-hover",r),s.value?.removeEventListener("mouseleave",o),n?.destroy(),n=null}),we([()=>t.selectedDate,i],d),(h,f)=>(T(),M("div",YO,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Hourly basal (totals) chart"},null,512)]))}},KO=Pt(ZO,[["__scopeId","data-v-c02d1d71"]]),GO={class:"chartContainer"},XO={__name:"FoodLogsChart",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Yt.register(Kp,uy,Rn,Ds,$n,Pi);const t=e,s=ft(null);let n=null;function i(h,f,m="#000000"){const g=getComputedStyle(document.documentElement).getPropertyValue(h).trim()||m,p=g.length===4?"#"+[...g.slice(1)].map(x=>x+x).join(""):g,y=parseInt(p.slice(1),16),_=y>>16&255,v=y>>8&255,w=y&255;return`rgba(${_}, ${v}, ${w}, ${f})`}const o=Y(()=>{const{startOfDay:h,endOfDay:f}=Jt(t.selectedDate),m=new Map;for(const g of t.foodLogs){const p=g.timestamp instanceof Date?g.timestamp:new Date(g.timestamp);if(p<h||p>=f)continue;const y=p.getTime(),_=Number(g.netCarbs??0);g.foodName||g.description,m.has(y)||m.set(y,{x:y,y:0,logs:[]});const v=m.get(y);v.y+=_,v.logs.push({name:g.foodName,quantity:g.quantity})}return Array.from(m.values()).sort((g,p)=>g.x-p.x)});function r(h){const f=Math.max(1,...h.map(g=>g.y)),m=Math.ceil(f/20)*20;return{min:0,max:Math.max(100,m)}}function a(){window.dispatchEvent(new CustomEvent("chart-hover",{detail:{hide:!0,source:"foodLogs",foodLogs:null}}))}function l(h){if(!n)return;const f=h?.detail?.x,m=n.options.plugins?.annotation?.annotations;m?.dynamicLine!=null&&(m.dynamicLine.value=f,n.update("none"))}function c(h,f){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover(m,g,p){const y=p.getElementsAtEventForMode(m,"nearest",{intersect:!1},!1);if(y.length){const{datasetIndex:_,index:v}=y[0],w=p.data.datasets[_].data[v];p.options.plugins.annotation.annotations.dynamicLine.value=w.x,p.update("none");const x=p.canvas.getBoundingClientRect(),D=(m?.native?.clientX??m.clientX)-x.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:w.x,px:D,source:"foodLogs",foodLogs:{logs:w.logs,netCarbs:w.y}}}))}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,maxRotation:0,minRotation:0,callback:m=>O.fromMillis(Number(m)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:h?.min,max:h?.max},y:{position:"right",min:f.min,max:f.max,beginAtZero:!0,grid:{display:!0,color:"#888",lineWidth:1},title:{display:!0,text:"Net Carbs"},ticks:{stepSize:20}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:m=>m.chart.options.plugins.annotation.annotations.dynamicLine.value!=null}}}}}}function u(){if(!s.value)return;const h=s.value.getContext("2d"),f=o.value,m=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),g=m+864e5,p=r(f),y={min:p.min,max:Math.max(100,p.max)};n=new Yt(h,{type:"bar",data:{datasets:[{label:"Net Carbs",data:f,backgroundColor:i("--color-food",.6,"#10b981"),barThickness:10,borderRadius:3,borderWidth:1,borderColor:"#065f46"}]},options:c({min:m,max:g},y)})}function d(){if(!n)return;const h=o.value,f=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=r(h);n.data.datasets[0].data=h,n.options.scales.x.min=f,n.options.scales.x.max=m,n.options.scales.y.min=g.min,n.options.scales.y.max=Math.max(100,g.max),n.update("none")}return Ie(()=>{u(),window.addEventListener("chart-hover",l),s.value?.addEventListener("mouseleave",a)}),ds(()=>{window.removeEventListener("chart-hover",l),s.value?.removeEventListener("mouseleave",a),n?.destroy(),n=null}),we([()=>t.foodLogs,()=>t.selectedDate],d),(h,f)=>(T(),M("div",GO,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Food chart"},null,512)]))}},QO={key:0,class:"no-workouts-msg"},tD={class:"workouts-chart"},eD={__name:"WorkoutsChart",props:{workouts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){Yt.register(Oa,Ln,Jo,Rn,Ds,$n,Pi);const t=e,s=ft(null);let n=null;const i=Y(()=>{const{startOfDay:c,endOfDay:u}=Jt(t.selectedDate);return t.workouts.flatMap(d=>{const h=d.start instanceof Date?d.start:new Date(d.start),f=d.endTime instanceof Date?d.endTime:new Date(d.endTime);if(h>=u||f<=c)return[];const m=Math.max(h.getTime(),c.getTime()),g=Math.min(f.getTime(),u.getTime()),p=Number(d.averageHeartRate??0),y={...d};return[{x:m,y:0,_workout:y},{x:m,y:p,_workout:y},{x:g,y:p,_workout:y},{x:g,y:0,_workout:y}]}).sort((d,h)=>d.x-h.x)});function o(c){const u=c.map(g=>g.y).filter(g=>g>0);if(!u.length)return{min:80,max:120};const d=Math.min(...u),h=Math.max(...u),f=Math.floor(Math.min(d,80)/20)*20,m=Math.ceil(Math.max(h+20,120)/20)*20;return{min:f,max:m}}function r(c,u){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onHover(d,h,f){const m=f.getElementsAtEventForMode(d,"nearest",{intersect:!1},!1);if(m.length){const{datasetIndex:g,index:p}=m[0],y=f.data.datasets[g].data[p];f.options.plugins.annotation.annotations.dynamicLine.value=y.x,f.update("none");const _=f.canvas.getBoundingClientRect(),w=(d?.native?.clientX??d.clientX)-_.left;window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:y.x,px:w,source:"workouts",workout:y._workout??null}}))}},plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:{annotations:{dynamicLine:{type:"line",scaleID:"x",value:null,borderColor:"rgba(100, 100, 100, 0.85)",borderWidth:2,display:d=>d.chart.options.plugins.annotation.annotations.dynamicLine.value!=null}}}},scales:{x:{type:"time",time:{zone:"Australia/Sydney",unit:"hour",displayFormats:{hour:"h:mm a"}},ticks:{source:"auto",autoSkip:!1,maxTicksLimit:12,maxRotation:0,minRotation:0,callback:d=>O.fromMillis(Number(d)).setZone("Australia/Sydney").toFormat("h a")},grid:{color:"#ccc",lineWidth:1},min:c.min,max:c.max},y:{position:"right",min:u.min,max:u.max,beginAtZero:!0,grid:{color:"#ddd"},title:{display:!0,text:"Avg HR (bpm)"},ticks:{stepSize:20}}}}}function a(){const c=ki("--color-workout",1),u=ki("--color-workout",.85);if(!s.value)return;const d=s.value.getContext("2d"),h=i.value,f=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),m=f+864e5,g=o(h);n=new Yt(d,{type:"line",data:{datasets:[{label:"Avg H/R",data:h,stepped:"before",pointRadius:0,borderColor:c,backgroundColor:u,borderWidth:2,fill:"origin",spanGaps:!1,parsing:!1,normalized:!0}]},options:r({min:f,max:m},g)})}function l(){if(!n)return;const c=i.value,u=O.fromJSDate(t.selectedDate).setZone("Australia/Sydney").startOf("day").toMillis(),d=u+864e5,h=o(c);n.data.datasets[0].data=c,n.options.scales.x.min=u,n.options.scales.x.max=d,n.options.scales.y.min=h.min,n.options.scales.y.max=h.max,n.update("none")}return Ie(()=>{a(),window.addEventListener("chart-hover",()=>{})}),ds(()=>{n?.destroy(),n=null}),we([()=>t.workouts,()=>t.selectedDate],l),(c,u)=>(T(),M(rt,null,[i.value.length===0?(T(),M("p",QO," No workouts for the selected day. ")):J("",!0),ga(b("div",tD,[b("canvas",{ref_key:"canvasRef",ref:s,"aria-label":"Workout chart"},null,512)],512),[[dg,i.value.length>0]])],64))}},sD=Pt(eD,[["__scopeId","data-v-508ff072"]]),nD=["role","tabindex"],iD={class:"log-title"},oD={class:"log-details"},rD={key:0},aD={key:1},lD={key:2},cD={key:3},uD={key:4},dD={key:5},hD={__name:"FoodLogRow",props:{log:{type:Object,required:!0},asButton:{type:Boolean,default:!0}},setup(e){const t=e,s=Y(()=>t.log.timestamp instanceof Date?t.log.timestamp:ot(t.log.timestamp));return(n,i)=>(T(),M("div",{class:"food-row clickable-row",role:e.asButton?"button":void 0,tabindex:e.asButton?0:void 0},[b("div",iD,[b("strong",null,A(bt(Co)(s.value)),1),G(": "+A(e.log.foodName||"Food"),1)]),b("div",oD,[e.log.quantity!=null?(T(),M("span",rD," Grams (or mLs): "+A(e.log.quantity),1)):J("",!0),e.log.netCarbs!=null?(T(),M("span",aD," Net Carbs: "+A(e.log.netCarbs)+"g",1)):J("",!0),e.log.totalCarbs!=null?(T(),M("span",lD," Total Carbs: "+A(e.log.totalCarbs)+"g",1)):J("",!0),e.log.fat!=null?(T(),M("span",cD," Fat: "+A(e.log.fat)+"g",1)):J("",!0),e.log.fibre!=null?(T(),M("span",uD," Fibre: "+A(e.log.fibre)+"g",1)):J("",!0),e.log.calories!=null?(T(),M("span",dD," Calories: "+A(e.log.calories),1)):J("",!0)])],8,nD))}},xu=Pt(hD,[["__scopeId","data-v-2c52b607"]]),fD={class:"bolus-row",role:"button",tabindex:"0"},mD={class:"line"},gD={class:"time"},pD={class:"amount-pill"},yD={class:"meta"},bD={key:1},vD={key:2},_D={key:3},wD={__name:"BolusRow",props:{dose:{type:Object,required:!0}},setup(e){const t=e,s=Y(()=>{const i=t.dose?.timestamp;return i instanceof Date?i:ot(i)}),n=Y(()=>{const i=Number(t.dose?.amount??0);return isFinite(i)?i.toFixed(2):"0.00"});return(i,o)=>(T(),M("div",fD,[b("div",mD,[b("strong",gD,A(bt(Co)(s.value)),1),b("span",pD,[G(A(n.value)+"U ",1),o[0]||(o[0]=b("span",{class:"icon","aria-hidden":"true"},"",-1))])]),b("div",yD,[e.dose?.type?(T(),M("span",{key:0,class:X(["badge",{"badge-meal":e.dose.type==="meal","badge-correction":e.dose.type==="correction","badge-controliq":e.dose.type==="Control-IQ","badge-other":e.dose.type!=="meal"&&e.dose.type!=="correction"}])},A(e.dose.type),3)):J("",!0),e.dose?.carbRatioUsed?(T(),M("span",bD,"Ratio: 1:"+A(e.dose.carbRatioUsed),1)):J("",!0),e.dose?.duration?(T(),M("span",vD,"Duration: "+A(e.dose.duration)+"s",1)):J("",!0),e.dose?.notes?(T(),M("span",_D," "+A(e.dose.notes),1)):J("",!0)])]))}},jy=Pt(wD,[["__scopeId","data-v-780e029d"]]),xD={class:"note-body"},SD={key:0,class:"note-title"},kD={class:"note-line"},TD={key:0},OD={key:1},DD=["innerHTML"],MD={key:0,class:"note-tags"},CD={__name:"NoteRow",props:{note:{type:Object,required:!0}},setup(e){const t=e,s=Y(()=>t.note.timestamp instanceof Date?t.note.timestamp:ot(t.note.timestamp));return(n,i)=>(T(),M("div",{class:"note-row",role:"button",tabindex:"0",onClick:i[0]||(i[0]=(...o)=>n.onClick&&n.onClick(...o))},[b("div",xD,[e.note.title?(T(),M("div",SD,[b("strong",null,A(e.note.title),1)])):J("",!0),b("div",kD,[e.note.noteNumber?(T(),M("strong",TD,"#"+A(e.note.noteNumber),1)):J("",!0),e.note.noteNumber?(T(),M("span",OD,"  ")):J("",!0),b("strong",null,A(bt(Co)(s.value)),1),i[1]||(i[1]=G(": ",-1)),b("span",{class:"note-text",innerHTML:(e.note.text||"").replace(/\n/g,"<br>")},null,8,DD)])]),e.note.tags?.length?(T(),M("div",MD,[(T(!0),M(rt,null,$t(e.note.tags,o=>(T(),M("span",{key:o,class:"note-tag"},"#"+A(o),1))),128))])):J("",!0)]))}},By=Pt(CD,[["__scopeId","data-v-0cda799b"]]);function ED(e){const t=Math.floor(e),s=Math.round((e-t)*60);return`${t} min ${s.toString().padStart(2,"0")} sec/km`}function AD(e){return`${e.toFixed(1)} km/h`}function ID(e){return`${(e/1e3).toFixed(2)} km`}const PD={class:"log-title"},LD={class:"time"},$D={class:"log-details"},RD={key:0},FD={key:1},ND={key:2},jD={key:3},BD={key:4},WD={key:5},UD={key:6},zD={key:7},HD={key:8},VD={__name:"WorkoutRow",props:{workout:{type:Object,required:!0}},emits:["workout-click"],setup(e,{emit:t}){const s=e,n=t;function i(){n("workout-click",s.workout)}function o(a){return Math.round(Number(a??0)/60)}function r(a){return Math.round(Number(a??0))}return(a,l)=>(T(),M("div",{class:"log-block",role:"button",tabindex:"0",onClick:i},[b("div",PD,[b("strong",null,A(e.workout.name??e.workout.type??"Workout"),1),b("span",LD,"  "+A(bt(fo)(e.workout.start)),1)]),b("div",$D,[e.workout.duration!=null?(T(),M("span",RD,[l[0]||(l[0]=b("strong",null,"Duration:",-1)),G(" "+A(o(e.workout.duration))+" min",1)])):J("",!0),e.workout.averageHeartRate!=null?(T(),M("span",FD,[l[1]||(l[1]=b("strong",null,"Avg HR:",-1)),G(" "+A(r(e.workout.averageHeartRate))+" bpm",1)])):J("",!0),e.workout.maxHeartRate!=null?(T(),M("span",ND,[l[2]||(l[2]=b("strong",null,"Max HR:",-1)),G(" "+A(r(e.workout.maxHeartRate))+" bpm",1)])):J("",!0),e.workout.activeCalories!=null?(T(),M("span",jD,[l[3]||(l[3]=b("strong",null,"Calories:",-1)),G(" "+A(r(e.workout.activeCalories)),1)])):J("",!0),b("span",null,[l[4]||(l[4]=b("strong",null,"Start:",-1)),G(" "+A(bt(fo)(e.workout.start)),1)]),b("span",null,[l[5]||(l[5]=b("strong",null,"End:",-1)),G(" "+A(e.workout.endTime?bt(fo)(e.workout.endTime):""),1)]),e.workout.elapsedTime!=null?(T(),M("span",BD,[l[6]||(l[6]=b("strong",null,"Elapsed:",-1)),G(" "+A(o(e.workout.elapsedTime))+" min",1)])):J("",!0),e.workout.distance!=null?(T(),M("span",WD,[l[7]||(l[7]=b("strong",null,"Distance:",-1)),G(" "+A(bt(ID)(e.workout.distance)),1)])):J("",!0),e.workout.kmPerHour!=null?(T(),M("span",UD,[l[8]||(l[8]=b("strong",null,"Speed:",-1)),G(" "+A(bt(AD)(e.workout.kmPerHour)),1)])):J("",!0),e.workout.minutesPerKm!=null?(T(),M("span",zD,[l[9]||(l[9]=b("strong",null,"Pace:",-1)),G(" "+A(bt(ED)(e.workout.minutesPerKm)),1)])):J("",!0),e.workout.notes?(T(),M("span",HD,[l[10]||(l[10]=b("strong",null,"Notes:",-1)),G(" "+A(e.workout.notes),1)])):J("",!0)])]))}},Wy=Pt(VD,[["__scopeId","data-v-2e8e572c"]]);function As(e,t="any"){window.dispatchEvent(new CustomEvent("jump-to-time",{detail:{at:e,source:t}})),console.log("[jumpToTime] dispatched",{at:e,source:t})}const qD={class:"combined-list"},JD={key:0,class:"empty"},YD={key:1,class:"stack"},ZD=["onClick"],KD={class:"type-badge","aria-hidden":"true"},GD={class:"content"},XD={__name:"CombinedTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]},boluses:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},workouts:{type:Array,default:()=>[]}},setup(e){const t=e,s={food:{icon:"",cssVar:"--color-food"},bolus:{icon:"",cssVar:"--color-bolus"},note:{icon:"",cssVar:"--color-note"},workout:{icon:"",cssVar:"--color-workout"}};function n(r){return s[r]?.icon??""}function i(r){return`var(${s[r]?.cssVar||"--color-border"})`}const o=Y(()=>{const{startOfDay:r,endOfDay:a}=Jt(t.selectedDate),l=t.foodLogs.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:ot(h.timestamp);return f>=r&&f<a?{type:"food",ts:f,payload:h}:null}).filter(Boolean),c=t.boluses.map(h=>{const f=h.timestamp instanceof Date?h.timestamp:ot(h.timestamp);return f>=r&&f<a?{type:"bolus",ts:f,payload:h}:null}).filter(Boolean),u=t.notes.map(h=>{const f=h.timestamp??h.startTime,m=f instanceof Date?f:ot(f);return m>=r&&m<a?{type:"note",ts:m,payload:{...h,timestamp:m}}:null}).filter(Boolean),d=t.workouts.map(h=>{const f=h.start instanceof Date?h.start:ot(h.start);return f>=r&&f<a?{type:"workout",ts:f,payload:h}:null}).filter(Boolean);return[...l,...c,...u,...d].sort((h,f)=>h.ts-f.ts)});return(r,a)=>(T(),M("div",qD,[o.value.length===0?(T(),M("div",JD,"No activity for this day.")):(T(),M("div",YD,[(T(!0),M(rt,null,$t(o.value,(l,c)=>(T(),M("div",{key:l.type+"-"+l.ts.getTime()+"-"+c,class:"feed-item clickable-row",style:ee({"--accent":i(l.type)}),onClick:u=>bt(As)(l.ts,"combined")},[b("div",KD,A(n(l.type)),1),b("div",GD,[l.type==="food"?(T(),Ee(xu,{key:0,log:l.payload},null,8,["log"])):l.type==="bolus"?(T(),Ee(jy,{key:1,dose:l.payload},null,8,["dose"])):l.type==="note"?(T(),Ee(By,{key:2,note:l.payload},null,8,["note"])):l.type==="workout"?(T(),Ee(Wy,{key:3,workout:l.payload},null,8,["workout"])):J("",!0)])],12,ZD))),128))]))]))}},QD=Pt(XD,[["__scopeId","data-v-9d9d5079"]]),tM={class:"htp-root",tabindex:"0","aria-haspopup":"true","aria-expanded":"false"},eM={class:"htp-box",role:"tooltip"},sM={class:"htp-fallback"},nM={__name:"HelpTooltip",props:{Message:{type:String,default:""}},setup(e){return(t,s)=>(T(),M("span",tM,[s[0]||(s[0]=G(" ? ",-1)),b("span",eM,[hv(t.$slots,"default",{},()=>[b("span",sM,A(e.Message),1)])])]))}},iM=Pt(nM,[["__scopeId","data-v-65e5884a"]]),oM="modulepreload",rM=function(e){return"/"+e},Of={},Go=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var r=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=c(s.map(u=>{if(u=rM(u),u in Of)return;Of[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":oM,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},aM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Go(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class Su extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class lM extends Su{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Df extends Su{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mf extends Su{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yc||(yc={}));var cM=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class uM{constructor(t,{headers:s={},customFetch:n,region:i=yc.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=aM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return cM(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=r):typeof r=="string"?(a["Content-Type"]="text/plain",u=r):typeof FormData<"u"&&r instanceof FormData?u=r:(a["Content-Type"]="application/json",u=JSON.stringify(r)));const d=yield this.fetch(c.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(g=>{throw new lM(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Df(d);if(!d.ok)throw new Mf(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Mf||i instanceof Df?i.context:void 0}}})}}function dM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hM(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var Ht={},qn={},Jn={},Yn={},Zn={},Kn={},fM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ti=fM();const mM=Ti.fetch,Uy=Ti.fetch.bind(Ti),zy=Ti.Headers,gM=Ti.Request,pM=Ti.Response,Li=Object.freeze(Object.defineProperty({__proto__:null,Headers:zy,Request:gM,Response:pM,default:Uy,fetch:mM},Symbol.toStringTag,{value:"Module"})),yM=hM(Li);var kr={},Cf;function Hy(){if(Cf)return kr;Cf=1,Object.defineProperty(kr,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return kr.default=e,kr}var Ef;function Vy(){if(Ef)return Kn;Ef=1;var e=Kn&&Kn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kn,"__esModule",{value:!0});const t=e(yM),s=e(Hy());class n{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,r){return this.headers=Object.assign({},this.headers),this.headers[o]=r,this}then(o,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,m=null,g=null,p=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const x=await c.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=x:m=JSON.parse(x))}const v=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&w&&w.length>1&&(g=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,p=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const v=await c.text();try{f=JSON.parse(v),Array.isArray(f)&&c.status===404&&(m=[],f=null,p=200,y="OK")}catch{c.status===404&&v===""?(p=204,y="No Content"):f={message:v}}if(f&&this.isMaybeSingle&&(!((h=f?.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,p=200,y="OK"),f&&this.shouldThrowOnError)throw new s.default(f)}return{error:f,data:m,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(d=c?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,r)}returns(){return this}overrideTypes(){return this}}return Kn.default=n,Kn}var Af;function qy(){if(Af)return Zn;Af=1;var e=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zn,"__esModule",{value:!0});const t=e(Vy());class s extends t.default{select(i){let o=!1;const r=(i??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:o=!0,nullsFirst:r,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${o?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:r=o}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,o,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:o=!1,settings:r=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,o?"verbose":null,r?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Zn.default=s,Zn}var If;function ku(){if(If)return Yn;If=1;var e=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yn,"__esModule",{value:!0});const t=e(qy());class s extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const r=Array.from(new Set(o)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:r,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${l}fts${c}.${o}`),this}match(i){return Object.entries(i).forEach(([o,r])=>{this.url.searchParams.append(o,`eq.${r}`)}),this}not(i,o,r){return this.url.searchParams.append(i,`not.${o}.${r}`),this}or(i,{foreignTable:o,referencedTable:r=o}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,o,r){return this.url.searchParams.append(i,`${o}.${r}`),this}}return Yn.default=s,Yn}var Pf;function Jy(){if(Pf)return Jn;Pf=1;var e=Jn&&Jn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jn,"__esModule",{value:!0});const t=e(ku());class s{constructor(i,{headers:o={},schema:r,fetch:a}){this.url=i,this.headers=o,this.schema=r,this.fetch=a}select(i,{head:o=!1,count:r}={}){const a=o?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),r&&(this.headers.Prefer=`count=${r}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:o,defaultToNull:r=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:o,ignoreDuplicates:r=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${r?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:o}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),this.headers.Prefer=a.join(","),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const o="DELETE",r=[];return i&&r.push(`count=${i}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Jn.default=s,Jn}var Yi={},Zi={},Lf;function bM(){return Lf||(Lf=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.version=void 0,Zi.version="0.0.0-automated"),Zi}var $f;function vM(){if($f)return Yi;$f=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.DEFAULT_HEADERS=void 0;const e=bM();return Yi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Yi}var Rf;function _M(){if(Rf)return qn;Rf=1;var e=qn&&qn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(qn,"__esModule",{value:!0});const t=e(Jy()),s=e(ku()),n=vM();class i{constructor(r,{headers:a={},schema:l,fetch:c}={}){this.url=r,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(r){const a=new URL(`${this.url}/${r}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new i(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${r}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{h.searchParams.append(g,p)})):(d="POST",f=a);const m=Object.assign({},this.headers);return u&&(m.Prefer=`count=${u}`),new s.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return qn.default=i,qn}var Ff;function wM(){if(Ff)return Ht;Ff=1;var e=Ht&&Ht.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.PostgrestError=Ht.PostgrestBuilder=Ht.PostgrestTransformBuilder=Ht.PostgrestFilterBuilder=Ht.PostgrestQueryBuilder=Ht.PostgrestClient=void 0;const t=e(_M());Ht.PostgrestClient=t.default;const s=e(Jy());Ht.PostgrestQueryBuilder=s.default;const n=e(ku());Ht.PostgrestFilterBuilder=n.default;const i=e(qy());Ht.PostgrestTransformBuilder=i.default;const o=e(Vy());Ht.PostgrestBuilder=o.default;const r=e(Hy());return Ht.PostgrestError=r.default,Ht.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:r.default},Ht}var xM=wM();const SM=dM(xM),{PostgrestClient:kM,PostgrestQueryBuilder:V2,PostgrestFilterBuilder:q2,PostgrestTransformBuilder:J2,PostgrestBuilder:Y2,PostgrestError:Z2}=SM;class TM{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const n=this.getWebSocketConstructor();return new n(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const OM="2.15.1",DM=`realtime-js/${OM}`,MM="1.0.0",bc=1e4,CM=1e3,EM=100;var vo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(vo||(vo={}));var Wt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wt||(Wt={}));var Ve;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ve||(Ve={}));var vc;(function(e){e.websocket="websocket"})(vc||(vc={}));var _n;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_n||(_n={}));class AM{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(t.slice(r,r+i));r=r+i;const l=n.decode(t.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(t.slice(r,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Yy{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Nf=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,r)=>(o[r]=IM(r,e,t,i),o),{})},IM=(e,t,s,n)=>{const i=t.find(a=>a.name===e),o=i?.type,r=s[e];return o&&!n.includes(o)?Zy(o,r):_c(r)},Zy=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return RM(t,s)}switch(e){case Et.bool:return PM(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return LM(t);case Et.json:case Et.jsonb:return $M(t);case Et.timestamp:return FM(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return _c(t);default:return _c(t)}},_c=e=>e,PM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},LM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$M=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},RM=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let o;const r=e.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>Zy(t,a))}return e},FM=e=>typeof e=="string"?e.replace(" ","T"):e,Ky=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class xl{constructor(t,s,n={},i=bc){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jf||(jf={}));class _o{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_o.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=_o.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=_o.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const o=this.cloneDeep(t),r=this.transformState(s),a={},l={};return this.map(o,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const d=o[c];if(d){const h=u.map(p=>p.presence_ref),f=d.map(p=>p.presence_ref),m=u.filter(p=>f.indexOf(p.presence_ref)<0),g=d.filter(p=>h.indexOf(p.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}n(a,u,l)}),this.map(r,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bf||(Bf={}));var wo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(wo||(wo={}));var _s;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_s||(_s={}));class Tu{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new xl(this,Ve.join,this.params,this.timeout),this.rejoinTimer=new Yy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ve.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new _o(this),this.broadcastEndpointURL=Ky(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:o,presence:r,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[wo.PRESENCE]&&this.bindings[wo.PRESENCE].length>0,u={},d={broadcast:o,presence:Object.assign(Object.assign({},r),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(_s.CHANNEL_ERROR,h)),this._onClose(()=>t?.(_s.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){t?.(_s.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(f=m?.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<g;y++){const _=m[y],{filter:{event:v,schema:w,table:x,filter:C}}=_,D=h&&h[y];if(D&&D.event===v&&D.schema===w&&D.table===x&&D.filter===C)p.push(Object.assign(Object.assign({},_),{id:D.id}));else{this.unsubscribe(),this.state=Wt.errored,t?.(_s.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(_s.SUBSCRIBED);return}}).receive("error",h=>{this.state=Wt.errored,t?.(_s.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(_s.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===Wt.joined&&t===wo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:r}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ve.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new xl(this,Ve.leave,{},t),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(t,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new xl(this,t,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EM){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,o;const r=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ve;if(n&&[a,l,c,u].indexOf(r)>=0&&n!==this._joinRef())return;let h=this._onMessage(r,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,g,p;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((p=(g=f.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===r}).map(f=>f.callback(h,n)):(o=this.bindings[r])===null||o===void 0||o.filter(f=>{var m,g,p,y,_,v;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in f){const w=f.id,x=(m=f.filter)===null||m===void 0?void 0:m.event;return w&&((g=s.ids)===null||g===void 0?void 0:g.includes(w))&&(x==="*"||x?.toLocaleLowerCase()===((p=s.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(_=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return w==="*"||w===((v=s?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===r}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:p,commit_timestamp:y,type:_,errors:v}=m;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:y,eventType:_,new:{},old:{},errors:v}),this._getPayloadRecords(m))}f.callback(h,n)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Tu.isEqual(i.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ve.close,{},t)}_onError(t){this._on(Ve.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Nf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Nf(t.columns,t.old_record)),s}}const Wf=()=>{},Tr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NM=[1e3,2e3,5e3,1e4],jM=1e4,BM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class WM{constructor(t,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bc,this.transport=null,this.heartbeatIntervalMs=Tr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wf,this.ref=0,this.reconnectTimer=null,this.logger=Wf,this.conn=null,this.sendBuffer=[],this.serializer=new AM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...r)=>Go(async()=>{const{default:a}=await Promise.resolve().then(()=>Li);return{default:a}},void 0).then(({default:a})=>a(...r)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...r)=>o(...r)},!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${vc.websocket}`,this.httpEndpoint=Ky(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:MM}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case vo.connecting:return _n.Connecting;case vo.open:return _n.Open;case vo.closing:return _n.Closing;default:return _n.Closed}}isConnected(){return this.connectionState()===_n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Tu(`realtime:${t}`,s,this);return this.channels.push(o),o}}push(t){const{topic:s,event:n,payload:i,ref:o}=t,r=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(CM,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Tr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:r}=s,a=r?`(${r})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,o,r)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ve.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([BM],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:DM};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ve.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Yy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,n,i,o,r,a,l,c;if(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:bc,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Tr.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(r=t?.accessToken)!==null&&r!==void 0?r:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t?.reconnectAfterMs)!==null&&a!==void 0?a:u=>NM[u-1]||jM,this.encode=(l=t?.encode)!==null&&l!==void 0?l:(u,d)=>d(JSON.stringify(u)),this.decode=(c=t?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Ou extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class UM extends Ou{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wc extends Ou{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var zM=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Gy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Go(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},HM=()=>zM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Go(()=>Promise.resolve().then(()=>Li),void 0)).Response:Response}),xc=e=>{if(Array.isArray(e))return e.map(s=>xc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=xc(n)}),t},VM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var jn=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Sl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qM=(e,t,s)=>jn(void 0,void 0,void 0,function*(){const n=yield HM();e instanceof n&&!s?.noResolveJson?e.json().then(i=>{const o=e.status||500,r=i?.statusCode||o+"";t(new UM(Sl(i),o,r))}).catch(i=>{t(new wc(Sl(i),i))}):t(new wc(Sl(e),e))}),JM=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(VM(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s))};function Xo(e,t,s,n,i,o){return jn(this,void 0,void 0,function*(){return new Promise((r,a)=>{e(s,JM(t,n,i,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>qM(l,a,n))})})}function aa(e,t,s,n){return jn(this,void 0,void 0,function*(){return Xo(e,"GET",t,s,n)})}function os(e,t,s,n,i){return jn(this,void 0,void 0,function*(){return Xo(e,"POST",t,n,i,s)})}function Sc(e,t,s,n,i){return jn(this,void 0,void 0,function*(){return Xo(e,"PUT",t,n,i,s)})}function YM(e,t,s,n){return jn(this,void 0,void 0,function*(){return Xo(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Xy(e,t,s,n,i){return jn(this,void 0,void 0,function*(){return Xo(e,"DELETE",t,n,i,s)})}var le=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const ZM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KM{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=Gy(i)}uploadOrUpdate(t,s,n,i){return le(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Uf),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(t=="PUT"?Sc:os)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},r?.duplex?{duplex:r.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(Ut(o))return{data:null,error:o};throw o}})}upload(t,s,n){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return le(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Uf.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield Sc(this.fetch,a.toString(),l,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return le(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s?.upsert&&(i["x-upsert"]="true");const o=yield os(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new Ou("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:a},error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}update(t,s,n){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return le(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}copy(t,s,n){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return le(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield os(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return le(this,void 0,void 0,function*(){try{const i=yield os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}download(t,s){return le(this,void 0,void 0,function*(){const i=typeof s?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(s?.transform||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield aa(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ut(a))return{data:null,error:a};throw a}})}info(t){return le(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield aa(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:xc(n),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}exists(t){return le(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield YM(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ut(n)&&n instanceof wc){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],o=s?.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return le(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}list(t,s,n){return le(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ZM),s),{prefix:t||""});return{data:yield os(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}listV2(t,s){return le(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield os(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const GM="2.11.0",XM={"X-Client-Info":`storage-js/${GM}`};var Gn=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class QM{constructor(t,s={},n,i){const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},XM),s),this.fetch=Gy(n)}listBuckets(){return Gn(this,void 0,void 0,function*(){try{return{data:yield aa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ut(t))return{data:null,error:t};throw t}})}getBucket(t){return Gn(this,void 0,void 0,function*(){try{return{data:yield aa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Gn(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Gn(this,void 0,void 0,function*(){try{return{data:yield Sc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Gn(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Gn(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}}class tC extends QM{constructor(t,s={},n,i){super(t,s,n,i)}from(t){return new KM(this.url,this.headers,t,this.fetch)}}const eC="2.55.0";let io="";typeof Deno<"u"?io="deno":typeof document<"u"?io="web":typeof navigator<"u"&&navigator.product==="ReactNative"?io="react-native":io="node";const sC={"X-Client-Info":`supabase-js-${io}/${eC}`},nC={headers:sC},iC={schema:"public"},oC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rC={};var aC=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const lC=e=>{let t;return e?t=e:typeof fetch>"u"?t=Uy:t=fetch,(...s)=>t(...s)},cC=()=>typeof Headers>"u"?zy:Headers,uC=(e,t,s)=>{const n=lC(s),i=cC();return(o,r)=>aC(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(r?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var dC=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function hC(e){return e.endsWith("/")?e:e+"/"}function fC(e,t){var s,n;const{db:i,auth:o,realtime:r,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),r),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>dC(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Qy="2.71.1",oi=30*1e3,kc=3,kl=kc*oi,mC="http://localhost:9999",gC="supabase.auth.token",pC={"X-Client-Info":`gotrue-js/${Qy}`},Tc="X-Supabase-Api-Version",tb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bC=600*1e3;class Du extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vC extends Du{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function _C(e){return lt(e)&&e.name==="AuthApiError"}class eb extends Du{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class on extends Du{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class Ns extends on{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wC(e){return lt(e)&&e.name==="AuthSessionMissingError"}class Or extends on{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dr extends on{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mr extends on{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xC(e){return lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class zf extends on{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oc extends on{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Tl(e){return lt(e)&&e.name==="AuthRetryableFetchError"}class Hf extends on{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Dc extends on{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vf=` 	
\r=`.split(""),SC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vf.length;t+=1)e[Vf[t].charCodeAt(0)]=-2;for(let t=0;t<la.length;t+=1)e[la[t].charCodeAt(0)]=t;return e})();function qf(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(la[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(la[n]),t.queuedBits-=6}}function sb(e,t,s){const n=SC[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jf(e){const t=[],s=r=>{t.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{OC(r,n,s)};for(let r=0;r<e.length;r+=1)sb(e.charCodeAt(r),i,o);return t.join("")}function kC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TC(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}kC(n,t)}}function OC(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function DC(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)sb(e.charCodeAt(i),s,n);return new Uint8Array(t)}function MC(e){const t=[];return TC(e,s=>t.push(s)),new Uint8Array(t)}function CC(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>qf(i,s,n)),qf(null,s,n),t.join("")}function EC(e){return Math.round(Date.now()/1e3)+e}function AC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const He=()=>typeof window<"u"&&typeof document<"u",mn={tested:!1,writable:!1},nb=()=>{if(!He())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mn.tested)return mn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mn.tested=!0,mn.writable=!0}catch{mn.tested=!0,mn.writable=!1}return mn.writable};function IC(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const ib=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Go(async()=>{const{default:n}=await Promise.resolve().then(()=>Li);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},PC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ri=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},gn=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},$s=async(e,t)=>{await e.removeItem(t)};class Na{constructor(){this.promise=new Na.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Na.promiseConstructor=Promise;function Ol(e){const t=e.split(".");if(t.length!==3)throw new Dc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!yC.test(t[n]))throw new Dc("JWT not in base64url format");return{header:JSON.parse(Jf(t[0])),payload:JSON.parse(Jf(t[1])),signature:DC(t[2]),raw:{header:t[0],payload:t[1]}}}async function LC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $C(e,t){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await e(o);if(!t(o,null,r)){n(r);return}}catch(r){if(!t(o,r)){i(r);return}}})()})}function RC(e){return("0"+e.toString(16)).substr(-2)}function FC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,RC).join("")}async function NC(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function jC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await NC(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xn(e,t,s=!1){const n=FC();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await ri(e,`${t}-code-verifier`,i);const o=await jC(n);return[o,n===o?"plain":"s256"]}const BC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function WC(e){const t=e.headers.get(Tc);if(!t||!t.match(BC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function UC(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function zC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qn(e){if(!HC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dl(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yf(e){return JSON.parse(JSON.stringify(e))}var VC=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const vn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qC=[502,503,504];async function Zf(e){var t;if(!PC(e))throw new Oc(vn(e),0);if(qC.includes(e.status))throw new Oc(vn(e),e.status);let s;try{s=await e.json()}catch(o){throw new eb(vn(o),o)}let n;const i=WC(e);if(i&&i.getTime()>=tb["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Hf(vn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ns}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new Hf(vn(s),e.status,s.weak_password.reasons);throw new vC(vn(s),e.status||500,n)}const JC=(e,t,s,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function mt(e,t,s,n){var i;const o=Object.assign({},n?.headers);o[Tc]||(o[Tc]=tb["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await YC(e,t,s+a,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function YC(e,t,s,n,i,o){const r=JC(t,n,i,o);let a;try{a=await e(s,Object.assign({},r))}catch(l){throw console.error(l),new Oc(vn(l),0)}if(a.ok||await Zf(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Zf(l)}}function bs(e){var t;let s=null;XC(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=EC(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Kf(e){const t=bs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ZC(e){return{data:e,error:null}}function KC(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=e,r=VC(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function GC(e){return e}function XC(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ml=["global","local","others"];var QC=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class tE{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=ib(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Ml[0]){if(Ml.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ml.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:zs})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=QC(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:KC,redirectTo:s?.redirectTo})}catch(s){if(lt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zs})}catch(s){if(lt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:GC});if(u.error)throw u.error;const d=await u.json(),h=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(m.split(";")[1].split("=")[1]);c[`${p}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(lt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Qn(t);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zs})}catch(s){if(lt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Qn(t);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:zs})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){Qn(t);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:zs})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Qn(t.userId);try{const{data:s,error:n}=await mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(lt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Qn(t.userId),Qn(t.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}}}function Gf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function eE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ti={debug:!!(globalThis&&nb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ob extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sE extends ob{}async function nE(e,t,s){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ti.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ti.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}eE();const iE={url:mC,storageKey:gC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xf(e,t,s){return await s()}const ei={};class $o{constructor(t){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$o.nextInstanceID,$o.nextInstanceID+=1,this.instanceID>0&&He()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},iE),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tE({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ib(i.fetch),this.lock=i.lock||Xf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:He()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=nE:this.lock=Xf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:nb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Gf(this.memoryStorage)),He()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=ei[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=ei[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=IC(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),He()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),xC(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return lt(s)?{error:s}:{error:new eb("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:bs}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(lt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,n,i;try{let o;if("email"in t){const{email:u,password:d,options:h}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Xn(this.storage,this.storageKey)),o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(s=h?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:m},xform:bs})}else if("phone"in t){const{phone:u,password:d,options:h}=t;o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:bs})}else throw new Dr("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(lt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:r,options:a}=t;s=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else if("phone"in t){const{phone:o,password:r,options:a}=t;s=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Kf})}else throw new Dr("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Or}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,n,i,o,r,a,l,c,u,d,h,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:y,statement:_,options:v}=t;let w;if(He())if(typeof y=="object")w=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))w=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const x=new URL((s=v?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const C=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),_?{statement:_}:null));let D;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")D=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)D=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)m=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),g=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${x.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(n=v?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=v?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((r=v?.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const C=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:p,error:y}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:CC(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:bs});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Or}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(lt(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:bs});if(await $s(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Or}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(lt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=t,a=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:bs}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Or}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,o,r;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Xn(this.storage,this.storageKey));const{error:d}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(r=l?.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Dr("You must provide either an email or phone number.")}catch(a){if(lt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,o;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:bs});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(lt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await Xn(this.storage,this.storageKey)),await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:ZC})}catch(o){if(lt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Ns;const{error:i}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:o}=t,{error:r}=await mt(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:n,type:i,options:o}=t,{data:r,error:a}=await mt(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:r?.message_id},error:a}}throw new Dr("You must provide either an email or phone number and a type")}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await gn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<kl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const r=await gn(this.userStorage,this.storageKey+"-user");r?.user?t.user=r.user:t.user=Dl()}if(this.storage.isServer&&t.user){let r=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zs}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ns}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:zs})})}catch(s){if(lt(s))return wC(s)&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ns;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Xn(this.storage,this.storageKey));const{data:c,error:u}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:zs});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ns;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Ol(t.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(lt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:r,error:a}=s;if(a)throw a;t=(n=r.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Ns;const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(lt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!He())throw new Mr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new zf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new zf("No code detected.");const{data:_,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!r||!c)throw new Mr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:g,error:p}=await this._getUser(o);if(p)throw p;const y={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:r,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(lt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,t);if(a&&!(_C(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=AC(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Xn(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(lt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,u;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return He()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(lt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(lt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await $C(async i=>(i>0&&await LC(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bs})),(i,o)=>{const r=200*Math.pow(2,i);return o&&Tl(o)&&Date.now()+r-n<oi})}catch(n){if(this._debug(s,"error",n),lt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),He()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await gn(this.storage,this.storageKey);if(i&&this.userStorage){let r=await gn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await ri(this.userStorage,this.storageKey+"-user",r)),i.user=(t=r?.user)!==null&&t!==void 0?t:Dl()}else if(i&&!i.user&&!i.user){const r=await gn(this.storage,this.storageKey+"-user");r&&r?.user?(i.user=r.user,await $s(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,i)):i.user=Dl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<kl;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${kl}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),Tl(r)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:a}=await this._getUser(i.access_token);!a&&r?.user?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Ns;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Na;const{data:o,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!o.session)throw new Ns;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),lt(o)){const r={session:null,error:o};return Tl(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await ri(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=Yf(i);await ri(this.storage,this.storageKey,o)}else{const i=Yf(s);await ri(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await $s(this.storage,this.storageKey),await $s(this.storage,this.storageKey+"-code-verifier"),await $s(this.storage,this.storageKey+"-user"),this.userStorage&&await $s(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&He()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${oi}ms, refresh threshold is ${kc} ticks`),i<=kc&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ob)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!He()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await Xn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(lt(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(lt(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(lt(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(lt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=t?.factors||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Ol(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+bC>i)return n;const{data:o,error:r}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,s={}){try{let n=t;if(!n){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};n=f.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Ol(n);s?.allowExpired||UC(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:i,signature:r},error:null}}const u=zC(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,r,MC(`${a}.${l}`)))throw new Dc("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}}$o.nextInstanceID=0;const oE=$o;class rE extends oE{constructor(t){super(t)}}var aE=function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(d){r(d)}}function l(u){try{c(n.throw(u))}catch(d){r(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class lE{constructor(t,s,n){var i,o,r;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=hC(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:iC,realtime:rC,auth:Object.assign(Object.assign({},oC),{storageKey:c}),global:nC},d=fC(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=uC(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new kM(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new tC(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new uM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return aE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rE({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new WM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cE=(e,t,s)=>new lE(e,t,s);function uE(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}uE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dE="https://ydjtxdquehaeglieozpz.supabase.co",hE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkanR4ZHF1ZWhhZWdsaWVvenB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0OTc2MzEsImV4cCI6MjA3MTA3MzYzMX0.zRO6-nChPo9eiVIWc44XYCojP8DYrxaRFHsZzbnxVD4",zt=cE(dE,hE);async function fE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchNotesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("notes").select("id, text, start_time, end_time, tags").gte("start_time",s).lt("start_time",n).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,text:r.text??"",timestamp:O.fromISO(r.start_time).toJSDate(),startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,tags:Array.isArray(r.tags)?r.tags:[]}))}async function Qf({limit:e=10,anchor:t,query:s="",tags:n=[]}={}){let i=zt.from("notes").select("id, text, start_time, end_time, tags",{count:"exact"}).order("start_time",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.startISO&&t?.id&&(i=i.or([`and(start_time.lt.${t.startISO})`,`and(start_time.eq.${t.startISO},id.lt.${t.id})`].join(",")));const o=(s||"").trim(),r=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);if(o.startsWith("#")){const f=o.slice(1).trim();f&&r.push(f)}else o.length>0&&(i=i.ilike("text",`%${o}%`));r.length>0&&(i=i.contains("tags",r));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,text:f.text??"",timestamp:O.fromISO(f.start_time).toJSDate(),startTime:O.fromISO(f.start_time).toJSDate(),endTime:f.end_time?O.fromISO(f.end_time).toJSDate():null,tags:Array.isArray(f.tags)?f.tags:[]})),d=u[u.length-1],h=d?{startISO:O.fromJSDate(d.startTime).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function mE(){const{data:e,error:t}=await zt.rpc("all_note_tags");if(t)throw t;return(e??[]).map(s=>s.tag)}const gE={class:"all-notes"},pE={class:"search"},yE={key:0,class:"results-bar"},bE={key:0},vE={key:0},_E={key:1},wE={class:"tag-cloud"},xE=["onClick"],SE={key:1,class:"empty"},kE=["onClick"],TE={class:"note-log-body"},OE=["innerHTML"],DE={key:0,class:"note-tags"},ME={class:"load-more"},CE={key:1},EE={key:2},AE={__name:"AllNotesTab",emits:["note-click"],setup(e,{emit:t}){const s=t,n=ft([]),i=ft(null),o=ft(!1),r=ft(null),a=ft(""),l=ft([]),c=ft([]);function u(y){return c.value.includes(y)}function d(y){const _=c.value.indexOf(y);_>=0?c.value.splice(_,1):c.value.push(y),o.value=!0,n.value=[],i.value=null}function h(){a.value="",c.value=[]}async function f(){o.value=!0;try{const{items:y,nextAnchor:_,totalMatchingFilter:v}=await Qf({limit:10,query:a.value,tags:c.value});n.value=y,i.value=_,r.value=v}catch(y){console.error("[AllNotesTab] first page failed:",y),n.value=[],i.value=null,r.value=0}finally{o.value=!1}}async function m(){if(!(!i.value||o.value)){o.value=!0;try{const{items:y,nextAnchor:_}=await Qf({limit:10,query:a.value,tags:c.value,anchor:i.value});n.value.push(...y),i.value=_}catch(y){console.error("[AllNotesTab] next page failed:",y)}finally{o.value=!1}}}function g(y){As(y.timestamp,"all-notes"),s("note-click",y.timestamp)}we([a,()=>c.value.join("|")],async()=>{o.value=!0,n.value=[],i.value=null,r.value=null,await f()});async function p(){try{l.value=await mE()}catch(y){console.error("[AllNotesTab] loadAllTags failed:",y),l.value=[]}}return Ie(async()=>{await p(),await f()}),(y,_)=>(T(),M("section",gE,[b("div",pE,[ga(b("input",{"onUpdate:modelValue":_[0]||(_[0]=v=>a.value=v),type:"text",placeholder:"Search notes  (#tag or text)"},null,512),[[mg,a.value]]),a.value||c.value.length?(T(),M("button",{key:0,class:"clear-btn",type:"button",onClick:h}," Clear Search ")):J("",!0),ut(iM,null,{default:$l(()=>_[1]||(_[1]=[b("div",null,[b("div",null,[G("To filter by tag, prefix tag name with "),b("code",null,"#"),G("or click on the tags listed below.")]),b("div",null,[G("To filter by note number, prefix note number with "),b("code",null,"#"),G(".")]),b("div",null,"Or you can just search the content by entering a word.")],-1)])),_:1,__:[1]})]),o.value?J("",!0):(T(),M("div",yE,[(r.value??0)>0?(T(),M("span",bE,[G(A(r.value)+" result",1),r.value!==1?(T(),M("span",vE,"s")):J("",!0)])):(T(),M("span",_E,"No results"))])),b("div",wE,[(T(!0),M(rt,null,$t(l.value,v=>(T(),M("button",{key:v,class:X(["tag-chip",{selected:u(v)}]),type:"button",onClick:w=>d(v)},A(v),11,xE))),128))]),o.value?(T(),M("div",SE,"Loading")):(T(),Ee(T0,{key:2,name:"list",tag:"div",class:"notes-list"},{default:$l(()=>[(T(!0),M(rt,null,$t(n.value,v=>(T(),M("div",{key:v.id??v.timestamp+"-"+(v.text||"").slice(0,10),class:"note-log-block clickable-row",onClick:w=>g(v),role:"button",tabindex:"0"},[b("div",TE,[b("div",null,[b("strong",null,A(bt(ec)(v.timestamp)),1),_[2]||(_[2]=G("  ",-1)),b("span",{innerHTML:(v.text||"").replace(/\n/g,"<br>")},null,8,OE)])]),v.tags?.length?(T(),M("div",DE,[(T(!0),M(rt,null,$t(v.tags,w=>(T(),M("span",{key:w,class:"note-tag"},A(w),1))),128))])):J("",!0)],8,kE))),128))]),_:1})),b("div",ME,[i.value&&!o.value?(T(),M("button",{key:0,type:"button",onClick:m}," Load more ")):o.value?(T(),M("div",CE,"Loading")):n.value.length>0?(T(),M("div",EE,"No more results.")):J("",!0)])]))}},IE=Pt(AE,[["__scopeId","data-v-5015ded6"]]),PE={class:"daily-section"},LE={key:0,class:"loading-row"},$E={key:1},RE={key:2},FE={__name:"NotesTab",props:{notes:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=Y(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Jt(s.selectedDate);return s.notes.filter(r=>{const a=r.timestamp instanceof Date?r.timestamp:ot(r.timestamp);return a>=i&&a<o}).sort((r,a)=>{const l=(r.timestamp instanceof Date?r.timestamp:ot(r.timestamp)).getTime(),c=(a.timestamp instanceof Date?a.timestamp:ot(a.timestamp)).getTime();return l-c})});return(i,o)=>(T(),M("div",PE,[e.loading?(T(),M("div",LE,o[0]||(o[0]=[b("span",{class:"spinner","aria-hidden":"true"},null,-1),b("span",null,"Loading notes",-1)]))):n.value.length===0?(T(),M("div",$E,"No notes for this day.")):(T(),M("div",RE,[(T(!0),M(rt,null,$t(n.value,r=>(T(),Ee(By,{key:(r.timestamp?.getTime?.()??r.timestamp)+"-"+(r.noteNumber??""),note:r,onClick:a=>bt(As)(r.timestamp,"notes"),class:"clickable-row"},null,8,["note","onClick"]))),128))]))]))}},NE={class:"daily-section"},jE={key:0},BE={key:1},WE={class:"fast-label"},UE={key:0,class:"fast-notes"},zE={__name:"FastsTab",props:{fasts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=Y(()=>{if(!s.selectedDate)return[];const{startOfDay:r,endOfDay:a}=Jt(s.selectedDate);return s.fasts.filter(l=>{const c=l.startTime instanceof Date?l.startTime:ot(l.startTime),u=l.endTime?l.endTime instanceof Date?l.endTime:ot(l.endTime):null;return c<a&&(!u||u>r)}).sort((l,c)=>{const u=(l.startTime instanceof Date?l.startTime:ot(l.startTime)).getTime(),d=(c.startTime instanceof Date?c.startTime:ot(c.startTime)).getTime();return u-d})});function i(r){const a=r.startTime instanceof Date?r.startTime:ot(r.startTime),l=r.endTime?r.endTime instanceof Date?r.endTime:ot(r.endTime):null,c=yp(a,l,s.selectedDate);return mo(c)}function o(r){const a=s.selectedDate,l=r.startTime,c=r.endTime;return cr(l,a)&&c&&cr(c,a)?"Started and Ended":cr(l,a)?"Started fast:":c&&cr(c,a)?"Ended fast:":"Continued"}return(r,a)=>(T(),M("div",NE,[n.value.length===0?(T(),M("div",jE,"No fasts for this day.")):(T(),M("div",BE,[(T(!0),M(rt,null,$t(n.value,l=>(T(),M("div",{key:(l.startTime?.getTime?.()??l.startTime)+"-"+(l.endTime?.getTime?.()??"ongoing"),class:"fast-block",role:"button",tabindex:"0"},[b("div",WE,A(o(l)),1),b("div",null,[a[0]||(a[0]=b("strong",null,"Duration:",-1)),G(" "+A(i(l)),1)]),b("div",null,[a[1]||(a[1]=b("strong",null,"Start:",-1)),G(" "+A(bt(ec)(l.startTime)),1)]),b("div",null,[a[2]||(a[2]=b("strong",null,"End:",-1)),G(" "+A(l.endTime?bt(ec)(l.endTime):"Ongoing"),1)]),l.notes?(T(),M("div",UE," "+A(l.notes),1)):J("",!0)]))),128))]))]))}},HE=Pt(zE,[["__scopeId","data-v-ad5edd99"]]);async function VE(e,t){const{data:s,error:n}=await zt.rpc("total_fast_overlap_seconds",{s:e,e:t});if(n)throw n;return s??0}async function qE(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFastsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("fasts").select("id, start_time, end_time, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,notes:r.notes??""}))}const JE={class:"stats-card"},YE={class:"row"},ZE={class:"pickers"},KE=["value"],GE=["value"],XE={class:"metric"},QE={key:0,class:"err"},tA={__name:"FastStatsTab",setup(e){ft(O.local().setZone("Australia/Sydney").toJSDate());const t=O.local().setZone("Australia/Sydney").startOf("day"),s=ft(t.minus({days:6}).toJSDate()),n=ft(t.toJSDate());Y(()=>{const y=_=>_.setZone("Australia/Sydney").toFormat("d LLL yyyy");return`${y(O.fromJSDate(s.value))}  ${y(O.fromJSDate(n.value))}`});const i=Y(()=>O.fromJSDate(s.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd")),o=Y(()=>O.fromJSDate(n.value).setZone("Australia/Sydney").toFormat("yyyy-LL-dd"));function r(y){const _=O.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");s.value=_.toJSDate()}function a(y){const _=O.fromISO(y.target.value,{zone:"Australia/Sydney"}).startOf("day");n.value=_.toJSDate()}const l=ft(!1),c=ft(""),u=ft("");function d(y){if(y==null)return"";const _=Math.round(y/60);return mo(_)}async function h(){l.value=!0,c.value="";try{const{startUtcISO:y,endUtcISO:_}=Xc(s.value,n.value),v=await VE(y,_),w=O.fromISO(y),x=O.fromISO(_),C=Math.max(1,x.diff(w,"days").days),D=v/C;u.value=d(D)}catch(y){console.error("[FastStatsTab] load failed:",y),c.value="Failed to load.",u.value=""}finally{l.value=!1}}we([s,n],()=>{h()});function f(){const y=O.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),_=O.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day"),v=Math.floor(_.diff(y,"days").days);return Math.max(1,v)}function m(y){const _=O.fromJSDate(s.value).setZone("Australia/Sydney").startOf("day"),v=O.fromJSDate(n.value).setZone("Australia/Sydney").startOf("day");s.value=_.plus({days:y}).toJSDate(),n.value=v.plus({days:y}).toJSDate()}function g(){m(-f())}function p(){m(f())}return h(),(y,_)=>(T(),M("div",JE,[b("div",YE,[b("button",{type:"button",onClick:g}," Prev"),b("div",ZE,[b("input",{type:"date",value:i.value,onChange:r},null,40,KE),_[0]||(_[0]=b("span",null,"",-1)),b("input",{type:"date",value:o.value,onChange:a},null,40,GE)]),b("button",{type:"button",onClick:p},"Next ")]),b("div",XE,[_[1]||(_[1]=b("div",{class:"title"},"Average Fasting Duration Per 24 Hours",-1)),b("div",{class:X(["value",{dim:l.value}])},A(u.value),3),c.value?(T(),M("div",QE,A(c.value),1)):J("",!0)])]))}},eA=Pt(tA,[["__scopeId","data-v-91e14c32"]]),sA={class:"daily-section"},nA={key:0},iA={key:1,class:"glucose-list"},oA=["onClick","aria-label"],rA={class:"time"},aA={class:"value"},lA={__name:"GlucoseTab",props:{glucoseReadings:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Jt(t.selectedDate);return t.glucoseReadings.filter(r=>{const a=r.timestamp instanceof Date?r.timestamp:ot(r.timestamp);return a>=i&&a<o}).map(r=>({...r,ts:r.timestamp instanceof Date?r.timestamp:ot(r.timestamp)})).sort((r,a)=>r.ts-a.ts)});function n(i){const o=Number(i);return o<4?"is-low":o<=6?"is-inrange":o<=10?"is-elevated":"is-high"}return(i,o)=>(T(),M("div",sA,[s.value.length===0?(T(),M("div",nA,"No glucose readings for this day.")):(T(),M("div",iA,[(T(!0),M(rt,null,$t(s.value,r=>(T(),M("div",{key:r.ts.getTime()+"-"+r.value,class:X(["glucose-row clickable-row",n(r.value)]),onClick:a=>bt(As)(r.ts,"bg"),"aria-label":`BG ${Number(r.value).toFixed(2)} at ${bt(Co)(r.ts)}`},[b("span",rA,A(bt(Co)(r.ts)),1),b("span",aA,A(Number(r.value).toFixed(2)),1),o[0]||(o[0]=b("span",{class:"unit"},"mmol/L",-1))],10,oA))),128))]))]))}},cA=Pt(lA,[["__scopeId","data-v-882bf5e4"]]),uA={class:"daily-section"},dA={key:0,class:"loading-row"},hA={key:1},fA={key:2},mA={__name:"FoodLogsTab",props:{foodLogs:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,s)=>(T(),M("div",uA,[e.loading?(T(),M("div",dA,s[0]||(s[0]=[b("span",{class:"spinner","aria-hidden":"true"},null,-1),b("span",null,"Loading food logs",-1)]))):e.foodLogs.length===0?(T(),M("div",hA,"No food logs.")):(T(),M("div",fA,[(T(!0),M(rt,null,$t(e.foodLogs,n=>(T(),Ee(xu,{key:n.id,log:n,onClick:i=>bt(As)(n.timestamp,"foodLogs"),class:"clickable-row"},null,8,["log","onClick"]))),128))]))]))}},gA={class:"daily-section"},pA={key:0},yA={key:1},bA={__name:"WorkoutsTab",props:{workouts:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0}},setup(e){const t=e,s=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=Jt(t.selectedDate);return t.workouts.filter(o=>{const r=o.start instanceof Date?o.start:ot(o.start);return r>=n&&r<i}).sort((o,r)=>{const a=(o.start instanceof Date?o.start:ot(o.start)).getTime(),l=(r.start instanceof Date?r.start:ot(r.start)).getTime();return a-l})});return(n,i)=>(T(),M("div",gA,[s.value.length===0?(T(),M("div",pA,"No workouts for this day.")):(T(),M("div",yA,[(T(!0),M(rt,null,$t(s.value,o=>(T(),Ee(Wy,{key:(o.start?.getTime?.()??o.start)+"-"+(o.name||""),workout:o,onClick:r=>bt(As)(o.start,"workout"),class:"clickable-row"},null,8,["workout","onClick"]))),128))]))]))}},vA={class:"daily-section"},_A={key:0,class:"loading-row"},wA={key:1},xA={__name:"BolusTab",props:{boluses:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){const t=e,s=Y(()=>{if(!t.selectedDate)return[];const{startOfDay:n,endOfDay:i}=Jt(t.selectedDate);return t.boluses.filter(o=>{const r=o.timestamp instanceof Date?o.timestamp:ot(o.timestamp);return r>=n&&r<i}).sort((o,r)=>{const a=(o.timestamp instanceof Date?o.timestamp:ot(o.timestamp)).getTime(),l=(r.timestamp instanceof Date?r.timestamp:ot(r.timestamp)).getTime();return a-l})});return(n,i)=>(T(),M("div",vA,[e.loading?(T(),M("div",_A,i[0]||(i[0]=[b("span",{class:"spinner","aria-hidden":"true"},null,-1),b("span",null,"Loading boluses",-1)]))):s.value.length===0?(T(),M("div",wA,"No bolus doses for this day.")):(T(!0),M(rt,{key:2},$t(s.value,o=>(T(),Ee(jy,{key:(o.timestamp?.getTime?.()??o.timestamp)+"-"+(o.amount??""),dose:o,onClick:r=>bt(As)(o.timestamp,"bolus"),class:"clickable-row"},null,8,["dose","onClick"]))),128))]))}},SA={class:"daily-section"},kA={key:0,class:"loading-row"},TA={key:1},OA={key:2},DA=["onClick"],MA={class:"log-details"},CA={key:1},EA={__name:"BasalTab",props:{basalEntries:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Boolean,default:!1}},setup(e){function t(){console.log("[Basal Debug] Total entries:",s.basalEntries.length);const i=s.basalEntries.filter(o=>!o.endTime);console.log("[Basal Debug] Entries with null endTime:",i.length),s.basalEntries.forEach((o,r)=>{console.log(`#${r} start: ${o.startTime}, end: ${o.endTime??"null"}, rate: ${o.rate}`)})}Ie(()=>{t()});const s=e,n=Y(()=>{if(!s.selectedDate)return[];const{startOfDay:i,endOfDay:o}=Jt(s.selectedDate);return s.basalEntries.filter(r=>{const a=r.startTime instanceof Date?r.startTime:ot(r.startTime),l=r.endTime?r.endTime instanceof Date?r.endTime:ot(r.endTime):null;return a<o&&(!l||l>i)}).sort((r,a)=>{const l=(r.startTime instanceof Date?r.startTime:ot(r.startTime)).getTime(),c=(a.startTime instanceof Date?a.startTime:ot(a.startTime)).getTime();return l-c})});return(i,o)=>(T(),M("div",SA,[e.loading?(T(),M("div",kA,o[0]||(o[0]=[b("span",{class:"spinner","aria-hidden":"true"},null,-1),b("span",null,"Loading basal",-1)]))):n.value.length===0?(T(),M("div",TA," No basal entries for this day. ")):(T(),M("div",OA,[(T(!0),M(rt,null,$t(n.value,r=>(T(),M("div",{key:(r.startTime?.getTime?.()??r.startTime)+"-"+(r.endTime?.getTime?.()??"ongoing")+"-"+(r.rate??""),class:"log-block clickable-row",role:"button",tabindex:"0",onClick:a=>bt(As)(r.startTime,"basal")},[b("div",null,[b("strong",null,A(bt(fo)(r.startTime)),1),o[1]||(o[1]=G("  ",-1)),b("strong",null,A(r.endTime?bt(fo)(r.endTime):"Ongoing"),1)]),b("div",null,[o[2]||(o[2]=b("strong",null,"Duration:",-1)),G(" "+A(bt(bp)(bt(yp)(r.startTime,r.endTime,e.selectedDate))),1)]),b("div",MA,[b("span",null," Rate: "+A(r.rate)+" U/hr",1),r.mode?(T(),M("span",{key:0,class:X(["mode-chip",{"chip-control-iq":r.mode==="ControlIQ","chip-manual":r.mode==="Manual","chip-suspended":r.mode==="Suspended"}])},A(r.mode),3)):J("",!0),r.notes?(T(),M("span",CA," "+A(r.notes),1)):J("",!0)])],8,DA))),128))]))]))}},AA=Pt(EA,[["__scopeId","data-v-5bd58bd6"]]),IA={class:"basal-by-hour"},PA={class:"summary"},LA={class:"table-wrap"},$A={class:"hour-table"},RA={class:"hour-label"},FA={class:"units"},NA={__name:"BasalByHourTab",props:{basalEntries:{type:Array,default:()=>[]},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:[Date,String,Number],required:!0}},setup(e){const t=e,s=Y(()=>Array.isArray(t.hourlyBasalTotals)&&t.hourlyBasalTotals.length===24?t.hourlyBasalTotals:new Array(24).fill(0)),n=Y(()=>{const o=[],r=O.fromJSDate(t.selectedDate instanceof Date?t.selectedDate:new Date(t.selectedDate)).setZone("Australia/Sydney").startOf("day");for(let a=0;a<24;a++){const l=r.plus({hours:a}),c=l.plus({hours:1});o.push({hour:a,label:`${l.toFormat("h:mm a")}  ${c.toFormat("h:mm a")}`,units:s.value[a]})}return o}),i=Y(()=>s.value.reduce((o,r)=>o+r,0));return(o,r)=>(T(),M("section",IA,[r[2]||(r[2]=b("h3",{class:"title"},"Basal Delivered by Hour",-1)),b("div",PA,[b("div",null,[r[0]||(r[0]=b("strong",null,"Total basal for the day:",-1)),G(" "+A(i.value.toFixed(2))+" U",1)])]),b("div",LA,[b("table",$A,[r[1]||(r[1]=b("thead",null,[b("tr",null,[b("th",null,"Hour"),b("th",null,"Units")])],-1)),b("tbody",null,[(T(!0),M(rt,null,$t(n.value,a=>(T(),M("tr",{key:a.hour},[b("td",RA,A(a.label),1),b("td",FA,A(a.units.toFixed(3)),1)]))),128))])])])]))}},jA=Pt(NA,[["__scopeId","data-v-9e5f6077"]]),BA={class:"stat-list"},WA={class:"stat-row"},UA={class:"value"},zA={class:"stat-row"},HA={class:"value"},VA={class:"stat-row"},qA={class:"value"},JA={class:"stat-row"},YA={class:"value"},ZA={class:"stat-row"},KA={class:"value"},GA={class:"split-bar"},XA={class:"percent-row"},QA={__name:"InsulinStatsTab",props:{selectedDate:{type:Date,required:!0},bolusDoses:{type:Array,default:()=>[]},basalEntries:{type:Array,default:()=>[]},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=Y(()=>{const{startOfDay:u,endOfDay:d}=Jt(t.selectedDate);return t.bolusDoses.map(h=>({...h,timestamp:h.timestamp instanceof Date?h.timestamp:ot(h.timestamp)})).filter(h=>h.timestamp>=u&&h.timestamp<d).reduce((h,f)=>h+Number(f.amount??0),0)}),n=Y(()=>{const{startOfDay:u,endOfDay:d}=Jt(t.selectedDate),h=t.basalEntries.map(m=>({startTime:m.startTime instanceof Date?m.startTime:ot(m.startTime),endTime:m.endTime?m.endTime instanceof Date?m.endTime:ot(m.endTime):null,rate:Number(m.rate??0)})).filter(m=>m.startTime<d&&(!m.endTime||m.endTime>u)).sort((m,g)=>m.startTime-g.startTime);let f=0;for(const m of h){const g=new Date(Math.max(m.startTime.getTime(),u.getTime())),y=(new Date(Math.min((m.endTime??d).getTime(),d.getTime()))-g)/6e4;y>0&&(f+=m.rate*(y/60))}return f}),i=Y(()=>s.value+n.value),o=Y(()=>{const{startOfDay:u,endOfDay:d}=Jt(t.selectedDate);return t.foodLogs.map(h=>({...h,timestamp:h.timestamp instanceof Date?h.timestamp:ot(h.timestamp)})).filter(h=>h.timestamp>=u&&h.timestamp<d).reduce((h,f)=>h+Number(f?.netCarbs??0),0)}),r=Y(()=>{const u=o.value,d=s.value;return u>0&&d>0?`${(u/d).toFixed(2)}`:"N/A"}),a=Y(()=>{const u=o.value,d=i.value;return d>0?`${(u/d).toFixed(2)}`:"N/A"}),l=Y(()=>i.value>0?s.value/i.value*100:0),c=Y(()=>100-l.value);return(u,d)=>(T(),M(rt,null,[b("div",BA,[b("div",WA,[d[0]||(d[0]=b("span",{class:"label"}," Total Insulin Units",-1)),b("span",UA,A(i.value.toFixed(2)),1)]),b("div",zA,[d[1]||(d[1]=b("span",{class:"label"}," Bolus Units",-1)),b("span",HA,A(s.value.toFixed(2)),1)]),b("div",VA,[d[2]||(d[2]=b("span",{class:"label"}," Basal Units",-1)),b("span",qA,A(n.value.toFixed(2)),1)]),b("div",JA,[d[3]||(d[3]=b("span",{class:"label"}," Net Carbs / Total Insulin",-1)),b("span",YA,A(a.value),1)]),b("div",ZA,[d[4]||(d[4]=b("span",{class:"label"}," Net Carbs / Bolus Units",-1)),b("span",KA,A(r.value),1)])]),b("div",GA,[b("div",{class:"bolus-segment",style:ee({width:l.value.toFixed(1)+"%"}),title:"Bolus"},null,4),b("div",{class:"basal-segment",style:ee({width:c.value.toFixed(1)+"%"}),title:"Basal"},null,4)]),b("div",XA,[b("div",null,[d[5]||(d[5]=G(" Bolus: ",-1)),b("strong",null,A(l.value.toFixed(1))+"%",1)]),b("div",null,[d[6]||(d[6]=G(" Basal: ",-1)),b("strong",null,A(c.value.toFixed(1))+"%",1)])])],64))}},tI=Pt(QA,[["__scopeId","data-v-720d2633"]]),eI={class:"stat-grid"},sI={class:"card"},nI={class:"value"},iI={class:"card"},oI={class:"value"},rI={class:"card"},aI={class:"value"},lI=["data-status"],cI={class:"value"},uI={class:"target-bar"},dI=["title"],hI={class:"ticks-row"},fI={class:"card"},mI={class:"value"},gI={class:"card"},pI={class:"value"},yI={__name:"NutritionStatsTab",props:{selectedDate:{type:Date,required:!0},foodLogs:{type:Array,default:()=>[]}},setup(e){const t=e,s=Y(()=>{const{startOfDay:h,endOfDay:f}=Jt(t.selectedDate);return t.foodLogs.map(m=>({...m,timestamp:m.timestamp instanceof Date?m.timestamp:ot(m.timestamp)})).filter(m=>m.timestamp>=h&&m.timestamp<f)}),n=Y(()=>{const h=f=>s.value.reduce((m,g)=>m+Number(g?.[f]??0),0);return{netCarbs:h("netCarbs"),totalCarbs:h("totalCarbs"),fat:h("fat"),protein:h("protein"),fibre:h("fibre"),calories:h("calories")}}),i=Y(()=>{const h=(Number(n.value.fat)||0)*9,f=Number(n.value.calories)||0;return f<=0?0:h/f*100}),o=Y(()=>{const h=Number(i.value)||0;return Math.max(15,h)}),r=Y(()=>`${Math.max(0,Number(i.value)||0)/o.value*100}%`),a=Y(()=>r.value),l=Y(()=>{const h=10/o.value*100,f=5/o.value*100;return{left:`${h}%`,width:`${f}%`}}),c=Y(()=>`${10/o.value*100}%`),u=Y(()=>`${15/o.value*100}%`),d=Y(()=>{const h=Number(i.value)||0;return h<10?"below":h>15?"above":"in"});return(h,f)=>(T(),M("div",eI,[b("div",sI,[f[0]||(f[0]=G(" Net Carbs ",-1)),b("span",nI,A(n.value.netCarbs.toFixed(1))+"g",1)]),b("div",iI,[f[1]||(f[1]=G(" Total Carbs ",-1)),b("span",oI,A(n.value.totalCarbs.toFixed(1))+"g",1)]),b("div",rI,[f[2]||(f[2]=b("span",null," Fat",-1)),f[3]||(f[3]=G()),b("span",aI,A(n.value.fat.toFixed(1))+"g",1)]),b("div",{class:"card fat-pct","data-status":d.value},[f[5]||(f[5]=b("span",{class:"label"}," % Calories from Fat",-1)),b("span",cI,A(i.value.toFixed(1))+"%",1),b("div",uI,[f[4]||(f[4]=b("div",{class:"bar"},null,-1)),b("div",{class:"target-band",style:ee({left:l.value.left,width:l.value.width})},null,4),b("div",{class:"fill",style:ee({width:a.value})},null,4),b("div",{class:"tick",style:ee({left:c.value}),"aria-hidden":"true"},null,4),b("div",{class:"tick",style:ee({left:u.value}),"aria-hidden":"true"},null,4),b("div",{class:"marker",style:ee({left:r.value}),title:i.value.toFixed(1)+"%"},null,12,dI)]),b("div",hI,[b("div",{class:"tick-label",style:ee({left:c.value})},"10",4),b("div",{class:"tick-label",style:ee({left:u.value})},"15",4),b("div",{class:"tick-label value-label",style:ee({left:r.value})},A(i.value.toFixed(1)),5)])],8,lI),f[8]||(f[8]=b("div",{class:"card"},[G(" Protein "),b("span",{class:"value"},"Not tracked yet...")],-1)),b("div",fI,[f[6]||(f[6]=G(" Fibre ",-1)),b("span",mI,A(n.value.fibre.toFixed(1))+"g",1)]),b("div",gI,[f[7]||(f[7]=G(" Calories ",-1)),b("span",pI,A(n.value.calories.toFixed(0)),1)])]))}},bI=Pt(yI,[["__scopeId","data-v-7397306a"]]),vI={class:"weekly-table"},_I={class:"num"},wI={class:"num"},xI={class:"num"},SI={key:0,class:X(["delta","neutral"])},kI={class:"num"},TI={class:"num"},OI={key:0},tm=2.2046226218,DI={__name:"WeeklyCaloriesTab",props:{foodLogs:{type:Array,default:()=>[]},weekStartsOn:{type:String,default:"monday"},tz:{type:String,default:"Australia/Sydney"},weights:{type:Array,default:()=>[]},dailyActivity:{type:Array,default:()=>[]}},setup(e){const t=e;function s(c,u){let d=0,h=0,f=0,m=0,g=0,p=0,y=0,_=0;for(const v of t.dailyActivity){const w=O.fromFormat(v.sydney_date,"yyyy-LL-dd",{zone:t.tz});if(!w.isValid||w<c||w>=u)continue;const x=Number(v.active_calories);Number.isFinite(x)&&(d+=x,h+=1);const C=Number(v.resting_calories);Number.isFinite(C)&&(f+=C,m+=1);const D=Number(v.total_calories);Number.isFinite(D)&&(g+=D,p+=1);const P=Number(v.exercise_minutes);Number.isFinite(P)&&(y+=P,_+=1)}return{avgActive:h?d/h:null,avgResting:m?f/m:null,avgTotalEnergy:p?g/p:null,avgExerciseMin:_?y/_:null}}function n(c,u){let d=0,h=0;for(const f of t.weights){const m=ot(f.timestamp),g=O.fromJSDate(m,{zone:t.tz});if(g.isValid&&g>=c&&g<u){const p=Number(f.value);Number.isFinite(p)&&(d+=p,h+=1)}}return h?d/h:null}function i(c,u){if(u==="monday")return c.startOf("week");const d=c.weekday%7;return c.minus({days:d}).startOf("day")}function o(c){return c.plus({days:7})}function r(c,u){const d=o(c).minus({seconds:1});return`${c.setZone(u).toFormat("ccc d LLL")}  ${d.setZone(u).toFormat("ccc d LLL")}`}const a=Y(()=>{const c=new Map;for(const u of t.foodLogs){const d=ot(u.timestamp),h=O.fromJSDate(d,{zone:t.tz});if(!h?.isValid)continue;const f=h.toFormat("yyyy-LL-dd"),m=Number(u.calories??u.kcal??0);Number.isFinite(m)&&c.set(f,(c.get(f)??0)+m)}return c});Y(()=>[...a.value.entries()].map(([c,u])=>({day:c,kcal:u})).sort((c,u)=>c.day.localeCompare(u.day)));const l=Y(()=>{const c=[...a.value.keys()].sort();if(!c.length)return[];const u=O.fromFormat(c[0],"yyyy-LL-dd",{zone:t.tz}),d=O.fromFormat(c[c.length-1],"yyyy-LL-dd",{zone:t.tz});let h=i(u,t.weekStartsOn);const f=o(i(d,t.weekStartsOn)),m=O.now().setZone(t.tz).startOf("day"),g=[];for(;h<f;){const p=h,y=o(h),v=Array.from({length:7},(E,R)=>p.plus({days:R}).toFormat("yyyy-LL-dd")).map(E=>a.value.get(E)??0),w=v.reduce((E,R)=>E+R,0),x=p<=m&&m<y,C=v.filter(E=>E>0).length,P=w/(x?C||1:7),$=n(p,y),U=$!=null?$*tm:null,L=s(p,y);g.push({weekStart:p,weekEnd:y,label:r(p,t.tz),total:w,avgPerDay:P,avgWeight:$,avgWeightLb:U,avgActive:L.avgActive,avgResting:L.avgResting,avgTotalEnergy:L.avgTotalEnergy,avgExerciseMin:L.avgExerciseMin}),h=y}for(let p=0;p<g.length;p++){const y=p>0?g[p-1]:null;g[p].deltaAvg=y?g[p].avgPerDay-y.avgPerDay:null,g[p].deltaTotal=y?g[p].total-y.total:null,g[p].deltaWeight=y&&g[p].avgWeight!=null&&y.avgWeight!=null?g[p].avgWeight-y.avgWeight:null,g[p].deltaWeightLb=g[p].deltaWeight!=null?g[p].deltaWeight*tm:null,g[p].deltaActive=y&&g[p].avgActive!=null&&y.avgActive!=null?g[p].avgActive-y.avgActive:null,g[p].deltaResting=y&&g[p].avgResting!=null&&y.avgResting!=null?g[p].avgResting-y.avgResting:null,g[p].deltaTotalEnergy=y&&g[p].avgTotalEnergy!=null&&y.avgTotalEnergy!=null?g[p].avgTotalEnergy-y.avgTotalEnergy:null,g[p].deltaExerciseMin=y&&g[p].avgExerciseMin!=null&&y.avgExerciseMin!=null?g[p].avgExerciseMin-y.avgExerciseMin:null}return g.reverse()});return(c,u)=>(T(),M("div",vI,[b("table",null,[u[1]||(u[1]=b("thead",null,[b("tr",null,[b("th",null,"Week"),b("th",{class:"num"},"Avg kcal/day"),b("th",{class:"num"},"Total kcal"),b("th",{class:"num"},"Avg active (kcal/day)"),b("th",{class:"num"},"Avg weight (kg)"),b("th",{class:"num"},"Avg weight (lb)")])],-1)),b("tbody",null,[(T(!0),M(rt,null,$t(l.value,d=>(T(),M("tr",{key:d.weekStart.toISO()},[b("td",null,A(d.label),1),b("td",_I,[G(A(Math.round(d.avgPerDay).toLocaleString("en-AU"))+" ",1),d.deltaAvg!=null?(T(),M("span",{key:0,class:X(["delta",d.deltaAvg>=0?"up":"down"])},A(d.deltaAvg>=0?"":"")+" ("+A(Math.abs(Math.round(d.deltaAvg)).toLocaleString("en-AU"))+") ",3)):J("",!0)]),b("td",wI,[G(A(Math.round(d.total).toLocaleString("en-AU"))+" ",1),d.deltaTotal!=null?(T(),M("span",{key:0,class:X(["delta",d.deltaTotal>=0?"up":"down"])},A(d.deltaTotal>=0?"":"")+" ("+A(Math.abs(Math.round(d.deltaTotal)).toLocaleString("en-AU"))+") ",3)):J("",!0)]),b("td",xI,[G(A(d.avgActive!=null?Math.round(d.avgActive).toLocaleString("en-AU"):"")+" ",1),d.deltaActive!=null?(T(),M("span",SI,A(d.deltaActive>=0?"":"")+" ("+A(Math.abs(Math.round(d.deltaActive)).toLocaleString("en-AU"))+") ",1)):J("",!0)]),b("td",kI,[G(A(d.avgWeight!=null?d.avgWeight.toFixed(2):"")+" ",1),d.deltaWeight!=null?(T(),M("span",{key:0,class:X(["delta",d.deltaWeight>=0?"up":"down"])},A(d.deltaWeight>=0?"":"")+" ("+A(Math.abs(d.deltaWeight).toFixed(2))+") ",3)):J("",!0)]),b("td",TI,[G(A(d.avgWeightLb!=null?d.avgWeightLb.toFixed(2):"")+" ",1),d.deltaWeightLb!=null?(T(),M("span",{key:0,class:X(["delta",d.deltaWeightLb>=0?"up":"down"])},A(d.deltaWeightLb>=0?"":"")+" ("+A(Math.abs(d.deltaWeightLb).toFixed(2))+") ",3)):J("",!0)])]))),128)),l.value.length?J("",!0):(T(),M("tr",OI,u[0]||(u[0]=[b("td",{colspan:"3",class:"empty"},"No data",-1)])))])])]))}},MI=Pt(DI,[["__scopeId","data-v-24683c06"]]);async function CI(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchGlucoseReadingsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("glucose_readings").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:O.fromISO(r.timestamp).toJSDate(),value:Number(r.value??0)}))}async function EI(e,t){const s=ve(e).toISO(),n=ve(t).toISO();let i=[],o=0;const r=1e3;let a=!1;for(;!a;){const{data:l,error:c}=await zt.from("glucose_readings").select("*").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0}).range(o*r,(o+1)*r-1);if(c){console.error("[Supabase] Error fetching glucose readings:",c);break}(l.length===0||l.length<r)&&(a=!0),i.push(...l),o++}return i}const AI={class:"weekly-bg-stats"},II={key:0},PI={key:1,class:"weekly-stats-grid"},LI={class:"date-cell"},$I={__name:"WeeklyBGStats",setup(e){const t=ft([]),s=ft(!0);function n(o){if(!Array.isArray(o)||o.length<2)return{days:0,timeBelow4:0,timeBetween4and6:0,timeBetween6and8:0,timeBetween8and10:0,timeAbove10:0,totalMinutes:0};let r=0,a=0,l=0,c=0,u=0,d=0,h=0;for(let p=1;p<o.length;p++){const y=o[p-1],_=o[p],v=ve(y.timestamp),w=ve(_.timestamp),x=Math.max(0,Math.round(w.diff(v).as("minutes")));d+=x,h+=Number(y.value)*x;const C=Number(y.value);C<4?r+=x:C<6?a+=x:C<8?l+=x:C<10?c+=x:u+=x}const f=ve(o[0].timestamp).setZone("Australia/Sydney"),m=ve(o.at(-1).timestamp).setZone("Australia/Sydney");return{days:Math.max(1,m.diff(f,"days").days),timeBelow4:r,timeBetween4and6:a,timeBetween6and8:l,timeBetween8and10:c,timeAbove10:u,totalMinutes:d,averageBG:d>0?h/d:null}}async function i(){const o=O.fromISO("2025-07-07",{zone:"Australia/Sydney"}).startOf("day"),r=O.local().setZone("Australia/Sydney").startOf("day"),a=[];for(let l=o;l<r;l=l.plus({days:7})){const c=l,u=l.plus({days:7});console.log(` Week starting: ${ve(c).toFormat("ccc dd MMM yyyy")}`),console.log(` Expecting readings from ${ve(c).toFormat("HH:mm dd MMM")} to ${ve(u).toFormat("HH:mm dd MMM")}`);const d=await EI(c.toJSDate(),u.toJSDate());console.log(` Readings count: ${d.length}`);const h=[...new Set(d.map(m=>ve(m.timestamp).setZone("Australia/Sydney").toFormat("ccc dd MMM")))];console.log(` Days with readings (${h.length}): ${h.join(", ")}`);const f=n(d);a.push({startDate:c.toJSDate(),days:f.days||0,timeBetween4and6:f.timeBetween4and6||0,timeBetween6and8:f.timeBetween6and8||0,timeBetween8and10:f.timeBetween8and10||0,timeAbove10:f.timeAbove10||0,timeBelow4:f.timeBelow4||0,totalMinutes:f.totalMinutes||0,averageBG:f.averageBG??null,timeBetween4and10:(f.timeBetween4and6||0)+(f.timeBetween6and8||0)+(f.timeBetween8and10||0)})}t.value=a,s.value=!1}return Ie(async()=>{i()}),(o,r)=>(T(),M("div",AI,[r[1]||(r[1]=b("h3",null,"Weekly BG Time in Range",-1)),s.value?(T(),M("p",II,"Calculating...")):J("",!0),s.value?J("",!0):(T(),M("div",PI,[r[0]||(r[0]=Vv('<div class="grid-header" data-v-497f6380><div data-v-497f6380>Week Start</div><div data-v-497f6380>410<br data-v-497f6380>(72180)</div><div data-v-497f6380>&lt;4<br data-v-497f6380>(72)</div><div data-v-497f6380>46<br data-v-497f6380>(72108)</div><div data-v-497f6380>68<br data-v-497f6380>(108144)</div><div data-v-497f6380>810<br data-v-497f6380>(144180)</div><div data-v-497f6380>&gt;10<br data-v-497f6380>(180)</div><div data-v-497f6380>Avg<br data-v-497f6380>BG</div></div>',1)),(T(!0),M(rt,null,$t([...t.value].reverse(),a=>(T(),M("div",{key:a.startDate.toISOString(),class:"grid-row"},[b("div",LI,A(bt(Nw)(a.startDate)),1),b("div",null,A(Math.round(a.timeBetween4and10/a.totalMinutes*100))+"%",1),b("div",null,A(Math.round(a.timeBelow4/a.totalMinutes*100))+"%",1),b("div",null,A(Math.round(a.timeBetween4and6/a.totalMinutes*100))+"%",1),b("div",null,A(Math.round(a.timeBetween6and8/a.totalMinutes*100))+"%",1),b("div",null,A(Math.round(a.timeBetween8and10/a.totalMinutes*100))+"%",1),b("div",null,A(Math.round(a.timeAbove10/a.totalMinutes*100))+"%",1),b("div",null,A(a.averageBG!=null?a.averageBG.toFixed(1):""),1)]))),128))]))]))}},RI=Pt($I,[["__scopeId","data-v-497f6380"]]),FI={class:"range-bar-wrapper"},NI={class:"range-bar-vertical"},jI={class:"range-bar-labels"},BI={class:"range-name"},WI={class:"range-percent"},UI={class:"range-duration"},zI={class:"bg-grid"},HI={class:"row in-range"},VI={class:"right"},qI={class:"chip chip-green"},JI={class:"row grey"},YI={key:0,class:"secondary"},ZI={class:"row low"},KI={key:0,class:"secondary"},GI={class:"row above-10"},XI={key:0,class:"secondary"},QI={class:"foot"},tP={__name:"BgStatsTab",props:{selectedDate:{type:Date,required:!0},glucoseReadings:{type:Array,default:()=>[]}},setup(e){const t=e,s=o=>o!=null&&isFinite(o)?Math.round(o*18):null,n=Y(()=>{const o=i.value,r=o.totalCoveredMinutes;return[{class:"low",minutes:o.timeBelow4},{class:"in-range",minutes:o.timeBetween4and6},{class:"six-to-eight",minutes:o.timeBetween6and8},{class:"high",minutes:o.timeBetween8and10},{class:"very-high",minutes:o.timeAbove10}].filter(a=>a.minutes>0&&r>0)}),i=Y(()=>{const{startOfDay:o,endOfDay:r}=Jt(t.selectedDate),a=t.glucoseReadings.map(D=>({timestamp:D.timestamp instanceof Date?D.timestamp:ot(D.timestamp),value:Number(D.value)})).filter(D=>D.timestamp>=o&&D.timestamp<r).sort((D,P)=>D.timestamp-P.timestamp);let l=0,c=0,u=0,d=0,h=0,f=0,m=0,g=0,p=1/0,y=-1/0,_=0;for(let D=0;D<a.length;D++){const P=a[D],$=a[D+1],U=P.timestamp,L=$?$.timestamp:new Date(Math.min(r,P.timestamp.getTime()+300*1e3)),E=Math.max(0,(L-U)/6e4);g+=E;const R=P.value;R<4&&(l+=E),R>=4&&R<=6&&(c+=E),R>6&&R<=8&&(u+=E),R>=4&&R<=10&&(m+=E),R>8&&(h+=E),R>10&&(f+=E),R>8&&R<=10&&(d+=E),Number.isFinite(R)&&R<p&&(p=R),Number.isFinite(R)&&R>y&&(y=R),Number.isFinite(R)&&(_+=R*E)}const v=Math.max(g,1),w=Number.isFinite(p)?p:null,x=Number.isFinite(y)?y:null,C=g>0&&Number.isFinite(_)?_/g:null;return{timeBelow4:l,timeBetween4and6:c,timeBetween6and8:u,timeBetween8and10:d,timeAbove8:h,timeAbove10:f,timeBetween4and10:m,totalCoveredMinutes:g,uncoveredMinutes:Math.max(0,1440-g),uncoveredSeconds:Math.max(0,(1440-g)*60),pct4to6:c/v*100,pct4to10:m/v*100,lowestBG:w,highestBG:x,averageBG:C}});return(o,r)=>(T(),M(rt,null,[b("div",FI,[b("div",NI,[(T(!0),M(rt,null,$t(n.value.slice().reverse(),a=>(T(),M("div",{key:a.class,class:X(["segment",a.class]),style:ee({height:`${a.minutes/i.value.totalCoveredMinutes*100}%`})},null,6))),128))]),b("div",jI,[(T(!0),M(rt,null,$t(n.value.slice().reverse(),a=>(T(),M("div",{key:a.class+"-label",class:"label-row"},[b("span",BI,A(a.class==="low"?`Below 4 (${s(4)})`:a.class==="in-range"?`46 (${s(4)}${s(6)})`:a.class==="six-to-eight"?`68 (${s(6)}${s(8)})`:a.class==="high"?`810 (${s(8)}${s(10)})`:a.class==="very-high"?`Above 10 (${s(10)})`:""),1),b("span",WI,A((a.minutes/i.value.totalCoveredMinutes*100).toFixed(1))+"% ",1),b("span",UI,A(bt(mo)(a.minutes)),1)]))),128))])]),b("div",zI,[b("div",HI,[r[0]||(r[0]=b("span",null,"In range (410)",-1)),b("div",VI,[b("span",qI,A(i.value.pct4to10.toFixed(1))+"%",1),b("strong",null,A(bt(mo)(i.value.timeBetween4and10)),1)])]),b("div",JI,[r[1]||(r[1]=b("span",null,"Average BG",-1)),b("strong",null,[G(A(i.value.averageBG!=null?i.value.averageBG.toFixed(2)+" ":"")+" ",1),i.value.averageBG!=null?(T(),M("span",YI,"("+A((i.value.averageBG*18).toFixed(0))+" mg/dL)",1)):J("",!0)])]),b("div",ZI,[r[2]||(r[2]=b("span",null,"Lowest BG",-1)),b("strong",null,[G(A(i.value.lowestBG!=null?i.value.lowestBG.toFixed(2)+" ":"")+" ",1),i.value.lowestBG!=null?(T(),M("span",KI,"("+A((i.value.lowestBG*18).toFixed(0))+" mg/dL)",1)):J("",!0)])]),b("div",GI,[r[3]||(r[3]=b("span",null,"Highest BG",-1)),b("strong",null,[G(A(i.value.highestBG!=null?i.value.highestBG.toFixed(2)+" ":"")+" ",1),i.value.highestBG!=null?(T(),M("span",XI,"("+A((i.value.highestBG*18).toFixed(0))+" mg/dL)",1)):J("",!0)])]),b("div",QI,[r[4]||(r[4]=G(" Time not covered in the calculations: ",-1)),b("strong",null,A(bt(mo)(i.value.uncoveredMinutes)),1)])]),ut(RI)],64))}},eP=Pt(tP,[["__scopeId","data-v-7e76745a"]]);async function em({limit:e=20,anchor:t,foodName:s="",tags:n=[]}={}){let i=zt.from("food_logs").select("id, timestamp, food_name, quantity, net_carbs, calories, fat, protein, total_carbs, fibre, is_unfinished, resumed_at, food_tags",{count:"exact"}).order("timestamp",{ascending:!1}).order("id",{ascending:!1}).limit(e);t?.tsISO&&t?.id&&(i=i.or([`and(timestamp.lt.${t.tsISO})`,`and(timestamp.eq.${t.tsISO},id.lt.${t.id})`].join(",")));const o=(s||"").trim();o&&(i=i.ilike("food_name",o));const r=(Array.isArray(n)?n:[]).map(f=>String(f).trim()).filter(Boolean);r.length>0&&(i=i.contains("food_tags",r));const{data:a,error:l,count:c}=await i;if(l)throw l;const u=(a??[]).map(f=>({id:f.id,timestamp:O.fromISO(f.timestamp).toJSDate(),foodName:f.food_name??"",quantity:Number(f.quantity??0),netCarbs:Number(f.net_carbs??0),calories:Number(f.calories??0),fat:Number(f.fat??0),protein:Number(f.protein??0),totalCarbs:Number(f.total_carbs??0),fibre:Number(f.fibre??0),isUnfinished:!!f.is_unfinished,resumedAt:f.resumed_at?O.fromISO(f.resumed_at).toJSDate():null,foodTags:Array.isArray(f.food_tags)?f.food_tags:[]})),d=u[u.length-1],h=d?{tsISO:O.fromJSDate(d.timestamp).toISO(),id:d.id}:null;return{items:u,nextAnchor:h,totalMatchingFilter:c??null}}async function sP({foodName:e="",tags:t=[]}={}){const{data:s,error:n}=await zt.rpc("food_history_summary",{p_food_name:(e||"").trim()||null,p_tags:Array.isArray(t)&&t.length?t:null});if(n)throw n;const i=(s??[])[0];if(!i)return{totalQuantity:0,totalCount:0,durationDays:0,averagePerDay:0};const o=i.min_ts?O.fromISO(i.min_ts):null,r=i.max_ts?O.fromISO(i.max_ts):null,a=Number(i.total_qty??0),l=Number(i.total_count??0);let c=0;if(o&&r){const d=Math.max(0,r.toMillis()-o.toMillis());c=Math.max(1,Math.ceil(d/(24*3600*1e3)))}const u=c?a/c:0;return{totalQuantity:a,totalCount:l,durationDays:c,averagePerDay:u}}const nP={class:"daily-section"},iP={class:"search-box"},oP={key:2,class:"suggestions"},rP=["onMousedown"],aP={class:"tag-cloud"},lP=["onClick"],cP={key:0,class:"hint"},uP={key:1},dP={key:0,class:"results-bar"},hP={key:0},fP={key:0},mP={key:1},gP={key:1,class:"summary pretty"},pP={class:"stat-row"},yP={class:"right"},bP={class:"chip"},vP={class:"stat-row"},_P={class:"right"},wP={class:"chip"},xP={class:"stat-row"},SP={class:"right"},kP={class:"chip"},TP={key:2,class:"empty"},OP={key:3,class:"empty"},DP={key:0,class:"empty"},MP={class:"date-heading"},CP={class:"load-more"},EP={key:1},AP={__name:"FoodHistorySearchTab",props:{foods:{type:Array,default:()=>[]},loading:{type:Object,default:()=>({})}},setup(e){const t=ft(""),s=ft(""),n=ft(!1),i=ft([]),o=e,r=ft(null),a=Y(()=>{const L=new Set((o.foods??[]).map(E=>(E.name??"").trim()).filter(Boolean));return Array.from(L).sort((E,R)=>E.localeCompare(R,void 0,{sensitivity:"base"}))}),l=Y(()=>{const L=t.value.trim().toLowerCase();return L?a.value.filter(E=>E.toLowerCase().includes(L)).slice(0,20):a.value.slice(0,20)}),c=Y(()=>{const L=new Set;for(const E of o.foods??[])for(const R of Array.isArray(E.tags)?E.tags:[]){const et=String(R).trim();et&&L.add(et)}return Array.from(L).sort((E,R)=>E.localeCompare(R,void 0,{sensitivity:"accent"}))});function u(){t.value="",s.value="",n.value=!1,r.value?.focus()}function d(L){const E=i.value.indexOf(L);E>=0?i.value.splice(E,1):i.value.push(L),m.value=!0,p.value=[],y.value=null,_.value=null}function h(L){return i.value.includes(L)}function f(L){s.value=L,t.value=L,n.value=!1,m.value=!0,p.value=[],y.value=null,_.value=null}const m=ft(!1),g=ft(!1),p=ft([]),y=ft(null),_=ft(null),v=ft(0),w=ft(0),x=ft(0);async function C(){m.value=!0;try{const{items:L,nextAnchor:E,totalMatchingFilter:R}=await em({limit:20,foodName:s.value,tags:i.value});p.value=L,y.value=E,_.value=R}catch(L){console.error("[FoodHistory] first page failed:",L),p.value=[],y.value=null,_.value=0}finally{m.value=!1}}async function D(){if(!(!y.value||m.value)){m.value=!0;try{const{items:L,nextAnchor:E}=await em({limit:20,foodName:s.value,tags:i.value,anchor:y.value});p.value.push(...L),y.value=E}catch(L){console.error("[FoodHistory] next page failed:",L)}finally{m.value=!1}}}async function P(){g.value=!0;try{const L=await sP({foodName:s.value,tags:i.value});v.value=L.totalQuantity,w.value=L.durationDays,x.value=L.averagePerDay}catch(L){console.error("[FoodHistory] summary failed:",L),v.value=0,w.value=0,x.value=0}finally{g.value=!1}}function $(L){As(L,"food-history")}we([()=>s.value,()=>i.value.join("|")],async()=>{m.value=!0,p.value=[],y.value=null,_.value=null,await Promise.all([C(),P()])});function U(L){const E=new Map;for(const R of L){const et=O.fromJSDate(R.timestamp,{zone:"Australia/Sydney"}),nt=et.toISODate(),it=et.toFormat("EEE d LLL yyyy");E.has(nt)||E.set(nt,{label:it,items:[]}),E.get(nt).items.push(R)}return Array.from(E.entries()).sort((R,et)=>et[0].localeCompare(R[0])).map(([,R])=>R)}return(L,E)=>(T(),M("div",nP,[b("div",iP,[ga(b("input",{ref_key:"inputEl",ref:r,"onUpdate:modelValue":E[0]||(E[0]=R=>t.value=R),type:"text",class:"search-input",placeholder:"Search foods (e.g., apple)",onFocus:E[1]||(E[1]=R=>n.value=!0),onBlur:E[2]||(E[2]=R=>n.value=!1),onKeydown:[E[3]||(E[3]=dd(R=>n.value=!1,["esc"])),E[4]||(E[4]=dd(Ga(R=>f((l.value[0]||t.value)??""),["prevent"]),["enter"]))]},null,544),[[mg,t.value]]),t.value||s.value?(T(),M("button",{key:0,class:"clear-btn",type:"button",onMousedown:E[5]||(E[5]=Ga(()=>{},["prevent"])),onClick:u,"aria-label":"Clear search"},"",32)):J("",!0),i.value.length||s.value?(T(),M("button",{key:1,class:"clear-btn",type:"button",onClick:E[6]||(E[6]=()=>{i.value.splice(0),u()}),"aria-label":"Clear tag & name filters",style:{"margin-left":"0.5rem"}},"Clear Filters")):J("",!0),n.value&&l.value.length&&t.value.trim().length?(T(),M("ul",oP,[(T(!0),M(rt,null,$t(l.value,R=>(T(),M("li",{key:R,class:"suggestion",onMousedown:Ga(et=>f(R),["prevent"])},A(R),41,rP))),128))])):J("",!0)]),b("div",aP,[(T(!0),M(rt,null,$t(c.value,R=>(T(),M("button",{key:R,class:X(["tag-chip",{selected:h(R)}]),type:"button",onClick:et=>d(R)},A(R),11,lP))),128))]),!s.value&&i.value.length===0?(T(),M("div",cP," Search for a food, select it, then browse the history and click any row to jump the charts. ")):J("",!0),s.value||i.value.length?(T(),M("div",uP,[m.value?J("",!0):(T(),M("div",dP,[(_.value??0)>0?(T(),M("span",hP,[G(A(_.value)+" result",1),_.value!==1?(T(),M("span",fP,"s")):J("",!0)])):(T(),M("span",mP,"No results"))])),!g.value&&_.value?(T(),M("div",gP,[b("div",pP,[E[7]||(E[7]=b("span",{class:"label"},"Total consumed",-1)),b("span",yP,[b("span",bP,A(v.value)+"g",1)])]),b("div",vP,[E[8]||(E[8]=b("span",{class:"label"},"Days covered",-1)),b("span",_P,[b("span",wP,A(w.value),1)])]),b("div",xP,[E[9]||(E[9]=b("span",{class:"label"},"Avg per day",-1)),b("span",SP,[b("span",kP,A(x.value.toFixed(1))+"g",1)])])])):g.value?(T(),M("div",TP,"Calculating summary")):J("",!0),m.value?(T(),M("div",OP,"Loading")):(T(),M(rt,{key:4},[p.value.length===0?(T(),M("div",DP,"No logs found.")):(T(),M(rt,{key:1},[(T(!0),M(rt,null,$t(U(p.value),(R,et)=>(T(),M(rt,{key:et},[b("h4",MP,A(R.label),1),(T(!0),M(rt,null,$t(R.items,nt=>(T(),Ee(xu,{key:nt.id,log:nt,onClick:it=>$(nt.timestamp)},null,8,["log","onClick"]))),128))],64))),128)),b("div",CP,[y.value?(T(),M("button",{key:0,type:"button",onClick:D},"Load more")):p.value.length>0?(T(),M("div",EP,"No more results.")):J("",!0)])],64))],64))])):J("",!0)]))}},IP=Pt(AP,[["__scopeId","data-v-db37e84c"]]),PP={class:"test-results-tab"},LP={class:"test-results-list"},$P={class:"label"},RP={class:"value"},FP={class:"ago"},NP={__name:"TestResultsTab",props:{testResults:{type:Array,default:()=>[]}},setup(e){const t=e;console.log("[TestResultsTab] testResults:",t.testResults);const s=Y(()=>[...t.testResults].sort((n,i)=>new Date(i.test_date)-new Date(n.test_date)));return(n,i)=>(T(),M("div",PP,[i[0]||(i[0]=b("h2",null,"HbA1c Test Results",-1)),i[1]||(i[1]=b("p",null,"The 13.6% on 8 August 2018 the test that basically diagnosed me with T1D.",-1)),b("ul",LP,[(T(!0),M(rt,null,$t(s.value,o=>(T(),M("li",{key:o.id},[b("strong",$P,A(bt(Fw)(o.testDate)),1),b("span",RP,A(o.hba1c)+"%",1),b("span",FP,"("+A(bt(jw)(o.testDate))+")",1)]))),128))])]))}},jP=Pt(NP,[["__scopeId","data-v-4beb24c8"]]),BP={class:"tab-section"},WP={class:"tab-bar"},UP={class:"daily-section"},zP={__name:"Tabs",props:{data:{type:Object,required:!0},hourlyBasalTotals:{type:Array,default:()=>[]},selectedDate:{type:Date,required:!0},loading:{type:Object,default:()=>({})}},emits:["note-click"],setup(e,{emit:t}){const s=e,n=t,i=ft("combined");function o(r){i.value=r}return(r,a)=>(T(),M("section",BP,[b("div",WP,[b("button",{class:X(["tab-button",{active:i.value==="combined"}]),onClick:a[0]||(a[0]=l=>o("combined"))}," Combined",2),b("button",{class:X(["tab-button",{active:i.value==="notes"}]),onClick:a[1]||(a[1]=l=>o("notes"))}," Notes",2),b("button",{class:X(["tab-button",{active:i.value==="foodLogs"}]),onClick:a[2]||(a[2]=l=>o("foodLogs"))}," Food",2),b("button",{class:X(["tab-button",{active:i.value==="bolus"}]),onClick:a[3]||(a[3]=l=>o("bolus"))}," Bolus",2),b("button",{class:X(["tab-button",{active:i.value==="fasts"}]),onClick:a[4]||(a[4]=l=>o("fasts"))}," Fasts",2),b("button",{class:X(["tab-button",{active:i.value==="fast-stats"}]),onClick:a[5]||(a[5]=l=>o("fast-stats"))}," Fast Stats",2),b("button",{class:X(["tab-button",{active:i.value==="workouts"}]),onClick:a[6]||(a[6]=l=>o("workouts"))}," Workouts",2),b("button",{class:X(["tab-button",{active:i.value==="basal"}]),onClick:a[7]||(a[7]=l=>o("basal"))}," Basal",2),b("button",{class:X(["tab-button",{active:i.value==="basal-by-hour"}]),onClick:a[8]||(a[8]=l=>o("basal-by-hour"))}," Hourly Basal",2),b("button",{class:X(["tab-button",{active:i.value==="glucose"}]),onClick:a[9]||(a[9]=l=>o("glucose"))}," BG",2),b("button",{class:X(["tab-button",{active:i.value==="all-notes"}]),onClick:a[10]||(a[10]=l=>o("all-notes"))}," All Notes",2),b("button",{class:X(["tab-button",{active:i.value==="insulin-stats"}]),onClick:a[11]||(a[11]=l=>o("insulin-stats"))}," Insulin Stats",2),b("button",{class:X(["tab-button",{active:i.value==="nutrition-stats"}]),onClick:a[12]||(a[12]=l=>o("nutrition-stats"))}," Nutrition Stats",2),b("button",{class:X(["tab-button",{active:i.value==="bg-stats"}]),onClick:a[13]||(a[13]=l=>o("bg-stats"))}," BG Stats",2),b("button",{class:X(["tab-button",{active:i.value==="food-history"}]),onClick:a[14]||(a[14]=l=>o("food-history"))}," Food History",2),b("button",{class:X(["tab-button",{active:i.value==="weekly-calories"}]),onClick:a[15]||(a[15]=l=>o("weekly-calories"))}," Weight Analysis",2),b("button",{class:X(["tab-button",{active:i.value==="test-results"}]),onClick:a[16]||(a[16]=l=>o("test-results"))}," Test Results",2)]),b("div",{class:X(["tab-content",{"active-tab":i.value==="combined"}])},[ut(QD,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs,boluses:e.data.boluses,notes:e.data.notes,workouts:e.data.workouts},null,8,["selected-date","food-logs","boluses","notes","workouts"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="notes"}])},[ut(FE,{notes:e.data.notes,"selected-date":e.selectedDate,loading:s.loading?.notes===!0},null,8,["notes","selected-date","loading"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="foodLogs"}])},[ut(mA,{"food-logs":e.data.foodLogs,"selected-date":e.selectedDate,loading:s.loading?.foodLogs===!0},null,8,["food-logs","selected-date","loading"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="bolus"}])},[ut(xA,{boluses:e.data.boluses,"selected-date":e.selectedDate,loading:s.loading?.boluses===!0},null,8,["boluses","selected-date","loading"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="fasts"}])},[ut(HE,{fasts:e.data.fasts,"selected-date":e.selectedDate},null,8,["fasts","selected-date"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="fast-stats"}])},[ut(eA)],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="workouts"}])},[ut(bA,{workouts:e.data.workouts,"selected-date":e.selectedDate},null,8,["workouts","selected-date"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="basal"}])},[ut(AA,{"basal-entries":e.data.basalEntries,"selected-date":e.selectedDate,loading:s.loading?.basal===!0},null,8,["basal-entries","selected-date","loading"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="basal-by-hour"}])},[ut(jA,{"basal-entries":e.data.basalEntries,"hourly-basal-totals":e.hourlyBasalTotals,"selected-date":e.selectedDate},null,8,["basal-entries","hourly-basal-totals","selected-date"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="glucose"}])},[ut(cA,{"glucose-readings":e.data.glucoseReadings,"selected-date":e.selectedDate},null,8,["glucose-readings","selected-date"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="all-notes"}])},[b("div",UP,[ut(IE,{notes:e.data.notes,onNoteClick:a[17]||(a[17]=l=>n("note-click",l))},null,8,["notes"])])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="insulin-stats"}])},[ut(tI,{"selected-date":e.selectedDate,"bolus-doses":e.data.boluses,"basal-entries":e.data.basalEntries,"food-logs":e.data.foodLogs},null,8,["selected-date","bolus-doses","basal-entries","food-logs"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="nutrition-stats"}])},[ut(bI,{"selected-date":e.selectedDate,"food-logs":e.data.foodLogs},null,8,["selected-date","food-logs"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="bg-stats"}])},[ut(eP,{"selected-date":e.selectedDate,"glucose-readings":e.data.glucoseReadings},null,8,["selected-date","glucose-readings"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="food-history"}])},[ut(IP,{"all-food-logs":e.data.foodLogs,foods:e.data.foods},null,8,["all-food-logs","foods"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="weekly-calories"}])},[ut(MI,{"food-logs":e.data.weeklyFoodLogs,weights:e.data.weeklyWeights,"week-starts-on":"monday","daily-activity":e.data.dailyActivity,tz:"Australia/Sydney"},null,8,["food-logs","weights","daily-activity"])],2),b("div",{class:X(["tab-content",{"active-tab":i.value==="test-results"}])},[ut(jP,{"test-results":e.data.testResults},null,8,["test-results"])],2)]))}},HP=Pt(zP,[["__scopeId","data-v-6469ec4e"]]),VP={class:"row"},qP={class:"row"},JP={class:"row"},YP={key:0,class:"row"},ZP={key:1,class:"row"},KP={key:0},GP={key:2,class:"row note-row"},XP={class:"note-text"},QP={key:3,class:"food-log-block"},t2={class:"food-label"},e2={class:"carbs-label"},s2={class:"food-list"},n2={key:4,class:"row workout-row"},i2={class:"workout-name"},o2={class:"workout-line"},r2={class:"workout-line"},a2={__name:"CustomTooltip",props:{visible:{type:Boolean,default:!1},time:{type:String,default:""},bg:{type:[Number,null],default:null},basal:{type:[Number,null],default:null},left:{type:Number,default:8},top:{type:Number,default:8},hourlyBasalUnits:{type:[Number,null],default:null},hourlyBasalLabel:{type:String,default:""},bolus:{type:[Object,null],default:null},note:{type:[Object,null],default:null},foodLogs:{type:[Object,null],default:null},workout:{type:[Object,null],default:null}},setup(e){return(t,s)=>ga((T(),M("div",{class:"tooltip",style:ee({left:e.left+"px",top:e.top+"px"}),role:"status","aria-live":"polite"},[b("div",VP,[b("strong",null,A(e.time),1)]),b("div",qP,[s[0]||(s[0]=G(" BG: ",-1)),b("span",null,A(e.bg!=null?e.bg.toFixed(2)+" mmol/L":"")+" ("+A((e.bg*18).toFixed(2))+" mg/dL) ",1)]),b("div",JP,[s[1]||(s[1]=G("Basal Rate: ",-1)),b("span",null,A(e.basal!=null?e.basal.toFixed(3)+" U/hr":""),1)]),e.hourlyBasalUnits!=null?(T(),M("div",YP,[G(" Total basal from "+A(e.hourlyBasalLabel)+": ",1),b("strong",null,A(Number(e.hourlyBasalUnits).toFixed(2)),1),s[2]||(s[2]=G(" units ",-1))])):J("",!0),e.bolus?(T(),M("div",ZP,[s[3]||(s[3]=G(" Bolus: ",-1)),b("strong",null,A(Number(e.bolus.amount).toFixed(2)),1),s[4]||(s[4]=G(" units ",-1)),e.bolus.type&&e.bolus.type!="unknown"?(T(),M("span",KP," ("+A(e.bolus.type)+")",1)):J("",!0)])):J("",!0),e.note?(T(),M("div",GP,[s[5]||(s[5]=b("span",{class:"note-symbol"},"",-1)),b("div",XP,A(e.note.text),1)])):J("",!0),e.foodLogs?(T(),M("div",QP,[b("div",t2,[s[6]||(s[6]=b("span",{class:"food-symbol"},"",-1)),s[7]||(s[7]=b("strong",null,"Foods",-1)),b("span",e2,"("+A(e.foodLogs.netCarbs.toFixed(1))+"g net carbs)",1)]),b("ul",s2,[(T(!0),M(rt,null,$t(e.foodLogs.logs,(n,i)=>(T(),M("li",{key:i},[b("span",null,A(n.quantity)+"g",1),G(" "+A(n.name),1)]))),128))])])):J("",!0),e.workout?(T(),M("div",n2,[b("div",null,[b("div",i2," "+A(e.workout.name),1),b("div",o2," Avg: "+A(Number(e.workout.averageHeartRate).toFixed(1))+" bpm",1),b("div",r2," Duration: "+A(bt(bp)(e.workout.duration/60)),1)])])):J("",!0)],4)),[[dg,e.visible]])}},l2=Pt(a2,[["__scopeId","data-v-4aed7c4e"]]);async function c2(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBolusesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("boluses").select("timestamp, amount, type, notes").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:O.fromISO(r.timestamp).toJSDate(),amount:Number(r.amount??0),type:r.type??null,notes:r.notes??null}))}async function u2(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchBasalEntriesForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("basal_entries").select("start_time, end_time, rate, mode, notes").lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({startTime:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,rate:Number(r.rate??0),mode:r.mode??null,notes:r.notes??null}))}function d2(e,t,s){const n=O.fromJSDate(t).setZone("Australia/Sydney"),i=n.startOf("day").toJSDate(),o=n.endOf("day").toJSDate(),r=s?O.fromJSDate(s):null,a=r?r.toJSDate():null,l=[];for(const c of e){const u=c.endTime??a,d=c.startTime<i?i:c.startTime,h=u?u>o?o:u:o;d<h&&l.push({...c,startTime:d,endTime:u?h:null})}return l}async function h2(e,t,s="Australia/Sydney"){const{startUtcISO:n,endUtcISO:i,startSydney:o,endSydney:r}=Xc(e,t,{withMillis:!0});console.log("[weekly fetch] Sydney window:",o.toISO(),"",r.toISO(),"(exclusive)"),console.log("[weekly fetch] UTC filter   :",n,"",i,"(exclusive)");const a=1e3;let l=0,c=a-1,u=[];for(;;){const{data:d,error:h}=await zt.from("food_logs").select("timestamp, calories").gte("timestamp",n).lt("timestamp",i).order("timestamp",{ascending:!0}).range(l,c);if(h)throw h;const f=d??[];if(u=u.concat(f),console.log("[weekly fetch] page",`${l}-${c}`,"rows:",f.length),f.length<a)break;l+=a,c+=a}return u.length?console.log("[weekly fetch] total rows:",u.length,"first:",u[0].timestamp,"last:",u[u.length-1].timestamp):console.log("[weekly fetch] total rows: 0"),u.map(d=>({timestamp:d.timestamp,calories:Number(d.calories??0)}))}async function f2(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchFoodLogsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("food_logs").select(`
      id,
      food_name,
      timestamp,
      quantity,
      net_carbs,
      calories,
      fat,
      protein,
      total_carbs,
      fibre,
      is_unfinished,
      resumed_at,
      food_tags
    `).gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,foodName:r.food_name??"Unknown",timestamp:O.fromISO(r.timestamp).toJSDate(),quantity:r.quantity,netCarbs:r.net_carbs,calories:r.calories,fat:r.fat,protein:r.protein,totalCarbs:r.total_carbs,fibre:r.fibre,isUnfinished:!!r.is_unfinished,resumedAt:r.resumed_at?O.fromISO(r.resumed_at).toJSDate():null,foodTags:Array.isArray(r.food_tags)?r.food_tags:[]}))}async function m2(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))throw new Error("fetchWorkoutsForDay: date is invalid");const{startUtcISO:s,endUtcISO:n}=In(t),{data:i,error:o}=await zt.from("workouts").select(`
      id,
      start_time,
      end_time,
      elapsed_time,
      duration,
      type,
      name,
      notes,
      distance,
      active_calories,
      average_heart_rate,
      max_heart_rate,
      minutes_per_km,
      km_per_hour,
      tags
    `).lt("start_time",n).or(`end_time.is.null,end_time.gt.${s}`).order("start_time",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({id:r.id,start:O.fromISO(r.start_time).toJSDate(),endTime:r.end_time?O.fromISO(r.end_time).toJSDate():null,elapsedTime:Number(r.elapsed_time??0),duration:Number(r.duration??0),type:String(r.type??""),name:String(r.name??""),notes:String(r.notes??""),distance:Number(r.distance??0),activeCalories:Number(r.active_calories??0),averageHeartRate:Number(r.average_heart_rate??0),maxHeartRate:Number(r.max_heart_rate??0),minutesPerKm:Number(r.minutes_per_km??0),kmPerHour:Number(r.km_per_hour??0),tags:String(r.tags??"")}))}async function g2(){const{data:e,error:t}=await zt.from("app_settings").select("pump_upload_time").eq("id",1).single();if(t&&t.code!=="PGRST116")throw t;const s=e?.pump_upload_time??null;return{pumpUploadTime:s?new Date(s):null}}async function p2(e,t,s){t.boluses=!0;try{e.boluses=await c2(s)}catch(n){console.error("[dayLoadersUI] boluses failed:",n),e.boluses=[]}finally{t.boluses=!1}}async function y2(e,t,s){t.bg=!0;try{e.glucoseReadings=await CI(s)}catch(n){console.error("[dayLoadersUI] BG failed:",n),e.glucoseReadings=[]}finally{t.bg=!1}}async function b2(e,t,s){t.basal=!0;try{const[n,i]=await Promise.all([u2(s),g2()]),o=i?.pumpUploadTime?new Date(i.pumpUploadTime):null;o&&console.log("[dayLoadersUI] Pump upload time:",Bw(o)),e.basalEntries=d2(n,s,o)}catch(n){console.error("[dayLoadersUI] basal failed:",n),e.basalEntries=[]}finally{t.basal=!1}}async function v2(e,t,s){t.notes=!0;try{e.notes=await fE(s)}catch(n){console.error("[dayLoadersUI] notes failed:",n),e.notes=[]}finally{t.notes=!1}}async function _2(e,t,s){t.foodLogs=!0;try{e.foodLogs=await f2(s)}catch(n){console.error("[dayLoadersUI] food logs failed:",n),e.foodLogs=[]}finally{t.foodLogs=!1}}async function w2(e,t,s){t.fasts=!0;try{e.fasts=await qE(s)}catch(n){console.error("[dayLoadersUI] fasts failed:",n),e.fasts=[]}finally{t.fasts=!1}}async function x2(e,t,s){t.workouts=!0;try{e.workouts=await m2(s)}catch(n){console.error("[dayLoadersUI] workouts failed:",n),e.workouts=[]}finally{t.workouts=!1}}async function S2(e,t,s){await Promise.allSettled([p2(e,t,s),y2(e,t,s),b2(e,t,s),v2(e,t,s),_2(e,t,s),w2(e,t,s),x2(e,t,s)])}async function k2(){const{data:e,error:t}=await zt.from("foods").select("id, name, tags").order("name",{ascending:!0});if(t)throw t;return(e??[]).map(s=>({id:s.id,name:s.name??"",tags:Array.isArray(s.tags)?s.tags:[]}))}async function T2(e,t){const{startUtcISO:s,endUtcISO:n}=Xc(e,t),{data:i,error:o}=await zt.from("weights").select("timestamp, value").gte("timestamp",s).lt("timestamp",n).order("timestamp",{ascending:!0});if(o)throw o;return(i??[]).map(r=>({timestamp:r.timestamp,value:Number(r.value)}))}function sm(e){return e instanceof Date?e:new Date(e)}async function O2(e,t,s="Australia/Sydney"){const n=O.fromJSDate(sm(e),{zone:s}).toFormat("yyyy-LL-dd"),i=O.fromJSDate(sm(t),{zone:s}).toFormat("yyyy-LL-dd"),{data:o,error:r}=await zt.from("daily_activity").select("sydney_date, active_calories, resting_calories, total_calories, exercise_minutes").gte("sydney_date",n).lt("sydney_date",i).order("sydney_date",{ascending:!0});if(r)throw r;return(o??[]).map(a=>({sydney_date:a.sydney_date,active_calories:a.active_calories==null?null:Number(a.active_calories),resting_calories:a.resting_calories==null?null:Number(a.resting_calories),total_calories:a.total_calories==null?null:Number(a.total_calories),exercise_minutes:a.exercise_minutes==null?null:Number(a.exercise_minutes)}))}async function D2(){const{data:e,error:t}=await zt.from("test_results").select("*").order("test_date",{ascending:!1});if(t)throw t;return(e??[]).map(s=>({id:s.id,testDate:ot(s.test_date),hba1c:s.hba1c,b12:s.b12,iodine:s.iodine,iron:s.iron,notes:s.notes??""}))}const M2={style:{padding:"1rem"}},C2={class:"dashboard-grid"},E2={class:"left-rail"},A2={class:"chart-box food-logs-box"},I2={class:"chart-box bg-box"},P2={class:"chart-box notes-box"},L2={class:"chart-box bolus-box"},$2={class:"chart-box basal-box"},R2={class:"chart-box hourly-basal-box"},F2={class:"chart-box workout-box"},N2={class:"right-rail"},j2={__name:"App",setup(e){const t=ui({notes:[],filteredNotes:[],filteredNotesCursor:null,foods:[],glucoseReadings:[],foodLogs:[],fasts:[],workouts:[],basalEntries:[],boluses:[],weeklyFoodLogs:[],weeklyWeights:[],dailyActivity:[],testResults:[]}),s=ui({boluses:!1,bg:!1,basal:!1,filteredNotes:!1,foodLogs:!1,foods:!1,fasts:!1,workouts:!1,testResults:!1}),n=ft(pp()),i=ft(null),o=ui({visible:!1,time:"",bg:null,basal:null,left:12,locked:!1,hourlyBasalUnits:null,hourlyBasalLabel:"",bolus:null,note:null,workout:null}),r=v=>v instanceof Date?v:typeof v=="number"?new Date(v):typeof v=="string"?(/Z|[+\-]\d{2}:?\d{2}$/.test(v)?O.fromISO(v):O.fromISO(v,{zone:"Australia/Sydney"})).toJSDate():null,a=Y(()=>{const v=new Array(24).fill(0);if(!n.value||!Array.isArray(t.basalEntries))return v;const w=n.value instanceof Date?n.value:r(n.value);let x=O.fromJSDate(w,{zone:"Australia/Sydney"}).startOf("day");const C=x.plus({days:1});for(const D of t.basalEntries){const P=D.startTime instanceof Date?D.startTime:r(D.startTime),$=D.endTime?D.endTime instanceof Date?D.endTime:r(D.endTime):null;if(!P||!$||$<=P)continue;const U=Number(D.rate);if(!Number.isFinite(U)||U<=0)continue;let L=O.fromJSDate(P,{zone:"Australia/Sydney"}),E=O.fromJSDate($,{zone:"Australia/Sydney"});if(!(E<=x||L>=C))for(L<x&&(L=x),E>C&&(E=C);L<E;){const R=L.startOf("hour").plus({hours:1}),et=E<R?E:R,nt=Math.max(0,et.toSeconds()-L.toSeconds());if(nt>0){const it=L.hour;v[it]+=U*(nt/3600)}L=et}}return v.map(D=>Math.round(D*1e3)/1e3)});function l(v,w,x){return Math.max(w,Math.min(v,x))}function c(v,w="any"){let x;if(v instanceof Date)x=O.fromJSDate(v);else if(typeof v=="number")x=O.fromMillis(v);else if(typeof v=="string")x=/Z|[+\-]\d{2}:?\d{2}$/.test(v)?O.fromISO(v):O.fromISO(v,{zone:"Australia/Sydney"});else return;const C=x.setZone("Australia/Sydney");n.value=C.startOf("day").toJSDate();const D=C.toMillis();window.dispatchEvent(new CustomEvent("chart-hover",{detail:{x:D,px:null,source:w}})),console.log("[goToTimestamp] jumped to",C.toISO(),"source:",w)}const u=v=>{const w=v?.detail?.at,x=v?.detail?.source??"any";c(w,x)};async function d(){s.testResults=!0;try{t.testResults=await D2()}catch(v){console.error("[loadTestResults] failed:",v),t.testResults=[]}finally{s.testResults=!1}}async function h(){s.foods=!0;try{t.foods=await k2()}catch(v){console.error("[App] fetchAllFoods failed:",v),t.foods=[]}finally{s.foods=!1}}async function f(v=26,w="Australia/Sydney"){const x=O.now().setZone(w),C=x.minus({weeks:v}).startOf("week").toJSDate(),D=x.plus({days:1}).startOf("day").toJSDate();try{t.dailyActivity=await O2(C,D,w),console.log("[daily activity range]","start=",C.toISOString(),"endExclusive=",D.toISOString(),"rows=",t.dailyActivity.length)}catch(P){console.error("[loadDailyActivity] failed:",P),t.dailyActivity=[]}}async function m(v=26,w="Australia/Sydney"){const x=O.now().setZone(w),C=x.minus({weeks:v}).startOf("week").toJSDate(),D=x.plus({days:1}).startOf("day").toJSDate();s.weights=!0;try{t.weeklyWeights=await T2(C,D);const P=t.weeklyWeights[0]?.timestamp??"-",$=t.weeklyWeights.at(-1)?.timestamp??"-";console.log("[weekly weights] rows=",t.weeklyWeights.length,"first=",P,"last=",$)}catch(P){console.error("[loadWeeklyWeights] failed:",P),t.weeklyWeights=[]}finally{s.weights=!1}}async function g(v=26,w="Australia/Sydney"){const x=O.now().setZone(w),C=x.minus({weeks:v}).startOf("week").toJSDate(),D=x.plus({days:1}).startOf("day").toJSDate();try{t.weeklyFoodLogs=await h2(C,D,w),console.log("[weekly range]","start=",C.toISOString(),"endExclusive=",D.toISOString(),"rows=",t.weeklyFoodLogs.length)}catch(P){console.error("[loadFoodLogsWeekly] failed:",P),t.weeklyFoodLogs=[]}}function p(v){const{x:w,px:x,source:C,hide:D,bolus:P,note:$,foodLogs:U,workout:L}=v?.detail??{};if(console.log("[handleChartHover] x value:",w,"type:",typeof w),D){o.visible=!1,o.locked=!1,o.hourlyBasalUnits=null,o.hourlyBasalLabel="",o.bolus=null,o.note=null,o.foodLogs=null,o.workout=null;return}const E=w!=null?new Date(w):null;if(!E){o.locked||(o.visible=!1);return}const R=i.value?.getBoundingClientRect();if(R&&typeof x=="number"){const me=x-90;o.left=l(me,8,R.width-180-8)}const et=O.fromMillis(Number(w)).setZone("Australia/Sydney"),nt=et.hour,it=et.startOf("hour"),ht=it.plus({hours:1}),gt=ae=>ae.toFormat("h a").toLowerCase().replace(" ","");o.hourlyBasalLabel=`${gt(it)}${gt(ht)}`,o.hourlyBasalUnits=Number(a.value?.[nt]??0),o.locked=C==="combined",o.visible=!0,o.time=O.fromMillis(Number(w)).setZone("Australia/Sydney").toFormat("h:mma"),o.bg=y(E),o.basal=_(E),C==="bolus"&&P?.amount!=null?o.bolus={amount:Number(P.amount),type:P.type??null}:o.bolus=null,C==="note"&&$?.text?o.note=$:o.note=null,C==="foodLogs"&&U?.logs?.length?o.foodLogs={logs:U.logs,netCarbs:Number(U.netCarbs??0)}:o.foodLogs=null,C==="workouts"&&L?o.workout=L:o.workout=null}function y(v){if(!t.glucoseReadings.length||!v)return null;const w=v instanceof Date?v:new Date(v);let x=null,C=null;for(const D of t.glucoseReadings){const P=r(D.timestamp);P<=w&&(x===null||P>x)&&(x=P,C=Number(D.value))}return C}function _(v){if(!t.basalEntries.length||!v)return null;const w=v instanceof Date?v:new Date(v);for(const x of t.basalEntries){const C=x.startTime instanceof Date?x.startTime:r(x.startTime),D=x.endTime?x.endTime instanceof Date?x.endTime:r(x.endTime):null;if(C<=w&&(D===null||w<D))return Number(x.rate??0)}return null}return we(n,v=>{S2(t,s,v)},{immediate:!0}),ds(()=>{window.removeEventListener("jump-to-time",u),window.removeEventListener("chart-hover",p)}),Ie(async()=>{window.addEventListener("jump-to-time",u),window.addEventListener("chart-hover",p),await h(),await g(26),await m(26),await f(26),await d();try{console.log("[App:onMounted] loaded",{glucose:t.glucoseReadings.length,foodLogs:t.foodLogs.length,notes:t.notes.length,fasts:t.fasts.length,workouts:t.workouts.length,basalEntries:t.basalEntries.length,boluses:t.boluses.length})}catch(v){console.error("[App:onMounted] failed to load data:",v)}}),(v,w)=>(T(),M("main",M2,[b("section",C2,[b("aside",E2,[ut(Jw,{selectedDate:n.value,"onUpdate:selectedDate":w[0]||(w[0]=x=>n.value=x)},null,8,["selectedDate"]),b("div",{ref_key:"stageRef",ref:i,class:"chart-stage"},[ut(l2,{visible:o.visible,time:o.time,bg:o.bg,basal:o.basal,left:o.left,top:8,"hourly-basal-units":o.hourlyBasalUnits,"hourly-basal-label":o.hourlyBasalLabel,bolus:o.bolus,note:o.note,foodLogs:o.foodLogs,workout:o.workout},null,8,["visible","time","bg","basal","left","hourly-basal-units","hourly-basal-label","bolus","note","foodLogs","workout"]),b("div",A2,[ut(XO,{"food-logs":t.foodLogs,"selected-date":n.value},null,8,["food-logs","selected-date"])]),b("div",I2,[ut(BO,{"glucose-readings":t.glucoseReadings,"selected-date":n.value},null,8,["glucose-readings","selected-date"])]),b("div",P2,[ut(WO,{notes:t.notes,"selected-date":n.value,"note-icon-url":"/note-icon.png"},null,8,["notes","selected-date"])]),b("div",L2,[ut(JO,{boluses:t.boluses,"selected-date":n.value},null,8,["boluses","selected-date"])]),b("div",$2,[ut(VO,{"basal-entries":t.basalEntries,"selected-date":n.value},null,8,["basal-entries","selected-date"])]),b("div",R2,[ut(KO,{"hourly-totals":a.value,"selected-date":n.value},null,8,["hourly-totals","selected-date"])]),b("div",F2,[ut(sD,{workouts:t.workouts,"selected-date":n.value},null,8,["workouts","selected-date"])])],512)]),b("main",N2,[ut(HP,{data:t,"hourly-basal-totals":a.value,"selected-date":n.value,loading:s},null,8,["data","hourly-basal-totals","selected-date","loading"])])])]))}},B2=Pt(j2,[["__scopeId","data-v-f4811d35"]]);R0(B2).mount("#app");
